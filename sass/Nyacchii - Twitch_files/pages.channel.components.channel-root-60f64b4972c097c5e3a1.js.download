(window.webpackJsonp=window.webpackJsonp||[]).push([[128],{"+U0Y":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var i="core.user-preferences.LANGUAGE_PREFERENCES_UPDATED";function a(e){return{type:i,languagePreferences:e}}},"+aHn":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("DMoW"),a=n("2xye");function r(e){switch(e){case i.B.ARCHIVE:return a.SpadeVideoBroadcastType.Archive;case i.B.HIGHLIGHT:return a.SpadeVideoBroadcastType.Highlight;case i.B.UPLOAD:return a.SpadeVideoBroadcastType.Upload;case i.B.PAST_PREMIERE:return a.SpadeVideoBroadcastType.PastPremiere;case i.B.PREMIERE_UPLOAD:return a.SpadeVideoBroadcastType.PremiereUpload;default:return e}}},"+kC+":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChatLine_SubsOnlyUpsell_UserSubscriptionProducts"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionProducts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:134}};n.loc.source={body:"query ChatLine_SubsOnlyUpsell_UserSubscriptionProducts($login: String!) {\nuser(login: $login) {\nid\nsubscriptionProducts {\nid\nurl\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.ChatLine_SubsOnlyUpsell_UserSubscriptionProducts=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"ChatLine_SubsOnlyUpsell_UserSubscriptionProducts")},"+l4d":function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("fvjX"),o=n("1rIY"),s=n("bjUr"),l=Object(o.a)("ChatMenusContext",{chatView:s.a.Chat,isShowingRoomMemberList:!1,isShowingChatRules:!1,isShowingEmotePicker:!1,showChatViewerList:function(){return null},closeChatViewerList:function(){return null},showRoomMemberList:function(){return null},closeRoomMemberList:function(){return null},showChatRules:function(){return null},closeChatRules:function(){return null},showEmotePicker:function(){return null},closeEmotePicker:function(){return null}}),c=l.context,d=l.withContext,u=function(e){function t(t){var n=e.call(this,t)||this;return n.showChatViewerList=function(){n.props.viewManager&&n.props.viewManager.updateView(s.a.ViewerList),n.setState({chatView:s.a.ViewerList})},n.closeChatViewerList=function(){n.props.viewManager&&n.props.viewManager.updateView(s.a.Chat),n.setState({chatView:s.a.Chat})},n.showRoomMemberList=function(){n.setState({isShowingRoomMemberList:!0})},n.closeRoomMemberList=function(){n.setState({isShowingRoomMemberList:!1})},n.showChatRules=function(){n.setState({isShowingChatRules:!0})},n.closeChatRules=function(){n.setState({isShowingChatRules:!1})},n.showEmotePicker=function(){n.setState({isShowingEmotePicker:!0})},n.closeEmotePicker=function(){n.setState({isShowingEmotePicker:!1})},n.state={chatView:s.a.Chat,isShowingRoomMemberList:!1,isShowingChatRules:!1,isShowingEmotePicker:!1,showChatViewerList:n.showChatViewerList,closeChatViewerList:n.closeChatViewerList,showRoomMemberList:n.showRoomMemberList,closeRoomMemberList:n.closeRoomMemberList,showChatRules:n.showChatRules,closeChatRules:n.closeChatRules,showEmotePicker:n.showEmotePicker,closeEmotePicker:n.closeEmotePicker},n}return Object(i.__extends)(t,e),t.prototype.render=function(){return a.createElement(c.Provider,{value:Object(i.__assign)(Object(i.__assign)({},this.state),{chatView:this.currentChatView})},this.props.children)},Object.defineProperty(t.prototype,"currentChatView",{get:function(){return this.props.viewManager?this.props.viewManager.view:this.state.chatView},enumerable:!0,configurable:!0}),t}(a.Component),m=Object(r.d)()(u);n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return m}))},"+pBb":function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"h",(function(){return o})),n.d(t,"i",(function(){return s})),n.d(t,"p",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return d})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return m})),n.d(t,"e",(function(){return p})),n.d(t,"k",(function(){return h})),n.d(t,"j",(function(){return f})),n.d(t,"m",(function(){return g})),n.d(t,"l",(function(){return v})),n.d(t,"o",(function(){return b})),n.d(t,"r",(function(){return k})),n.d(t,"q",(function(){return y})),n.d(t,"u",(function(){return S})),n.d(t,"t",(function(){return C})),n.d(t,"v",(function(){return E})),n.d(t,"n",(function(){return w})),n.d(t,"s",(function(){return O})),n.d(t,"J",(function(){return D})),n.d(t,"E",(function(){return N})),n.d(t,"N",(function(){return _})),n.d(t,"L",(function(){return I})),n.d(t,"H",(function(){return M})),n.d(t,"C",(function(){return j})),n.d(t,"I",(function(){return T})),n.d(t,"D",(function(){return P})),n.d(t,"G",(function(){return L})),n.d(t,"B",(function(){return R})),n.d(t,"K",(function(){return F})),n.d(t,"F",(function(){return U})),n.d(t,"y",(function(){return x})),n.d(t,"w",(function(){return A})),n.d(t,"x",(function(){return B})),n.d(t,"A",(function(){return V})),n.d(t,"M",(function(){return H})),n.d(t,"z",(function(){return q})),n.d(t,"O",(function(){return G})),n.d(t,"Q",(function(){return W})),n.d(t,"P",(function(){return z}));var i=n("Tznh"),a="chat.CHAT_HIDDEN",r="chat.CHAT_SHOWN",o="chat.EMOTE_SETS_UPDATED",s="chat.FOLLOWER_MODE_DURATION_PREFERENCE_CHANGED",l="chat.SLOW_MODE_DURATION_PREFERENCE_CHANGED",c="chat.AUTOMOD_ACTIONS_ENABLED",d="chat.AUTOMOD_ACTIONS_DISABLED",u="chat.EMOTE_PICKER_CLOSED",m="chat.EMOTE_PICKER_OPENED",p="chat.CLOSE_CHAT_RULES",h="chat.MODERATION_ACTIONS_ENABLED",f="chat.MODERATION_ACTIONS_DISABLED",g="chat.MOD_ICONS_ENABLED",v="chat.MOD_ICONS_DISABLED",b="chat.SHOW_CHAT_RULES",k="chat.TIMESTAMPS_ENABLED",y="chat.TIMESTAMPS_DISABLED",S="chat.VIEWER_CHAT_FILTER_ENABLED",C="chat.VIEWER_CHAT_FILTER_DISABLED",E="chat.VIEWER_CHAT_FILTER_SETTINGS_CHANGED",w="chat.RENDER_SENT_CHAT_MESSAGE",O="chat.UNHIDE_IGNORED_COMMAND";function D(){return{type:k}}function N(){return{type:y}}function _(){return{type:r}}function I(){return{type:a}}function M(){return{type:c}}function j(){return{type:d}}function T(){return{type:h}}function P(){return{type:f}}function L(){return{type:g}}function R(){return{type:v}}function F(e){return{type:S,source:e||i.c.Other}}function U(e){return{type:C,source:e||i.c.Other}}function x(e,t){return{type:E,settings:e,source:t||i.c.Other}}function A(e,t){return{type:s,channelLogin:e,duration:t}}function B(e,t){return{type:l,channelLogin:e,duration:t}}function V(){return{type:u}}function H(){return{type:m}}function q(){return{type:p}}function G(){return{type:b}}function W(e){return{type:w,customEvent:e}}function z(e){return{type:O,userID:e}}},"/7Tk":function(e,t,n){"use strict";var i=n("q1tI"),a=n("/7QA"),r=n("sUnt"),o=n("hnjF"),s=n("+80q"),l=n("X2PJ"),c=n("XQbB"),d=function(){return i.createElement(r.a,{fullHeight:!0,fullWidth:!0,padding:{y:5}},i.createElement(r.a,{display:o.d.Flex,justifyContent:o.h.Center,textAlign:o.l.Center},i.createElement(s.a,{type:s.e.H4,fontSize:l.d.Size4,bold:!0},Object(a.d)("Hang in there...","ActivityFeed"))),i.createElement(r.a,{justifyContent:o.h.Center,display:o.d.Flex,margin:{top:1}},i.createElement(r.a,{flexGrow:0,display:o.d.Inline,margin:"auto",textAlign:o.l.Center},i.createElement(s.a,{type:s.e.P,fontSize:l.d.Size5},Object(a.d)("We are loading your activity","ActivityFeed")))),i.createElement(r.a,{display:o.d.Flex,justifyContent:o.h.Center,margin:{top:5},padding:{top:5}},i.createElement(c.a,null)))};n.d(t,"a",(function(){return d}))},"/gva":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CurrentUserBannedStatus"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"channel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"banStatus"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isPermanent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"expiresAt"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:145}};n.loc.source={body:"query CurrentUserBannedStatus($channelLogin: String!) {\nchannel: user(login: $channelLogin) {\nid\nself {\nbanStatus {\nisPermanent\nexpiresAt\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.CurrentUserBannedStatus=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"CurrentUserBannedStatus")},"/i69":function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("fvjX"),o=n("/7QA"),s=n("gcd7"),l=n("QVaV"),c=n("3kHA"),d=n("a6LY"),u=n("iyGE"),m=n("a2UF"),p=n("vSeP"),h=n("WytW"),f=n("AREq"),g=n("Av0x"),v=n("H82h"),b=600,k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.banUser=function(e){var n=Object(h.o)("/ban "+e);if(n){var i=t.userLogin(n.banTarget),a=n.reason||void 0;if(i){var r=Object(o.d)("Unable to ban user.","BanCommandHandler");return{deferred:t.props.banUserMutation(i,void 0,a).then((function(e){if(!e)return{notice:r};var n=e.banUserFromChatRoom;return n?n.error?{notice:Object(f.a)({login:i,code:n.error.code})}:(t.props.channelID&&n.ban&&n.ban.bannedUser&&Object(v.a)(d.a.BanUser,t.props.channelID,n.ban.bannedUser.id,d.b.ChatCommand),t.props.suppressLocalSuccessMessage?{}:{notice:Object(o.d)("{userLogin} is now banned from this channel.",{userLogin:i},"BanCommandHandler")}):{notice:r}})).catch((function(){return{notice:r}}))}}return{deferred:Promise.resolve({notice:Object(o.d)("Please specify a user to ban.","BanCommandHandler"),error:c.a.MissingParameters})}}return{deferred:Promise.resolve({notice:t.banUsage(),error:c.a.InvalidParameters})}},t.unbanUser=function(e){if(e&&0!==e.length){var n=t.userLogin(e),i=Object(o.d)("Unable to unban user.","BanCommandHandler");return{deferred:t.props.unbanUserMutation(n).then((function(e){if(!e)return{notice:i};var a=e.unbanUserFromChatRoom;return a?a.error?{notice:Object(g.a)(n,a.error.code)}:(t.props.channelID&&a.ban&&a.ban.bannedUser&&Object(v.a)(d.a.UnbanUser,t.props.channelID,a.ban.bannedUser.id,d.b.ChatCommand),t.props.suppressLocalSuccessMessage?{}:{notice:Object(o.d)("{bannedUserLogin} is no longer banned from this channel.",{bannedUserLogin:n},"BanCommandHandler")}):{notice:i}})).catch((function(){return{notice:i}}))}}return{deferred:Promise.resolve({notice:Object(o.d)("Please specify a user to unban.","BanCommandHandler"),error:c.a.MissingParameters})}},t.timeoutUser=function(e){var n=Object(h.t)("/timeout "+e);if(n){var i,a,r=t.userLogin(n.banTarget),s=n.reason||void 0;if(n.rawDuration&&n.durationSeconds?(i=n.durationSeconds,a=n.rawDuration===String(n.durationSeconds)?n.durationSeconds:n.rawDuration):n.rawDuration&&!n.validArguments?(a=n.rawDuration,i=b):(i=b,a=b),r){var l=Object(o.d)("Unable to timeout user.","BanCommandHandler");return{deferred:t.props.banUserMutation(r,a,s).then((function(e){if(!e)return{notice:l};var s=e.banUserFromChatRoom;if(!s)return{notice:l};if(s.error){var c=s.error.minTimeoutDurationSeconds,u=s.error.maxTimeoutDurationSeconds;return{notice:Object(f.a)({login:r,code:s.error.code,enteredDuration:n.rawDuration||void 0,isTimeout:!0,minTimeoutDuration:c||void 0,maxTimeoutDuration:u||void 0})}}return t.props.channelID&&s.ban&&s.ban.bannedUser&&Object(v.a)(d.a.TimeoutUser,t.props.channelID,s.ban.bannedUser.id,d.b.ChatCommand,a&&"["+a+"]n"||void 0),t.props.suppressLocalSuccessMessage?{}:{notice:Object(o.d)("{userLogin} has been timed out for {duration} seconds.",{userLogin:r,duration:i||b},"BanCommandHandler")}})).catch((function(){return{notice:l}}))}}return{deferred:Promise.resolve({notice:Object(o.d)("Please specify a user to timeout.","BanCommandHandler"),error:c.a.MissingParameters})}}return{deferred:Promise.resolve({notice:t.timeoutUsage(),error:c.a.InvalidParameters})}},t.untimeoutUser=function(e){if(e){var n=t.userLogin(e),i=Object(o.d)("Unable to untimeout user.","BanCommandHandler");return{deferred:t.props.unbanUserMutation(n).then((function(e){if(!e)return{notice:i};var a=e.unbanUserFromChatRoom;return a?a.error?{notice:Object(g.a)(n,a.error.code,!0)}:(t.props.channelID&&a.ban&&a.ban.bannedUser&&Object(v.a)(d.a.UntimeoutUser,t.props.channelID,a.ban.bannedUser.id,d.b.ChatCommand),t.props.suppressLocalSuccessMessage?{}:{notice:Object(o.d)("{login} is no longer timed out in this channel.",{login:n},"BanCommandHandler")}):{notice:i}})).catch((function(){return{notice:i}}))}}return{deferred:Promise.resolve({notice:Object(o.d)("Please specify a user to untimeout.","BanCommandHandler"),error:c.a.MissingParameters})}},t.userLogin=function(e){return Object(l.b)(e)?e:t.props.activeChattersAPI?t.props.activeChattersAPI.getActiveChatterLoginFromDisplayName(e)||e:t.props.displayNameToLogin&&t.props.displayNameToLogin(e)||e},t}return Object(i.__extends)(t,e),t.prototype.render=function(){return a.createElement(a.Fragment,null,a.createElement(s.a,{args:[{name:"username",isRequired:!0},{name:"reason",isRequired:!1}],channelLogin:this.props.channelLogin,command:"ban",description:Object(o.d)("Permanently ban a user from Chat","BanCommandHandler"),handler:this.banUser,helpText:this.banUsage(),permissionLevel:c.b.Moderator}),a.createElement(s.a,{args:[{name:"username",isRequired:!0}],channelLogin:this.props.channelLogin,command:"unban",description:Object(o.d)("Remove a timeout or a permanent ban on a user","BanCommandHandler"),handler:this.unbanUser,helpText:this.unbanUsage(),permissionLevel:c.b.Moderator}),a.createElement(s.a,{args:[{name:"username",isRequired:!0},{name:"duration",isRequired:!1}],channelLogin:this.props.channelLogin,command:"timeout",description:Object(o.d)("Temporarily ban a user from Chat","BanCommandHandler"),handler:this.timeoutUser,helpText:this.timeoutUsage(),permissionLevel:c.b.Moderator}),a.createElement(s.a,{args:[{name:"username",isRequired:!0}],channelLogin:this.props.channelLogin,command:"untimeout",description:Object(o.d)("Remove a timeout on a user","BanCommandHandler"),handler:this.untimeoutUser,helpText:this.untimeoutUsage(),permissionLevel:c.b.Moderator}))},t.prototype.banUsage=function(){return Object(o.d)('Usage: "/ban <username> [reason]" - Permanently prevents a user from chatting. Reason is optional and will be shown to the target user and other moderators. Use "/unban" to remove a ban.',"BanCommandHandler")},t.prototype.unbanUsage=function(){return Object(o.d)('Usage: "/unban <username>" - Removes a timeout or ban on a user.',"BanCommandHandler")},t.prototype.timeoutUsage=function(){return Object(o.d)('Usage: "/timeout <username> [duration][unit] [reason]" - Temporarily prevents a user from chatting. Duration and time unit (optional, default=10m, max=2w) can use s, m, h, d, w solo or combined. Reason (optional) is shown to user and mods. Use "/untimeout" to remove a timeout.',"BanCommandHandler")},t.prototype.untimeoutUsage=function(){return Object(o.d)('Usage: "/untimeout <username>" - Removes a timeout on a user.',"BanCommandHandler")},t}(a.Component),y=function(e){return{channelID:e.channelID}},S=Object(r.d)(p.a,Object(m.a)(y),Object(u.a)(y))(k);n.d(t,"a",(function(){return S}))},"/nm5":function(e,t,n){},"/x02":function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"pollTokenBreakdown"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PollTokenBreakdown"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}],loc:{start:0,end:61}};n.loc.source={body:"fragment pollTokenBreakdown on PollTokenBreakdown {\nbits\nid\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"04j6":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Core_Services_Spade_ChatEvent_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isPartner"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:116}};n.loc.source={body:"query Core_Services_Spade_ChatEvent_User($id: ID!) {\nuser(id: $id) {\nid\nisPartner\nstream {\nid\ngame {\nid\nname\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.Core_Services_Spade_ChatEvent_User=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"Core_Services_Spade_ChatEvent_User")},"0EKw":function(e,t,n){"use strict";var i=n("q1tI"),a=n("SHn+"),r=n("kduP"),o=n("imSJ"),s=function(e){return i.createElement(a.a,{linkTo:{pathname:Object(r.a)(e.name),state:{content:"current_game",medium:"twitch_channel"}},label:Object(o.a)(),title:e.displayName,"data-a-target":"stream-game-link"})};n.d(t,"a",(function(){return s}))},"0FG4":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return c}));var i,a=n("RcPG"),r=n("a1OF");!function(e){e[e.Position=0]="Position",e[e.Token=1]="Token"}(i||(i={}));var o="0";function s(e,t,n){var o,s,l=n.type===i.Position?t:e,c=n.map[l];if(c){var d=(o=e,s=c.id,{images:{sources:{"1x":Object(r.d)(s,1),"2x":Object(r.d)(s,2),"4x":Object(r.d)(s,4)},themed:!1},alt:o,emoteID:s});return{type:a.a.Emote,content:d}}return null}var l={"\\:\\&gt\\;":[":>"],"\\&gt\\;\\(":[">("],"\\&lt\\;\\]":["<]"],"\\&lt\\;3":["<3"],":-?(?:7|L)":[":-7",":-L",":7",":L"],"[oO](_|\\.)[oO]":["o_o","O_O","o_O","O_o","o.o","O.O","o.O","O.o"],"\\;-?(p|P)":[";-p",";-P",";p",";P"],"\\;-?\\)":[";-)",";)"],"\\:-?(o|O)":[":-o",":-O",":o",":O"],"\\:-?(p|P)":[":-p",":-P",":p",":P"],"\\:-?(S|s)":[":-S",":-s",":s",":S"],"\\:-?[\\\\/]":[":-/",":-\\",":/",":\\"],"\\:-?[z|Z|\\|]":[":-|",":-Z",":-z",":|",":Z",":z"],"\\:-?\\(":[":-(",":("],"\\:-?\\)":[":-)",":)"],"\\:-?D":[":-D",":D"],"#-?[\\\\/]":["#-/","#-\\","#/","#\\"],"B-?\\)":["B-)","B)"],"R-?\\)":["R-)","R)"]};function c(e){for(var t={},n=0,i=e;n<i.length;n++){var a=i[n];if(a&&a.emotes)for(var r=0,s=a.emotes;r<s.length;r++){var c=s[r];if(c&&c.id&&c.token)for(var d=0,u=l[c.token]||[c.token];d<u.length;d++){var m=u[d];t[m]&&a.id===o||(t[m]={id:c.id,token:m})}}}return t}},"0Hf3":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return v})),n.d(t,"f",(function(){return b}));var i,a,r,o,s=n("mrSG"),l=n("/7QA"),c=n("DMoW"),d=n("2xye"),u=n("E/0f"),m=n("oK83");function p(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t;return Object(s.__generator)(this,(function(n){return t={target_user_id:e.targetUserID,target_login:e.targetLogin,channel_id:e.channelID,channel_login:e.channelLogin,click_text:h(e.clickText),action:e.action},l.o.track(d.SpadeEventType.ChatProfileCardClick,t),[2]}))}))}function h(e){switch(e){case u.c.Messages:return i.Messages;case u.c.Timeouts:return i.Timeouts;case u.c.Bans:return i.Bans;case u.c.ModComments:return i.ModComments;default:return e}}function f(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t,n,i,a;return Object(s.__generator)(this,(function(r){return t=e.data,n=t.channelUser,i=t.targetUser,a={target_user_id:i&&i.id||"",target_login:i&&i.login||e.targetLogin,channel_id:n&&n.id||e.channelID,channel_login:n&&n.login||e.channelLogin,profile_card_type:g(e),ui_context:m.b[e.sourceType]},l.o.track(d.SpadeEventType.ChatProfileCardOpen,a),[2]}))}))}function g(e){return e.data.currentUser&&e.data.channelUser&&e.data.currentUser.id===e.data.channelUser.id?r.Broadcaster:e.data.channelUser&&e.data.channelUser.self&&e.data.channelUser.self.isModerator?e.data.channelUser.modLogsRoleAccess&&e.data.channelUser.modLogsRoleAccess.accessLevel!==c.Qb.NONE?r.ModWithChatlogs:r.ModWithoutChatlogs:r.RegularViewer}function v(e,t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,i,a,r,c;return Object(s.__generator)(this,(function(s){return n=e.data,i=n.channelUser,a=n.targetUser,r=e.isPopout,c={comment_uuid:t.id,ui_context:r?o.Popout:o.Card,target_user_id:a&&a.id,target_login:a&&a.login,channel_id:i&&i.id||e.channelID,channel_login:i&&i.login||e.channelLogin,from_user_id:t.author&&t.author.id,from_user_login:t.author&&t.author.login},l.o.track(d.SpadeEventType.ClientModCommentAdd,c),[2]}))}))}function b(e,t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var n,i,a,r,c;return Object(s.__generator)(this,(function(s){return n=e.data,i=n.channelUser,a=n.targetUser,r=e.isPopout,c={comment_uuid:t.id,ui_context:r?o.Popout:o.Card,target_user_id:a&&a.id,target_login:a&&a.login,channel_id:i&&i.id||e.channelID,channel_login:i&&i.login||e.channelLogin,from_user_id:t.author&&t.author.id,from_user_login:t.author&&t.author.login},l.o.track(d.SpadeEventType.ClientModCommentDelete,c),[2]}))}))}!function(e){e.Messages="messages",e.Timeouts="timeouts",e.Bans="bans",e.ModComments="mod_comments",e.PopOut="popout",e.Whisper="whisper"}(i||(i={})),function(e){e.Expand="expand",e.Collapse="collapse"}(a||(a={})),function(e){e.RegularViewer="regular_viewer",e.Broadcaster="broadcaster",e.ModWithChatlogs="mod_with_chatlogs",e.ModWithoutChatlogs="mod_without_chatlogs"}(r||(r={})),function(e){e.Card="chat_profile_card",e.Popout="chat_profile_card_popout"}(o||(o={}))},"0Rl0":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n("q1tI"),a=n("uXHW"),r=n("fPaz"),o=n("PL8s"),s=n("AFv4"),l=n("sUnt"),c=n("hnjF"),d=n("+80q"),u=n("X2PJ"),m=function(){return i.createElement(a.a,null,i.createElement(r.b,{ratio:r.c.Aspect16x9},i.createElement(o.a,null)),i.createElement(s.a,null,i.createElement(l.a,{display:c.d.Flex,margin:{bottom:1}},i.createElement(l.a,{display:c.d.InlineBlock,margin:{top:1,right:1}},i.createElement(o.a,{width:40,height:56})),i.createElement(l.a,{display:c.d.InlineBlock,margin:{top:1}},i.createElement(d.a,null,i.createElement(o.a,{width:150})),i.createElement(d.a,{fontSize:u.d.Size7},i.createElement(o.a,{width:100}))))))}},"0WFu":function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return d}));var i,a,r=n("/7QA"),o=n("3Bft"),s=n("kRBY");function l(e){return[o.a.Prime,o.a.Custom].includes(e)?null:parseInt(e,10)/1e3}function c(e){var t=e instanceof Date?e:new Date(e);return Math.round((t.getTime()-Date.now())/864e5)}function d(e){var t=r.b.get(e,a.Off);return t===a.On||!(t!==a.Staff||!Object(s.g)(r.p.store.getState()))}!function(e){e.Prime2Paid="prime_2_paid"}(i||(i={})),function(e){e.Off="off",e.On="on",e.Staff="staff"}(a||(a={}))},"0bws":function(e,t,n){"use strict";var i=n("/MKj"),a=n("mrSG"),r=n("1hWM"),o=function(e){function t(t){var n=e.call(this,t)||this;return n.updateContext({},t),n}return Object(a.__extends)(t,e),t.prototype.componentDidUpdate=function(e){this.updateContext(e,this.props)},t.prototype.render=function(){return null},t.prototype.updateContext=function(e,t){var n={};t.theme!==e.theme&&(n.theme=t.theme),t.game!==e.game&&(n.game=t.game),t.hostingInfo!==e.hostingInfo&&(n.hostingInfo=t.hostingInfo),Object.keys(n).length>0&&r.extensionService.postContext(n)},t}(n("q1tI").Component);var s=Object(i.b)((function(e){return{theme:e.ui.theme}}))(o);n.d(t,"a",(function(){return s}))},"16Gl":function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"f",(function(){return s})),n.d(t,"e",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"g",(function(){return d}));var i=n("tLDJ"),a=i.s,r=i.t;function o(e,t){return location.protocol+"//"+location.host+r(e,t)}var s=i.w,l=i.v,c=i.r;function d(e){return"/videos/"+e}},"1DRi":function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"watchPartyProgress"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"WatchPartyProgress"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"durationSeconds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"positionSeconds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"start"},arguments:[],directives:[]}]}}],loc:{start:0,end:91}};n.loc.source={body:"fragment watchPartyProgress on WatchPartyProgress {\ndurationSeconds\npositionSeconds\nstart\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"1MDS":function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return h}));var i=n("mrSG"),a=n("/7QA"),r=n("2xye"),o=n("oK83"),s=n("P5MF"),l=n("nR4f"),c=n("P6kH"),d={Unknown:"unknown",Chat:"chat",Room:"room",Whisper:"whisper",Vod:"vod"},u={Close:"close",ReportDropDown:"report_drop_down",Report:"report",Follow:"follow",Unfollow:"unfollow",Subscribe:"subscribe",ClickTryPrime:"click_try_prime",GoToChannel:"go_to_channel",Open:"open",ClickChannelName:"click_channel_name",CloseClickOtherEmote:"close_click_other_emote"},m={Available:"available",CreatorBanned:"creator_banned",LimitedTimeEmote:"limited_time_emote",GlobalEmote:"global_emote",Prime:"prime",Turbo:"turbo",OtherUnlockable:"other_unlockable"};function p(e){return Object(i.__awaiter)(this,void 0,void 0,(function(){var t,n,o,d,u,m,p,h,g,v,b,k,y,S,C,E;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:t={emoteID:e.emoticonID},n=null,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,a.p.apollo.client.query({query:l,variables:t})];case 2:return n=i.sent(),[3,4];case 3:return o=i.sent(),a.k.warn(o,"Failed to make query for emote info in EmoteCard reporting.",{emoteID:e.emoticonID}),[3,4];case 4:d=n&&n.data&&n.data.emote||null,n&&!d&&a.k.warn("Query for emote info in EmoteCard reporting returned no data.",{emoteID:e.emoticonID}),u=n&&n.data?Object(c.d)(n.data):c.a.Unknown,m=d&&d.subscriptionProduct&&d.subscriptionProduct.owner&&d.subscriptionProduct.owner.displayName||"",p=d&&d.subscriptionProduct&&d.subscriptionProduct.owner&&d.subscriptionProduct.owner.id||"",u===c.a.OWL2019&&(m=c.b,p=c.c),h={channelID:p},g=null,i.label=5;case 5:return i.trys.push([5,7,,8]),[4,a.p.apollo.client.query({query:s,variables:h})];case 6:return g=i.sent(),[3,8];case 7:return v=i.sent(),a.k.warn(v,"Failed to make query for channel info in EmoteCard reporting.",{channelID:p}),[3,8];case 8:return b=g&&g.data&&g.data.user||null,g&&!b&&a.k.warn("Query for channel info in EmoteCard reporting returned no data.",{channelID:p}),k=!!b&&!!b.hasPrime,y=b&&b.self,S=!!y&&!!y.subscriptionBenefit,C=!!y&&!!y.canPrimeSubscribe,E={emote_location:e.emoteLocation,emoticon_id:e.emoticonID,chat_channel:e.chatChannel,chat_channel_id:e.chatChannelID,emote_channel:m,emote_channel_id:p,referrer_user_id:e.referrerUserID,action:e.action,is_subscribed:S,is_subscribed_tier:y&&y.subscriptionBenefit&&y.subscriptionBenefit.tier||"",emote_tier:d&&d.subscriptionProduct&&d.subscriptionProduct.tier||"",emote_status:f(u),has_prime:k,can_subscribe:C,msg_id:e.msgID},a.o.track(r.SpadeEventType.EmoteCardInteraction,E),[2]}}))}))}function h(e){switch(e){case o.a.chat:return d.Chat;case o.a.whisper:return d.Whisper;case o.a.vod:return d.Vod;case o.a.room:return d.Room;case o.a.unknown:default:return d.Unknown}}function f(e){switch(e){case c.a.Prime:return m.Prime;case c.a.Turbo:return m.Turbo;case c.a.OWL2019:case c.a.Subscription:return m.Available;case c.a.LimitedTime:return m.LimitedTimeEmote;case c.a.Unavailable:return m.CreatorBanned;case c.a.Global:return m.GlobalEmote;case c.a.Unknown:default:return m.OtherUnlockable}}},"1Rv/":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Chat_UnbanUserFromChatRoom"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnbanUserFromChatRoomInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unbanUserFromChatRoom"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ban"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bannedUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"expiresAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isPermanent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"moderator"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:243}};n.loc.source={body:"mutation Chat_UnbanUserFromChatRoom($input: UnbanUserFromChatRoomInput!) {\nunbanUserFromChatRoom(input: $input) {\nban {\nbannedUser {\nid\nlogin\ndisplayName\n}\ncreatedAt\nexpiresAt\nisPermanent\nmoderator {\nid\nlogin\ndisplayName\n}\n}\nerror {\ncode\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.Chat_UnbanUserFromChatRoom=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"Chat_UnbanUserFromChatRoom")},"1VX3":function(e,t,n){"use strict";var i=n("W7Hf");n.d(t,"a",(function(){return i.a}))},"1k85":function(e,t,n){"use strict";var i,a=n("mrSG"),r=n("q1tI"),o=n("/MKj"),s=n("Ty5D"),l=n("fvjX"),c=n("/7QA"),d=n("ZS2+"),u=n("eJ65"),m=n("1/iK"),p=n("XDCx"),h=n("y5D0"),f=n("DMoW"),g=n("2xye"),v=n("kRBY"),b=n("tiJ6"),k=n("Q34B"),y=n("dIU+"),S=n("GnwI"),C=n("/HY+"),E=n("4qQ0"),w=n("Ws8v"),O=n("sUnt"),D=n("hnjF"),N=n("HSpZ"),_=n("X2PJ"),I=n("Jsra"),M=n("HH5h"),j=n("+80q"),T=n("b7S+"),P=n("7d/q"),L=n("C7sF"),R=n("ygYM"),F=n("4wKg"),U=(n("axcf"),d.a.wrap((function(){return n.e(103).then(n.bind(null,"QjI3"))}),"SubscribeButton"));function x(e){return Object(c.d)("Report {hostChannelDisplayName}",{hostChannelDisplayName:e},"VideoPlayerHostingUI")}!function(e){e.ChannelName="hosting-ui__channel-name",e.UVHeader="hosting-ui__uv-header",e.MoreButton="hosting-ui__more-button",e.ReportHostChannelButton="hosting-ui__report-host-channel-button",e.ReportHostedChannelButton="hosting-ui__report-hosted-channel-button"}(i||(i={}));var A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleReportHostClick=function(){var e=t.props.hostChannelID,n=t.props.hostChannelDisplayName||t.props.hostChannelID;e&&n&&t.openReportModal(e,n)},t.handleReportHostedClick=function(){var e=t.props.hostedChannelID,n=t.props.hostedChannelDisplayName||t.props.hostedChannelID;e&&n&&t.openReportModal(e,n)},t.openReportModal=function(e,n){t.props.isLoggedIn?t.props.showReportUserModal({onClose:t.handleReportModalClose,reportContext:{contentType:f.tc.USER_REPORT,targetUserID:e},title:x(n)}):t.props.login()},t.handleReportModalClose=function(e){(e===E.b.MutationError||e===E.b.Success)&&t.props.history.push("/")},t}return Object(a.__extends)(t,e),t.prototype.componentDidUpdate=function(e){this.isVisible(this.props)!==this.isVisible(e)&&this.props.triggerPlayerReposition&&this.props.triggerPlayerReposition()},t.prototype.render=function(){var e=null;return this.isVisible(this.props)&&(e=this.renderUVHeader()),r.createElement(w.a,{className:"video-player-hosting-ui__container"},e,r.createElement("span",{key:"video-player"},this.props.children))},t.prototype.isVisible=function(e){var t=e.currentUser&&e.currentUser.roles&&e.currentUser.roles.isSiteAdmin;return this.props.contentType===k.a.LIVE&&!!e.hostedChannelDisplayName&&!t},t.prototype.renderUVHeader=function(){return r.createElement(O.a,{position:D.j.Relative,zIndex:D.o.Above},r.createElement(N.a,{type:N.f.SlideInBottom,delay:N.b.Medium,duration:N.c.Medium,enabled:!0},r.createElement(w.a,{className:"video-player-hosting-ui__header",display:D.d.Flex,background:_.a.Accent,alignItems:D.b.Center,padding:{x:1,y:.5},justifyContent:D.h.Between,"data-a-target":"hosting-ui-header"},r.createElement(I.a,{key:"hosting-ui-header",to:{pathname:"/"+this.props.hostedChannelLogin,state:{medium:g.PageviewMedium.Channel,content:g.PageviewContent.Host}},"data-a-target":"hosting-ui-link","data-test-selector":i.UVHeader,type:I.b.Inherit},r.createElement(O.a,{display:D.d.Flex,alignItems:D.b.Center},r.createElement(M.a,{src:this.props.hostedChannelProfileImageURL||c.a.defaultAvatarURL,size:30,alt:this.renderAvatarAltText(),userLogin:this.props.hostedChannelLogin}),r.createElement(w.a,{margin:{left:1},fontSize:_.d.Size5},r.createElement(j.a,{type:j.e.Span,color:_.c.Overlay},this.renderHostingText(),"Â "),r.createElement(j.a,{type:j.e.Span,color:_.c.Overlay,"data-a-target":"hosting-ui-channel-name","data-test-selector":i.ChannelName,bold:!0},this.props.hostedChannelDisplayName)))),this.props.firstPageLoaded&&r.createElement(O.a,{padding:{y:.5},display:D.d.Flex,justifyContent:D.h.Between},r.createElement(r.Fragment,null,r.createElement(O.a,{display:D.d.Flex,margin:{right:1}},r.createElement(y.FollowButton,{"data-a-target":"hosting-ui-follow-button",channelName:this.props.hostedChannelDisplayName||"",channelLogin:this.props.hostedChannelLogin,hostChannelLogin:this.props.hostChannelLogin||void 0,hostChannelID:this.props.hostChannelID||void 0,isHostedFollow:!0,followUIType:y.FollowButtonUIType.IconAndText,unfollowUIType:y.FollowButtonUIType.IconOnly,tooltipDirection:T.c.Top,hideDropdownWhenFollowing:!0,fullWidthButton:!0,hollowIcons:!0,animatedButton:!0,showTooltips:!0,alignRight:!0,overlayButton:!0})),r.createElement(O.a,{margin:{right:.5}},r.createElement(U,{channelLogin:this.props.hostedChannelLogin,hostChannelID:this.props.hostChannelID||void 0,hostChannelLogin:this.props.hostChannelLogin||void 0,subLocation:"channel_page","data-a-target":"hosting-ui-subscribe-button",overlayButton:!0}))),r.createElement(u.a,null,r.createElement(P.a,{ariaLabel:this.renderMoreOptionsText(),overlay:!0,icon:L.a.More,onClick:this.handleReportHostClick,"data-a-target":"hosting-ui-more-button","data-test-selector":i.MoreButton}),r.createElement(R.a,{direction:R.b.BottomRight,"data-a-target":"hosting-ui-more-balloon"},r.createElement(O.a,{padding:1},this.props.hostChannelID&&(this.props.hostChannelDisplayName||this.props.hostChannelLogin)&&r.createElement(F.a,{key:"Report Host",onClick:this.handleReportHostClick,"data-a-target":"hosting-ui-report-button","data-test-selector":i.ReportHostChannelButton,label:x(this.props.hostChannelDisplayName||this.props.hostChannelLogin)}),this.props.hostedChannelID&&(this.props.hostedChannelDisplayName||this.props.hostedChannelLogin)&&r.createElement(F.a,{key:"Report Hosted",onClick:this.handleReportHostedClick,"data-a-target":"hosting-ui-report-hosted-button","data-test-selector":i.ReportHostedChannelButton,label:x(this.props.hostedChannelDisplayName||this.props.hostedChannelLogin)}))))))))},t.prototype.renderMoreOptionsText=function(){return Object(c.d)("More options","HostingUI")},t.prototype.renderHostingText=function(){return Object(c.d)("Hosting","VideoPlayerHostingUI")},t.prototype.renderAvatarAltText=function(){return Object(c.d)("Hosted Channel {hostedChannelDisplayName}'s Avatar",{hostedChannelDisplayName:this.props.hostedChannelDisplayName||""},"VideoPlayerHostingUI")},t}(r.Component);var B=Object(l.d)(Object(b.b)((function(e){var t=e.hostedChannel;return{contentType:e.contentType,currentUser:e.currentUser,hostChannelLogin:e.channel&&e.channel.login,hostChannelID:e.channel&&e.channel.id,hostChannelDisplayName:e.channel&&e.channel.displayName,hostedChannelID:t?t.id:null,hostedChannelDisplayName:t?t.displayName:null,hostedChannelLogin:t?t.login:null,hostedChannelProfileImageURL:t?t.profileImageURL:null}})),Object(o.b)((function(e){return{isLoggedIn:Object(v.f)(e),firstPageLoaded:e.session.firstPageLoaded}}),(function(e){return Object(l.b)({login:function(){return Object(h.e)(m.a.ReportHoster)},showReportUserModal:function(e){var t=Object(a.__rest)(e,[]);return Object(p.e)(C.a,t)}},e)})),s.j,Object(S.withLatencyTracking)("HostingUI",{autoReportInteractive:!0}))(A);n.d(t,"a",(function(){return B}))},"1mB7":function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"communityPointsUserFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"subscriptionBenefit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"isModerator"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:99}};n.loc.source={body:"fragment communityPointsUserFragment on User {\nid\nself {\nsubscriptionBenefit {\nid\n}\nisModerator\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"1qVK":function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"WatchPartyUser_PrimeVideoBenefit"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"accessToken"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"primeVideoBenefit"},arguments:[{kind:"Argument",name:{kind:"Name",value:"accessToken"},value:{kind:"Variable",name:{kind:"Name",value:"accessToken"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"watchPartyError"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"isValid"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:229}};i.loc.source={body:'#import "twilight/features/watch-party/models/watch-party-error-fragment.gql"\nquery WatchPartyUser_PrimeVideoBenefit($accessToken: String!) {\nprimeVideoBenefit(accessToken: $accessToken) {\nerror {\n...watchPartyError\n}\nisValid\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("JqNv").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})));var r={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),r[e.name.value]=t}})),e.exports=i,e.exports.WatchPartyUser_PrimeVideoBenefit=function(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=r[t]||new Set,a=new Set,s=new Set;for(i.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(r[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(t){var i=o(e,t);i&&n.definitions.push(i)})),n}(i,"WatchPartyUser_PrimeVideoBenefit")},"26nv":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Chat_ChannelData"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"channel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"rules"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isModerator"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isVIP"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:161}};n.loc.source={body:"query Chat_ChannelData($channelLogin: String!) {\nchannel: user(login: $channelLogin) {\nid\nlogin\ndisplayName\nchatSettings {\nrules\n}\nself {\nisModerator\nisVIP\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.Chat_ChannelData=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"Chat_ChannelData")},"2D+f":function(e,t,n){},"2Dht":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"WhisperThread"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"whisperThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userLastMessageRead"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"unreadMessagesCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"messages"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"20"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nonce"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"to"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"editedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deletedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:347}};n.loc.source={body:"query WhisperThread($id: ID!) {\nwhisperThread(id: $id) {\nid\nuserLastMessageRead {\nid\nsentAt\n__typename\n}\nunreadMessagesCount\nmessages(first: 20) {\nedges {\ncursor\nnode {\nid\nnonce\ncontent {\ncontent\nemotes {\nid\nemoteID\nsetID\nfrom\nto\n__typename\n}\n__typename\n}\nfrom {\nid\n}\nsentAt\neditedAt\ndeletedAt\n__typename\n}\n__typename\n}\n__typename\n}\n__typename\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.WhisperThread=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"WhisperThread")},"2Ev9":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));var i=n("mrSG"),a=n("DMoW"),r=function(){function e(e,t,n){this.count=0,this.globalsBySet=new Map,this.channelsBySet=new Map;var i=e.filter((function(e){return!!e})),a=t?t.filter((function(e){return!!e})):[];this.count=i.length+(t?a.length:0),this.indexBadges(i,this.globalsBySet,n),Array.isArray(t)&&this.indexBadges(a,this.channelsBySet,n)}return e.prototype.getBadge=function(e,t){var n=this.channelsBySet.get(e);return n&&n.has(t)?n.get(t)||null:void 0!==(n=this.globalsBySet.get(e))&&n.get(t)||null},e.prototype.indexBadges=function(e,t,n){e.forEach((function(e){n&&e.clickAction&&e.clickAction===a.k.SUBSCRIBE&&(e=Object(i.__assign)(Object(i.__assign)({},e),{channelName:n}));var r=t.get(e.setID);r||(r=new Map,t.set(e.setID,r)),r.set(e.version,e)}))},e}(),o=new r([],[],"")},"2EzP":function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l}));var i=n("XIZb"),a=Object(i.a)("MessageHandler"),r=a.withChatServiceManager,o=a.withContext,s=r,l=o((function(e){return{messageHandlerAPI:e.serviceAPI,setMessageHandlerAPI:e.setServiceAPI}}))},"2bi+":function(e,t,n){"use strict";n("DLhE");var i=n("fvjX"),a=n("/7QA"),r=n("mrSG"),o=n("V3Pk"),s=n("ZuiC"),l=function(e){return Object(r.__assign)({searchHits:[],videos:{}},e)};var c=n("sf7/"),d=n("DpwM"),u=n("g807"),m=n("RNNG"),p=n("Sfdh"),h=function(e){return Object(r.__assign)({comments:Object(u.c)(),currentVideoTime:0,cursor:{future:d.g,past:d.g},errorMessage:"",hasDismissedChatReplayError:!1,hasLoadedCurrentUserBlockedList:!1,hasLoadedData:!1,isPostCooldownActive:!1,isReplayFilterOn:!1,isScrollingSynced:!0,replyCursorMap:{},hideTimestamps:!1,isPlaybackBlocked:!1},e)},f=150;var g={apiToken:"",deviceId:""};var v={users:{}},b=function(e){return Object(r.__assign)({users:{}},e)};function k(e,t){var n=t.reduce((function(e,t){return e[t.id]=t,e}),{});return Object(r.__assign)(Object(r.__assign)({},e),n)}var y=Object(i.c)({comments:function(e,t){var n;switch(void 0===e&&(e=h()),t.type){case s.l:var i=Object(r.__assign)(Object(r.__assign)({},t.comments[0]),{highlight:!0,source:d.f});return Object(r.__assign)(Object(r.__assign)({},e),{comments:Object(u.d)(e.comments,[i]),isPostCooldownActive:!0});case s.m:return Object(r.__assign)(Object(r.__assign)({},e),{errorMessage:t.createError});case s.o:return Object(r.__assign)(Object(r.__assign)({},e),{errorMessage:t.errorMessage});case s.d:var a=t.comments[0].parentId,l=e.cursor,g=e.replyCursorMap,v=t.comments.slice();if(""===a)l=t.cursor;else if(g=Object(r.__assign)(Object(r.__assign)({},e.replyCursorMap),((n={})[a]=t.cursor.future,n)),t.cursor.future===d.g){var b=Object(u.b)(e.comments,a);if(b){var k=Object(r.__assign)(Object(r.__assign)({},b),{moreReplies:!1});v.push(k)}}var y=Object(u.d)(e.comments,v);return e.isScrollingSynced&&(y=Object(m.e)(y,f)),Object(r.__assign)(Object(r.__assign)({},e),{comments:y,cursor:l,hasLoadedData:!0,replyCursorMap:g});case s.e:return Object(r.__assign)(Object(r.__assign)({},e),{comments:Object(u.d)(Object(u.c)(),t.comments),hasLoadedData:!0,cursor:t.cursor,replyCursorMap:{}});case s.f:return Object(r.__assign)(Object(r.__assign)({},e),{hasLoadedData:!0});case o.c:return Object(r.__assign)(Object(r.__assign)({},e),{comments:Object(u.d)(Object(u.c)(),t.comments),cursor:t.cursor,hasLoadedData:!0,errorMessage:""});case o.b:return Object(r.__assign)(Object(r.__assign)({},h()),{hasLoadedData:!0,errorMessage:t.error});case c.c:return Object(r.__assign)(Object(r.__assign)({},e),{currentVideoTime:Math.floor(t.updatedTime),isPlaybackBlocked:!1});case c.a:return Object(r.__assign)({},h());case c.b:return Object(r.__assign)(Object(r.__assign)({},e),{isPlaybackBlocked:!0});case s.c:return Object(r.__assign)({},h());case s.n:return Object(r.__assign)(Object(r.__assign)({},e),{comments:Object(m.d)(e.comments,t.comment)});case s.k:var S=e.errorMessage;return S===Object(p.a)().messageCreatedTooQuickError&&(S=""),Object(r.__assign)(Object(r.__assign)({},e),{isPostCooldownActive:!1,errorMessage:S});case s.h:return Object(r.__assign)(Object(r.__assign)({},e),{isScrollingSynced:!1});case s.i:return Object(r.__assign)(Object(r.__assign)({},e),{comments:Object(m.e)(e.comments,f),isScrollingSynced:!0});case o.a:return Object(r.__assign)(Object(r.__assign)({},e),{comments:Object(m.a)(e.comments,(function(e){return e.commenter!==t.user}))});case s.p:return Object(r.__assign)(Object(r.__assign)({},e),{comments:Object(u.d)(e.comments,t.comments)});case s.g:return Object(r.__assign)(Object(r.__assign)({},e),{isReplayFilterOn:t.isReplayFilterOn});case s.a:return Object(r.__assign)(Object(r.__assign)({},e),{hasDismissedChatReplayError:!0});case s.j:return Object(r.__assign)(Object(r.__assign)({},e),{hideTimestamps:t.hideTimestamps});case s.b:return Object(r.__assign)(Object(r.__assign)({},e),{isReplayFilterOn:t.isReplayFilterOn,hideTimestamps:t.hideTimestamps});default:return e}},config:function(e){return void 0===e&&(e=g),e},users:function(e,t){switch(void 0===e&&(e=v),t.type){case s.d:case s.e:case o.c:case s.l:return{users:k(e.users,t.users)};case s.c:return Object(r.__assign)({},b());default:return e}},moderation:function(e,t){switch(void 0===e&&(e=l()),t.type){case o.c:return Object(r.__assign)(Object(r.__assign)({},e),{videos:(n=e.videos,i=t.videos,a=i.reduce((function(e,t){return e[t.id]=t,e}),{}),Object(r.__assign)(Object(r.__assign)({},n),a))});case o.d:return t.hits&&t.hits.results.length>0?Object(r.__assign)(Object(r.__assign)({},e),{searchHits:t.hits.results}):Object(r.__assign)(Object(r.__assign)({},e),{searchHits:[]});case s.c:return Object(r.__assign)({},l());default:return e}var n,i,a}});a.p.store.registerReducer("vodChat",y);n("WK0g"),n("ahza"),n("nxZp"),n("pU2t");var S=n("l41m"),C=n("HjbF"),E=n("kVrx"),w=n("ZUUl"),O=n("82xK"),D=n("zClW"),N=(n("3Ps+"),n("GCGb")),_=n("Zkco"),I=n("KD05"),M=n("fCiU"),j=n("XXm5"),T=n("znm4"),P=(n("pwkZ"),n("4OCo")),L=n("GEnX");n("ngVu");n.d(t,"B",(function(){return S.d})),n.d(t,"o",(function(){return s.y})),n.d(t,"r",(function(){return c.f})),n.d(t,"q",(function(){return c.e})),n.d(t,"v",(function(){return C.c})),n.d(t,"w",(function(){return C.d})),n.d(t,"n",(function(){return C.a})),n.d(t,"m",(function(){return E.a})),n.d(t,"y",(function(){return E.b})),n.d(t,"A",(function(){return E.c})),n.d(t,"C",(function(){return w.a})),n.d(t,"D",(function(){return w.b})),n.d(t,"k",(function(){return O.a})),n.d(t,"p",(function(){return D.a})),n.d(t,"s",(function(){return D.b})),n.d(t,"z",(function(){return D.d})),n.d(t,"I",(function(){return D.j})),n.d(t,"E",(function(){return D.e})),n.d(t,"F",(function(){return D.f})),n.d(t,"G",(function(){return D.g})),n.d(t,"H",(function(){return D.h})),n.d(t,"b",(function(){return d.b})),n.d(t,"d",(function(){return d.d})),n.d(t,"a",(function(){return d.a})),n.d(t,"c",(function(){return d.c})),n.d(t,"x",(function(){return d.h})),n.d(t,"e",(function(){return N.b})),n.d(t,"h",(function(){return _.a})),n.d(t,"u",(function(){return I.b})),n.d(t,"t",(function(){return M.b})),n.d(t,"f",(function(){return j.a})),n.d(t,"g",(function(){return j.b})),n.d(t,"l",(function(){return T.a})),n.d(t,"j",(function(){return P.a})),n.d(t,"i",(function(){return L.a}))},"2e6W":function(e,t,n){},"2zj6":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UnlockModifiedEmote"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnlockChosenModifiedSubscriberEmoteInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unlockChosenModifiedSubscriberEmote"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"balance"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:161}};n.loc.source={body:"mutation UnlockModifiedEmote($input: UnlockChosenModifiedSubscriberEmoteInput!) {\nunlockChosenModifiedSubscriberEmote(input: $input) {\nbalance\nerror {\ncode\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.UnlockModifiedEmote=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"UnlockModifiedEmote")},"31iR":function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"pollTopContributor"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PollTopContributor"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bitsAmount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:88}};n.loc.source={body:"fragment pollTopContributor on PollTopContributor {\nbitsAmount\nuser {\nid\ndisplayName\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"34IA":function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ViewerCardModLogsMessagesBySender"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"senderID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includeAutoModCaughtMessages"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"Cursor"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"channel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modLogs"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"messagesBySender"},arguments:[{kind:"Argument",name:{kind:"Name",value:"senderID"},value:{kind:"Variable",name:{kind:"Name",value:"senderID"}}},{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}},{kind:"Argument",name:{kind:"Name",value:"order"},value:{kind:"EnumValue",value:"DESC"}},{kind:"Argument",name:{kind:"Name",value:"includeMessageCount"},value:{kind:"BooleanValue",value:!1}},{kind:"Argument",name:{kind:"Name",value:"includeAutoModCaughtMessages"},value:{kind:"Variable",name:{kind:"Name",value:"includeAutoModCaughtMessages"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"autoModCaughtMessage"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"modLogsMessage"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"targetedModAction"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:808}};i.loc.source={body:'#import "twilight/features/chat/components/viewer-card/viewer-card-mod-logs/fragments/targeted-mod-action-fragment.gql"\n#import "twilight/features/chat/components/viewer-card/viewer-card-mod-logs/fragments/mod-logs-message-fragment.gql"\n#import "twilight/features/chat/components/viewer-card/viewer-card-mod-logs/fragments/automod-caught-message-fragment.gql"\nquery ViewerCardModLogsMessagesBySender($senderID: ID! $channelLogin: String! $includeAutoModCaughtMessages: Boolean! $cursor: Cursor) {\nchannel: user(login: $channelLogin) {\nid\nmodLogs {\nmessagesBySender(senderID: $senderID first: 50 order: DESC includeMessageCount: false includeAutoModCaughtMessages: $includeAutoModCaughtMessages after: $cursor) {\nedges {\nnode {\n...autoModCaughtMessage\n...modLogsMessage\n...targetedModAction\n}\ncursor\n}\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)}))}i.definitions=i.definitions.concat(r(n("jCkG").definitions)),i.definitions=i.definitions.concat(r(n("MfJU").definitions)),i.definitions=i.definitions.concat(r(n("ia6S").definitions));var o={};function s(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),o[e.name.value]=t}})),e.exports=i,e.exports.ViewerCardModLogsMessagesBySender=function(e,t){var n={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=o[t]||new Set,a=new Set,r=new Set;for(i.forEach((function(e){r.add(e)}));r.size>0;){var l=r;r=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(o[e]||new Set).forEach((function(e){r.add(e)})))}))}return a.forEach((function(t){var i=s(e,t);i&&n.definitions.push(i)})),n}(i,"ViewerCardModLogsMessagesBySender")},"35qb":function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"subscriptionProductPriceInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PriceInfo"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currency"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"exponent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isTaxInclusive"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tax"},arguments:[],directives:[]}]}}],loc:{start:0,end:118}};n.loc.source={body:"fragment subscriptionProductPriceInfo on PriceInfo {\ncurrency\nexponent\ntotal\ndescription\nprice\nisTaxInclusive\nid\ntax\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"3Bft":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i={Prime:"prime",Tier1:"1000",Tier2:"2000",Tier3:"3000",Custom:"Custom"}},"3GF+":function(e,t,n){"use strict";var i=n("q1tI"),a=n("X2PJ"),r=n("hnjF");n("jPLR");function o(e){e.stopPropagation()}var s=function(e){return i.createElement(a.f,{fullWidth:e.fullWidth,className:e.className,display:r.d.InlineFlex},i.createElement("div",{className:"viewer-card-drag-cancel",onMouseDown:o},e.children))};n.d(t,"a",(function(){return s}))},"3HtZ":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Mods"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mods"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:107}};n.loc.source={body:"query Mods($login: String!) {\nuser(login: $login) {\nid\nmods(first: 100) {\nedges {\nnode {\nid\nlogin\n}\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.Mods=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"Mods")},"3Ps+":function(e,t){},"3YIm":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SendWhisper"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"SendWhisperInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sendWhisper"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nonce"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"to"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"editedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deletedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"thread"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participants"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"whisperPermissions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"receive"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:352}};n.loc.source={body:"mutation SendWhisper($input: SendWhisperInput!) {\nsendWhisper(input: $input) {\nmessage {\nid\nnonce\ncontent {\ncontent\nemotes {\nid\nemoteID\nsetID\nfrom\nto\n__typename\n}\n__typename\n}\nfrom {\nid\n__typename\n}\nsentAt\neditedAt\ndeletedAt\nthread {\nid\nparticipants {\nid\nself {\nwhisperPermissions {\nreceive\n}\n}\n}\n}\n__typename\n}\nerror {\ncode\n__typename\n}\n__typename\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.SendWhisper=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"SendWhisper")},"3kHA":function(e,t,n){"use strict";var i,a;n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a})),function(e){e[e.Viewer=0]="Viewer",e[e.Vip=1]="Vip",e[e.Moderator=2]="Moderator",e[e.Broadcaster=3]="Broadcaster"}(i||(i={})),function(e){e.InvalidParameters="invalid_parameters",e.MissingParameters="missing_parameters",e.UnrecognizedCommand="unrecognized_command"}(a||(a={}))},"3sMn":function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("1rIY"),o=Object(r.a)("ChatConfigContext",{hideOnboardingPrompts:!1,hideChatInputButtons:!1,hideRoomsDeprecationNotice:!1,hideChatSettings:!1,isSettingsOpen:!1,updateChatConfigState:function(e){return null}}),s=o.context,l=o.withContext,c=function(e){function t(t){var n=e.call(this,t)||this;return n.updateChatConfigState=function(e){null===n.updateFrame&&(n.setState((function(t){return Object(i.__assign)(Object(i.__assign)({},t),e)})),n.updateFrame=setTimeout((function(){n.updateFrame=null}),0))},n.updateFrame=null,n.state={hideOnboardingPrompts:!1,hideChatInputButtons:!1,hideRoomsDeprecationNotice:!1,hideChatSettings:!1,isSettingsOpen:!1,updateChatConfigState:n.updateChatConfigState},n}return Object(i.__extends)(t,e),t.prototype.render=function(){return a.createElement(s.Provider,{value:this.state},this.props.children)},t}(a.Component);n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return c}))},"3tQW":function(e,t,n){"use strict";var i=n("mrSG"),a=n("w09P"),r=n("q1tI"),o=n("/MKj"),s=n("fvjX"),l=n("/7QA"),c=n("yR8l"),d=n("geRD"),u=n("kRBY"),m=n("1rIY"),p=n("F6GT"),h=n("GSWs"),f=n("4+lN"),g="useHighContrastColors",v=Object(m.a)("HighContrastSettingContext",{setValue:function(){return null},value:!0}),b=v.context,k=v.withContext,y=function(e){function t(t){var n=e.call(this,t)||this;n.setValue=function(e){if(n.setState({localOverride:e}),l.m.set(g,e),n.props.isLoggedIn){var t=Object(i.__assign)(Object(i.__assign)({},Object(d.a)({isReadableChatColorsEnabled:e})),{optimisticResponse:{setReadableChatColorsEnabled:{__typename:"SetReadableChatColorsEnabledPayload",isReadableChatColorsEnabled:e}},update:function(t){var n;try{n=t.readQuery({query:f})}catch(e){return}if(n&&n.currentUser&&n.currentUser.chatUISettings){var i=a(n,(function(e){return e.currentUser.chatUISettings.isReadableChatColorsEnabled}),(function(){return e}));t.writeQuery({query:f,data:i})}}});n.props.setReadableChatColors(t)}},n.state={};var r=Object(p.b)().useHighContrastColors;return void 0!==r&&(Object(p.a)("useHighContrastColors"),l.m.set(g,r)),n}return Object(i.__extends)(t,e),t.prototype.render=function(){return r.createElement(b.Provider,{value:{setValue:this.setValue,value:this.value}},this.props.children)},t.prototype.componentDidUpdate=function(e){this.hasData(this.props)&&!this.hasData(e)&&(this.props.data&&this.props.data.currentUser&&this.props.data.currentUser.chatUISettings&&null!==this.props.data.currentUser.chatUISettings.isReadableChatColorsEnabled?l.m.set(g,this.props.data.currentUser.chatUISettings.isReadableChatColorsEnabled):this.setValue(this.value))},t.prototype.hasData=function(e){return e.data&&!e.data.error&&!e.data.loading&&e.data.currentUser&&e.data.currentUser.chatUISettings},Object.defineProperty(t.prototype,"value",{get:function(){return void 0!==this.state.localOverride?this.state.localOverride:this.props.data&&this.props.data.currentUser&&this.props.data.currentUser.chatUISettings&&null!==this.props.data.currentUser.chatUISettings.isReadableChatColorsEnabled?this.props.data.currentUser.chatUISettings.isReadableChatColorsEnabled:l.m.get(g,!0)},enumerable:!0,configurable:!0}),t}(r.Component);var S=Object(s.d)(Object(o.b)((function(e){return{isLoggedIn:Object(u.f)(e)}})),Object(c.a)(f,{skip:function(e){return!e.isLoggedIn}}),Object(c.a)(h,{name:"setReadableChatColors"}))(y);n.d(t,"b",(function(){return k})),n.d(t,"a",(function(){return S}))},"4+lN":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"SyncedSettingsReadableChatColors"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatUISettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isReadableChatColorsEnabled"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:108}};n.loc.source={body:"query SyncedSettingsReadableChatColors {\ncurrentUser {\nid\nchatUISettings {\nisReadableChatColorsEnabled\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.SyncedSettingsReadableChatColors=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"SyncedSettingsReadableChatColors")},"41XU":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelBanner"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bannerImageURL"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:100}};n.loc.source={body:"query ChannelBanner($login: String!) {\nuser(login: $login) {\nid\ndisplayName\nlogin\nbannerImageURL\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.ChannelBanner=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"ChannelBanner")},"4G6/":function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return v}));var i=60,a=60*i,r=24*a,o=7*r,s=4*o+2*r,l=3,c=/([a-zA-Z])([0-9])/gi,d=/([0-9])([a-zA-Z])/gi,u=/^mo(nths?)?/,m=/^w(eeks?)?/,p=/^d(ays?)?/,h=/^h(ours?)?/,f=/^m(inutes?)?/;function g(e){if(!e)return"0s";var t=e,n="";if(t>s){var l=Math.floor(t/s);t-=l*s,n+=l+"mo"}if(t>o){var c=Math.floor(t/o);t-=c*o,n+=c+"w"}if(t>r){var d=Math.floor(t/r);t-=d*r,n+=d+"d"}if(t>a){var u=Math.floor(t/a);t-=u*a,n+=u+"h"}if(t>i){var m=Math.floor(t/i);t-=m*i,n+=m+"m"}return t>0&&(n+=t+"s"),n}function v(e){var t=0,n=e.replace(c,"$1 $2").replace(d,"$1 $2").split(/\W+/);if(n.length%2!=0)return null;for(var g=0;g<n.length;g+=2){var v=n[g],b=parseInt(v,10);if(Number.isNaN(b)||v.length>l)return null;var k=n[g+1];if(k.match(u))t+=b*s;else if(k.match(m))t+=b*o;else if(k.match(p))t+=b*r;else if(k.match(h))t+=b*a;else{if(!k.match(f))return null;t+=b*i}}return t}},"4HoE":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ModUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ModUserInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"modUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"channel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"target"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:125}};n.loc.source={body:"mutation ModUser($input: ModUserInput!){\nmodUser(input: $input) {\nchannel {\nid\nlogin\n}\ntarget {\nid\nlogin\n}\nerror {\ncode\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.ModUser=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"ModUser")},"4IKE":function(e,t,n){},"4L7N":function(e,t,n){"use strict";var i=n("/MKj"),a=n("kRBY"),r=n("mrSG"),o=n("q1tI"),s=n("VwyG"),l=n("X7Ac"),c=n("yR8l"),d=n("MLDe"),u=n("v8tf"),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.render=function(){var e=this,t=this.props.data.clip,n="";if(t&&Array.isArray(t.videoQualities)&&t.videoQualities.length){var i=t.videoQualities[0];i&&i.sourceURL&&(n=i.sourceURL)}var a=this.props,r=a.broadcasterId,c=a.broadcasterLogin,u=a.forceShow;return o.createElement(s.a,{ownerLogin:this.props.broadcasterLogin,permittedRoles:{editor:!0,staff:!0}},(function(i){var a=i.permitted;return n&&(a||u)?o.createElement(l.a,{type:l.c.Download,text:e.props.slug,url:n,onShareClick:t?Object(d.c)(t.id,t.game&&t.game.name,r,c,e.props.pageType):void 0}):null}))},t}(o.Component),p=Object(c.a)(u)(m);var h=Object(i.b)((function(e){var t=Object(a.e)(e);return{userLogin:t?t.login:""}}))(p);n.d(t,"a",(function(){return h}))},"4OCo":function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n("mrSG"),a=n("q1tI"),r=n("/7QA"),o=n("mmRu"),s=n("cpJf"),l=n("Sfdh"),c=n("Tqc9"),d=n("sUnt"),u=n("hnjF"),m=n("Kae6");n("sbEw");function p(e){return e?"@"+e:""}var h=function(e){function t(t){var n=e.call(this,t)||this;return n.submitReply=function(){if(""!==n.state.newReplyText){if(n.props.isCreationCoolDownActive)return n.setState({showCoolDownState:!0}),void(n.props.onError&&n.props.onError(Object(l.a)().messageCreatedTooQuickError));n.props.onReplySubmit(n.state.newReplyText),n.setState({newReplyText:""})}},n.onChange=function(e){e.preventDefault(),n.setState({newReplyText:e.currentTarget.value})},n.onEmoticonClick=function(e){n.setState({newReplyText:n.state.newReplyText+" "+e})},n.onKeyDown=function(e){e.key===c.b&&(e.preventDefault(),n.submitReply()),n.props.onReplyFormClose&&e.key===c.c&&(e.preventDefault(),n.props.onReplyFormClose())},n.setTextareaRef=function(e){return n.textArea=e},n.state={newReplyText:p(t.replyToUserDisplayName),showCoolDownState:!1},n}return Object(i.__extends)(t,e),t.getDerivedStateFromProps=function(e,t){var n=p(e.replyToUserDisplayName);return e.isCreationCoolDownActive||e.replyToUserDisplayName===t.prevReplyToUserDisplayName?e.isCreationCoolDownActive?e.replyToUserDisplayName!==t.prevReplyToUserDisplayName?{prevReplyToUserDisplayName:e.replyToUserDisplayName,newReplyText:n}:null:{showCoolDownState:!1}:{showCoolDownState:!1,prevReplyToUserDisplayName:e.replyToUserDisplayName,newReplyText:n}},t.prototype.render=function(){return a.createElement(d.a,{className:this.props.classNames,position:u.j.Relative},a.createElement(m.a,{error:this.state.showCoolDownState,maxLength:512,noResize:!0,onChange:this.onChange,onKeyDown:this.onKeyDown,placeholder:Object(r.d)("Reply","ReplyForm"),refDelegate:this.setTextareaRef,value:this.state.newReplyText}),a.createElement(o.a,{attachRight:!0,attachTop:!0,channelOwnerID:this.props.videoOwnerID,emotePickerSource:s.a.VodChat,inputRef:this.textArea,onClickEmote:this.onEmoticonClick,position:u.j.Absolute}))},t}(a.Component)},"4ilF":function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("/MKj"),o=n("fvjX"),s=n("yR8l"),l=n("x7UT"),c=n("0Log"),d=n("geRD"),u=n("2Ygb"),m=n("/aPz"),p=n("kRBY"),h=n("4HoE"),f=n("FAYk"),g=n("6ovE"),v=n("a6LY"),b=n("H82h"),k=n("qMs1");function y(){return function(e){var t,n=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.modUser=function(){var t=e.props,n=t.channelID,i=t.userID,a=t.modUserMutation;return n&&i&&a?a(Object(d.a)({channelID:n,targetID:i})).then((function(t){return e.updateUserModStatusQuery(!0),e.trackChatLoginModerationEvent(v.a.ModUser),t})):Promise.reject(new Error("channelID or userID not provided"))},e.unmodUser=function(){var t=e.props,n=t.channelID,i=t.userID,a=t.unmodUserMutation;return n&&i&&a?a(Object(d.a)({channelID:n,targetID:i})).then((function(t){return e.updateUserModStatusQuery(!1),e.trackChatLoginModerationEvent(v.a.UnmodUser),t})):Promise.reject(new Error("channelID or userID not provided"))},e.updateUserModStatusQuery=function(t){var n=e.props,i=n.channelID,a=n.currentUserID,r=n.userID;Object(d.i)(g,{channelID:i,userID:r},(function(e){var n=e&&e.user;return n?{user:{id:n.id,login:n.login,__typename:n.__typename,isModerator:t}}:e})),a===r&&e.updateSelfModStatusQuery(t)},e.updateSelfModStatusQuery=function(t){var n=e.props,a=n.channelID,r=n.currentUserID;n.userID===r&&Object(d.i)(k,{channelID:a},(function(e){var n=e&&e.user,a=n&&n.self;return n&&a?{user:{id:n.id,__typename:n.__typename,self:Object(i.__assign)(Object(i.__assign)({},a),{isModerator:t})}}:e}))},e.trackChatLoginModerationEvent=function(t){var n=e.props.userModStatusData&&e.props.userModStatusData.user&&e.props.userModStatusData.user.id,i=e.props.channelID,a=e.props.source;n&&i&&a&&Object(b.a)(t,i,n,a)},e}return Object(i.__extends)(n,t),n.prototype.componentDidUpdate=function(e){if((!e.pubsub.messages.moderatorActions||e.pubsub.messages.moderatorActions&&e.pubsub.messages.moderatorActions!==this.props.pubsub.messages.moderatorActions)&&this.props.pubsub.messages.moderatorActions)switch(this.props.pubsub.messages.moderatorActions.type){case c.PubsubMessageType.ModeratorAdded:this.updateUserModStatusQuery(!0);break;case c.PubsubMessageType.ModeratorRemoved:this.updateUserModStatusQuery(!1);break;default:return}},n.prototype.render=function(){var t={userModStatus:this.props.userModStatusData,modUser:this.props.channelID&&this.props.userID&&this.modUser||void 0,unmodUser:this.props.channelID&&this.props.userID&&this.unmodUser||void 0};return a.createElement(e,Object(i.__assign)({},this.props,t))},n.displayName=Object(u.a)(n.name,e),n}(a.Component);return Object(o.d)(Object(r.b)((function(e){var t=Object(p.e)(e);return{currentUserID:t&&t.id}})),Object(s.a)(h,{name:"modUserMutation",skip:function(e){return!(e.channelID&&e.userID)}}),Object(s.a)(f,{name:"unmodUserMutation",skip:function(e){return!(e.channelID&&e.userID)}}),Object(s.a)(g,{name:"userModStatusData",options:function(e){return{variables:{channelID:e.channelID,userID:e.userID}}},skip:function(e){return!(e.channelID&&e.userID)}}),Object(s.a)(k,{name:"selfModStatusData",options:function(e){return{variables:{channelID:e.channelID}}},skip:function(e){return!(e.channelID&&e.userID)||e.userID!==e.currentUserID}}),Object(l.a)([{topic:function(e){return Object(m.A)(e.userID||"",e.channelID||"")},mapMessageTypesToProps:(t={},t[c.PubsubMessageType.ModeratorAdded]="moderatorActions",t[c.PubsubMessageType.ModeratorRemoved]="moderatorActions",t),skipMessage:function(e,t){var n=e;return!t.userID||n.data.target_user_id!==t.userID}}]))(n)}}n.d(t,"a",(function(){return y}))},"4qQ0":function(e,t,n){"use strict";var i,a;n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),function(e){e.BitsViolation="bits_violation",e.ChatBanEvasion="chat_ban_evasion",e.Cheating="cheating",e.Gore="gore",e.Harassment="harassment",e.Harm="harm",e.HatefulConduct="hateful_conduct",e.Impersonation="impersonation",e.Miscategorized="miscategorized",e.OffensiveUsername="offensive_username",e.Other="other",e.Porn="porn",e.Prohibited="prohibited",e.SelfHarm="selfharm",e.SexualContent="sexual_content",e.SexualViolence="sexual_violence",e.Spam="spam",e.TerrorismMassViolence="terrorism_mass_violence",e.TosBanEvasion="tos_ban_evasion",e.Underaged="underaged"}(i||(i={})),function(e){e[e.Unsubmitted=0]="Unsubmitted",e[e.Success=1]="Success",e[e.FormError=2]="FormError",e[e.MutationError=3]="MutationError",e[e.UserError=4]="UserError"}(a||(a={}))},"4w0E":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Chat_BanUserFromChatRoom"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"BanUserFromChatRoomInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"banUserFromChatRoom"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ban"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bannedUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"expiresAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isPermanent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"moderator"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"minTimeoutDurationSeconds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"maxTimeoutDurationSeconds"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:289}};n.loc.source={body:"mutation Chat_BanUserFromChatRoom($input: BanUserFromChatRoomInput!) {\nbanUserFromChatRoom(input: $input) {\nban {\nbannedUser {\nid\nlogin\ndisplayName\n}\ncreatedAt\nexpiresAt\nisPermanent\nmoderator {\nid\nlogin\ndisplayName\n}\n}\nerror {\ncode\nminTimeoutDurationSeconds\nmaxTimeoutDurationSeconds\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.Chat_BanUserFromChatRoom=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"Chat_BanUserFromChatRoom")},"4zGI":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Chat_DenyRejectedCheerMessage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DenyRejectedCheerInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"denyRejectedCheer"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:115}};n.loc.source={body:"mutation Chat_DenyRejectedCheerMessage($input: DenyRejectedCheerInput!) {\ndenyRejectedCheer(input: $input) {\nid\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.Chat_DenyRejectedCheerMessage=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"Chat_DenyRejectedCheerMessage")},"52dQ":function(e,t,n){},"5Ijs":function(e,t,n){"use strict";var i,a=n("fvjX"),r=n("hbnN"),o=n("/7QA"),s=n("yR8l"),l=n("mrSG"),c=n("q1tI"),d=n("eJ65"),u=n("b7S+"),m=n("dEDE"),p=n("C7sF"),h=n("ygYM"),f=n("sUnt"),g=n("BQs+"),v=n("EuPq"),b=n("KYAw"),k=n("+80q"),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.__extends)(t,e),t.prototype.render=function(){var e=this,t=Object(b.a)(this.props.collection.id);return c.createElement("div",null,c.createElement(k.a,null,Object(o.d)("Collection Link","VideoShareBox")),c.createElement(v.a,{onClick:function(){e.props.onClick(t)},value:t}))},t}(c.Component),S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickHandler=function(e){var n={location:t.props.tracking.location,platform:g.a.Link,shareURL:e};Object(g.b)(t.props.collection,n,o.p.apollo.client)},t}return Object(l.__extends)(t,e),t.prototype.render=function(){return c.createElement(y,Object(l.__assign)({},this.props,{onClick:this.onClickHandler}))},t}(c.Component);!function(e){e[e.Collection=0]="Collection",e[e.Video=1]="Video"}(i||(i={}));var C=n("EdhP"),E=n("2xye"),w=n("6zXJ");var O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.__extends)(t,e),t.prototype.render=function(){var e=this,t=this.props.content,n=this.getEmbedPlayerContentURL(t);return c.createElement("div",null,c.createElement(k.a,null,Object(o.d)("Embed Video","VideoShareBox")),c.createElement(v.a,{onClick:function(){e.props.onClick(n)},value:this.getEmbedPlayerCode(t)}))},t.prototype.getEmbedPlayerCode=function(e){var t=function(e,t){var n={autoplay:!1};switch(e.type){case i.Collection:e.currentVideo?(n.video=e.currentVideo.id,n.t=t?Object(w.a)(t):void 0):n.collection=e.id;break;case i.Video:n.video=e.id,n.t=t?Object(w.a)(t):void 0}return n}(e,null!==this.props.selectedVideoStartTime?this.props.selectedVideoStartTime:void 0),n=e.owner.displayName,a=e.title,r=Object(o.d)("Watch {title} from {displayName} on www.twitch.tv",{displayName:n,title:a},"VideoShareBox");return Object(C.b)(t,{textLink:{url:this.getEmbedPlayerContentURL(e),text:r},allowScrolling:!1,allowFullscreen:!0})},t.prototype.getEmbedPlayerContentURL=function(e){switch(e.type){case i.Collection:return e.currentVideo?Object(b.b)(e.currentVideo.id,{tt_medium:E.PageviewMedium.VideoEmbed,tt_content:E.PageviewContent.TextLink,t:this.props.selectedVideoStartTime}):Object(b.a)(e.id,{tt_medium:E.PageviewMedium.VideoEmbed,tt_content:E.PageviewContent.TextLink});case i.Video:return Object(b.b)(e.id,{tt_medium:E.PageviewMedium.VideoEmbed,tt_content:E.PageviewContent.TextLink,t:this.props.selectedVideoStartTime});default:return e}},t}(c.Component),D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickHandler=function(e){var n=t.props.content;switch(n.type){case i.Collection:n.currentVideo?t.trackVideoShare(e,n.currentVideo):t.trackCollectionShare(e,n);break;case i.Video:t.trackVideoShare(e,n);break;default:return n}},t}return Object(l.__extends)(t,e),t.prototype.render=function(){return c.createElement(O,Object(l.__assign)({},this.props,{onClick:this.onClickHandler}))},t.prototype.trackCollectionShare=function(e,t){var n={location:this.props.tracking.location,platform:g.a.Embed,shareURL:e};Object(g.b)(t,n,o.p.apollo.client)},t.prototype.trackVideoShare=function(e,t){var n={location:this.props.tracking.location,platform:g.a.Embed,shareURL:e};Object(g.c)(t,n,o.p.apollo.client)},t}(c.Component),N=n("X7Ac"),_=n("hnjF"),I=[{type:N.c.Twitter,selector:"twitter-button"},{type:N.c.Facebook,selector:"fb-button"},{type:N.c.VKontakte,selector:"vk-button"},{type:N.c.Reddit,selector:"reddit-button"},{type:N.c.Copy,selector:"copy-link-button"}],M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.__extends)(t,e),t.prototype.render=function(){var e=this,t=this.props.content,n=this.getContentURL(t),i=this.getSocialShareContextTitle(t),a=I.map((function(t){return c.createElement(N.a,{"data-test-selector":t.selector,key:t.type,onShareClick:function(t){e.props.onClick(n,t)},text:i,type:t.type,url:n})}));return c.createElement(f.a,{display:_.d.Flex,justifyContent:_.h.Between},a)},t.prototype.getSocialShareContextTitle=function(e){return Object(o.d)("Check out {title} from {displayName} on www.twitch.tv",{displayName:e.owner.displayName,title:e.title},"VideoShareBox")},t.prototype.getContentURL=function(e){switch(e.type){case i.Collection:return e.currentVideo?Object(b.b)(e.currentVideo.id,{collection:e.id,t:this.props.selectedVideoStartTime}):Object(b.a)(e.id);case i.Video:return Object(b.b)(e.id,{t:this.props.selectedVideoStartTime});default:return e}},t}(c.Component),j=function(e){switch(e){case N.c.Twitter:return g.a.Twitter;case N.c.Reddit:return g.a.Reddit;case N.c.VKontakte:return g.a.VKontakte;case N.c.Facebook:return g.a.Facebook;case N.c.Copy:return g.a.Copy;case N.c.CopyInput:return g.a.Link;case N.c.Download:return g.a.Download;case N.c.Embed:return g.a.Embed;default:return e}},T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickHandler=function(e,n){var a=t.props.content;switch(a.type){case i.Collection:a.currentVideo?t.trackVideoShare(e,a.currentVideo,n,a.id):t.trackCollectionShare(e,a,n);break;case i.Video:t.trackVideoShare(e,a,n);break;default:return a}},t}return Object(l.__extends)(t,e),t.prototype.render=function(){return c.createElement(M,Object(l.__assign)({},this.props,{onClick:this.onClickHandler}))},t.prototype.trackCollectionShare=function(e,t,n){var i={location:this.props.tracking.location,platform:j(n),shareURL:e};Object(g.b)(t,i,o.p.apollo.client)},t.prototype.trackVideoShare=function(e,t,n,i){var a={collectionID:i,location:this.props.tracking.location,platform:j(n),shareURL:e};Object(g.c)(t,a,o.p.apollo.client)},t}(c.Component),P=n("hyVY"),L=n("kqSx"),R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onShareTimestampClick=function(e){void 0!==t.props.currentVideoTime&&t.props.onVideoStartTimeChange(e.currentTarget.checked?t.props.currentVideoTime:void 0)},t}return Object(l.__extends)(t,e),t.prototype.render=function(){var e=this,t={};this.props.collectionID&&(t.collection=this.props.collectionID),this.props.selectedVideoStartTime&&(t.t=this.props.selectedVideoStartTime);var n=Object(b.b)(this.props.video.id,t);return c.createElement("div",null,c.createElement(k.a,null,Object(o.d)("Video Link","VideoShareBox")),c.createElement(v.a,{onClick:function(){e.props.onInputClick(n)},value:n}),this.renderCurrentVideoOffsetLinkOption())},t.prototype.renderCurrentVideoOffsetLinkOption=function(){if(void 0===this.props.currentVideoTime)return null;var e=this.props.selectedVideoStartTime||this.props.currentVideoTime,t=Object(P.b)(e);return c.createElement(f.a,{padding:{top:.5}},c.createElement(L.a,{id:"video-share-timestamp-toggle",label:Object(o.d)("Skip to {deeplinkTimestamp}",{deeplinkTimestamp:t},"VideoShareBox"),"data-a-target":"video-share-timestamp-toggle","data-a-value":void 0!==this.props.selectedVideoStartTime,checked:!!this.props.selectedVideoStartTime,onChange:this.onShareTimestampClick}))},t}(c.Component),F=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickHandler=function(e,n){var i={collectionID:n,location:t.props.tracking.location,platform:g.a.Link,shareURL:e};Object(g.c)(t.props.video,i,o.p.apollo.client)},t}return Object(l.__extends)(t,e),t.prototype.render=function(){return c.createElement(R,Object(l.__assign)({},this.props,{onInputClick:this.onClickHandler}))},t}(c.Component),U=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.toggleTimer=function(e){t.props.getCurrentVideoTime&&!e&&(t.updateCurrentTime(),t.getTimeTimer=setInterval(t.updateCurrentTime,1e3))},t.updateCurrentTime=function(){if(t.props.getCurrentVideoTime){var e=t.props.getCurrentVideoTime();t.setState({currentTime:e})}},t.onVideoStartTimeChangeHandler=function(e){t.setState({selectedVideoStartTime:e})},t}return Object(l.__extends)(t,e),t.prototype.componentDidUpdate=function(){this.props.currentVideoTime===this.state.currentTime||this.props.getCurrentVideoTime||this.setState({currentTime:this.props.currentVideoTime})},t.prototype.componentWillUnmount=function(){this.getTimeTimer&&clearTimeout(this.getTimeTimer)},t.prototype.render=function(){var e=null;this.props.content&&(e=this.shareBalloonContent(this.props.content));var t=Object(o.d)("Share","VideoShareBox"),n={label:t,direction:u.c.Bottom};return c.createElement(d.a,{onToggle:this.toggleTimer,tooltipProps:n},c.createElement(m.a,{disabled:!this.props.content,icon:p.a.Share,type:this.props.buttonType,ariaLabel:t},t),c.createElement(h.a,{direction:this.props.balloonDirection,size:h.c.Small},e))},t.prototype.shareBalloonContent=function(e){return c.createElement(f.a,{padding:1},c.createElement(T,{content:e,selectedVideoStartTime:this.state.selectedVideoStartTime,tracking:this.props.tracking}),this.renderCollectionShareInput(e),this.renderVideoShareInput(e),this.renderEmbedPlayerInput(e))},t.prototype.renderCollectionShareInput=function(e){return e.type!==i.Collection?null:c.createElement(f.a,{padding:{top:1}},c.createElement(S,{collection:e,tracking:this.props.tracking}))},t.prototype.renderVideoShareInput=function(e){var t,n;if(e.type===i.Collection){if(!e.currentVideo)return null;n=e.id,t=e.currentVideo}else t=e;return c.createElement(f.a,{padding:{top:1}},c.createElement(F,{collectionID:n,currentVideoTime:this.state.currentTime,onVideoStartTimeChange:this.onVideoStartTimeChangeHandler,selectedVideoStartTime:this.state.selectedVideoStartTime,tracking:this.props.tracking,video:t}))},t.prototype.renderEmbedPlayerInput=function(e){return c.createElement(f.a,{padding:{top:1}},c.createElement(D,{content:e,selectedVideoStartTime:this.state.selectedVideoStartTime,tracking:this.props.tracking}))},t}(c.Component),x=n("gFHd"),A=Object(r.a)((function(e){if(!e.owner||!e.title)return null;return{type:i.Video,id:e.id,owner:{id:e.owner.id,displayName:e.owner.displayName||""},title:e.title}}));var B=Object(r.a)((function(e,t){var n;if(t){var a=A(t);if(!a)return null;n=a}if(!e.owner||!e.title)return null;return{type:i.Collection,id:e.id,owner:{id:e.owner.id,displayName:e.owner.displayName||""},title:e.title,currentVideo:n}}));var V=Object(r.a)((function(e){var t=e.data,n={content:void 0};if(t.loading)return n;if(t.error)return o.k.errorAndReport(t.error,"VideoShareBoxContainer"),n;if(t.collection)return{content:B(t.collection,t.video)||void 0};if(t.video)return{content:A(t.video)||void 0};return n}));var H=Object(a.d)(Object(s.c)(x,{options:function(e){return{variables:{collectionID:e.content.collectionID||"",hasCollection:!!e.content.collectionID,hasVideo:!!e.content.videoID,videoID:e.content.videoID||""}}},props:V}))(U);n.d(t,"a",(function(){return H}))},"5Siz":function(e,t,n){"use strict";var i;n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a})),function(e){e.PopoutChat="popout_chat",e.Chat="chat",e.LiveDashButton="live_dashboard_button",e.LiveDashHotkey="live_dashboard_hotkey",e.LiveDashChat="live_dashboard_chat"}(i||(i={}));var a=140},"5aDA":function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ChannelPollContext_VoteInPoll"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"VoteInPollInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"voteInPoll"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"voter"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"pollVoter"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:201}};i.loc.source={body:'#import "twilight/features/polls/models/poll-voter-fragment.gql"\nmutation ChannelPollContext_VoteInPoll($input: VoteInPollInput!) {\nvoteInPoll(input: $input) {\nvoter {\n...pollVoter\n}\nerror {\ncode\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("INxu").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})));var r={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),r[e.name.value]=t}})),e.exports=i,e.exports.ChannelPollContext_VoteInPoll=function(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=r[t]||new Set,a=new Set,s=new Set;for(i.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(r[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(t){var i=o(e,t);i&&n.definitions.push(i)})),n}(i,"ChannelPollContext_VoteInPoll")},"5goO":function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("/7QA"),o=n("SHn+"),s=n("vCsY"),l=function(e){return a.createElement(o.a,Object(i.__assign)({linkTo:"/team/"+e.name,title:e.displayName,label:Object(r.d)("Team:","TeamLinkLabel")},Object(s.a)(e)))};n.d(t,"a",(function(){return l}))},"5in9":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelRoot_ChannelInfoBar"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"primaryTeam"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"profileViewCount"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:133}};n.loc.source={body:"query ChannelRoot_ChannelInfoBar($login: String!) {\nuser(login: $login) {\nid\nprimaryTeam {\nid\ndisplayName\nname\n}\nprofileViewCount\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.ChannelRoot_ChannelInfoBar=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"ChannelRoot_ChannelInfoBar")},"5xw2":function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d}));var i=n("mrSG"),a=n("/7QA"),r=n("HSqT"),o=n("+U0Y"),s="languageDirectoryFilters";function l(e,t){var n=this;return function(r){return Object(i.__awaiter)(n,void 0,void 0,(function(){var n,l;return Object(i.__generator)(this,(function(i){return n=new Set(d()),t?n.add(e):n.delete(e),l=Array.from(n),a.m.set(s,l),r(Object(o.b)(l)),[2]}))}))}}function c(){var e=this;return function(t){return Object(i.__awaiter)(e,void 0,void 0,(function(){return Object(i.__generator)(this,(function(e){return a.m.set(s,[]),t(Object(o.b)([])),[2]}))}))}}function d(){return a.m.get(s,[]).filter((function(e){return r.a.has(e)}))}},"60o1":function(e,t,n){"use strict";function i(e,t){var n=e,i=!1;return n?n.split("").map((function(e){return e.charCodeAt(0)>127})).reduce((function(e,t){return e||t}))&&(i=!0):n=t,{userDisplayName:n,isIntl:i}}n.d(t,"a",(function(){return i}))},"6C1D":function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("/7QA"),o=n("1rIY"),s=n("3kHA"),l=n("WytW"),c=r.p.logger.withCategory("chat-commands"),d=/^[/.]([a-z0-9]+)(.+)?$/i,u=Object(o.a)("ChatCommandContext",{getCommands:function(e){return[]},addCommand:function(e){return null},removeCommand:function(e){return null},handleCommand:function(e,t){return{handled:!1}},prevCommand:null,clearPrevCommand:function(){return null}}),m=u.context,p=u.withContext,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={commands:{},prevCommand:null,prevPropsChannelLogin:t.props.channelLogin},t.getCommands=function(e){for(var n=[],i=0,a=Object.values(t.state.commands);i<a.length;i++){var r=a[i];!r.hidden&&e>=r.permissionLevel&&n.push(r)}return n},t.addCommand=function(e){t.setState((function(t){var n;return{commands:Object(i.__assign)(Object(i.__assign)({},t.commands),(n={},n[e.name]=e,n))}}))},t.removeCommand=function(e){t.setState((function(t){var n=Object(i.__assign)({},t.commands);return delete n[e.name],{commands:n}}))},t.handleCommand=function(e,n){var i=e.match(d);if(!i)return{handled:!1};var a=i[1],r=t.state.commands[a.toLowerCase()],o=(i[2]||"").trim();if(t.setPrevCommand({message:e,command:a.toLowerCase(),args:o}),!r)return{command:a,handled:!1};if(Object(l.m)(r)===o)return{command:a,handled:!0,result:{deferred:Promise.resolve({notice:r.helpText,error:s.a.MissingParameters})}};var u={channelLogin:n},m=r.handler;if(!m)return{command:a,handled:!1};try{return{command:a,handled:!0,result:m(o,u)}}catch(e){return c.warn("Exception thrown from chat command handler",{command:r,err:e}),{command:a,handled:!1}}},t.setPrevCommand=function(e){t.setState({prevCommand:e})},t.clearPrevCommand=function(){t.setState({prevCommand:null})},t}return Object(i.__extends)(t,e),t.getDerivedStateFromProps=function(e,t){return e.channelLogin!==t.prevPropsChannelLogin?{commands:{},prevCommand:null,prevPropsChannelLogin:e.channelLogin}:null},t.prototype.render=function(){return a.createElement(m.Provider,{value:{getCommands:this.getCommands,addCommand:this.addCommand,removeCommand:this.removeCommand,handleCommand:this.handleCommand,prevCommand:this.prevCommand,clearPrevCommand:this.clearPrevCommand}},this.props.children)},Object.defineProperty(t.prototype,"prevCommand",{get:function(){return this.state.prevCommand},enumerable:!0,configurable:!0}),t}(a.Component);n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return h}))},"6JW5":function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"watchPartySession"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"WatchParty"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"progress"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"watchPartyProgress"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"gti"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewersCount"},arguments:[],directives:[]}]}}],loc:{start:0,end:186}};i.loc.source={body:'#import "twilight/features/watch-party/models/watch-party-progress-fragment.gql"\nfragment watchPartySession on WatchParty {\nid\nprogress {\n...watchPartyProgress\n}\nstate\ngti\nviewersCount\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("1DRi").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)}))),e.exports=i},"6ZXE":function(e,t,n){},"6bwK":function(e,t,n){},"6j5V":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("RcPG");function a(e){return{type:i.a.Text,content:e}}},"6ovE":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"UserModStatus"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"userID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isModerator"},arguments:[{kind:"Argument",name:{kind:"Name",value:"channelID"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}}],directives:[]}]}}]}}],loc:{start:0,end:124}};n.loc.source={body:"query UserModStatus ($userID: ID! $channelID: String!) {\nuser(id: $userID) {\nid\nlogin\nisModerator(channelID: $channelID)\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.UserModStatus=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"UserModStatus")},"6wGa":function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("/MKj"),o=n("fvjX"),s=n("/7QA"),l=n("esZd"),c=n("xQnr"),d=n("geRD"),u=n("DMoW"),m=n("kRBY"),p=n("TApp"),h=n("a6LY"),f=n("yR8l"),g=n("H82h"),v=n("gO1k");var b=n("2EzP");var k=n("vLL+"),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.banUser=function(){return t.props.banUser()},t.timeoutUser=function(){return t.props.timeoutUser()},t.unbanUser=function(){return t.props.unbanUser()},t.deleteMessage=function(){return Object(i.__awaiter)(t,void 0,void 0,(function(){var e,t,n,a,r,o;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:if(this.props.confirmModerationAction&&!this.props.confirmModerationAction())return[3,4];if(e=Object(s.d)("Unable to delete message.","ModerationIcons"),!this.props.channelID)return this.surfaceError(e),[2];i.label=1;case 1:return i.trys.push([1,3,,4]),t={channelID:this.props.channelID,messageID:this.props.messageID},[4,this.props.deleteChatMessageMutation(Object(d.a)(t))];case 2:return(n=i.sent().data)?((a=n.deleteChatMessage)&&a.responseCode!==u.nb.SUCCESS&&(r=a.message&&a.message.sender&&a.message.sender.displayName||this.props.senderLogin,o=function(e,t){switch(e){case u.nb.FORBIDDEN:return Object(s.d)("You don't have permission to delete messages.","DeleteChatMessageErrorCode");case u.nb.TARGET_IS_BROADCASTER:return Object(s.d)("You cannot delete the broadcaster's messages.","DeleteChatMessageErrorCode");case u.nb.TARGET_IS_MODERATOR:return Object(s.d)("You cannot delete messages from moderator {senderDisplayName}",{senderDisplayName:t},"DeleteChatMessageErrorCode");case u.nb.SUCCESS_STAFF:return Object(s.d)("You deleted a message from staff {senderDisplayName}. Please email support@twitch.tv if a staff member is being abusive.",{senderDisplayName:t},"DeleteChatMessageErrorCode");default:throw new Error("Unrecognized operation result")}}(a.responseCode,r),this.surfaceError(o)),[3,4]):(this.surfaceError(e),[2]);case 3:return i.sent(),this.surfaceError(e),[3,4];case 4:return[2]}}))}))},t.surfaceError=function(e){t.props.surfaceError&&t.props.surfaceError(e)},t}return Object(i.__extends)(t,e),t.prototype.render=function(){return this.props.sessionUser&&this.props.sessionUser.id===this.props.targetUserID?null:a.createElement(k.a,{isMessageDeleted:this.props.isMessageDeleted,isMessageBanned:this.props.isMessageBanned,canDelete:this.props.canDelete,onBanUser:this.banUser,onTimeoutUser:this.timeoutUser,onUnbanUser:this.unbanUser,onDelete:this.deleteMessage,senderLogin:this.props.senderLogin,renderNewVersion:this.props.renderNewVersion})},t}(a.Component);var S=Object(o.d)(b.a,Object(l.a)((function(e){return Object(i.__assign)(Object(i.__assign)({},e),{targetID:e.targetUserID,source:h.b.QuickModButtons,surfaceError:function(t){e.messageHandlerAPI&&e.messageHandlerAPI.handleMessage(Object(p.a)(t))}})})),c.a,function(){var e=this;return Object(f.a)(v,{props:function(t){return{deleteChatMessageMutation:function(n){return Object(i.__awaiter)(e,void 0,void 0,(function(){var e;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:if(!t.mutate)return[3,5];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t.mutate(n)];case 2:return(e=i.sent()).data&&e.data.deleteChatMessage&&e.data.deleteChatMessage.message&&e.data.deleteChatMessage.message.sender&&Object(g.a)(h.a.DeleteMessage,n.variables.input.channelID,e.data.deleteChatMessage.message.sender.id,h.b.QuickModButtons),[2,{data:e.data}];case 3:throw i.sent(),new Error("Unable to delete message");case 4:return[3,6];case 5:throw new Error("Delete chat message mutation is not ready");case 6:return[2]}}))}))}}}})}(),Object(r.b)((function(e){return{sessionUser:Object(m.e)(e)}})))(y);n.d(t,"a",(function(){return S}))},"7JxC":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("q1tI"),a=n("sUnt"),r=n("PL8s"),o=n("uOxs"),s=function(){for(var e=[],t=0;t<9;t++){var n=i.createElement(a.a,{padding:{bottom:2},key:t},i.createElement(r.a,{height:320,width:320}));e.push(n)}return i.createElement(o.a,{center:!0,noGrow:!0,childWidth:o.b.Large,gutterSize:o.c.ExtraSmall,placeholderItems:9},e)}},"7NxT":function(e,t,n){"use strict";n("DLhE")},"7SjK":function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("b5vT"),o=n("sUnt"),s=n("hnjF"),l=(n("VrOd"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClickEmote=function(e){t.props.onClickEmote&&t.props.onClickEmote(e,t.props.context)},t}return Object(i.__extends)(t,e),t.prototype.render=function(){var e=this,t=this.props.emotes.map((function(t,n){return a.createElement(o.a,{key:"emote-button-padder-"+t.id+"--"+n,padding:{x:e.props.spaced?.5:0}},a.createElement(r.a,{key:"emote-button-"+t.id+"--"+n,emote:t,isCriticalImage:0===n,locked:e.props.locked||t.isLocked,onClick:e.props.locked?void 0:e.handleClickEmote}))}));return a.createElement(o.a,{display:s.d.Flex,flexWrap:s.f.Wrap},t)},t}(a.PureComponent));n.d(t,"a",(function(){return l}))},"7qXh":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("q1tI"),a=n("/7QA"),r=n("sUnt"),o=n("hnjF"),s=n("7uM4"),l=n("C7sF"),c=n("+80q"),d=n("X2PJ"),u=function(){return i.createElement(r.a,{flexGrow:1,padding:{x:1,y:2}},i.createElement(r.a,{alignItems:o.b.Center,display:o.d.Flex,justifyContent:o.h.Center,textAlign:o.l.Center,flexDirection:o.e.Column},i.createElement(r.a,null,i.createElement(s.a,{asset:l.a.DeadGlitch,width:36,height:36})),i.createElement(r.a,{padding:{x:3,y:0},margin:{x:3,y:0}},i.createElement(c.a,{color:d.c.Alt2,fontSize:d.d.Size5},Object(a.d)("There was an unexpected error while loading. Please try again later.","ViewerCardModLogsFeature")))))}},"82xK":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("q1tI"),a=n("/7QA"),r=n("dEDE"),o=function(e){return i.createElement(r.a,{type:r.d.Text,onClick:e.onClick},Object(a.d)("Show more replies...","chomments.moderation.showMoreRepliesAction"))}},"8D7W":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PollsEnabled"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"channel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isAffiliate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isPartner"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:107}};n.loc.source={body:"query PollsEnabled($login: String!) {\nchannel: user(login: $login) {\nid\nroles {\nisAffiliate\nisPartner\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.PollsEnabled=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"PollsEnabled")},"8QXX":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"RecordReferralMissionExperiment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"RecordMissionReferralExperimentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"recordMissionReferralExperiment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:154}};n.loc.source={body:"mutation RecordReferralMissionExperiment($input: RecordMissionReferralExperimentInput!) {\nrecordMissionReferralExperiment(input: $input) {\nuser {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.RecordReferralMissionExperiment=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"RecordReferralMissionExperiment")},"8SX2":function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("8Ad5"),o=n("fezU"),s=n("+80q"),l=n("X2PJ"),c=(n("rVcM"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.openViewerCard=function(e){t.isKeyboardEvent(e)&&e.keyCode!==r.a.Space&&e.keyCode!==r.a.Enter||t.props.onUsernameClick(t.props.login,t.props.sourceType,t.props.contentID,e.currentTarget.getBoundingClientRect().bottom)},t}return Object(i.__extends)(t,e),t.prototype.render=function(){return a.createElement("span",{className:"chatter-name",onClick:this.openViewerCard,onKeyDown:this.openViewerCard,role:"button",tabIndex:0},a.createElement(s.a,{bold:!0,color:l.c.Base,type:s.e.Span},this.props.children))},t.prototype.isKeyboardEvent=function(e){return void 0!==e.keyCode},t}(a.Component));var d=Object(o.b)((function(e){return{onUsernameClick:e.onShowViewerCard}}))(c);n.d(t,"a",(function(){return d}))},"8XBm":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UnlockRandomSubscriberEmote"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnlockRandomSubscriberEmoteInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unlockRandomSubscriberEmote"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"balance"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emote"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:173}};n.loc.source={body:"mutation UnlockRandomSubscriberEmote($input: UnlockRandomSubscriberEmoteInput!) {\nunlockRandomSubscriberEmote (input: $input) {\nbalance\nemote {\nid\ntoken\n}\nerror {\ncode\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.UnlockRandomSubscriberEmote=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"UnlockRandomSubscriberEmote")},"8gBY":function(e,t,n){},"8in3":function(e,t,n){"use strict";var i=n("fezU"),a=n("mrSG"),r=n("TSYQ"),o=n("q1tI"),s=n("ZS2+"),l=n("uy8m"),c=n("4rCz"),d=n("SSXq"),u=n("1MDS"),m=n("0Hf3"),p=n("o8Ti"),h=n("3GF+"),f=n("oK83"),g=n("Ws8v"),v=n("X2PJ"),b=n("XQbB"),k=n("7d/q"),y=n("C7sF"),S=n("hnjF"),C=n("sUnt"),E=(n("2D+f"),function(e){function t(t){var i=e.call(this,t)||this;return i.ViewerCard=s.a.wrap((function(){return n.e(69).then(n.bind(null,"q3Qz"))}),"ViewerCard",{placeholder:o.createElement(g.a,{background:v.a.Base,fullHeight:!0,fullWidth:!0,padding:2},o.createElement(b.a,{fillContent:!0})),onRendered:function(){return i.setState({viewerCardComponentLoaded:!0})}}),i.ExtensionMessageCard=s.a.wrap((function(){return n.e(64).then(n.bind(null,"n3tJ"))}),"ExtensionMessageCard",{placeholder:o.createElement(g.a,{background:v.a.Base,fullHeight:!0,fullWidth:!0,padding:2},o.createElement(b.a,{fillContent:!0})),onRendered:function(){return i.setState({viewerCardComponentLoaded:!0})}}),i.EmoteCard=s.a.wrap((function(){return n.e(63).then(n.bind(null,"unmP"))}),"EmoteCard",{placeholder:o.createElement(g.a,{fullHeight:!0,fullWidth:!0,padding:2},o.createElement(b.a,{fillContent:!0})),onRendered:function(){return i.setState({viewerCardComponentLoaded:!0})}}),i.onDragStart=function(e){i.cardContainerRef&&i.layerRef&&e.button===l.a.Left&&(window.addEventListener("mousemove",i.onDrag),window.addEventListener("mouseup",i.onDragEnd),window.addEventListener("selectstart",i.cancelSelection),i.setState({dragging:!0}),i.initCardX=i.cardContainerRef.offsetLeft,i.initCardY=i.cardContainerRef.offsetTop,i.initMouseX=e.clientX,i.initMouseY=e.clientY)},i.onDrag=function(e){i.nextTop=i.initCardY+e.clientY-i.initMouseY,i.nextLeft=i.initCardX+e.clientX-i.initMouseX,i.rafHandle||(i.rafHandle=requestAnimationFrame((function(){i.rafHandle=0,i.cardContainerRef&&(i.cardContainerRef.style.top=i.nextTop+"px",i.cardContainerRef.style.left=i.nextLeft+"px")})))},i.openPopout=function(){if(i.props.viewerCardOptions){var e=i.props.viewerCardOptions.targetID,t=window.open(Object(d.a)("/popout/"+i.props.channelLogin+"/viewercard/"+e+"?popout="),"_blank","right=50,top=50,width=340,height=520,resizable=no,scrollbars=no,toolbar=no,location=no,directories=no,status=no,menubar=no,copyhistory=no");Object(m.c)({targetLogin:e,targetUserID:null,channelID:i.props.channelID,channelLogin:i.props.channelLogin,clickText:m.b.PopOut}),t&&(t.focus(),i.props.hideViewerCard())}},i.onDragEnd=function(){i.removeDragListeners(),i.setState({dragging:!1})},i.removeDragListeners=function(){window.removeEventListener("mousemove",i.onDrag),window.removeEventListener("mouseup",i.onDragEnd),window.removeEventListener("selectstart",i.cancelSelection)},i.cancelSelection=function(e){e.preventDefault()},i.hideEmoteCard=function(){i.props.viewerCardOptions&&i.props.viewerCardOptions.viewerCardType===f.c.Emote&&Object(u.c)({emoteLocation:Object(u.b)(i.props.viewerCardOptions.emoteSourceType),emoticonID:i.props.viewerCardOptions.emoteID,chatChannel:i.props.channelLogin,chatChannelID:i.props.channelID?i.props.channelID:"",referrerUserID:i.props.viewerCardOptions.targetID,action:u.a.Close,msgID:i.props.viewerCardOptions.sourceID}),i.props.hideViewerCard()},i.state={dragging:!1,viewerCardComponentLoaded:!1},i}return Object(a.__extends)(t,e),t.prototype.componentWillUnmount=function(){this.props.hideViewerCard(),this.rafHandle&&cancelAnimationFrame(this.rafHandle),this.removeDragListeners()},t.prototype.componentDidUpdate=function(e){this.props.viewerCardOptions&&e.viewerCardOptions&&(this.props.viewerCardOptions.targetID===e.viewerCardOptions.targetID&&this.props.viewerCardOptions.initialTopOffset===e.viewerCardOptions.initialTopOffset||this.cardContainerRef&&(this.cardContainerRef.style.left="0px"))},t.prototype.render=function(){var e=this,t={"viewer-card-layer":!0,"viewer-card-layer--dragging":this.state.dragging},n={"viewer-card-layer__draggable":!0,"viewer-card-layer__draggable--dragging":this.state.dragging},i=null,a={};if(this.props.viewerCardOptions){if(this.layerRef){var s=this.layerRef.getBoundingClientRect(),l=Math.min(this.props.viewerCardOptions.initialTopOffset-s.top,s.height-240);a={top:Math.max(l,0)+"px"}}switch(this.props.viewerCardOptions.viewerCardType){case f.c.Extension:i=o.createElement(this.ExtensionMessageCard,{channelID:this.props.channelID,extensionID:this.props.viewerCardOptions.targetID,extensionVersion:this.props.viewerCardOptions.extensionVersion,hideMessageCard:this.props.hideViewerCard});break;case f.c.Viewer:i=o.createElement(this.ViewerCard,{channelID:this.props.channelID,channelLogin:this.props.channelLogin,isPopout:this.props.isPopout,isEmbedded:this.props.isEmbedded,targetLogin:this.props.viewerCardOptions.targetID,sourceType:this.props.viewerCardOptions.sourceType,sourceID:this.props.viewerCardOptions.sourceID,confirmModerationAction:this.props.confirmModerationAction,hideViewerCard:this.props.hideViewerCard});break;case f.c.Emote:i=o.createElement(this.EmoteCard,{channelID:this.props.channelID,channelLogin:this.props.channelLogin,referrerID:this.props.viewerCardOptions.targetID,sourceType:this.props.viewerCardOptions.emoteSourceType,sourceID:this.props.viewerCardOptions.sourceID,emoteID:this.props.viewerCardOptions.emoteID,emoteCode:this.props.viewerCardOptions.emoteCode,hideViewerCard:this.hideEmoteCard});break;default:i=null}}var d=null;if(i){var u=Object(c.d)("Hide","ViewerCard"),m=o.createElement(k.a,{icon:y.a.Close,onClick:this.props.hideViewerCard,ariaLabel:u,overlay:this.state.viewerCardComponentLoaded,"data-test-selector":"close-viewer-card"}),g=Object(p.a)(this.props.channelID)&&(this.props.isModerator||this.props.isOwner),b=Object(c.d)("Popout","ViewerCard"),E=g?o.createElement(k.a,{icon:y.a.Popout,onClick:this.openPopout,ariaLabel:b,overlay:this.state.viewerCardComponentLoaded,"data-test-selector":"popout-viewer-card"}):null;d=o.createElement(v.f,{className:r(n),position:S.j.Absolute,borderRadius:v.b.Medium,elevation:0},o.createElement("div",{onMouseDown:this.onDragStart,ref:function(t){e.cardContainerRef=t},style:a,"data-a-target":"viewer-card-positioner","data-test-selector":"viewer-card-positioner"},i,o.createElement(C.a,{position:S.j.Absolute,attachRight:!0,attachTop:!0,margin:{top:.5,right:.5},"data-a-target":"viewer-card-close-button"},o.createElement(h.a,null,E,m)))),this.props.viewerCardOptions.viewerCardType===f.c.Emote&&(m=o.createElement(k.a,{icon:y.a.Close,onClick:this.hideEmoteCard,ariaLabel:u,type:k.c.Secondary,"data-test-selector":"close-viewer-card"}),d=o.createElement(v.f,{className:r(n),position:S.j.Absolute,borderRadius:v.b.Large},o.createElement("div",{onMouseDown:this.onDragStart,ref:function(t){e.cardContainerRef=t},style:a,"data-a-target":"viewer-card-positioner"},i,o.createElement(C.a,{position:S.j.Absolute,attachRight:!0,attachTop:!0,margin:{top:.5,right:.5},"data-a-target":"viewer-card-close-button"},o.createElement(h.a,null,m)))))}return o.createElement(S.g,{className:r(t),fullHeight:!0,fullWidth:!0,position:S.j.Relative,zIndex:S.o.Above},o.createElement("div",{onMouseUp:this.onDragEnd,ref:function(t){e.layerRef=t}},d))},t}(o.Component));var w=Object(i.b)((function(e){return{viewerCardOptions:e.viewerCardOptions,hideViewerCard:e.hideViewerCard}}))(E);n.d(t,"a",(function(){return w}))},"8jSG":function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"blockedUsers"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"blockedUsers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:56}};n.loc.source={body:"fragment blockedUsers on User {\nid\nblockedUsers {\nid\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"8qOS":function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n("mrSG"),a=n("q1tI"),r=n("fvjX"),o=n("/7QA"),s=n("yR8l"),l=n("geRD"),c=n("2Ygb"),d=n("a6LY"),u=n("4w0E"),m=n("1Rv/"),p=n("HzXE"),h=n("4G6/"),f=n("AREq"),g=n("Av0x"),v=n("H82h"),b=600;function k(e){var t;return(t=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.banUser=function(t,n){var i=t?Object(o.d)("Unable to timeout user.","ViewerCardModActions"):Object(o.d)("Unable to ban user.","ViewerCardModActions");if(e.props.confirmModerationAction&&!e.props.confirmModerationAction())return e.surfaceError(i),Promise.reject(i);var a=e.props.userBanStatusData&&e.props.userBanStatusData.targetUser&&e.props.userBanStatusData.targetUser.login;if(!a)return e.surfaceError(i),Promise.reject(i);var r=null;"number"==typeof t?r=Object(h.a)(t):"string"==typeof t&&(r=t);var s=e.props.channelID;return e.props.banUserMutation(Object(l.a)({channelID:s,bannedUserLogin:a,expiresIn:r,reason:n})).then((function(n){var i=n&&n.data&&n.data.banUserFromChatRoom&&n.data.banUserFromChatRoom.error,a=t?d.a.TimeoutUser:d.a.BanUser;if(e.updateUserBanStatusQuery(n.data),e.trackChatLoginModerationEvent(a,t&&t.toString()||void 0),i&&e.props.userBanStatusData&&e.props.userBanStatusData.targetUser&&e.props.userBanStatusData.targetUser.login){var r=i.minTimeoutDurationSeconds,o=i.maxTimeoutDurationSeconds;e.surfaceError(Object(f.a)({login:e.props.userBanStatusData.targetUser.login,code:i.code,isTimeout:!!t,minTimeoutDuration:r||void 0,maxTimeoutDuration:o||void 0}))}return n.data})).catch((function(t){throw e.surfaceError(i),t}))},e.unbanUser=function(t){var n=t?Object(o.d)("Unable to untimeout user.","ViewerCardModActions"):Object(o.d)("Unable to unban user.","ViewerCardModActions");if(e.props.confirmModerationAction&&!e.props.confirmModerationAction())return e.surfaceError(n),Promise.reject(n);var i=e.props.userBanStatusData&&e.props.userBanStatusData.targetUser&&e.props.userBanStatusData.targetUser.login;if(!i)return e.surfaceError(n),Promise.reject(n);var a=e.props.channelID;return e.props.unbanUserMutation(Object(l.a)({channelID:a,bannedUserLogin:i})).then((function(n){var i=n&&n.data&&n.data.unbanUserFromChatRoom&&n.data.unbanUserFromChatRoom.error,a=t?d.a.UntimeoutUser:d.a.UnbanUser;return e.updateUserBanStatusQuery(null),e.trackChatLoginModerationEvent(a),i&&e.props.userBanStatusData&&e.props.userBanStatusData.targetUser&&e.props.userBanStatusData.targetUser.login&&e.surfaceError(Object(g.a)(e.props.userBanStatusData.targetUser.login,i.code)),n.data})).catch((function(t){throw e.surfaceError(n),t}))},e.updateUserBanStatusQuery=function(t){var n=e.props,i=n.channelID,a=n.targetID;Object(l.i)(p,{channelID:i,targetUserID:a},(function(e){var n=e&&e.targetUser||null;return t&&t.banUserFromChatRoom?{targetUser:n,chatRoomBanStatus:t.banUserFromChatRoom.ban}:{targetUser:n,chatRoomBanStatus:null}}))},e.surfaceError=function(t){e.props.surfaceError&&e.props.surfaceError(t)},e.trackChatLoginModerationEvent=function(t,n){var i=e.props.userBanStatusData&&e.props.userBanStatusData.targetUser&&e.props.userBanStatusData.targetUser.id,a=e.props,r=a.channelID,o=a.source;i&&r&&Object(v.a)(t,r,i,o,n&&"["+n+"]n")},e}return Object(i.__extends)(n,t),n.prototype.render=function(){var t=this,n={userBanStatus:this.props.userBanStatusData,banUser:function(e,n){return t.banUser(e,n)},timeoutUser:function(e,n){return t.banUser(e||b,n)},unbanUser:function(){return t.unbanUser()},untimeoutUser:function(){return t.unbanUser(!0)}};return a.createElement(e,Object(i.__assign)({},this.props,n))},n}(a.Component)).displayName=Object(c.a)(t.name,e),t}function y(e){return Object(r.d)(Object(s.a)(u,{name:"banUserMutation"}),Object(s.a)(m,{name:"unbanUserMutation"}),Object(s.a)(p,{name:"userBanStatusData",options:function(e){return{variables:{channelID:e.channelID,targetUserID:e.targetID}}}}),k)(e)}},"8s1E":function(e,t,n){"use strict";var i,a=n("mrSG"),r=n("/MKj"),o=n("fvjX"),s=n("1/iK"),l=n("XDCx"),c=n("y5D0"),d=n("kRBY"),u=n("/HY+"),m=n("q1tI"),p=n("Ty5D"),h=n("/7QA"),f=n("u5aL"),g=n("DMoW"),v=n("4qQ0"),b=n("sUnt"),k=n("hnjF"),y=n("7d/q"),S=n("C7sF"),C=n("k0nM"),E=n("ygYM"),w=n("4wKg");!function(e){e.MoreButton="report-button-more-button",e.ReportButton="report-button-report-button"}(i||(i={}));var O=function(e){function t(t){var n=e.call(this,t)||this;return n.handleReportChannelClick=function(){n.props.isLoggedIn?n.props.showReportUserModal({onClose:n.handleReportModalClose,reportContext:Object(a.__assign)({contentType:g.tc.USER_REPORT,targetUserID:n.props.channelID},n.props.reportContext),title:Object(h.d)("Report {channelLogin}",{channelLogin:n.props.channelLogin},"ReportUserModal")}):n.props.login()},n.hideMenu=function(){n.setState({showMenu:!1})},n.toggleMenu=function(){n.setState((function(e){return{showMenu:!e.showMenu}}))},n.handleReportModalClose=function(e){(e===v.b.MutationError||e===v.b.Success)&&n.props.history.push("/")},n.state={showMenu:!1},n}return Object(a.__extends)(t,e),t.prototype.componentDidUpdate=function(e){this.props.isShown!==e.isShown&&!1===this.props.isShown&&this.hideMenu()},t.prototype.render=function(){var e=Object(h.d)("More options","ReportUser");return m.createElement(f.a,{onClickOut:this.hideMenu},m.createElement(b.a,{className:"report-button",position:k.j.Relative},m.createElement(y.a,{ariaLabel:e,title:e,icon:S.a.More,"data-a-target":i.MoreButton,onClick:this.toggleMenu}),m.createElement(C.a,{direction:this.props.direction||E.b.TopRight,show:this.state.showMenu},m.createElement(w.a,{label:Object(h.d)("Report {channelLogin}",{channelLogin:this.props.channelLogin},"ReportUser"),onClick:this.handleReportChannelClick,"data-a-target":i.ReportButton}))))},t}(m.Component),D=Object(p.j)(O);var N=Object(r.b)((function(e){return{isLoggedIn:Object(d.f)(e)}}),(function(e){return Object(o.b)({login:function(){return Object(c.e)(s.a.ReportChannel)},showReportUserModal:function(e){var t=Object(a.__rest)(e,[]);return Object(l.e)(u.a,t)}},e)}))(D);n.d(t,"a",(function(){return N}))},"8uuy":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoChatVideoTrackingContext"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:117}};n.loc.source={body:"query VideoChatVideoTrackingContext($videoID: ID) {\nvideo(id: $videoID) {\nid\nbroadcastType\ntitle\ngame {\nid\nname\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.VideoChatVideoTrackingContext=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"VideoChatVideoTrackingContext")},"8wAl":function(e,t,n){"use strict";function i(e){return{__typename:"CommunityPointsAutomaticReward",backgroundColor:e.background_color,cost:e.cost||null,image:e.image?r(e.image):null,isEnabled:e.is_enabled,type:e.reward_type}}function a(e){return{__typename:"CommunityPointsCustomReward",id:e.id,backgroundColor:e.background_color||null,cost:e.cost,defaultImage:r(e.default_image),image:e.image?r(e.image):null,isEnabled:e.is_enabled,isInStock:e.is_in_stock,isPaused:e.is_paused,isSubOnly:e.is_sub_only,isUserInputRequired:e.is_user_input_required,shouldRedemptionsSkipRequestQueue:e.should_redemptions_skip_request_queue,prompt:e.prompt||null,title:e.title}}function r(e){return{__typename:"CommunityPointsImage",url:e.url_1x,url2x:e.url_2x,url4x:e.url_4x}}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return r}))},"94Uw":function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e.ProfileImage="profile_image",e.ProfileBanner="profile_banner",e.ChannelOfflineImage="channel_offline_image"}(i||(i={}))},"9KaG":function(e,t,n){},"9P+5":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Chat_UserData"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isGlobalMod"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isPartner"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isSiteAdmin"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isStaff"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:105}};n.loc.source={body:"query Chat_UserData {\nuser {\nid\ndisplayName\nlogin\nroles {\nisGlobalMod\nisPartner\nisSiteAdmin\nisStaff\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.Chat_UserData=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"Chat_UserData")},"9RDd":function(e,t,n){},"9Rmp":function(e,t,n){},"9kXc":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("/7QA"),a=n("yLwq"),r=n("kduP"),o=n("2xye"),s=n("sLmD");function l(e){var t,n,s,l,u=e.append,m=void 0!==u&&u,p=e.searchResults,h=e.currentGameResults,f=e.currentUserResults,g=e.currentVideoResults,v=e.currentLiveResults;if(p.games&&(t={totalHits:p.games.totalHits,results:m&&h?h.results:[]},m&&p.exhaustedHits&&h&&!p.games.totalHits&&(t.totalHits=h.totalHits),t.results=t.results.concat(p.games.hits.map((function(e,t){var n,a=i.p.intl.getLanguageCode();n=a&&void 0!==e.localizations&&a in e.localizations?e.localizations[a]:e.name;var s=d(e.tags);return{title:n,thumbnailAltText:e.name,linkTo:{pathname:Object(r.a)(e.name),state:{content:o.PageviewContent.Game,content_index:t,medium:o.PageviewMedium.NavSearch}},id:e.objectID,popularity:e.popularity,tags:s}})))),p.videos){var b=m&&g?g.results:[],k=p.videos.totalHits;m&&p.exhaustedHits&&g&&!p.videos.totalHits&&(k=g.totalHits),s=function(e,t,n){return{results:e.concat(t.hits.map(c)),totalHits:t.totalHits||n}}(b,p.videos,k)}return p.users&&(n={totalHits:m&&f?f.totalHits:p.users.totalHits,results:m&&f?f.results:[]},m&&p.exhaustedHits&&f&&!p.users.totalHits&&(n.totalHits=f.totalHits),n.results=n.results.concat(p.users.hits.map((function(e,t){return{login:e.login,name:e.name,thumbnail:e.profile_image||Object(a.c)(e.objectID,64),thumbnailAltText:e.name,linkTo:{pathname:"/"+e.login,state:{content:o.PageviewContent.User,content_index:t,medium:o.PageviewMedium.NavSearch}},id:e.objectID,followers:e.followers}})))),p.channels&&((l={totalHits:m&&v?v.totalHits:p.channels.totalHits,results:m&&v?v.results:[]}).results=l.results.concat(p.channels.hits.map((function(e,t){var n=d(e.graffiti);return{viewerCount:e.channel_count,login:e.login,name:e.name,thumbnailAltText:e.status,linkTo:{pathname:"/"+e.login,state:{content:o.PageviewContent.Live,content_index:t,medium:o.PageviewMedium.NavSearch}},id:e.objectID,status:e.status,tags:n}})))),{currentGameResults:t,currentUserResults:n,currentLiveResults:l,currentVideoResults:s,exhaustedHits:p.exhaustedHits}}function c(e,t){return{title:e.title,thumbnail:e.thumbnail,thumbnailAltText:e.title,linkTo:{pathname:"/videos/"+e.objectID,state:{content:o.PageviewContent.Video,content_index:t,medium:o.PageviewMedium.NavSearch}},login:e.broadcaster_login,name:e.broadcaster_name,createdAt:e.created_at,length:e.length,id:e.objectID}}function d(e){if(e)return e.map((function(e){var t,n=Object(s.a)();return t=n&&void 0!==e.localizations&&n in e.localizations?e.localizations[n]:e.name,{id:e.id,isLanguageTag:e.name.includes("auto___lang"),localizedName:t,tagName:e.name}}))}},"9sGC":function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("fvjX"),o=n("/7QA"),s=n("uIkQ"),l=n("bBAb"),c=n("cys1"),d=n("oK83"),u=n("wFyP"),m=n("esZd"),p=n("8qOS"),h=n("vLL+"),f=n("a6LY"),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.banUser=function(){return t.props.banUser()},t.timeoutUser=function(){return t.props.timeoutUser()},t.unbanUser=function(){return t.props.unbanUser()},t.deleteMessage=function(){},t}return Object(i.__extends)(t,e),t.prototype.render=function(){return this.props.message.sender&&this.props.message.sender.login?a.createElement(h.a,{canDelete:!1,isMessageDeleted:!!this.props.message.deletedAt,onBanUser:this.banUser,onDelete:this.deleteMessage,onTimeoutUser:this.timeoutUser,onUnbanUser:this.unbanUser,renderNewVersion:!1,senderLogin:this.props.message.sender.login,isMessageBanned:this.props.userBanStatus&&!!this.props.userBanStatus.chatRoomBanStatus||!1}):null},t}(a.Component),v=Object(r.d)(Object(m.a)((function(e){return Object(i.__assign)(Object(i.__assign)({},e),{source:f.b.QuickModButtons})})),p.a)(g),b=n("fxMP"),k=n("sUnt"),y=n("Jsra");n("QfRJ");n.d(t,"b",(function(){return S})),n.d(t,"a",(function(){return E}));var S="message-timestamp",C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={shouldShowDeletedBody:!1},t.showDeleted=function(e){e&&e.preventDefault(),t.setState({shouldShowDeletedBody:!0})},t}return Object(i.__extends)(t,e),t.prototype.shouldComponentUpdate=function(e,t){return e.showModerationIcons!==this.props.showModerationIcons||(e.showTimestamps!==this.props.showTimestamps||(t.shouldShowDeletedBody!==this.state.shouldShowDeletedBody||(e.hasModPermissions!==this.props.hasModPermissions||e.message.deletedAt!==this.props.message.deletedAt)))},t.prototype.render=function(){if(!this.props.message.sender||!this.props.message.id)return a.createElement(k.a,{padding:{x:2,y:.5}},Object(o.d)("unable to properly render message","Message"));var e=this.props.message.sender.displayBadges,t={},n=": ";return this.props.message.content.text.startsWith(b.a)&&(t={color:this.props.message.sender.chatColor||void 0},n=" "),a.createElement(k.a,{padding:this.props.padding||{x:2,y:.5}},a.createElement("div",{id:this.props.message.id,className:"message",style:t},this.renderTimestamp(),this.renderModerationIcons(),a.createElement(s.b,{badgeSets:this.props.badgeSets,badgesToRender:e}),a.createElement(u.a,{highContrastUsernameColor:this.props.highContrastUsernameColor,messageID:this.props.message.id,sender:this.props.message.sender,theme:this.props.theme,onUsernameClick:this.props.onUsernameClick}),a.createElement("span",{key:"separator"},n),this.renderMessageBody()))},t.prototype.renderMessageBody=function(){if(!this.props.message.deletedAt||this.state.shouldShowDeletedBody){var e={forceClipsNetworkRequest:!0,messageAuthorID:this.props.message.sender.id,messageSourceID:this.props.message.id,emoteSourceType:d.a.room};return Object(c.f)(Object(b.e)(this.props.message,this.props.bitsConfig,this.props.currentUserLogin),e)}var t=Object(o.d)("message deleted","Message"),n=this.props.hasModPermissions?a.createElement(y.a,{onClick:this.showDeleted,"data-test-selector":"show-deleted"},"<"+t+">"):"<"+t+">";return a.createElement("span",{key:"deleted",className:"message--deleted","data-test-selector":"deleted-message"},n)},t.prototype.renderTimestamp=function(){return this.props.showTimestamps?a.createElement("span",{key:"timestamp",className:"message__timestamp","data-test-selector":S},Object(c.a)(new Date(this.props.message.sentAt),!0)):null},t.prototype.renderModerationIcons=function(){return this.props.showModerationIcons&&this.props.hasModPermissions&&this.props.channelID&&this.props.message.sender&&this.props.message.sender.id?a.createElement(v,{message:this.props.message,channelID:this.props.channelID,targetID:this.props.message.sender.id,surfaceError:this.props.surfaceError}):null},t}(a.Component);var E=Object(r.d)(Object(l.b)((function(e){return{bitsConfig:e.bitsConfig}})))(C)},"9yes":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Chat_AllowRejectedChatMessage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AllowRejectedChatMessageInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allowRejectedChatMessage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:141}};n.loc.source={body:"mutation Chat_AllowRejectedChatMessage($input: AllowRejectedChatMessageInput!) {\nallowRejectedChatMessage(input: $input) {\nmessage {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.Chat_AllowRejectedChatMessage=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"Chat_AllowRejectedChatMessage")},A4KW:function(e,t,n){"use strict";var i=n("ALJo");n.d(t,"a",(function(){return i.a})),n.d(t,"b",(function(){return i.b}))},A4cy:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("DMoW"),a=function(e,t){var n={subOnlyReward:!0,nonSubOnlyReward:!0,subsModeRequiredReward:!0};return"CommunityPointsCustomReward"===e.__typename&&e.isSubOnly&&(n.subOnlyReward=t.isUserSubscribed),"CommunityPointsAutomaticReward"===e.__typename&&e.isHiddenForSubs&&(n.nonSubOnlyReward=!t.isUserSubscribed),"CommunityPointsAutomaticReward"===e.__typename&&e.type===i.U.SINGLE_MESSAGE_BYPASS_SUB_MODE&&(n.subsModeRequiredReward=t.isChannelSubsOnlyMode),n}},AKV8:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("mrSG"),a=n("yR8l"),r=n("4HoE");function o(e){var t=this;return Object(a.b)(r,{props:function(n){return{modUserMutation:function(a){return Object(i.__awaiter)(t,void 0,void 0,(function(){var t;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return(t=e(n.ownProps).channelID)?[4,n.mutate({variables:{input:{channelID:t,targetLogin:a}}})]:[3,2];case 1:return[2,i.sent().data];case 2:throw new Error("modUser mutation is not ready")}}))}))}}}})}},ALJo:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return d}));var i,a=n("q1tI"),r=n("fvjX"),o=n("yR8l"),s=n("YV90"),l=n("SyZi"),c=n("SCHm");!function(e){e.Small="channel-points-icon--small",e.Medium="channel-points-icon--medium",e.Large="channel-points-icon--large"}(i||(i={}));var d=Object(r.d)(Object(s.a)((function(e){return{isLoaded:e.isLoaded,pointIcon:e.pointIcon,pointName:e.pointName}})),Object(o.a)(c,{options:function(e){return{variables:{channelLogin:e.channelLogin}}},skip:function(e){return!e.channelLogin||e.isLoaded}}))((function(e){var t=null,n=null,i=e.data;return e.isLoaded?(t=e.pointIcon,n=e.pointName):i&&i.community&&i.community.channel&&i.community.channel.communityPointsSettings&&(t=i.community.channel.communityPointsSettings.image,n=i.community.channel.communityPointsSettings.name),a.createElement(l.a,{iconSize:e.iconSize,image:t,name:n})}))},AREq:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("/7QA"),a=n("DMoW"),r=n("4G6/");function o(e){var t=e.login,n=e.code,o=e.enteredDuration,s=e.minTimeoutDuration,l=e.maxTimeoutDuration,c=e.isTimeout;if(void 0===c&&(c=!1),c)switch(n){case a.l.FORBIDDEN:return Object(i.d)("You don't have permissions to timeout {login}.",{login:t},"BanUserErrorCode");case a.l.TARGET_IS_ADMIN:return Object(i.d)("You cannot timeout admin {login}. Please email support@twitch.tv if an admin is being abusive.",{login:t},"BanUserErrorCode");case a.l.TARGET_ALREADY_BANNED:return Object(i.d)("{login} is already banned in this channel.",{login:t},"BanUserErrorCode");case a.l.TARGET_IS_ANONYMOUS:return Object(i.d)("You cannot timeout anonymous users.","BanUserErrorCode");case a.l.TARGET_IS_BROADCASTER:return Object(i.d)("You cannot timeout the broadcaster.","BanUserErrorCode");case a.l.TARGET_IS_GLOBAL_MOD:return Object(i.d)("You cannot timeout global moderator {login}. Please email support@twitch.tv if a global moderator is being abusive.",{login:t},"BanUserErrorCode");case a.l.TARGET_IS_MOD:return Object(i.d)("You cannot timeout moderator {login} unless you are the owner of this channel.",{login:t},"BanUserErrorCode");case a.l.TARGET_IS_SELF:return Object(i.d)("You cannot timeout yourself.","BanUserErrorCode");case a.l.TARGET_IS_STAFF:return Object(i.d)("You cannot timeout staff {login}. Please email support@twitch.tv if a staff member is being abusive.",{login:t},"BanUserErrorCode");case a.l.TARGET_NOT_FOUND:return Object(i.d)("The user you are trying to timeout doesn't exist.","BanUserErrorCode");case a.l.DURATION_INVALID:var d=Object(i.d)("Invalid timeout duration: {userInput}. Usage: /timeout [user] [duration] [reason]",{userInput:o||""},"BanUserErrorCode"),u=Object(i.d)("Timeout duration must be between {minTimeoutDuration} and {maxTimeoutDuration} seconds.",{minTimeoutDuration:s||0,maxTimeoutDuration:l||0},"BanUserErrorCode"),m=Object(i.d)("Invalid timeout duration. Usage: /timeout [user] [duration] [reason]","BanUserErrorCode");if(o){if(void 0!==s&&void 0!==l){var p=Object(r.b)(o);if(!p||Number.isNaN(p))return d;if(p<s||p>l)return u}return d}return m;default:throw new Error("Unrecognized operation result.")}else switch(n){case a.l.FORBIDDEN:return Object(i.d)("You don't have permissions to ban {login}.",{login:t},"BanUserErrorCode");case a.l.TARGET_IS_ADMIN:return Object(i.d)("You cannot ban admin {login}. Please email support@twitch.tv if an admin is being abusive.",{login:t},"BanUserErrorCode");case a.l.TARGET_ALREADY_BANNED:return Object(i.d)("{login} is currently banned in this channel.",{login:t},"BanUserErrorCode");case a.l.TARGET_IS_ANONYMOUS:return Object(i.d)("You cannot ban anonymous users.","BanUserErrorCode");case a.l.TARGET_IS_BROADCASTER:return Object(i.d)("You cannot ban the broadcaster.","BanUserErrorCode");case a.l.TARGET_IS_GLOBAL_MOD:return Object(i.d)("You cannot ban global moderator {login}. Please email support@twitch.tv if a global moderator is being abusive.",{login:t},"BanUserErrorCode");case a.l.TARGET_IS_MOD:return Object(i.d)("You cannot ban moderator {login} unless you are the owner of this channel.",{login:t},"BanUserErrorCode");case a.l.TARGET_IS_SELF:return Object(i.d)("You cannot ban yourself.","BanUserErrorCode");case a.l.TARGET_IS_STAFF:return Object(i.d)("You cannot ban staff {login}. Please email support@twitch.tv if a staff member is being abusive.",{login:t},"BanUserErrorCode");case a.l.TARGET_NOT_FOUND:return Object(i.d)("The user you are trying to ban doesn't exist.","BanUserErrorCode");default:throw new Error("Unrecognized operation result.")}}},AnlW:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("/7QA"),o=n("gcd7"),s=n("yR8l"),l=n("3kHA"),c=n("WytW"),d=n("Q8Sx"),u=30,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setSlowMode=function(e){if(t.props.roomID){var n=Object(c.s)("/slow "+e);return n?{deferred:t.props.updateRoomModes({variables:{input:{roomID:t.props.roomID,enableSlowMode:!0,slowModeDurationSeconds:n.duration||u}}}).then((function(){return{notice:Object(r.d)("This room is now in slow mode. You may send messages every {length} seconds.",{length:n.duration||u},"SlowCommandHandler")}})).catch((function(){return{notice:Object(r.d)("Unable to set slow mode.","SlowCommandHandler")}}))}:{deferred:Promise.resolve({notice:t.slowUsage(),error:l.a.InvalidParameters})}}},t.unsetSlowMode=function(e){if(t.props.roomID)return e&&e.trim().length>0?{deferred:Promise.resolve({notice:t.slowoffUsage(),error:l.a.InvalidParameters})}:{deferred:t.props.updateRoomModes({variables:{input:{roomID:t.props.roomID,enableSlowMode:!1}}}).then((function(){return{notice:Object(r.d)("This room is no longer in slow mode.","SlowCommandHandler")}})).catch((function(){return{notice:Object(r.d)("Unable to unset slow mode.","SlowCommandHandler")}}))}},t}return Object(i.__extends)(t,e),t.prototype.render=function(){return a.createElement(a.Fragment,null,a.createElement(o.a,{args:[{name:"duration",isRequired:!1}],channelLogin:this.props.channelLogin,command:"slow",description:Object(r.d)("Limit how frequently users can send messages in Chat","SlowCommandHandler"),handler:this.props.roomID?this.setSlowMode:void 0,helpText:this.slowUsage(),permissionLevel:l.b.Moderator}),a.createElement(o.a,{channelLogin:this.props.channelLogin,command:"slowoff",description:Object(r.d)("Turn off slow mode","SlowCommandHandler"),handler:this.props.roomID?this.unsetSlowMode:void 0,helpText:this.slowoffUsage(),permissionLevel:l.b.Moderator}))},t.prototype.slowUsage=function(){return Object(r.d)('Usage: "/slow [duration]" - Enables slow mode (limit how often users may send messages). Duration (optional, default=30) must be a positive number of seconds. Use "/slowoff" to disable.',"SlowCommandHandler")},t.prototype.slowoffUsage=function(){return Object(r.d)('Usage: "/slowoff" - Disables slow mode.',"SlowCommandHandler")},t}(a.Component),p=Object(s.a)(d,{name:"updateRoomModes"})(m);n.d(t,"a",(function(){return p}))},ApRi:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SendHighlightedChatMessage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"SendHighlightedChatMessageInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sendHighlightedChatMessage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"balance"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:150}};n.loc.source={body:"mutation SendHighlightedChatMessage($input: SendHighlightedChatMessageInput!) {\nsendHighlightedChatMessage(input: $input) {\nbalance\nerror {\ncode\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.SendHighlightedChatMessage=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"SendHighlightedChatMessage")},Av0x:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("/7QA"),a=n("DMoW");function r(e,t,n){if(void 0===n&&(n=!1),n)switch(t){case a.dd.FORBIDDEN:return Object(i.d)("You don't have permissions to untimeout {login}.",{login:e},"UnbanUserErrorCode");case a.dd.TARGET_NOT_FOUND:return Object(i.d)("The user you are trying to untimeout doesn't exist.","UnbanUserErrorCode");case a.dd.TARGET_NOT_BANNED:return Object(i.d)("{login} is not currently timed out from this channel.",{login:e},"UnbanUserErrorCode");default:throw new Error("Unrecognized operation result")}else switch(t){case a.dd.FORBIDDEN:return Object(i.d)("You don't have permissions to unban {login}.",{login:e},"UnbanUserErrorCode");case a.dd.TARGET_NOT_FOUND:return Object(i.d)("The user you are trying to unban doesn't exist.","UnbanUserErrorCode");case a.dd.TARGET_NOT_BANNED:return Object(i.d)("{login} is not currently banned from this channel.",{login:e},"UnbanUserErrorCode");default:throw new Error("Unrecognized operation result")}}},Awl1:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("fvjX"),o=n("yR8l"),s=n("wUQP"),l=n("DLI4"),c=n("8D7W"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.render=function(){var e=this.props.fallback;if(!this.props.data)return e||null;var t=this.props.data.channel;return t&&t.roles&&t.roles.isAffiliate||t&&t.roles&&t.roles.isPartner?this.props.children:e||null},t}(a.Component),u=Object(r.d)(Object(o.a)(c,{skip:function(){return!Object(s.c)(l.a)},options:function(e){return{variables:{login:e.channelLogin}}}}))(d);n.d(t,"a",(function(){return u}))},B30r:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return p})),n.d(t,"e",(function(){return h})),n.d(t,"a",(function(){return f}));var i=n("q1tI"),a=n("DMoW"),r=n("4rCz"),o=n("JN5s"),s=n("zClW"),l=n("+80q"),c=n("Jsra"),d=n("nAiT");function u(){return Object(r.d)("You must provide a message for this reward.","ChannelPointsMessageError")}function m(){return Object(r.d)("Something went wrong. Please try again later.","CommunityPointsError")}function p(e){switch(e){case a.Hc.CHANNEL_SETTINGS:return Object(s.c)().MessageContainsBannedWordsError;case a.Hc.MSG_DUPLICATE:return Object(o.a)();case a.Hc.AUTOMOD_HELD:case a.Hc.BLIZZARD_CONNECT_MODE:case a.Hc.EMOTE_ONLY:case a.Hc.FOLLOWERS_ONLY:case a.Hc.FOLLOWERS_ONLY_ZERO:case a.Hc.INSUFFICIENT_POINTS:case a.Hc.MESSAGE_REJECTED:case a.Hc.R9K_MODE:case a.Hc.REWARD_COST_MISMATCH:case a.Hc.REWARD_DISABLED:case a.Hc.REWARD_FORBIDDEN:case a.Hc.SERVER_ERROR:case a.Hc.SLOW_MODE:case a.Hc.SUBS_ONLY:case a.Hc.TRANSACTION_ALREADY_COMMITTED:case a.Hc.TRANSACTION_IN_PROGRESS:case a.Hc.UNKNOWN:case a.Hc.USER_BANNED:case a.Hc.USER_SUSPENDED:case a.Hc.USER_TIMED_OUT:case a.Hc.VERIFIED_ACCOUNT:default:return m()}}function h(e,t){switch(e){case a.X.EMOTE_ALREADY_ENTITLED:return Object(r.d)("<x:strong>Oops!</x:strong> You can already use this emote!",{"x:strong":function(e){return i.createElement(l.a,{bold:!0,type:l.e.Span},e)}},"ChannelPointsEmoteUnlockError");case a.X.INSUFFICIENT_POINTS:return Object(r.d)("<x:strong>Oops!</x:strong> You don't have enough points for this reward. <x:link>Try again later.</x:link>",{"x:strong":function(e){return i.createElement(l.a,{bold:!0,type:l.e.Span},e)},"x:link":function(e){return i.createElement(c.a,{onClick:t},e)}},"ChannelPointsEmoteUnlockError");case a.X.NO_EMOTES_AVAILABLE:return Object(r.d)("<x:strong>Oops!</x:strong> This broadcaster has no emotes to unlock. <x:link>Try again later.</x:link>",{"x:strong":function(e){return i.createElement(l.a,{bold:!0,type:l.e.Span},e)},"x:link":function(e){return i.createElement(c.a,{onClick:t},e)}},"ChannelPointsEmoteUnlockError");case a.X.REWARD_COST_MISMATCH:return Object(d.d)(null,(function(){return null}));case a.X.REWARD_DISABLED:return Object(r.d)("<x:strong>Oops!</x:strong> This reward is disabled. <x:link>Try again later.</x:link>",{"x:strong":function(e){return i.createElement(l.a,{bold:!0,type:l.e.Span},e)},"x:link":function(e){return i.createElement(c.a,{onClick:t},e)}},"ChannelPointsEmoteUnlockError");case a.X.REWARD_FORBIDDEN:return Object(r.d)("<x:strong>Oops!</x:strong> You cannot redeem this reward on this channel. <x:link>Try again later.</x:link>",{"x:strong":function(e){return i.createElement(l.a,{bold:!0,type:l.e.Span},e)},"x:link":function(e){return i.createElement(c.a,{onClick:t},e)}},"ChannelPointsEmoteUnlockError");case a.X.TRANSACTION_ALREADY_COMMITTED:case a.X.INVALID_EMOTE:case a.X.UNKNOWN:default:return m()}}function f(e){switch(e){case a.pc.MAX_PER_STREAM:return Object(r.d)("This reward is temporarily out of stock.","ChannelPointsMessageError");case a.pc.USER_BANNED:return Object(r.d)("You've been banned and can't redeem this reward.","ChannelPointsMessageError");case a.pc.NOT_ENOUGH_POINTS:return Object(r.d)("You don't have enough points for this reward.","ChannelPointsMessageError");case a.pc.PROPERTIES_MISMATCH:return Object(d.e)(null,(function(){return null}));case a.pc.DUPLICATE_TRANSACTION:case a.pc.FORBIDDEN:case a.pc.NOT_FOUND:default:return m()}}},B9yr:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e,t){var n="";return e&&e.length>0&&(n=e.endsWith(" ")?e:e+" "),""+n+t.trim()+" "}},BKFw:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var i="BROADCAST_TYPE_ALL",a="broadcaster_id",r="BROADCAST_LENGTH_ANY"},BOil:function(e,t,n){},"BR/5":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SyncedSettingsSetDeletedMessageDisplaySetting"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"SetDeletedMessageDisplaySettingInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setDeletedMessageDisplaySetting"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deletedMessageDisplaySetting"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:185}};n.loc.source={body:"mutation SyncedSettingsSetDeletedMessageDisplaySetting($input: SetDeletedMessageDisplaySettingInput!) {\nsetDeletedMessageDisplaySetting(input: $input) {\ndeletedMessageDisplaySetting\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.SyncedSettingsSetDeletedMessageDisplaySetting=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"SyncedSettingsSetDeletedMessageDisplaySetting")},BZOq:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var i=n("H/lO"),a=n("BKFw");function r(e){return e.map((function(e){return{title:e.title||"",thumbnail:e.thumbnail||"",thumbnailAltText:e.thumbnailAltText||"",linkTo:e.linkTo||"",login:e.login||"",name:e.name||"",createdAt:e.createdAt||0,length:e.length||0,id:e.id||""}}))}function o(e){var t={},n=[];return"broadcastType"in e&&e.broadcastType!==a.c&&void 0!==e.broadcastType&&n.push(e.broadcastType),"broadcasterId"in e&&n.push(a.a+":"+e.broadcasterId),t.facetFilters=n.join(","),"broadcastLength"in e&&e.broadcastLength!==a.b&&void 0!==e.broadcastLength&&(t.numericFilters=[e.broadcastLength]),{typeID:i.a.Videos,params:t}}},BbLt:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"channel"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"primaryColorHex"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"language"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"boxArtURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"85"}},{kind:"Argument",name:{kind:"Name",value:"height"},value:{kind:"IntValue",value:"113"}}],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"50"}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"medProfileImageUrl"},name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"70"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isPartner"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"boxArtURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"85"}},{kind:"Argument",name:{kind:"Name",value:"height"},value:{kind:"IntValue",value:"113"}}],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewersCount"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"lastBroadcast"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"boxArtURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"85"}},{kind:"Argument",name:{kind:"Name",value:"height"},value:{kind:"IntValue",value:"113"}}],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"follower"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"disableNotifications"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"subscriptionBenefit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"channel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chanlets"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"includeChanlets"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channelChanlet"},directives:[]}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"hostingChannel"},directives:[]}]}}],loc:{start:0,end:755}};i.loc.source={body:'#import "twilight/features/channel/queries/hosting-channel.gql"\n#import "twilight/features/channel/queries/channel-chanlet.gql"\nfragment channel on User {\nid\nprimaryColorHex\nbroadcastSettings {\nid\nlanguage\ngame {\nid\nname\ndisplayName\nboxArtURL(width: 85 height: 113)\n}\ntitle\n}\ndisplayName\nlogin\nprofileImageURL(width: 50)\nmedProfileImageUrl: profileImageURL(width: 70)\nroles {\nisPartner\n}\nstream {\nid\ngame {\nid\nname\ndisplayName\nboxArtURL(width: 85 height: 113)\n}\ntitle\ntype\nviewersCount\n}\nlastBroadcast {\nid\ngame {\nid\nname\ndisplayName\nboxArtURL(width: 85 height: 113)\n}\ntitle\n}\nself {\nfollower {\ndisableNotifications\nnode {\nid\n}\n}\nsubscriptionBenefit {\nid\n}\n}\nchannel {\nid\nchanlets @include(if: $includeChanlets) {\n...channelChanlet\n}\n}\n...hostingChannel\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)}))}i.definitions=i.definitions.concat(r(n("GvwK").definitions)),i.definitions=i.definitions.concat(r(n("ZGqV").definitions)),e.exports=i},BdUW:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("SSXq"),a=n("EgE3");function r(e,t,n,r){Object(a.j)(e,t,n);var o="/popout/"+t+"/reward-queue";r&&(o+="?rewardID="+r);var s=window.open(Object(i.a)(o),"_blank","right=50,top=50,width=900,height=800,resizable=no,scrollbars=no,toolbar=no,location=no,directories=no,status=no,menubar=no,copyhistory=no");s&&s.focus()}},BhFH:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("yR8l"),a=n("8jSG"),r=n("cMjZ"),o=n("kSkr");function s(){return Object(i.b)(o,{props:function(e){return{blockUserMutation:function(t,n,i,o){return e.mutate({variables:{input:{targetUserID:t,sourceContext:i,reason:n}},optimisticResponse:{blockUser:{__typename:"BlockUserPayload",targetUser:{__typename:"User",id:t}}},update:function(e){var n=e.readFragment({id:Object(r.a)(o),fragment:a});n&&(n.blockedUsers.push({id:t,__typename:"User"}),e.writeFragment({id:Object(r.a)(o),fragment:a,data:n}))}})}}}})}},"CFw/":function(e,t,n){e.exports=n.p+"assets/notification_upsell_arrow-c9d4ff7c87444b45d813.png"},CJLt:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoChat_TrackingContext_VideoAndCurrentUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isPartner"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:197}};n.loc.source={body:"query VideoChat_TrackingContext_VideoAndCurrentUser($videoID: ID) {\nvideo(id: $videoID) {\nid\nbroadcastType\ntitle\ngame {\nid\nname\n}\nowner {\nid\nlogin\nroles {\nisPartner\n}\n}\n}\ncurrentUser {\nid\nlogin\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.VideoChat_TrackingContext_VideoAndCurrentUser=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"VideoChat_TrackingContext_VideoAndCurrentUser")},CNnA:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));var i=function(e){return{isCommerceDisabled:e.isWatchPartyActive}},a=function(e){return{isCommerceDisabled:e.isWatchPartyActive,disableCommerce:e.updateWatchPartyActive,allowChatOnPageDuringWatchParty:e.allowChatOnPageDuringWatchParty}}},CYfc:function(e,t,n){"use strict";var i=n("vhpE");n.d(t,"a",(function(){return i.a})),n.d(t,"b",(function(){return i.b}))},CbHG:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChatFilterContextManager_User"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:68}};n.loc.source={body:"query ChatFilterContextManager_User {\ncurrentUser {\nid\ncreatedAt\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.ChatFilterContextManager_User=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"ChatFilterContextManager_User")},"CpU+":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("mrSG"),a=n("yR8l"),r=n("JiJH");function o(){var e=this;return Object(a.a)(r,{props:function(t){return{unVIPUserMutation:function(n){return Object(i.__awaiter)(e,void 0,void 0,(function(){return Object(i.__generator)(this,(function(e){switch(e.label){case 0:return t.mutate&&t.ownProps.channelID?[4,t.mutate({variables:{input:{channelID:t.ownProps.channelID,revokeeLogin:n}}})]:[2];case 1:return[2,e.sent().data]}}))}))}}}})}},D91L:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("/MKj"),o=n("fvjX"),s=n("/7QA"),l=n("gcd7"),c=n("BhFH"),d=n("iS14"),u=n("DMoW"),m=n("TvOw"),p=n("kRBY"),h=n("3kHA"),f=n("NNSq"),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getInvalidUserMessage=function(){return Object(s.d)("No user matching that login.","IgnoreCommandHandler")},t.blockUser=function(e){return e?e===t.props.currentUserLogin?{deferred:Promise.resolve({notice:Object(s.d)("You cannot ignore yourself.","IgnoreCommandHandler")})}:{deferred:Object(f.a)(e).then((function(e){if(!e)return{notice:t.getInvalidUserMessage()};try{t.props.blockUserMutation(e,m.a.Other,u.s.CHAT,t.props.user)}catch(e){return{notice:Object(s.d)("Unable to ignore user","IgnoreCommandHandler")}}return{notice:Object(s.d)("User successfully ignored","IgnoreCommandHandler")}}))}:{deferred:Promise.resolve({notice:Object(s.d)("Please specify a user to ignore","IgnoreCommandHandler"),error:h.a.MissingParameters})}},t.unblockUser=function(e){return e?e===t.props.currentUserLogin?{deferred:Promise.resolve({notice:Object(s.d)("You cannot unignore yourself.","IgnoreCommandHandler")})}:{deferred:Object(f.a)(e).then((function(e){if(!e)return{notice:t.getInvalidUserMessage()};try{t.props.unblockUserMutation(e,t.props.user)}catch(e){return{notice:Object(s.d)("Unable to unignore user","IgnoreCommandHandler")}}return{notice:Object(s.d)("User successfully unignored","IgnoreCommandHandler")}}))}:{deferred:Promise.resolve({notice:Object(s.d)("Please specify a user to unignore","IgnoreCommandHandler"),error:h.a.MissingParameters})}},t}return Object(i.__extends)(t,e),t.prototype.render=function(){return a.createElement(a.Fragment,null,a.createElement(l.a,{args:[{name:"username",isRequired:!0}],channelLogin:this.props.channelLogin,command:"ignore",description:this.blockDescription(),handler:this.blockUser,helpText:Object(s.d)('Usage: "/ignore <username>" - Blocks user from interacting with you on Twitch. Use "/unignore <username>" to disable.',"IgnoreCommandHandler"),hidden:!0,permissionLevel:h.b.Viewer}),a.createElement(l.a,{args:[{name:"username",isRequired:!0}],channelLogin:this.props.channelLogin,command:"unignore",description:this.unblockDescription(),handler:this.unblockUser,helpText:Object(s.d)('Usage: "/unignore <username>" - Removes a user from your blocklist.',"IgnoreCommandHandler"),hidden:!0,permissionLevel:h.b.Viewer}),a.createElement(l.a,{args:[{name:"username",isRequired:!0}],channelLogin:this.props.channelLogin,command:"block",description:this.blockDescription(),handler:this.blockUser,helpText:Object(s.d)('Usage: "/block <username>" - Blocks user from interacting with you on Twitch. Use "/unblock <username>" to disable.',"IgnoreCommandHandler"),permissionLevel:h.b.Viewer}),a.createElement(l.a,{args:[{name:"username",isRequired:!0}],channelLogin:this.props.channelLogin,command:"unblock",description:this.unblockDescription(),handler:this.unblockUser,helpText:Object(s.d)('Usage: "/unblock <username>" - Removes a user from your blocklist.',"IgnoreCommandHandler"),permissionLevel:h.b.Viewer}))},t.prototype.blockDescription=function(){return Object(s.d)("Block a user from interacting with you on Twitch","IgnoreCommandHandler")},t.prototype.unblockDescription=function(){return Object(s.d)("Remove user from your block list","IgnoreCommandHandler")},t}(a.Component);var v=Object(o.d)(Object(r.b)((function(e){return{user:Object(p.e)(e)}})),Object(d.a)(),Object(c.a)())(g);n.d(t,"a",(function(){return v}))},"DB+C":function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"EmotePicker_EmotePicker_UserSubscriptionProducts"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelOwnerID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"channelOwnerID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"28"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionProducts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"emotePickerUserSubscriptionProduct"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"cumulativeTenure"},name:{kind:"Name",value:"subscriptionTenure"},arguments:[{kind:"Argument",name:{kind:"Name",value:"tenureMethod"},value:{kind:"EnumValue",value:"CUMULATIVE"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"months"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subscriptionBenefit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"platform"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:449}};i.loc.source={body:'#import "twilight/features/emote-picker/components/emote-picker-menu/user-subscription-product-fragment.gql"\nquery EmotePicker_EmotePicker_UserSubscriptionProducts($channelOwnerID: ID!) {\nuser(id: $channelOwnerID) {\nid\nlogin\ndisplayName\nprofileImageURL(width: 28)\nsubscriptionProducts {\n...emotePickerUserSubscriptionProduct\n}\nself {\ncumulativeTenure: subscriptionTenure(tenureMethod: CUMULATIVE) {\nmonths\n}\nsubscriptionBenefit {\nid\nplatform\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("ZhU4").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})));var r={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),r[e.name.value]=t}})),e.exports=i,e.exports.EmotePicker_EmotePicker_UserSubscriptionProducts=function(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=r[t]||new Set,a=new Set,s=new Set;for(i.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(r[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(t){var i=o(e,t);i&&n.definitions.push(i)})),n}(i,"EmotePicker_EmotePicker_UserSubscriptionProducts")},DLI4:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i="poliwag_rollout"},DLhE:function(e,t,n){"use strict";var i=n("mrSG"),a=n("/7QA"),r=n("f00E"),o=n("+pBb"),s=n("F6GT"),l=n("2xye"),c=n("VJH5");function d(e,t){a.o.track(l.SpadeEventType.ChatFilterSettingsChanged,{chat_filter_is_active:e.viewerChatFilterEnabled,from_menu:t,toggle_aggressive_language:e.viewerChatFilterSettings[c.a.Aggressive],toggle_explicit_language:e.viewerChatFilterSettings[c.a.Sexual],toggle_identity_language:e.viewerChatFilterSettings[c.a.Identity],toggle_profane_language:e.viewerChatFilterSettings[c.a.Profanity]})}function u(e){return e.chat.renderSent}function m(e){return-1===Object.values(e).indexOf(!0)}function p(e){Object(s.c)("viewerChatFilterEnabled",e.viewerChatFilterEnabled),Object(s.c)("viewerChatFilterSettings",e.viewerChatFilterSettings)}n.d(t,"a",(function(){return u})),a.p.store.registerReducer("chat",(function(e,t){var n,a,l,u;switch(void 0===e&&(u=Object(s.b)(),e=Object(i.__assign)(Object(i.__assign)({},u),{emoteSets:[],emotePickerSessionID:null,isChatRulesOpen:!1,isHidden:!1,renderSent:null,unhideIgnoredUsers:[]})),t.type){case o.c:return Object(i.__assign)(Object(i.__assign)({},e),{isHidden:!0});case o.d:return Object(i.__assign)(Object(i.__assign)({},e),{isHidden:!1});case o.e:return Object(i.__assign)(Object(i.__assign)({},e),{isChatRulesOpen:!1});case o.h:return Object(i.__assign)(Object(i.__assign)({},e),{emoteSets:t.emoteSets});case o.f:return Object(i.__assign)(Object(i.__assign)({},e),{emotePickerSessionID:null});case o.g:return Object(i.__assign)(Object(i.__assign)({},e),{emotePickerSessionID:Object(r.c)()});case o.i:return Object(i.__assign)(Object(i.__assign)({},e),{lastUsedFollowerDurations:Object(i.__assign)(Object(i.__assign)({},e.lastUsedFollowerDurations),(n={},n[t.channelLogin]=t.duration,n))});case o.p:return Object(i.__assign)(Object(i.__assign)({},e),{lastUsedSlowModeDurations:Object(i.__assign)(Object(i.__assign)({},e.lastUsedSlowModeDurations),(a={},a[t.channelLogin]=t.duration,a))});case o.o:return Object(i.__assign)(Object(i.__assign)({},e),{isChatRulesOpen:!0});case o.a:return Object(i.__assign)(Object(i.__assign)({},e),{showAutoModActions:!1});case o.b:return Object(i.__assign)(Object(i.__assign)({},e),{showAutoModActions:!0});case o.j:return Object(i.__assign)(Object(i.__assign)({},e),{showModerationActions:!1});case o.k:return Object(i.__assign)(Object(i.__assign)({},e),{showModerationActions:!0});case o.l:return Object(i.__assign)(Object(i.__assign)({},e),{showModIcons:!1});case o.m:return Object(i.__assign)(Object(i.__assign)({},e),{showModIcons:!0});case o.q:return Object(i.__assign)(Object(i.__assign)({},e),{showTimestamps:!1});case o.r:return Object(i.__assign)(Object(i.__assign)({},e),{showTimestamps:!0});case o.t:var h=Object(i.__assign)(Object(i.__assign)({},e),{viewerChatFilterEnabled:!1});return p(h),d(h,t.source),h;case o.u:return p(h=m(e.viewerChatFilterSettings)?Object(i.__assign)(Object(i.__assign)({},e),{viewerChatFilterEnabled:!0,viewerChatFilterSettings:(l={},l[c.a.Aggressive]=!0,l[c.a.Identity]=!0,l[c.a.Profanity]=!1,l[c.a.Sexual]=!0,l)}):Object(i.__assign)(Object(i.__assign)({},e),{viewerChatFilterEnabled:!0})),d(h,t.source),h;case o.v:return p(h=Object(i.__assign)(Object(i.__assign)({},e),{viewerChatFilterEnabled:!m(t.settings),viewerChatFilterSettings:Object(i.__assign)(Object(i.__assign)({},e.viewerChatFilterSettings),t.settings)})),d(h,t.source),h;case o.n:return Object(i.__assign)(Object(i.__assign)({},e),{renderSent:t.customEvent});case o.s:return Object(i.__assign)(Object(i.__assign)({},e),{unhideIgnoredUsers:Object(i.__spreadArrays)(e.unhideIgnoredUsers,[t.userID])});default:return e}}))},DOLr:function(e,t,n){"use strict";n.r(t);var i=n("/MKj"),a=n("fvjX"),r=n("1/iK"),o=n("y5D0"),s=n("kRBY"),l=n("EkBt"),c=n("mrSG"),d=n("cr+I"),u=n("q1tI"),m=n("/7QA"),p=n("cw0r"),h=n("4VQm"),f=n("yR8l"),g=n("geRD"),v=n("daa2"),b=n("DMoW"),k=n("2xye"),y=n("ZS2+"),S=n("MJbm"),C=n("XDCx"),E=n("TSYQ"),w=n("7CzK"),O=n("94Uw"),D=n("sUnt"),N=n("hnjF"),_=n("7uM4"),I=n("C7sF"),M=n("+80q"),j=n("Ws8v"),T=n("X2PJ"),P=(n("/nm5"),n("41XU")),L=y.a.wrap((function(){return n.e(85).then(n.bind(null,"7lJP"))}),"UserImageUploader"),R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.openModal=function(){var e=t.props.data&&t.props.data.user;e&&e.id&&e.login&&t.props.showModal(L,{userID:e.id,login:e.login,displayName:e.displayName||e.login,imageType:O.a.ProfileBanner,showCloser:!0,successCallback:t.imageUploaded})},t.imageUploaded=function(){t.props.data&&t.props.data.refetch()},t}return Object(c.__extends)(t,e),t.prototype.render=function(){var e,t,n="channel-banner__image-default",i="channel-banner__header-type",a={"channel-banner--open":!this.props.collapsed,"channel-banner--side-nav":this.props.isSideNavBanner},r={"channel-banner__image--side-nav":this.props.isSideNavBanner},o={"channel-banner__edit-overlay-button--side-nav":this.props.isSideNavBanner},s=this.props.data;s&&!s.loading&&this.props.firstPageLoaded&&s.user&&s.user.bannerImageURL?(n="channel-banner__image-loaded",t={backgroundImage:"url("+s.user.bannerImageURL+")"}):(r["channel-banner__image--default"]=!0,t={backgroundImage:"url("+w+")"}),this.props.isSideNavBanner&&(i="channel-banner__side-nav-type");var l=null;if(this.props.canEdit){var c=this.props.isSideNavBanner?u.createElement(D.a,{display:N.d.Flex,padding:{x:3},justifyContent:N.h.Between,fullWidth:!0},u.createElement(_.a,{asset:I.a.Edit}),u.createElement(M.a,null,Object(m.d)("Edit","ChannelBanner"))):u.createElement(D.a,{display:N.d.Flex,flexDirection:N.e.Row},u.createElement(D.a,{margin:{right:.5}},u.createElement(_.a,{asset:I.a.Edit})),Object(m.d)("Update Profile Banner","ChannelBanner"));l=u.createElement(j.a,{className:E("channel-banner__edit-overlay",o),background:T.a.Overlay,position:N.j.Absolute,attachTop:!0,attachLeft:!0,fullWidth:!0},u.createElement("button",{className:"channel-banner__edit-overlay-button","data-test-selector":"channel-banner__edit-overlay-interactable",onClick:this.openModal},u.createElement(D.a,{display:N.d.Flex,alignItems:N.b.Center,flexDirection:N.e.Column,justifyContent:N.h.Center},c)))}return e=u.createElement("div",{className:E("channel-banner__image",r),"data-test-selector":n,style:t},l),u.createElement("div",{className:E("channel-banner",a),"data-test-selector":i,onTransitionEnd:this.props.onTransitionEnd},u.createElement(N.g,{fullWidth:!0,fullHeight:!0},e))},t.prototype.componentWillUnmount=function(){this.props.closeModal()},t}(u.Component),F=Object(f.a)(P,{options:function(e){return{variables:{login:e.channelLogin}}},skip:function(e){return!e.channelLogin||!e.firstPageLoaded}})(R);var U,x=Object(i.b)((function(e){return{firstPageLoaded:e.session.firstPageLoaded}}),(function(e){return Object(a.b)({closeModal:C.d,showModal:C.e},e)}))(F),A=n("dIU+"),B=n("dEDE"),V=y.a.wrap((function(){return n.e(103).then(n.bind(null,"QjI3"))}),"SubscribeButton"),H=y.a.wrap((function(){return Promise.resolve().then(n.bind(null,"dIU+"))}),"FollowButton"),q=function(e){var t=e.channelDisplayName,n=e.channelLogin,i=e.isFollowing,a=e.onWidthChange,r=e.tooltipDirection;return u.createElement(D.a,{fullHeight:!0,display:N.d.Flex,flexWrap:N.f.NoWrap,alignItems:N.b.Center,justifyContent:N.h.End,className:"channel-header__right","data-target":"channel-header-right"},u.createElement(D.a,{display:N.d.Flex,margin:{right:1}},u.createElement(H,{updateContainerWidth:a,channelLogin:n,followUIType:A.FollowButtonUIType.IconAndText,unfollowUIType:A.FollowButtonUIType.IconOnly,channelName:t,tooltipDirection:r,hideDropdownWhenFollowing:!0,fullWidthButton:!0,hollowIcons:!0,animatedButton:!0,showTooltips:!0,alignRight:!0})),u.createElement(D.a,null,u.createElement(V,{updateContainerWidth:a,channelLogin:n,subscribedButtonType:B.d.Primary,unsubscribedButtonType:i?B.d.Primary:B.d.Secondary,forceIcon:!0,subLocation:"channel_page",allowPromotionalCallout:!0})))},G=n("4rCz"),W=n("Hz5m");!function(e){e[e.Channel=1]="Channel",e[e.Clips=2]="Clips",e[e.Success=3]="Success",e[e.Followers=4]="Followers",e[e.Following=5]="Following",e[e.Videos=6]="Videos"}(U||(U={}));var z=function(e,t){return[{label:Object(G.d)("Home","ChannelHeader"),pathname:Q(t,""),isSelected:Y(e,U.Channel)},{label:Object(G.d)("Videos","ChannelHeader"),pathname:Q(t,"videos"),isSelected:Y(e,U.Videos)},{label:Object(G.d)("Clips","ChannelHeader"),pathname:Q(t,"clips"),isSelected:Y(e,U.Clips)},{label:Object(G.d)("Followers","ChannelHeader"),pathname:Q(t,"followers"),isSelected:Y(e,U.Followers)}]},Q=function(e,t){return void 0===t&&(t=""),e?"/"+e+"/"+t:void 0},Y=function(e,t){return U[function(e){switch(e){case W.c.About:return U.Channel;case W.c.Collections:case W.c.Videos:return U.Videos;case W.c.Clips:return U.Clips;case W.c.Followers:return U.Followers;case W.c.Following:return U.Following;default:return U.Channel}}(e)]===U[t]},$=n("uBOI"),K=function(e){var t=e.channelLogin,n=e.page,i=e.setupResizeHandler,a=e.removeResizeHandler,r=function(e,t){var n=-1,i=z(e,t).map((function(e,t){var i=e.isSelected,a=e.label,r=e.pathname,o=a.toLowerCase()+"-channel-header-item",s={pathname:r,state:Object(c.__assign)({},G.q.history.location.state)};return i&&(n=t),{label:a,linkTo:s,"data-a-target":o}}));return{activeTab:n,tabs:i}}(n,t),o=r.activeTab,s=r.tabs;return u.createElement(D.a,{fullHeight:!0,display:N.d.Flex,padding:{x:1},alignItems:N.b.Center,justifyContent:N.h.Center,flexWrap:N.f.NoWrap,flexGrow:4},u.createElement($.b,{justifyContent:N.h.Center,activeTabIndex:o,borderBottom:!1,tabs:s,setupResizeHandler:i,removeResizeHandler:a,"data-test-selector":"channel-header-tabs"}))},X=n("gdtZ"),J=n("HH5h"),Z=function(e){var t=e.editProfileOverlay,n=e.profileImageURL,i=e.displayName,a=e.login;return u.createElement(D.a,{className:"channel-header__user-avatar channel-header__user-avatar--active",margin:{right:.5},breakpointSmall:{margin:{right:1}},display:N.d.Flex,alignItems:N.b.Stretch},u.createElement(D.a,{position:N.j.Relative,className:"channel-header__avatar-dropdown"},u.createElement(J.a,{size:36,src:n,alt:i||"",userLogin:void 0===n?null:a}),t))},ee=n("PL8s"),te=function(e){var t=e.displayName;if(!t)return u.createElement(ee.a,{lineCount:1,width:120});var n=t.length>20?T.d.Size6:T.d.Size5;return u.createElement(M.a,{fontSize:n,color:T.c.Inherit,whiteSpace:M.f.NoWrap},t)},ne=n("b7S+");n("Os+Q");function ie(){return u.createElement(ne.a,{label:Object(m.d)("Verified User","ChannelHeader"),direction:ne.c.Right},u.createElement(D.a,{className:"channel-header-verified-badge",display:N.d.Flex,alignItems:N.b.Center,margin:{left:.5},breakpointSmall:{margin:{left:1}}},u.createElement(_.a,{asset:I.a.Verified})))}var ae=n("Jsra"),re=function(e){var t,n=e.isActive,i=e.isLive,a=e.onClick,r=e.channelLogin,o=e.displayName,s=e.isPartner,l=e.profileImageURL,c=e.editProfileOverlay,d=E("channel-header__user",{"channel-header__user--selected":n}),m=u.createElement(D.a,{display:N.d.Flex,alignItems:N.b.Center,fullHeight:!0,className:"channel-header-user-tab__user-content"},u.createElement(Z,{editProfileOverlay:c,profileImageURL:l,displayName:o,login:r}),u.createElement(te,{displayName:o}),s&&u.createElement(ie,null),i&&u.createElement(X.a,{isActive:n}));return t=n?u.createElement("div",{className:"channel-header__banner-toggle",onClick:a,"data-a-target":"user-channel-header-item"},m):r?u.createElement(ae.a,{to:"/"+r||!1,"data-a-target":"user-channel-header-item",hoverUnderlineNone:!0,type:ae.b.Inherit},m):m,u.createElement(N.g,{display:N.d.Flex,className:d},t)},oe=n("GnwI"),se=n("xb4u"),le=n("sSlw"),ce=(n("BOil"),n("HXcb")),de=1024,ue=0,me=y.a.wrap((function(){return n.e(83).then(n.bind(null,"g9Rq"))}),"EditProfileOverlay",{placeholder:null}),pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={bannerHidden:!0,bannerSlideIn:!1},t.innerWidth=de,t.processWidth=function(){t.channelHeader&&(t.innerWidth=window.innerWidth,t.updateWidth(t.getWidth(t.channelHeader)),t.updateTabsSize())},t.renderMiddleSection=function(){var e=t.props,n=e.channelLogin,i=e.page;return u.createElement(K,{page:i,setupResizeHandler:t.setupTabResizeHandler,removeResizeHandler:t.removeTabResizeHandler,channelLogin:n})},t.renderEditProfileOverlay=function(){var e=t.props,n=e.channel,i=e.data,a=e.currentUser;if(!(n&&n.id&&n.login&&t.isChannelEditor()))return null;var r=n.id,o=n.login,s=n.displayName,l=(n.medProfileImageUrl||m.a.defaultAvatarURL).includes("user-default-pictures"),c=i&&i.user&&i.user.profileImageURL;return u.createElement(me,{userID:r,login:o,displayName:s||o,isDefaultAvatar:l,profileImageURL:c,currentUser:a})},t.toggleChannelBanner=function(){t.setState((function(e){var t=!e.bannerSlideIn;return t?{bannerHidden:!e.bannerHidden,bannerSlideIn:t}:{bannerSlideIn:t}}))},t.completedBannerAnimation=function(){t.setState((function(e){return e.bannerSlideIn?e:{bannerHidden:!0}}))},t.onUpdateDebounce=function(){t.resizeTimeout&&(clearTimeout(t.resizeTimeout),t.resizeTimeout=null),t.channelHeader&&(t.processWidth(),t.resizeTimeout=setTimeout(t.handleWindowResize,ue))},t.setupTabResizeHandler=function(e){t.updateTabsSizeHandler=e},t.removeTabResizeHandler=function(){t.updateTabsSizeHandler=void 0},t.handleWindowResize=function(){t.resizeTimeout=null,t.forceUpdate(),t.updateTabsSize()},t.saveChannelHeaderRef=function(e){return t.channelHeader=e},t}return Object(c.__extends)(t,e),t.prototype.componentDidMount=function(){!this.props.data||this.props.data.loading||this.props.data.error||this.updateTabsSize(),this.reportInteractive()},t.prototype.componentDidUpdate=function(e){this.processWidth(),this.reportInteractive()},t.prototype.componentWillUnmount=function(){this.resizeTimeout&&clearTimeout(this.resizeTimeout)},t.prototype.render=function(){var e=this.props,t=e.page,n=e.firstPageLoaded,i=e.rightColumnExpanded,a=Y(t,U.Channel),r=n&&a?this.renderBanner():null,o=i||this.innerWidth<se.a?1:4,s=this.renderLeftSection(),l=this.renderMiddleSection(),c=n?this.renderRightSection():null;return u.createElement(le.a,null,u.createElement(D.a,{className:"channel-header",padding:{y:.5},display:N.d.Flex,fullHeight:!0,fullWidth:!0,alignItems:N.b.Stretch,justifyContent:N.h.Between,flexDirection:N.e.Column},r,u.createElement(D.a,{display:N.d.Flex,justifyContent:N.h.Center,flexWrap:N.f.NoWrap,fullHeight:!0,fullWidth:!0},u.createElement(D.a,{fullHeight:!0,fullWidth:!0,refDelegate:this.saveChannelHeaderRef,padding:{left:.5,right:.5},breakpointSmall:{padding:{left:1,right:o}}},u.createElement(D.a,{display:N.d.Flex,fullWidth:!0,fullHeight:!0,justifyContent:N.h.Between,alignItems:N.b.Center},s,l,c),u.createElement(S.a,{onResize:this.onUpdateDebounce})))))},t.prototype.renderRightSection=function(){var e=this.props,t=e.channel,n=e.channelLogin,i=this.getFollowingState(this.props),a=t&&t.displayName||"";return u.createElement(q,{onWidthChange:this.onUpdateDebounce,isFollowing:i,channelLogin:n,channelDisplayName:a})},t.prototype.renderBanner=function(){var e=this.props.channelLogin,t=this.state.bannerHidden?N.d.HideAccessible:N.d.Block;return u.createElement(D.a,{display:t,fullWidth:!0},u.createElement(x,{channelLogin:e,canEdit:this.isChannelEditor(),collapsed:!this.state.bannerSlideIn,onTransitionEnd:this.completedBannerAnimation}))},t.prototype.renderLeftSection=function(){var e,t,n,i=this.props,a=i.channel,r=i.live,o=i.page,s=i.channelLogin,l=i.hostedChannel,c=Y(o,U.Channel);a&&(a.medProfileImageUrl&&(e=a.medProfileImageUrl),t=a.displayName||"",n=a.roles&&a.roles.isPartner);var d=this.renderEditProfileOverlay();return u.createElement(D.a,{display:N.d.Flex,alignItems:N.b.Center,flexWrap:N.f.NoWrap,fullHeight:!0,className:"channel-header__left","data-target":"channel-header-left"},u.createElement(re,{onClick:this.toggleChannelBanner,channelLogin:s,displayName:t,isPartner:!!n,isLive:r&&!l,profileImageURL:e,isActive:c,editProfileOverlay:d}))},t.prototype.updateWidth=function(e){var t=e!==this.width||this.width!==this.prevWidth;void 0!==this.width&&(this.prevWidth=this.width),this.width!==e&&(this.width=e),t&&(this.resizeTimeout&&(clearTimeout(this.resizeTimeout),this.resizeTimeout=null),this.onUpdateDebounce())},t.prototype.isChannelEditor=function(){var e=this.props,t=e.currentUser,n=e.channel;return!(!t||!n||!t.roles||t.id!==n.id&&!t.roles.isStaff&&!t.roles.isSiteAdmin)},t.prototype.updateTabsSize=function(){this.updateTabsSizeHandler&&this.updateTabsSizeHandler()},t.prototype.getWidth=function(e){return e?e.clientWidth:0},t.prototype.reportInteractive=function(){this.props.contextLoading||this.props.latencyTracking.reportInteractive()},t.prototype.getFollowingState=function(e){return!!(e.channel&&e.channel.self&&e.channel.self.follower)&&null!==e.channel.self.follower.disableNotifications},t}(u.Component),he=Object(a.d)(Object(f.a)(ce,{options:function(e){return{variables:{login:e.channelLogin}}},skip:function(e){return!e.channelLogin}}),Object(oe.withLatencyTracking)("ChannelHeader"))(pe),fe=n("CFw/"),ge=n.n(fe),ve=n("HSpZ"),be=(n("9RDd"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.__extends)(t,e),t.prototype.render=function(){return u.createElement("div",{onClick:this.props.closeModal},u.createElement(ve.a,{type:ve.f.FadeIn,duration:ve.c.Long,timing:ve.e.EaseInOut,enabled:!0},u.createElement(j.a,{className:"browser-push-notifications-upsell",alignItems:N.b.Center,justifyContent:N.h.Center,position:N.j.Fixed,display:N.d.Flex,background:T.a.Overlay,fullHeight:!0,fullWidth:!0,attachTop:!0,attachLeft:!0},u.createElement(D.a,{className:"browser-push-notifications-upsell__container",display:N.d.Flex,textAlign:N.l.Center,padding:{x:1},position:N.j.Relative},u.createElement(ve.a,{type:ve.f.SlideInBottom,duration:ve.c.Long,timing:ve.e.EaseInOut,enabled:!0},u.createElement(M.a,{type:M.e.H3,fontSize:T.d.Size3,lineHeight:M.b.Body},Object(m.d)("Don't miss out when your favorite streamers go live!","BrowserNotificationsUpsellModal")),u.createElement(D.a,{margin:{top:1}},u.createElement(M.a,{type:M.e.H4,fontSize:T.d.Size4,color:T.c.OverlayAlt,lineHeight:M.b.Body},Object(m.d)("Turn on Browser Notifications to get updates even when your browser window is minimized","BrowserNotificationsUpsellModal")))),u.createElement(D.a,{className:"browser-push-notifications-upsell__arrow",position:N.j.Absolute,attachTop:!0,attachLeft:!0},u.createElement(ve.a,{type:ve.f.SlideInBottom,delay:ve.b.Short,duration:ve.c.Long,timing:ve.e.EaseInOut,enabled:!0},u.createElement("img",{src:ge.a})))))))},t}(u.Component));var ke=Object(i.b)(null,(function(e){return Object(a.b)({closeModal:C.d},e)}))(be);var ye=Object(i.b)((function(e){return{firstPageLoaded:e.session.firstPageLoaded,rightColumnExpanded:e.ui.rightColumnExpanded}}),(function(e){return Object(a.b)({showBrowserNotificationsUpsellModal:function(){return Object(C.e)(ke,{})},closeBrowserNotificationsUpsellModal:C.d},e)}))(he),Se=n("tiJ6"),Ce=n("Q34B"),Ee=n("0bws"),we=0,Oe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.trackLongtask=function(e){if(t.shouldTrackLongtask()){var n=e.attribution.find((function(e){return"script"===e.name}));m.o.track(k.SpadeEventType.UserLongtask,{container_id:n&&n.containerId,container_name:n&&n.containerName,container_src:n&&n.containerSrc,container_type:n&&n.containerType,longtask_duration:e.duration,longtask_name:e.name})}},t}return Object(c.__extends)(t,e),t.prototype.componentDidMount=function(){var e=this;if(++we>1){var t="Multiple LongtaskTrackers mounted (one maximum allowed).";m.k.errorAndReport(new Error(t),t)}else window.PerformanceObserver&&window.PerformanceLongTaskTiming&&(this.performanceObserver=new window.PerformanceObserver((function(t){t.getEntries().forEach(e.trackLongtask)})),this.performanceObserver.observe({entryTypes:["longtask"]}))},t.prototype.componentWillUnmount=function(){we--,this.performanceObserver&&this.performanceObserver.disconnect()},t.prototype.render=function(){return null},t.prototype.shouldTrackLongtask=function(){return m.b.get("longtask_tracking_sample_rate",1)>Math.random()},t}(u.Component),De=n("x7UT"),Ne=n("0Log"),_e=n("/aPz"),Ie=n("f00E"),Me=n("Uyxv"),je=n("4l7P");function Te(e){return{channel_id:e.channelId,commercial_id:e.commercialId,player_volume:e.playerVolume,player_mute:e.playerMute,on_channel_page:e.onChannelPage,device_id:e.deviceId,dom_node:e.domNode,pbyp_visible:e.pbypVisible,main_play_session_id:e.mainPlayerSessionId,pbyp_play_session_id:e.pbypPlayerSessionId,main_player_broadcaster_latency:e.mainPlayerBroadcasterLatency,pbyp_player_broadcaster_latency:e.pbypPlayerBroadcasterLatency,stitched:e.stitched}}var Pe=n("oKCn"),Le=n("0BjR"),Re=n("i/Zp"),Fe=n("C94G");function Ue(e){var t=e.weighted_buckets,n=Math.random(),i=-1;return t&&t.length>0&&(i=function(e,t){for(var n=0,i=0;i<t.length;i++)if((n+=t[i])>=e)return i;return-1}(n,t)),i>=0?Math.floor(1e3*(i+Math.random())):(m.k.debug("weighted_buckets unavailable, opting for legacy jitter"),function(e){var t=e.jitter_time,n=e.jitter_buckets;return Math.floor(Math.random()*n)*(t/n)}(e))}var xe=n("b6Yk"),Ae=function(e,t){var n=function(e){return d.stringify({oauth_token:Object(s.a)(m.p.store.getState())||"",need_https:!0,platform:"web",player_type:e,player_backend:"mediaplayer"})}(t);return"/api/channels/"+e.toLowerCase()+"/access_token?"+n},Be=function(e,t){return Object(c.__awaiter)(void 0,void 0,void 0,(function(){var n;return Object(c.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=Ae(e,t),[4,xe.a.getOrThrow(n,{credentials:"include"})];case 1:return[2,i.sent().body];case 2:return i.sent(),[2];case 3:return[2]}}))}))},Ve=function(e,t){return Object(c.__awaiter)(void 0,void 0,void 0,(function(){return Object(c.__generator)(this,(function(n){switch(n.label){case 0:return[4,Be(e,t)];case 1:return[2,n.sent()]}}))}))},He=function(e,t){return Object(c.__awaiter)(void 0,void 0,void 0,(function(){var n,i,a,r;return Object(c.__generator)(this,(function(o){switch(o.label){case 0:return n=performance.now(),[4,Ve(e,t)];case 1:return i=o.sent(),a=Math.round(performance.now()-n),i?(r=function(e,t){var n={allow_source:!0,fast_bread:!!e||void 0,playlist_include_framerate:!0,reassignments_supported:!0,sig:t.sig,token:t.token,player_backend:"mediaplayer",p:Math.floor(9999999*Math.random())};return d.stringify(n)}(!0,i),[2,{src:"https://usher.ttvnw.net/api/channel/hls/"+e.toLowerCase()+".m3u8?"+r,accessTokenLoadTime:a}]):[2,{accessTokenLoadTime:a}]}}))}))},qe=function(e,t,n){return Object(c.__awaiter)(void 0,void 0,void 0,(function(){return Object(c.__generator)(this,(function(i){switch(t){case Ce.a.LIVE:return[2,He(e,n)];default:return[2]}return[2]}))}))},Ge=n("fPaz"),We=n("yIzk"),ze=n("XQbB");function Qe(){return u.createElement(j.a,{position:N.j.Absolute,attachTop:!0,attachLeft:!0,attachRight:!0,attachBottom:!0,justifyContent:N.h.Center,alignItems:N.b.Center,display:N.d.Flex,fullWidth:!0,fullHeight:!0,background:T.a.Overlay},u.createElement(ze.a,null))}function Ye(){return u.createElement(j.a,{fullWidth:!0,fullHeight:!0,background:T.a.Overlay})}var $e=function(e){var t=e.status,n=null;switch(void 0===t?Me.c.Playing:t){case Me.c.Playing:n=null;break;case Me.c.Paused:n=u.createElement(Ye,null);break;case Me.c.Loading:n=u.createElement(Qe,null);break;default:n=null}return n?u.createElement(We.a,null,u.createElement(j.a,{position:N.j.Absolute,attachTop:!0,attachBottom:!0,attachLeft:!0,attachRight:!0,fullWidth:!0,fullHeight:!0,zIndex:N.o.Default},n)):null};n("SHP0");function Ke(e){if(e.user)return e.user.stream&&e.user.stream.game&&e.user.stream.game.name}var Xe,Je=n("HwKw"),Ze=1e3,et=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={shouldShow:t.props.isShowing,playerStatus:t.props.status},t.playSessionId=null,t.hasRestrictedContent=t.props.isRestricted,t.logger=m.k.withCategory(Re.a.PictureByPicture),t.loadMediaPlayerInstance=function(e){return Object(c.__awaiter)(t,void 0,void 0,(function(){var t,n,i,a,r,o=this;return Object(c.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,4,,5]),t=this.props.contentType,""===e||t!==Ce.a.LIVE?[3,3]:[4,Object(Fe.a)()];case 1:return n=s.sent(),i=n.mediaPlayerInstance,n.playerLoadTimePromise.then((function(e){o.playerCoreLoadTime=e})),a=this,[4,qe(e,t,Re.a.PictureByPicture)];case 2:a.usherSrc=s.sent(),this.usherSrc&&this.usherSrc.src&&(i.load(this.usherSrc.src),this.setupPlayer(i),this.setDestroyTimer()),s.label=3;case 3:return[3,5];case 4:return r=s.sent(),this.logger.errorAndReport(r,"Media player failed to load"),[3,5];case 5:return[2]}}))}))},t.onPlayerTracking=function(e){var n=e.properties,i=Object(c.__assign)(Object(c.__assign)({},n),{channel:t.props.channelLogin,channel_id:t.props.channelId,game:Ke(t.props.gameData),play_session_id:t.playSessionId,player:Re.a.PictureByPicture,vod_type:void 0});e.name===k.SpadeEventType.VideoTrackingVideoPlay&&(i.time_for_player_core_load=t.playerCoreLoadTime,i.time_for_token_load=t.usherSrc&&t.usherSrc.accessTokenLoadTime),m.o.trackPlayerEvent(e.name,i)},t.shouldShowPlayer=function(){return""!==t.props.channelLogin&&t.props.contentType===Ce.a.LIVE&&!t.props.isRestricted},t.onPlayerReady=function(){var e,n;t.logger.debug("PbyP Player Ready"),t.selectDefaultLowQuality(),e=t.getPlayerTrackingInfo(),n=Te(e),m.o.track(k.SpadeEventType.PictureByPictureSpawn,n)},t.onPlayerPlaying=function(){var e,n;t.logger.debug("PbyP Player Playing"),t.setState({playerStatus:Me.c.Playing}),e=t.getPlayerTrackingInfo(),n=Te(e),m.o.track(k.SpadeEventType.PictureByPicturePlaying,n)},t.onPlayerPlay=function(){(t.logger.debug("PbyP player triggered play"),t.mediaPlayerInstance)&&(t.mediaPlayerInstance.getPlayerState()===Le.f.IDLE&&(t.logger.debug("PbyP player detected to be IDLE so triggering mediaplayer play"),t.mediaPlayerInstance.play()))},t.onPlayerPause=function(){if(t.logger.debug("PbyP player triggered pause"),t.mediaPlayerInstance){var e=t.mediaPlayerInstance.getPlayerState();e!==Le.f.IDLE&&e!==Le.f.ENDED&&(t.logger.debug("PbyP player is not IDLE or ENDED so mediaplayer pause"),t.mediaPlayerInstance.pause(),t.setState({playerStatus:Me.c.Paused}))}},t.onPlayerLoading=function(){(t.logger.debug("PbyP player is buffering/loading"),t.mediaPlayerInstance)&&(t.mediaPlayerInstance.getPlayerState()===Le.f.BUFFERING&&t.setState({playerStatus:Me.c.Loading}))},t.selectDefaultLowQuality=function(){if(t.mediaPlayerInstance){var e=t.mediaPlayerInstance.getQualities().find((function(e){return e.group.includes(Pe.f.Low)}));e&&(t.logger.debug("PbyP player selected quality "+e.name),t.mediaPlayerInstance.setQuality(e))}},t.showPbyPPlayer=function(){var e,n;t.logger.debug("showing PbyP player assuming mediaPlayer is available"),t.mediaPlayerInstance&&(t.setState({shouldShow:!0}),e=t.getPlayerTrackingInfo(),n=Te(e),m.o.track(k.SpadeEventType.PictureByPictureVisible,n))},t.hidePbyPPlayer=function(e,n){void 0===e&&(e=!1),void 0===n&&(n=!1),e&&t.setState({shouldShow:!1}),n&&t.destroyPlayer()},t.destroyPlayer=function(e){if(void 0===e&&(e=!1),t.jitterTimeoutID&&clearTimeout(t.jitterTimeoutID),t.mediaPlayerInstance){var n=1e3*t.mediaPlayerInstance.getLiveLatency();setTimeout((function(){var n,i,a;t.mediaPlayerInstance&&(t.logger.debug("Destroying player called"),n=Object(c.__assign)(Object(c.__assign)({},t.getPlayerTrackingInfo()),{selfDestruct:e}),i=Te(n),a=Object(c.__assign)(Object(c.__assign)({},i),{self_destruct:n.selfDestruct}),m.o.track(k.SpadeEventType.PictureByPictureDespawn,a),t.mediaPlayerInstance.removeEventListener(Le.f.READY,t.onPlayerReady),t.mediaPlayerInstance.removeEventListener(Le.f.PLAYING,t.onPlayerPlaying),t.mediaPlayerInstance.removeEventListener(Le.f.BUFFERING,t.onPlayerLoading),t.mediaPlayerInstance.removeEventListener(Le.e.TRACKING,t.onPlayerTracking),t.mediaPlayerInstance.delete(),t.mediaPlayerInstance=null,t.playSessionId=null)}),Ze+n)}},t.attachRef=function(e){if(t.mediaPlayerInstance&&e){var n=t.mediaPlayerInstance.getHTMLVideoElement();t.playSessionId=Object(Ie.c)(),n.setAttribute("id",t.playSessionId),n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline",""),n.setAttribute("oncontextmenu","return false;"),e.appendChild(n)}},t}return Object(c.__extends)(t,e),t.prototype.componentDidUpdate=function(e,t){var n=this;this.props.channelLogin!==e.channelLogin&&this.props.onChannelChange();var i=this.props.contentType===Ce.a.LIVE,a=!!this.mediaPlayerInstance;if(e.status!==this.props.status&&(this.props.status===Me.c.Playing?this.onPlayerPlay():this.props.status===Me.c.Paused?this.onPlayerPause():this.props.status===Me.c.Unavailable&&this.hidePbyPPlayer(t.shouldShow||this.state.shouldShow,!0)),e.isShowing===this.props.isShowing)if(i){var r=this.props.pubsub.messages&&this.props.pubsub.messages.adsMidrollRequestMessage&&this.props.pubsub.messages.adsMidrollRequestMessage.data,o=e.pubsub.messages&&e.pubsub.messages.adsMidrollRequestMessage&&e.pubsub.messages.adsMidrollRequestMessage.data,s=!o||r&&r.commercial_id!==o.commercial_id;if(!a&&r&&s){this.logger.debug("Pubsub payload detected and processing "+JSON.stringify(r));var l=Ue(r),c=this.props.getMainPlayerMetadata(),d=c.latencyToBroadcaster?c.latencyToBroadcaster:0;this.logger.debug("Delaying load of mediaPlayer by "+(l+d)),this.jitterTimeoutID=setTimeout((function(){n.loadMediaPlayerInstance(n.props.channelLogin)}),l+d)}}else this.hidePbyPPlayer(t.shouldShow||this.state.shouldShow,!0);else this.props.isShowing&&this.shouldShowPlayer()?(this.destroyTimeoutID&&clearTimeout(this.destroyTimeoutID),this.showPbyPPlayer()):this.props.isShowing||this.hidePbyPPlayer(this.state.shouldShow,!0)},t.prototype.componentWillUnmount=function(){this.logger.debug("pbyp player unmounting"),this.hidePbyPPlayer(this.state.shouldShow,!0)},t.prototype.render=function(){return this.mediaPlayerInstance?u.createElement(D.a,{className:E("picture-by-picture-player",{"picture-by-picture-player--collapsed":!this.state.shouldShow}),flexGrow:0,flexShrink:0,alignItems:N.b.Center,display:N.d.Flex,flexWrap:N.f.Wrap,fullWidth:!0,justifyContent:N.h.Center},u.createElement(Ge.b,{ratio:Ge.c.Aspect16x9},this.state.playerStatus!==Me.c.Playing&&u.createElement($e,{status:this.state.playerStatus}),u.createElement("div",{className:"pbyp-player-instance",ref:this.attachRef}))):null},t.prototype.setupPlayer=function(e){this.logger.debug("setupPlayer called"),this.mediaPlayerInstance=e,this.mediaPlayerInstance.setPlayerType(Re.a.PictureByPicture),this.mediaPlayerInstance.setMuted(!0),this.mediaPlayerInstance.addEventListener(Le.f.READY,this.onPlayerReady),this.mediaPlayerInstance.addEventListener(Le.f.PLAYING,this.onPlayerPlaying),this.mediaPlayerInstance.addEventListener(Le.f.BUFFERING,this.onPlayerLoading),this.mediaPlayerInstance.addEventListener(Le.e.TRACKING,this.onPlayerTracking),this.mediaPlayerInstance.play()},t.prototype.setDestroyTimer=function(){var e=this,t=this.props.pubsub.messages&&this.props.pubsub.messages.adsMidrollRequestMessage&&this.props.pubsub.messages.adsMidrollRequestMessage.data&&this.props.pubsub.messages.adsMidrollRequestMessage.data.warmup_time;if(t){var n=2*t+3e4;this.logger.debug("Setting destroyTimer with a delay of "+n),this.destroyTimeoutID=setTimeout((function(){e.destroyPlayer(!0)}),n)}},t.prototype.getPlayerTrackingInfo=function(){var e;if(this.mediaPlayerInstance){var t=window.location.pathname.toLowerCase().includes(this.props.channelLogin),n="";if(this.playSessionId){var i=document.getElementById(this.playSessionId);i&&(n=JSON.stringify(i.parentElement,["id","className","tagName"]))}var a=this.props.pubsub.messages&&this.props.pubsub.messages.adsMidrollRequestMessage&&this.props.pubsub.messages.adsMidrollRequestMessage.data&&this.props.pubsub.messages.adsMidrollRequestMessage.data.commercial_id||"",r=this.props.getMainPlayerMetadata();return{channelId:this.props.channelId,commercialId:a,playerVolume:this.mediaPlayerInstance.getVolume(),playerMute:this.mediaPlayerInstance.isMuted(),onChannelPage:t,deviceId:m.p.session.deviceID,domNode:n,pbypVisible:this.props.isShowing,mainPlayerSessionId:this.props.mainPlayerPlaySessionId,mainPlayerBroadcasterLatency:null===(e=r)||void 0===e?void 0:e.latencyToBroadcaster,pbypPlayerSessionId:this.playSessionId||"",pbypPlayerBroadcasterLatency:1e3*this.mediaPlayerInstance.getLiveLatency(),stitched:this.props.isStitched}}return{}},t}(u.Component);var tt=Object(a.d)(Object(De.a)([{topic:function(e){return Object(_e.b)(e.channelId)},skip:function(e){return""===e.channelId},mapMessageTypesToProps:(Xe={},Xe[Ne.PubsubMessageType.AdsMidrollRequest]="adsMidrollRequestMessage",Xe)}]),Object(f.a)(Je,{name:"gameData",options:function(e){return{variables:{channelLogin:e.channelLogin}}},skip:function(e){return!e.channelLogin}}),Object(je.b)((function(e){return{isRestricted:e.isRestricted,isShowing:e.isShowing,isStitched:e.isStitched,onChannelChange:e.onChannelChange,mainPlayerPlaySessionId:e.mainPlayerPlaySessionId,getMainPlayerMetadata:e.getMainPlayerMetadata,status:e.status}})))(et),nt=n("VAW9"),it=n("cnlr"),at=n("2bi+"),rt=n("ngVu"),ot=n("zQgx"),st=n("Q94S"),lt=n("LA8z"),ct=n("NvVO"),dt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.__extends)(t,e),t.prototype.render=function(){return u.createElement(lt.PageNotFound,null)},t}(u.PureComponent),ut=Object(oe.withPageTracking)("ChannelPage",{autoReportInteractive:!0,destination:ct.a.ChannelIndex,location:k.PageviewLocation.Channel})(dt),mt=n("Ty5D"),pt=n("oB8h"),ht=n("VKOn"),ft=n("8ssJ"),gt=n("1k85"),vt=n("S8nt"),bt=n("+XUr");var kt,yt=n("ZLqn"),St=n("U1zV"),Ct=n("DOvc"),Et=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){if(this.props.data.loading||this.props.data.error||!this.props.data.user||!this.props.data.user.stream||!this.props.data.user.stream.id)return null;var e=this.props.pubsub.messages.viewCount&&this.props.pubsub.messages.viewCount.viewers||this.props.data.user.stream.viewersCount||0;return u.createElement(St.a,{value:Object(m.f)(e),label:Object(m.d)("Watching Now","ChannelViewersCount"),icon:I.a.GlyphLive,"data-a-target":"channel-viewers-count"})},t}(u.Component),wt=Object(a.d)(Object(f.a)(Ct),Object(De.a)([{topic:function(e){return e.data.user&&e.data.user.id?Object(_e.V)(e.data.user.id):""},skip:function(e){return e.data.loading||!e.data.user||!e.data.user.id},mapMessageTypesToProps:(kt={},kt[Ne.PubsubMessageType.ViewCount]="viewCount",kt)}]),Object(oe.withLatencyTracking)("ChannelViewersCount"))(Et),Ot=function(e){return u.createElement(wt,Object(c.__assign)({key:e.login},e))},Dt=n("eAAt"),Nt=n("0EKw"),_t=n("5goO"),It=n("T7Bf");n("uYye");var Mt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleLoginClick=function(){t.props.login()},t}return Object(c.__extends)(t,e),t.prototype.render=function(){var e=this.renderCampaignMessage();return e?u.createElement(M.a,{"data-test-selector":"drops-campaign-details"},e):null},t.prototype.renderCampaignMessage=function(){var e=this,t=function(e){if(e&&e.user&&e.user.id){var t=e.user.id,n=e.user,i=n.stream,a=n.lastBroadcast;if(!(i&&"live"===i.type&&a&&a.game&&a.game.activeDropCampaigns))return null;var r=!!i.isStreamDropsEnabled,o=!!a.game.self&&!!a.game.self.isDropsLinked,s="",l=a.game.activeDropCampaigns;return l.some((function(e){return s=e.connectionURL,e.isAvailableToAllChannels}))?{isGlobal:!0,campaignURL:s,isChannelLinked:r,isUserLinked:o}:l.some((function(e){return!!e.applicableChannels&&e.applicableChannels.some((function(e){return e.id===t}))}))?{isGlobal:!1,campaignURL:s,isChannelLinked:r,isUserLinked:o}:null}}(this.props.dropsData);return t?t.isChannelLinked?this.props.isLoggedIn?t.isUserLinked?Object(m.d)("<x:green>Drops enabled!</x:green> Watch for a chance to earn loot.",{"x:green":function(e){return u.createElement(M.a,{type:M.e.Span,bold:!0,className:"drops-campaign-details__drops-success"},e)}},"DropsCampaignDetails"):Object(m.d)("Enable in-game Drops with <x:link>Account Link.</x:link>",{"x:link":function(e){return u.createElement(ae.a,{to:t.campaignURL,targetBlank:!0},e)}},"DropsCampaignDetails"):Object(m.d)("Enable in-game Drops with <x:link>Twitch Account.</x:link>",{"x:link":function(t){return u.createElement(ae.a,{onClick:e.handleLoginClick},t)}},"DropsCampaignDetails"):Object(m.d)("Broadcaster has not enabled in-game Drops. <x:link>Learn More</x:link>",{"x:link":function(e){return u.createElement(ae.a,{to:"https://help.twitch.tv/customer/en/portal/articles/2754380-how-to-earn-drops",targetBlank:!0},e)}},"DropsCampaignDetails"):null},t}(u.Component),jt=Object(a.d)(Object(f.a)(It,{name:"dropsData",options:function(e){return{variables:{login:e.channelLogin,isLoggedIn:e.isLoggedIn}}}}),Object(oe.withLatencyTracking)("DropsCampaignDetails",{autoReportInteractive:!0}))(Mt);var Tt,Pt=Object(i.b)((function(e){return{isLoggedIn:Object(s.f)(e)}}),(function(e){return Object(a.b)({login:function(){return Object(o.e)(r.a.DropsLoginButton)}},e)}))(jt),Lt=n("8s1E"),Rt=n("vlTn"),Ft=n("L/cU"),Ut=n("A5Hy"),xt=n("7d/q"),At=n("djOf"),Bt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.__extends)(t,e),t.prototype.render=function(){if(!(this.props.isLoggedIn&&this.props.firstPageLoaded&&this.props.channelLogin&&this.props.data&&this.props.data.currentUser))return null;var e=this.props.data.currentUser;if(!(e.login===this.props.channelLogin||e.roles&&e.roles.isSiteAdmin))return null;var t=Object(m.d)("Edit","ChannelInfoBar");return u.createElement(ne.a,{label:t,direction:ne.c.Bottom},u.createElement(xt.a,{type:xt.c.Primary,icon:I.a.Edit,onClick:this.props.onClick,title:t,ariaLabel:t,"data-a-target":"channel-info-bar-edit-button"}))},t}(u.Component),Vt=Object(f.a)(At,{skip:function(e){return!e.firstPageLoaded||!e.isLoggedIn}})(Bt),Ht=(n("rhXE"),n("5in9")),qt=y.a.wrap((function(){return n.e(105).then(n.bind(null,"Cjzi"))}),"RealtimeStreamTagList",{placeholder:u.createElement(Rt.a,null)});!function(e){e.TeamName="channel-info-bar-team-name",e.TitleText="channel-info-bar-title-text",e.ChannelInfoBarWrapper="channel-info-bar-wrapper"}(Tt||(Tt={}));var Gt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getGame=function(){var e,n,i,a,r,o=t.props.channel,s=null===(n=null===(e=o)||void 0===e?void 0:e.broadcastSettings)||void 0===n?void 0:n.game,l=null===(a=null===(i=o)||void 0===i?void 0:i.lastBroadcast)||void 0===a?void 0:a.game;return null!=(r=null!=s?s:l)?r:void 0},t.getTitle=function(){var e,n,i,a,r,o=t.props.channel,s=null===(n=null===(e=o)||void 0===e?void 0:e.broadcastSettings)||void 0===n?void 0:n.title,l=null===(a=null===(i=o)||void 0===i?void 0:i.lastBroadcast)||void 0===a?void 0:a.title;return null!=(r=null!=s?s:l)?r:""},t.renderGame=function(){var e=t.getGame();return e&&e.name?u.createElement(Nt.a,{name:e.name,displayName:e.displayName||e.name}):null},t.renderGameBoxArt=function(){var e=t.getGame(),n=e&&e.name?e.name:"",i=e&&e.boxArtURL?e.boxArtURL:"";return e&&n&&i?u.createElement(D.a,{margin:{right:1}},u.createElement(Dt.a,{name:n,boxArtURL:i,size:Ft.b.Size4})):null},t.renderTeam=function(){var e=t.props.userData&&t.props.userData.user;return e&&e.primaryTeam?u.createElement(_t.a,{"data-test-selector":Tt.TeamName,name:e.primaryTeam.name,displayName:e.primaryTeam.displayName}):null},t.handleEditButtonClicked=function(){t.props.channel&&t.props.showEditBroadcastModal({channelID:t.props.channel.id,channelLogin:t.props.channelLogin,location:k.PageviewLocation.Channel})},t}return Object(c.__extends)(t,e),t.prototype.componentDidUpdate=function(){this.maybeReportInteractive()},t.prototype.componentDidMount=function(){this.maybeReportInteractive()},t.prototype.render=function(){if(this.props.channelIsHosting)return null;var e=this.getTitle(),t=this.props.userData&&this.props.userData.user,n=t&&t.profileViewCount?t.profileViewCount:0,i=this.renderGame(),a=this.renderTeam();return u.createElement(j.a,{className:"channel-info-bar","data-test-selector":Tt.ChannelInfoBarWrapper,display:N.d.Flex,flexWrap:N.f.Wrap,justifyContent:N.h.Between,padding:1,fullWidth:!0},u.createElement(D.a,{className:"channel-info-bar__content-container",display:N.d.Flex,flexShrink:1,flexGrow:1,flexDirection:N.e.Column,justifyContent:N.h.Between,margin:{bottom:1}},u.createElement(D.a,{display:N.d.Flex,flexWrap:N.f.NoWrap,justifyContent:N.h.Between,fullWidth:!0},u.createElement(D.a,{className:"channel-info-bar__info-container",display:N.d.Flex,flexGrow:1,flexShrink:1,justifyContent:N.h.Between,padding:{right:1,left:.5},fullWidth:!0},u.createElement(D.a,{display:N.d.Flex,flexDirection:N.e.Column,fullWidth:!0},u.createElement(D.a,{display:N.d.Flex,margin:{bottom:.5},className:"channel-info-bar__content-top",justifyContent:N.h.Between,flexWrap:N.f.Wrap,breakpointSmall:{flexWrap:N.f.NoWrap}},u.createElement(D.a,{flexGrow:1,flexShrink:1,overflow:N.i.Hidden,padding:{right:2}},u.createElement(M.a,{type:M.e.H2,fontSize:T.d.Size4,lineHeight:M.b.Body,"data-a-target":"stream-title","data-test-selector":Tt.TitleText,title:e,role:Ut.c.Heading},e)),u.createElement(D.a,{alignItems:N.b.Start,className:"channel-info-bar__content-right",display:N.d.Flex},u.createElement(D.a,{display:N.d.Flex,className:"channel-info-bar__viewers-count-wrapper"},u.createElement(j.a,{display:N.d.Flex,color:T.c.Alt2,fontSize:T.d.Size5},u.createElement(j.a,{className:"channel-info-bar__viewers-wrapper",color:T.c.Live,display:N.d.InlineFlex},u.createElement(Ot,{login:this.props.channelLogin})),u.createElement(j.a,{display:N.d.InlineFlex,alignItems:N.b.Center},u.createElement(St.a,{value:Object(m.d)("{count, number}",{count:n},"ChannelInfoBar"),label:Object(m.d)("Total Views","ChannelInfoBar"),icon:I.a.GlyphViews,"data-a-target":"total-views-count"})))))),u.createElement(D.a,{display:N.d.Flex,margin:{top:.5}},this.renderGameBoxArt(),u.createElement(D.a,{display:N.d.Flex,flexDirection:N.e.Column},u.createElement(D.a,{display:N.d.Flex,flexShrink:0},i,i&&a&&u.createElement(D.a,{margin:{right:1},flexShrink:0},u.createElement(M.a,{bold:!0,color:T.c.Alt2,fontSize:T.d.Size5,ariaHidden:!0},"â¢")),a),u.createElement(D.a,{margin:{top:.5},display:N.d.Flex,alignItems:N.b.Start,justifyContent:N.h.Between,flexWrap:N.f.Wrap},u.createElement(D.a,{display:N.d.Flex,flexWrap:N.f.Wrap,padding:{top:.5}},this.props.firstPageLoaded?u.createElement(qt,{channelLogin:this.props.channelLogin}):u.createElement(Rt.a,null))))))),u.createElement(D.a,{display:N.d.Flex,flexGrow:0,className:"channel-info-bar__button-container"},this.props.firstPageLoaded&&u.createElement(D.a,{margin:{left:.5}},u.createElement(Vt,{channelLogin:this.props.channelLogin,isLoggedIn:this.props.isLoggedIn,firstPageLoaded:this.props.firstPageLoaded,onClick:this.handleEditButtonClicked})),u.createElement(D.a,{margin:{left:.5}},this.renderChannelShareButton()),this.props.channel&&this.props.channel.id&&u.createElement(D.a,{margin:{left:.5}},u.createElement(Lt.a,{channelID:this.props.channel.id,channelLogin:this.props.channelLogin})))),this.props.firstPageLoaded&&u.createElement(Pt,{channelLogin:this.props.channelLogin})))},t.prototype.renderChannelShareButton=function(){return this.props.channel&&this.props.channel.login?u.createElement(yt.a,{login:this.props.channel.login,displayName:this.props.channel.displayName||this.props.channel.login,title:this.getTitle()}):null},t.prototype.maybeReportInteractive=function(){this.props.contextLoading||this.props.latencyTracking.reportInteractive()},t}(u.Component);var Wt=Object(a.d)(mt.j,Object(Se.b)((function(e){return{channel:e.channel,contextError:e.error,contextLoading:e.loading}})),Object(f.a)(Ht,{name:"userData",skip:function(e){return!e.firstPageLoaded},options:function(e){return{variables:{login:e.channelLogin}}}}),Object(oe.withLatencyTracking)("ChannelInfoBar"))(Gt),zt=y.a.wrap((function(){return Promise.all([n.e(1),n.e(2),n.e(0),n.e(82)]).then(n.bind(null,"bDGO"))}),"EditBroadcastModal");var Qt=Object(i.b)((function(e){return{isLoggedIn:Object(s.f)(e),firstPageLoaded:e.session.firstPageLoaded}}),(function(e){return Object(a.b)({login:function(){return Object(o.e)(r.a.ReportChannel)},showEditBroadcastModal:function(e){var t=Object(c.__rest)(e,[]);return Object(C.e)(zt,t)},showBrowserNotificationsUpsellModal:function(){return Object(C.e)(ke,{})},closeBrowserNotificationsUpsellModal:C.d},e)}))(Wt),Yt=n("d0ua"),$t=n("imBb"),Kt=(n("EihZ"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toggleTheatreMode=function(){t.props.theatreModeEnabled?t.props.onTheatreModeDisabled():t.props.onTheatreModeEnabled()},t.disableTheatreMode=function(){t.props.theatreModeEnabled&&t.props.onTheatreModeDisabled()},t}return Object(c.__extends)(t,e),t.prototype.componentDidMount=function(){$t.bind("alt+t",this.toggleTheatreMode),$t.bind("esc",this.disableTheatreMode)},t.prototype.componentWillUnmount=function(){$t.unbind("alt+t"),$t.unbind("esc")},t.prototype.render=function(){var e=E("channel-page__video-player",{"channel-page__video-player--theatre-mode":this.props.theatreModeEnabled||!1,"channel-page__video-player--theatre-mode-right-column-collapsed":this.props.theatreModeEnabled&&!this.props.rightColumnExpanded});return u.createElement(D.a,{className:e,flexWrap:N.f.NoWrap,fullHeight:this.props.theatreModeEnabled,fullWidth:!this.props.rightColumnExpanded,position:this.props.theatreModeEnabled?N.j.Fixed:N.j.Relative},u.createElement(Ge.b,null,this.props.children))},t}(u.Component));var Xt,Jt=Object(i.b)((function(e){return{theatreModeEnabled:e.ui.theatreModeEnabled,rightColumnExpanded:e.ui.rightColumnExpanded}}),(function(e){return Object(a.b)({onTheatreModeDisabled:Yt.w,onTheatreModeEnabled:Yt.y},e)}))(Kt),Zt=n("D7An"),en=n("KOTp"),tn=n("ygYM"),nn=n("kduP");!function(e){e.Title="title",e.Date="date"}(Xt||(Xt={}));var an,rn=/\S/,on=function(e){var t=e.clip,n="",i=Object(m.c)(new Date(t.createdAt),"medium");return t.title&&""!==t.title&&rn.test(t.title)&&t.title&&(n=t.title,i=" Â· "+i),u.createElement(M.a,{bold:!0,fontSize:T.d.Size4},u.createElement(M.a,{title:n,"data-test-selector":Xt.Title,type:M.e.Span},n),u.createElement(M.a,{color:T.c.Alt2,"data-test-selector":Xt.Date,type:M.e.Span},i))},sn=n("uXHW"),ln=n("AFv4");!function(e){e.InfoPlaceholder="info-placeholder",e.SubText="sub-text",e.SubTextGame="sub-text-game",e.SubTextCurator="sub-text-curator",e.SubTextViews="sub-text-views"}(an||(an={}));var cn,dn=Object(oe.withLatencyTracking)("ClipInfo",{autoReportInteractive:!0})((function(e){var t,n=e.clip,i=n&&n.broadcaster&&u.createElement(ae.a,{to:"/"+n.broadcaster.login},n.broadcaster.displayName);t=n&&n.game&&i?Object(m.d)("{broadcaster} playing {game}",{broadcaster:i,game:u.createElement(ae.a,{to:""+Object(nn.a)(n.game.name)},n.game.displayName)},"ClipInfo"):i;var a,r=n&&n.game?u.createElement("span",{"data-test-selector":an.SubTextGame},t):null,o=n&&n.curator?u.createElement("span",{"data-test-selector":an.SubTextCurator},n&&n.game&&!!n.curator&&u.createElement("span",null,"Â â¢Â "),n&&n.curator&&Object(m.d)("Clipped by {curator}",{curator:u.createElement(ae.a,{to:"/"+n.curator.login},n.curator.displayName)},"ClipInfo")):null,s=u.createElement("span",{"data-test-selector":an.SubTextViews},n&&n.curator&&u.createElement("span",null,"Â â¢Â "),n&&Object(m.d)("{viewCount, plural, one {# view} other {# views}}",{viewCount:n.viewCount||0},"ClipInfo"));return a=null===n?u.createElement(D.a,{"data-test-selector":an.InfoPlaceholder,display:N.d.Flex,flexDirection:N.e.Column},u.createElement(ee.a,{lineCount:1,width:320}),u.createElement(ee.a,{lineCount:1,width:240})):u.createElement("div",null,u.createElement(on,{clip:n}),u.createElement(j.a,{"data-test-selector":an.SubText,color:T.c.Alt2},r,o,s)),u.createElement(sn.a,{row:!0},u.createElement(ln.a,{overflow:N.i.Hidden},a))})),un=n("/HY+"),mn=n("eJ65"),pn=n("yWUM"),hn=n("+GjP"),fn=n("4qQ0"),gn=n("i4Ys"),vn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.__extends)(t,e),t.prototype.render=function(){return u.createElement("li",null,u.createElement(gn.a,Object(c.__assign)({"data-test-selector":this.props.testSelector},this.props.interactableProps),u.createElement(D.a,{padding:{x:1,y:.5}},this.props.children)))},t=Object(c.__decorate)([Object(oe.withLatencyTracking)("InteractableOption",{autoReportInteractive:!0})],t)}(u.Component),bn=n("16Gl");!function(e){e.BanUserButton="ban-user",e.ClipOptionsButton="clip-options-button",e.ClipOptionsContainer="clip-options-container",e.DeleteAllButton="delete-all",e.DeleteButton="delete",e.ReportButton="report",e.TimeOutButton="timeout-user",e.WatchFullVideoButton="watch-full-video-button"}(cn||(cn={}));var kn=function(e){function t(t){var n=e.call(this,t)||this;return n.renderWatchFullVideoOption=function(){var e=n.props.clip;if(n.props.currentUser){var t=n.props.currentUser,i=t.isEditor,a=t.isBroadcaster;if(e&&"control"!==n.vodDamianAssignment&&(i||a)){var r=Object(G.d)("Watch Full Video","ClipOptions"),o={linkTo:"",disabled:!1};if(e.video){var s=location.protocol+"//"+location.host+Object(bn.g)(e.video.id);o.linkTo=Object(hn.g)(s,{t:Object(pn.a)(e.videoOffsetSeconds)})}else o.disabled=!0,r=Object(G.d)("Full video Unavailable","ClipOptions");return u.createElement(vn,{key:"watch-full-option",interactableProps:o,testSelector:cn.WatchFullVideoButton},r)}}},n.handleReportModalClose=function(e){(e===fn.b.MutationError||e===fn.b.Success)&&n.props.history.push("/")},n.getBroadcasterID=function(){var e=n.props.clip;return e&&e.broadcaster&&e.broadcaster.id?e.broadcaster.id:""},n.getCuratorID=function(){var e=n.props.clip;return e&&e.curator&&e.curator.id?e.curator.id:""},n.vodDamianAssignment=G.q.experiments.getAndTrackAssignment(Zt.c.VODDamian,{channel:t.channelLogin}),n}return Object(c.__extends)(t,e),t.prototype.render=function(){return u.createElement(mn.a,null,u.createElement(xt.a,{"data-test-selector":cn.ClipOptionsButton,type:xt.c.Primary,icon:I.a.More,ariaLabel:Object(G.d)("Clip Options","ClipOptions"),disabled:!this.props.clip}),this.props.clip?u.createElement(tn.a,{direction:tn.b.TopRight},u.createElement(j.a,{padding:{y:1},color:T.c.Link},u.createElement("ul",{"data-test-selector":cn.ClipOptionsContainer},this.renderWatchFullVideoOption(),this.renderReportOption(this.props.clip),this.renderDeleteOption(this.props.clip),this.renderDeleteAllOption(this.props.clip),this.renderBanUserOption(this.props.clip),this.renderTimeOutUserOption(this.props.clip)))):u.createElement(tn.a,null))},t.prototype.renderDeleteOption=function(e){var t=this;if(this.props.currentUser&&(this.props.currentUser.isCurator||this.props.currentUser.isBroadcaster||this.props.currentUser.isStaffOrSiteAdmin)){var n={onClick:function(){t.props.onDeleteClipClick({slug:e.slug,onClose:t.props.onCloseModal})},type:gn.b.Alert};return u.createElement(vn,{key:"delete-option",interactableProps:n,testSelector:cn.DeleteButton},Object(G.d)("Delete","ClipOptions"))}},t.prototype.renderDeleteAllOption=function(e){var t=this;if(this.props.currentUser&&(this.props.currentUser.isBroadcaster||this.props.currentUser.isStaffOrSiteAdmin)){var n={type:gn.b.Alert,onClick:function(){t.props.onDeleteAllClipsClick({slug:e.slug,onClose:t.props.onCloseModal})}};return u.createElement(vn,{key:"delete-all-option",interactableProps:n,testSelector:cn.DeleteAllButton},Object(G.d)("Delete All Clips from Video","ClipOptions"))}},t.prototype.renderReportOption=function(e){var t=this,n=this.getBroadcasterID(),i=this.getCuratorID(),a={onClick:function(){t.props.currentUser?t.props.onReportClick({onClose:t.handleReportModalClose,reportContext:{contentType:b.tc.CLIP_REPORT,contentID:e.slug,targetUserID:n,additionalTrackingID:i},title:Object(G.d)("Report this Clip","ClipsOptions")}):t.props.onShowLogin()}};return u.createElement(vn,{key:"report-option",interactableProps:a,testSelector:cn.ReportButton},Object(G.d)("Report","ClipOptions"))},t.prototype.renderBanUserOption=function(e){var t=this;if(this.props.currentUser&&(this.props.currentUser.isBroadcaster||this.props.currentUser.isStaffOrSiteAdmin)){var n={login:"",displayName:""};e.curator&&e.curator.login&&e.curator.displayName&&(n={login:e.curator.login,displayName:e.curator.displayName});var i=this.getBroadcasterID(),a={onClick:function(){t.props.onBanClick({broadcasterID:i,targetUser:n,onClose:t.props.onCloseModal})},type:gn.b.Alert};return u.createElement(vn,{key:"ban-option",interactableProps:a,testSelector:cn.BanUserButton},Object(G.d)("Ban User","ClipOptions"))}},t.prototype.renderTimeOutUserOption=function(e){var t=this;if(this.props.currentUser&&(this.props.currentUser.isBroadcaster||this.props.currentUser.isStaffOrSiteAdmin)){var n={login:"",displayName:""};e.curator&&e.curator.login&&e.curator.displayName&&(n={login:e.curator.login,displayName:e.curator.displayName});var i=this.getBroadcasterID(),a={onClick:function(){t.props.onTimeOutClick({broadcasterID:i,targetUser:n,onClose:t.props.onCloseModal})},type:gn.b.Alert};return u.createElement(vn,{key:"timeout-option",interactableProps:a,testSelector:cn.TimeOutButton},Object(G.d)("Timeout User (24 hr)","ClipOptions"))}},t}(u.Component),yn=Object(oe.withLatencyTracking)("ClipsOptions",{autoReportInteractive:!0})(kn),Sn=y.a.wrap((function(){return n.e(72).then(n.bind(null,"jsEL"))}),"ClipsModalBanUser"),Cn=y.a.wrap((function(){return n.e(72).then(n.bind(null,"jsEL"))}),"ClipsModalDelete"),En=y.a.wrap((function(){return n.e(72).then(n.bind(null,"jsEL"))}),"ClipsModalDeleteAll");var wn,On=Object(i.b)(null,(function(e){return Object(a.b)({onShowLogin:function(){return Object(o.e)(r.a.ClipsOptions)},onDeleteClipClick:function(e){return Object(C.e)(Cn,{slug:e.slug,onClose:e.onClose})},onDeleteAllClipsClick:function(e){return Object(C.e)(En,{slug:e.slug,onClose:e.onClose})},onReportClick:function(e){var t=Object(c.__rest)(e,[]);return Object(C.e)(un.a,t)},onBanClick:function(e){return Object(C.e)(Sn,{targetUser:e.targetUser,broadcasterID:e.broadcasterID,isTemporary:!1,onClose:e.onClose})},onTimeOutClick:function(e){return Object(C.e)(Sn,{targetUser:e.targetUser,broadcasterID:e.broadcasterID,isTemporary:!0,onClose:e.onClose})},onCloseModal:C.d},e)}))(Object(mt.j)(yn)),Dn=n("EuPq"),Nn=n("vVeY"),_n=n("CYfc"),In=n("MLDe");!function(e){e.ClipLink="clip-link"}(wn||(wn={}));var Mn,jn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.__extends)(t,e),t.prototype.render=function(){var e=null;this.props.clip&&(e=this.shareBalloonContent(this.props.clip));var t=Object(m.d)("Share","ClipShareBox"),n={label:t,direction:ne.c.Bottom};return u.createElement(mn.a,{tooltipProps:n},u.createElement(xt.a,{disabled:!this.props.clip,icon:I.a.Share,type:this.props.buttonType,ariaLabel:t}),u.createElement(tn.a,{direction:this.props.balloonDirection,size:tn.c.Small},e))},t.prototype.shareBalloonContent=function(e){var t=e.game?{id:e.game.id,boxArtURL:e.game.boxArtURL,name:e.game.name,__typename:"Game"}:null,n=e.curator?{id:e.curator.id,displayName:e.curator.displayName,login:e.curator.login,__typename:"User"}:null,i=e.broadcaster?{id:e.broadcaster.id,displayName:e.broadcaster.displayName,login:e.broadcaster.login,profileImageURL:null,primaryColorHex:null,__typename:"User"}:null,a={id:e.id,slug:e.slug,url:e.url,embedURL:"",title:e.title,viewCount:e.viewCount,language:e.language,curator:n,game:t,broadcaster:i,thumbnailURL:"",createdAt:e.createdAt,durationSeconds:e.durationSeconds,champBadge:null,__typename:"Clip"};return u.createElement(D.a,{padding:1},u.createElement(_n.a,{clip:a,pageType:k.PageviewLocation.ClipsWatchPage,asBalloon:!0}),this.renderClipShareInput(e))},t.prototype.renderClipShareInput=function(e){var t=e.broadcaster&&e.broadcaster.login?e.broadcaster.login:"";return u.createElement(D.a,{"data-test-selector":wn.ClipLink,padding:{top:1}},u.createElement(M.a,null,Object(m.d)("Clip Link","ClipShareBox")),u.createElement(Dn.a,{onClick:Object(In.d)(e.id,e.game&&e.game.name,e.broadcaster?e.broadcaster.id:"",t,k.PageviewLocation.ClipsWatchPage,Object(Nn.a)(e.slug,t)),value:Object(Nn.a)(e.slug,t)}))},t}(u.Component),Tn=n("u5aL"),Pn=n("IZXT"),Ln=n("K29g"),Rn=n("hCFK"),Fn=n("4wKg"),Un=n("k0nM"),xn=n("QZCf"),An=(n("K+oU"),n("QA0N"));!function(e){e.control="control",e.variant1="variant1",e.variant2="variant2"}(Mn||(Mn={}));var Bn=function(e,t){var n={content:An.a.ClipLight,location:An.d.VideoWatchPage,section_content_id:e,source_vod_id:t};m.o.track(k.SpadeEventType.ItemSectionLoad,n)},Vn=function(e,t,n){var i={content:An.a.ClipLightSaveAsHighlight,item_index:n===Mn.variant2?0:1,location:An.d.VideoWatchPage,section_content_id:e,source_vod_id:t};m.o.track(k.SpadeEventType.ItemSectionClick,i)},Hn=function(e,t,n){var i={content:An.a.ClipLightViewInHighlighter,item_index:n===Mn.variant1?0:1,location:An.d.VideoWatchPage,section_content_id:e,source_vod_id:t};m.o.track(k.SpadeEventType.ItemSectionClick,i)},qn=function(){return Object(G.d)("Save as Highlight","ChannelClipLightButton")},Gn=function(){return Object(G.d)("View in Highlighter","ChannelClipLightButton")},Wn=function(){return Object(G.d)("Processing","ChannelClipLightButton")},zn=function(){return Object(G.d)("Error","ChannelClipLightButton")},Qn=function(){return Object(G.d)("Saved","ChannelClipLightButton")},Yn={PrimaryButton:"split-light-primary-button",DropdownButton:"split-light-dropdown-button",DropdownContainer:"split-light-dropdown-container",LoadingSpinnerTransition:"split-light-loading-spinner-transition"},$n=2e3,Kn=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isDropDownOpen:!1,isErrored:!1,isLoading:!1,isSuccessful:!1},n.componentDidMount=function(){var e=n.props.clip;e&&e.video&&Bn(e.id,e.video.id)},n.renderPrimaryAction=function(e){var t="variant1"===n.vodDamianAssignment?n.openHighlighterTab:n.openVideoManager,i=B.d.Primary;return n.state.isErrored?i=B.d.Alert:n.state.isSuccessful&&(i=B.d.Success),u.createElement(j.a,{flexGrow:1},u.createElement(B.a,{"data-test-selector":Yn.PrimaryButton,type:i,fullWidth:!0,disabled:e,onClick:t},u.createElement(D.a,{display:N.d.Flex,alignItems:N.b.Center,justifyContent:N.h.Start},u.createElement(D.a,{display:n.state.isLoading?N.d.Block:N.d.HideAccessible,margin:{right:.5}},u.createElement(Rn.a,{"data-test-selector":Yn.LoadingSpinnerTransition,show:n.state.isLoading,type:[Rn.c.Fade,Rn.c.SlideOverLeft],duration:Rn.b.Medium},u.createElement(ze.a,{size:ze.b.Small}))),n.getButtonText())))},n.getButtonText=function(){return n.state.isLoading?Wn():n.state.isErrored?zn():n.state.isSuccessful?Qn():"variant1"===n.vodDamianAssignment?Gn():qn()},n.renderDropDown=function(e){var t=n.state.isDropDownOpen,i=!n.state.isLoading&&!n.state.isErrored&&!n.state.isSuccessful,a="variant1"===n.vodDamianAssignment?u.createElement(Fn.a,{label:qn(),onClick:n.openVideoManager}):u.createElement(Fn.a,{label:Gn(),onClick:n.openHighlighterTab});return u.createElement(j.a,{borderLeft:!0,display:i?N.d.Block:N.d.Hide,position:N.j.Relative,"data-test-selector":Yn.DropdownContainer},u.createElement(Tn.a,{onClickOut:n.closeDropdown},u.createElement(B.a,{"data-test-selector":Yn.DropdownButton,type:B.d.Primary,disabled:e,icon:I.a.GlyphArrDown,onClick:n.toggleDropDown}),u.createElement(Un.a,{show:t,direction:tn.b.TopRight,elevation:1},a)))},n.openHighlighterTab=function(){var e,t=n.props.clip;if(t&&t.broadcaster&&t.broadcaster.login&&t.video&&null!==t.videoOffsetSeconds){var i=Object(hn.g)(Object(bn.a)(t.broadcaster.login,t.video.id),((e={})[Ln.a.TrackingID]=t.id,e[Ln.a.Start]=t.videoOffsetSeconds.toString(),e[Ln.a.End]=(t.videoOffsetSeconds+t.durationSeconds).toString(),e[Ln.a.Title]=t.title||"Clip: "+t.video.title,e[Ln.a.GameName]=t.game&&t.game.displayName||"",e[Ln.a.GameID]=t.game&&t.game.id||"",e));Hn(t.id,t.video.id,n.vodDamianAssignment||""),window.open(i,"_blank"),n.closeDropdown()}else n.setState({isLoading:!1,isErrored:!0},n.closeDropdown)},n.openVideoManager=function(){return Object(c.__awaiter)(n,void 0,void 0,(function(){var e,t,n,i,a,r,o=this;return Object(c.__generator)(this,(function(s){switch(s.label){case 0:if(!((e=this.props.clip)&&e.broadcaster&&e.broadcaster.id&&e.video))return[2,null];t={metadata:{creatorID:e.broadcaster.id,description:"",language:e.language||"",tags:[],title:e.title||"",game:e.game&&e.game.id?e.game.id:null,highlightRanges:[{endMs:1e3*((e.videoOffsetSeconds||0)+e.durationSeconds),startMs:1e3*(e.videoOffsetSeconds||0),vodID:e.video.id}]}},Vn(e.id,e.video.id,this.vodDamianAssignment||""),this.setState({isLoading:!0,isSuccessful:!1,isErrored:!1},this.closeDropdown),s.label=1;case 1:s.trys.push([1,6,7,8]),n=void 0,s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.props.createHighlight(Object(g.a)(t))];case 3:return i=s.sent().data,n=i,[3,5];case 4:return a=s.sent(),Object(Pn.d)()?m.k.warn("create highlight mutation failed"):m.k.errorAndReport(a,"create highlight mutation failed"),this.setState({isLoading:!1,isErrored:!0}),setTimeout((function(){o.setState({isSuccessful:!1,isErrored:!1})}),$n),[2];case 5:if(this.setState({isLoading:!1,isSuccessful:!0}),!(n&&n.createMultiVideoHighlight&&n.createMultiVideoHighlight.highlight&&n.createMultiVideoHighlight.highlight.id))throw new Error("No ID provided after highlight mutation");return[3,8];case 6:return r=s.sent(),m.k.errorAndReport(r,"Failed to publish a highlight from SplitLightDropdown.",{mutationInput:t}),this.setState({isLoading:!1,isErrored:!0}),[3,8];case 7:return setTimeout((function(){o.setState({isSuccessful:!1,isErrored:!1})}),$n),[7];case 8:return[2]}}))}))},n.toggleDropDown=function(){n.setState((function(e){return{isDropDownOpen:!e.isDropDownOpen}}))},n.closeDropdown=function(){n.setState({isDropDownOpen:!1})},n.vodDamianAssignment=m.p.experiments.getAndTrackAssignment(Zt.c.VODDamian,{channel:t.channelLogin}),n}return Object(c.__extends)(t,e),t.prototype.render=function(){var e=!(!this.props.clip.video||!this.props.clip.video.id),t=this.props.clip.video&&this.props.clip.video.broadcastType===b.B.ARCHIVE,n=this.state.isLoading||!t||!e,i=null;e?t||(i=Object(G.d)("You can only highlight past broadcasts","ChannelClipLightButton")):i=Object(G.d)("Full video not available","ChannelClipLightButton");var a=u.createElement(j.a,{display:N.d.Flex},u.createElement(j.a,{background:n?T.a.Alt2:T.a.Accent,borderRadius:T.b.Medium,color:T.c.Base,display:N.d.InlineFlex,alignItems:N.b.Center,position:N.j.Relative,flexGrow:0,flexShrink:0},this.renderPrimaryAction(n),this.renderDropDown(n)));return null!==i?u.createElement(ne.a,{label:i},a):a},t}(u.Component),Xn=Object(a.d)(Object(f.a)(xn,{name:"createHighlight"}))(Kn),Jn=n("j426"),Zn=function(e){function t(t){var n=e.call(this,t)||this;return n.renderPrimaryAction=function(){var e=n.props,t=e.clip,i=e.channelLogin,a=e.data,r=t&&t.video,o=!a||a.loading;if(!t||!r||null===n.vodDamianAssignment||o)return null;var s=n.getUserRoles(),l=null!==s&&(s.isBroadcaster||s.isEditor);return"control"!==n.vodDamianAssignment&&l?u.createElement(Xn,{clip:t,channelLogin:i}):u.createElement(en.a,{tt_medium:k.PageviewMedium.ClipsWatchPage,tt_content:k.PageviewContent.FullVODButton,video:{id:r.id,offsetSeconds:t.videoOffsetSeconds}})},n.getUserRoles=function(){var e=n.props.data;return!e||e.loading||e.error||!e.currentUser?null:{isEditor:e.currentUser.self&&e.currentUser.self.isEditor||!1,isStaffOrSiteAdmin:e.currentUser.roles&&(e.currentUser.roles.isStaff||e.currentUser.roles.isSiteAdmin)||!1,isCurator:e.currentUser.id===n.getCuratorID(),isBroadcaster:e.currentUser.id===n.getBroadcasterID()}},n.getBroadcasterID=function(){var e=n.props.clip;return e&&e.broadcaster&&e.broadcaster.id?e.broadcaster.id:""},n.getCuratorID=function(){var e=n.props.clip;return e&&e.curator&&e.curator.id?e.curator.id:""},n.vodDamianAssignment=m.p.experiments.getAndTrackAssignment(Zt.c.VODDamian,{channel:t.channelLogin}),n}return Object(c.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.channelLogin,n=e.clip,i=this.props.data&&null!==this.props.data.currentUser?this.getUserRoles():null;return u.createElement(j.a,{alignItems:N.b.Center,breakpointMedium:{flexDirection:N.e.Row},display:N.d.Flex,flexWrap:N.f.NoWrap,justifyContent:N.h.Start},u.createElement(j.a,{flexGrow:1,fullWidth:!0,fullHeight:!0,overflow:N.i.Hidden,padding:{x:2,y:1}},u.createElement(dn,{clip:n})),u.createElement(j.a,{alignItems:N.b.Center,className:"video-info-bar__action-container",display:N.d.Flex,flexDirection:N.e.Row,flexShrink:0,fullHeight:!0,padding:1},u.createElement(D.a,{display:N.d.Flex,flexGrow:0},this.renderPrimaryAction(),n&&u.createElement(D.a,{display:N.d.Flex,padding:{left:1}},u.createElement(jn,{clip:n,balloonDirection:tn.b.TopRight,buttonType:xt.c.Secondary})),u.createElement(On,{channelLogin:t,clip:n,currentUser:i}))))},t}(u.Component),ei=Object(a.d)(Object(f.a)(Jn,{skip:function(e){return null===e.clip}}),Object(oe.withLatencyTracking)("ClipDescription",{autoReportInteractive:!0}))(Zn),ti=(n("a2Ot"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.__extends)(t,e),t.prototype.render=function(){return u.createElement(D.a,{"data-test-selector":"private-video-banner-layout"},this.renderHeader())},t.prototype.renderHeader=function(){var e=this;return u.createElement(ve.a,{type:ve.f.SlideInBottom,delay:ve.b.Medium,duration:ve.c.Medium,enabled:!0},u.createElement(j.a,{className:"private-video-banner__header",display:N.d.Flex,background:T.a.AccentAlt2,color:T.c.Overlay,alignItems:N.b.Center,padding:{x:1,y:.5},fontSize:T.d.Size6,"data-test-selector":"private-video-banner-header"},u.createElement(D.a,{display:N.d.Flex,alignItems:N.b.Center,justifyContent:N.h.Center},u.createElement(_.a,{asset:I.a.Lock,width:20,height:20})),u.createElement(M.a,null,Object(m.d)("This video is private. To edit your video, visit your <x:link>video manager</x:link>",{"x:link":function(t){return u.createElement(ae.a,{"data-test-selector":"private-video-banner-header-link",to:{pathname:"/"+e.props.ownerLogin+"/manager",state:{medium:k.PageviewMedium.VideoWatchPage,content:k.PageviewContent.Video}}},u.createElement(M.a,{type:M.e.Span,color:T.c.OverlayAlt},t))}},"PrivateVideoBanner"))))},t}(u.Component)),ni=n("VwyG"),ii=n("yVY3"),ai=n("5Ijs"),ri=n("MXoD");function oi(e){return"curator"in e}function si(){return Object(G.d)("Highlight","VideoOptions")}var li=n("OTul"),ci=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.__extends)(t,e),t.prototype.componentDidMount=function(){var e=this.props.trackingContext;m.o.trackItemSectionLoad({carousel_content:e.carouselContent,location:e.location,section_type:e.sectionType,item_type:e.itemType})},t.prototype.render=function(){var e=this.props,t=e.trackingContext,n=e.channelLogin,i=e.videoID;return u.createElement(B.a,{type:B.d.Secondary,icon:I.a.Highlighter,linkTo:Object(ri.a)(t,Object(li.g)(n,i)),targetBlank:!0},si())},t}(u.Component),di="variant1";function ui(){return m.p.experiments.getAndTrackAssignment(Zt.c.VODHighGround)===di}var mi,pi=n("SHn+"),hi=n("imSJ"),fi=n("6x+I"),gi=n("mlJd"),vi=n("CGUg");!function(e){e.MoreInfoBox="more-info-box",e.ToggleExpandButton="toggle-expand-button",e.DescriptionContainer="description-container"}(mi||(mi={}));var bi,ki=function(e){try{return!Object(hn.b)(new URL(e))}catch(e){return!0}},yi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isExpanded:!1},t.renderDescription=function(){if(t.props.description&&t.state.isExpanded){var e=Object(gi.b)(t.props.description).map((function(e,n){if(0===e.length)return u.createElement("br",{key:"desc-line"+n});var i={Link:t.renderMarkdownProtectedLink};return u.createElement(D.a,{key:"desc-line"+n},u.createElement(fi,Object(c.__assign)({source:e,renderers:i},gi.a)))}));return u.createElement(vi.a,{"data-test-selector":mi.DescriptionContainer},e)}},t.toggleExpand=function(){t.setState((function(e){return{isExpanded:!e.isExpanded}}))},t}return Object(c.__extends)(t,e),t.prototype.render=function(){return this.props.description?u.createElement(j.a,{"data-test-selector":mi.MoreInfoBox,margin:{top:1}},this.renderDescription(),u.createElement(j.a,{display:N.d.Flex,margin:{top:.5}},u.createElement(ae.a,{"data-test-selector":mi.ToggleExpandButton,type:ae.b.Default,onClick:this.toggleExpand},this.state.isExpanded?Object(G.d)("Show Less","ChannelRootMoreInfoBox"):Object(G.d)("Show More","ChannelRootMoreInfoBox")))):null},t.prototype.renderMarkdownProtectedLink=function(e){return u.createElement(ae.a,{linkTo:e.href,rel:ki(e.href)?"nofollow noreferrer noopener":void 0},e.children)},t}(u.Component),Si=Object(a.d)(Object(oe.withLatencyTracking)("MoreInfoBox",{autoReportInteractive:!0}))(yi);!function(e){e[e.ClipCurator=0]="ClipCurator",e[e.ClipCuratorDot=1]="ClipCuratorDot",e[e.ClipCuratorName=2]="ClipCuratorName"}(bi||(bi={}));var Ci,Ei=function(e){var t=e.login,n=e.includesSeparator,i=Object(m.d)("Clipped by {curator}",{curator:u.createElement(ae.a,{to:{pathname:"/"+t,state:{medium:k.PageviewMedium.ClipsWatchPage,content:k.PageviewContent.ClipCuratorName}}},t)},"ChannelVideoClipCurator"),a=null;if(n){a=u.createElement(D.a,{"data-test-selector":bi.ClipCuratorDot,margin:{right:1}},u.createElement(M.a,{fontSize:T.d.Size5,type:M.e.Span},"Â·"))}return u.createElement(D.a,{display:N.d.Flex},a,u.createElement(M.a,{fontSize:T.d.Size5,type:M.e.Span,"data-test-selector":bi.ClipCurator},i))};!function(e){e[e.GameImagePlaceholder=0]="GameImagePlaceholder"}(Ci||(Ci={}));var wi,Oi=function(e){var t=e.boxArtURL,n=e.name;return n?u.createElement(ae.a,{to:Object(nn.a)(n),"data-a-target":"video-info-game-boxart-link"},u.createElement(Ft.a,{src:t||m.a.defaultBoxArtURL,alt:n,aspect:Ge.c.BoxArt,size:Ft.b.Size4})):u.createElement(ee.a,{"data-test-selector":Ci.GameImagePlaceholder,height:55,width:40})};!function(e){e.Title="title",e.Date="date"}(wi||(wi={}));var Di,Ni=/\S/,_i=function(e){var t=e.title,n=e.dateString,i=t&&""!==t&&Ni.test(t),a=i&&t?t:"",r="";return n&&m.i.length&&(r=Object(m.i)(new Date(n)),i&&(r=" Â· "+r)),u.createElement(j.a,{margin:{bottom:.5}},u.createElement(M.a,{bold:!0,fontSize:T.d.Size4},i&&u.createElement(M.a,{title:a,"data-test-selector":wi.Title,type:M.e.Span},a),u.createElement(M.a,{color:T.c.Alt2,"data-test-selector":wi.Date,type:M.e.Span},r)))},Ii=n("wp5a");n("GEha");!function(e){e[e.VideoDescription=0]="VideoDescription",e[e.InfoPlaceholder=1]="InfoPlaceholder"}(Di||(Di={}));var Mi,ji=Object(oe.withLatencyTracking)("VideoInfo",{autoReportInteractive:!0})((function(e){var t=e.video;if(null===t)return u.createElement(sn.a,{row:!0},u.createElement(D.a,{className:"video-info__container"},u.createElement(D.a,{"data-test-selector":Di.InfoPlaceholder,display:N.d.Flex,flexDirection:N.e.Column},u.createElement(ee.a,{lineCount:1,width:320}),u.createElement(ee.a,{lineCount:1,width:240}))));var n=null,i=null;if(t.game&&(n=u.createElement(D.a,{flexShrink:0,margin:{right:1}},u.createElement(Oi,{boxArtURL:t.game.boxArtURL,name:t.game.name})),i=u.createElement(pi.a,{linkTo:{pathname:Object(nn.a)(t.game.name),state:{content:k.PageviewContent.Game,medium:k.PageviewMedium.VideoWatchPage}},label:Object(hi.a)(),title:t.game.name,alignItems:N.b.Start,"data-a-target":"video-info-game-link"})),!oi(t)){var a=null;t.scope===b.pd.PRIVATE&&(a=u.createElement(j.a,{fontSize:T.d.Size4},u.createElement(Ii.a,{label:Object(m.d)("Private","ChannelVideoInfo")})));var r=null,o=t.description;return o&&(r=u.createElement(j.a,{"data-test-selector":Di.VideoDescription},u.createElement(Si,{description:o}))),u.createElement(sn.a,{row:!0},u.createElement(D.a,{display:N.d.Flex,flexDirection:N.e.Column},u.createElement(_i,{dateString:t.publishedAt,title:t.title}),u.createElement(D.a,{className:"video-info__container",overflow:N.i.Hidden,display:N.d.Flex},n,u.createElement(D.a,{display:N.d.Flex,flexDirection:N.e.Column},a,u.createElement(D.a,{display:N.d.InlineFlex},i),r))))}if(oi(t)){var s=t.curator?t.curator.login:"",l=null;if(s){var c=!(!t||!t.game);l=u.createElement(Ei,{login:s,includesSeparator:c})}return u.createElement(sn.a,{row:!0},n,u.createElement(D.a,{className:"video-info__container",overflow:N.i.Hidden},u.createElement(_i,{dateString:t.createdAt,title:t.title}),u.createElement(D.a,{display:N.d.InlineFlex},i,l)))}return null})),Ti=n("DfWg"),Pi=n("hyVY"),Li=n("vRsq");!function(e){e.VideoOptionsButtonSelector="video-options-button",e.VideoOptionsContainerSelector="video-options-container",e.ReportButtonSelector="video-report-button",e.HighlightButtonSelector="video-highlight-button",e.EditButtonSelector="video-edit-button",e.DeleteButtonSelector="video-delete-button"}(Mi||(Mi={}));var Ri=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleReportModalClose=function(e){(e===fn.b.MutationError||e===fn.b.Success)&&t.props.history.push("/")},t}return Object(c.__extends)(t,e),t.prototype.render=function(){var e=Object(G.d)("Video Options","VideoOptions");return u.createElement(mn.a,null,u.createElement(xt.a,{"data-test-selector":Mi.VideoOptionsButtonSelector,type:xt.c.Primary,icon:I.a.More,title:e,ariaLabel:e,disabled:!this.props.video}),this.props.video?u.createElement(tn.a,{direction:tn.b.TopRight},u.createElement(j.a,{padding:{y:1},color:T.c.Link},u.createElement("ul",{"data-test-selector":Mi.VideoOptionsContainerSelector},this.renderReportOption(this.props.video,this.props.currentUser),this.renderHighlightOption(this.props.video,this.props.currentUser),this.renderEditOption(this.props.video,this.props.currentUser),this.renderDeleteOption(this.props.video,this.props.currentUser)))):u.createElement(tn.a,null))},t.prototype.renderDeleteOption=function(e,t){var n=this;if(this.isVODOwner(e,t)||this.isEditor()){var i={type:gn.b.Alert,onClick:function(){n.props.onShowDeleteVideoModal({video:e})}};return u.createElement(vn,{key:"delete-option",interactableProps:i,testSelector:Mi.DeleteButtonSelector},Object(G.d)("Delete","VideoOptions"))}},t.prototype.renderReportOption=function(e,t){var n=this;if(!this.isVODOwner(e,t)){var i={onClick:function(){if(t){var i=void 0;i=e.owner&&e.owner.displayName?Object(G.d)("Report {ownerDisplayName}",{ownerDisplayName:e.owner.displayName},"ReportVideoModal"):Object(G.d)("Report this video","ReportVideoModal"),n.props.onShowReportUserModal({onClose:n.handleReportModalClose,reportContext:{contentType:b.tc.VOD_REPORT,contentID:e.id,targetUserID:e.owner&&e.owner.id?e.owner.id:"",extra:n.getVideoReportExtraField()},title:i})}else n.props.onShowLogin()}};return u.createElement(vn,{key:"report-option",interactableProps:i,testSelector:Mi.ReportButtonSelector},Object(G.d)("Report","VideoOptions"))}},t.prototype.renderHighlightOption=function(e,t){if(e.owner&&e.owner.login&&(this.isVODOwner(e,t)||this.isEditor())){var n={medium:k.PageviewMedium.ChannelVideos,content:k.PageviewContent.ChannelInfoBarOverflowBalloon};return e.broadcastType===b.B.ARCHIVE&&!ui()&&u.createElement(vn,{key:"highlight-option",interactableProps:{linkTo:Object(ri.a)(n,Object(li.g)(e.owner.login,e.id))},testSelector:Mi.HighlightButtonSelector},si())}},t.prototype.renderEditOption=function(e,t){if(e.owner&&e.owner.login&&(this.isVODOwner(e,t)||this.isEditor()))return ui()&&u.createElement(vn,{key:"edit-option",interactableProps:{linkTo:Object(bn.c)(e.owner.login,e.id)},testSelector:Mi.EditButtonSelector},Object(G.d)("Edit","VideoOptions"))},t.prototype.isVODOwner=function(e,t){return t&&e.owner&&t.id===e.owner.id},t.prototype.isEditor=function(){return!(!this.props.data||this.props.data.loading||this.props.data.error||!this.props.data.user||!this.props.data.user.self)&&this.props.data.user.self.isEditor},t.prototype.getVideoReportExtraField=function(){var e=Object(Li.o)(this.props),t=0;this.props.getCurrentVideoTime?t=this.props.getCurrentVideoTime():this.props.lastVideoOffset&&(t=this.props.lastVideoOffset);var n={timestamp:Object(Pi.b)(t,{zeroPadAll:!0})};return e&&(n.collection=e),JSON.stringify(n)},t}(u.Component),Fi=Object(a.d)(Object(f.a)(Ti,{options:function(e){return{variables:{contentOwnerID:e.video.owner.id}}},skip:function(e){return null===e.currentUser||null===e.video||null===e.video.owner}}),Object(oe.withLatencyTracking)("VideoOptions",{autoReportInteractive:!0}))(Ri),Ui=y.a.wrap((function(){return n.e(133).then(n.bind(null,"vrDa"))}),"VideoDeleteModal");var xi,Ai=Object(i.b)(null,(function(e){return Object(a.b)({onShowLogin:function(){return Object(o.e)(r.a.VODOptions)},onShowDeleteVideoModal:function(e){var t=Object(c.__rest)(e,[]);return Object(C.e)(Ui,t)},onShowReportUserModal:function(e){var t=Object(c.__rest)(e,[]);return Object(C.e)(un.a,t)}},e)}))(Object(mt.j)(Fi));n("GXBl");!function(e){e[e.TotalViews=0]="TotalViews"}(xi||(xi={}));var Bi,Vi,Hi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.__extends)(t,e),t.prototype.render=function(){var e=null;if(this.props.video){var t=this.props.video.viewCount;e=u.createElement(j.a,{alignItems:N.b.Center,"data-test-selector":xi.TotalViews,display:N.d.Flex,color:T.c.Alt2,flexGrow:1,flexShrink:1,fontSize:T.d.Size5,margin:{right:1}},u.createElement(St.a,{value:Object(m.f)(t||0),label:Object(m.d)("Total Views","VideoDescription"),icon:I.a.GlyphViews}))}return u.createElement(u.Fragment,null,u.createElement(j.a,{alignItems:N.b.Center,display:N.d.Flex,flexWrap:N.f.NoWrap,justifyContent:N.h.Between,padding:{top:1,x:1},fullWidth:!0},u.createElement(j.a,{alignItems:N.b.Start,display:N.d.Flex,flexWrap:N.f.NoWrap,justifyContent:N.h.Between,flexDirection:N.e.Row,flexShrink:1,fullHeight:!0,fullWidth:!0},u.createElement(j.a,{className:"video-description__info-container",overflow:N.i.Hidden,flexShrink:1,padding:{x:1},fullHeight:!0},u.createElement(ji,{video:this.props.video})),u.createElement(D.a,{display:N.d.Flex,flexGrow:0},e,u.createElement(D.a,{display:N.d.Flex},this.renderTrackedHighlightButton(),u.createElement(ai.a,{balloonDirection:tn.b.TopRight,buttonType:B.d.Secondary,content:{collectionID:this.props.collectionID||void 0,videoID:this.props.video?this.props.video.id:void 0},getCurrentVideoTime:this.props.getLastVideoOffset,tracking:{location:k.PageviewLocation.VideoWatchPage}})),u.createElement(Ai,{currentUser:this.props.currentUser,video:this.props.video,getCurrentVideoTime:this.props.getLastVideoOffset})))))},t.prototype.renderTrackedHighlightButton=function(){var e=this;return this.props.video&&this.props.video.owner&&this.props.video.owner.login&&this.props.video.broadcastType===b.B.ARCHIVE&&ui()&&u.createElement(D.a,{margin:{right:1}},u.createElement(ni.a,{ownerLogin:this.props.video.owner.login,permittedRoles:{owner:!0,editor:!0,staff:!1}},(function(t){return t.permitted&&e.props.video&&e.props.video.owner&&e.props.video.owner.login&&u.createElement(ci,{channelLogin:e.props.video.owner.login,videoID:e.props.video.id,trackingContext:{carouselContent:k.PageviewContent.Video,location:k.PageviewLocation.VideoWatchPage,medium:k.PageviewMedium.ChannelVideos,content:k.PageviewContent.ChannelInfoBar,sectionType:ii.b.ChannelInfoBar,itemType:ii.a.HighlightButton}})})))},t}(u.Component),qi=Object(oe.withLatencyTracking)("VideoDescription",{autoReportInteractive:!0})(Hi),Gi=n("J6gT"),Wi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.checkIfVodcast=function(e){switch(e){case pt.a.WatchParty:case pt.a.Premiere:case pt.a.Rerun:return!0;default:return!1}},t.getVODPath=function(e){return"videos/"+encodeURIComponent(e)},t}return Object(c.__extends)(t,e),t.prototype.componentDidUpdate=function(){this.props.data.user&&this.props.latencyTracking.reportInteractive()},t.prototype.componentDidMount=function(){this.props.data.user&&this.props.latencyTracking.reportInteractive()},t.prototype.componentWillUnmount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){if(void 0===this.props.data||void 0===this.props.data.user)return null;var e=this.props.data.user;if(!e||!e.stream||null===e.stream.type)return null;if(!this.checkIfVodcast(e.stream.type))return null;var t=null,n=null,i="",a="";this.props.pubsub&&this.props.pubsub.messages&&this.props.pubsub.messages.vodcast&&(i=this.props.pubsub.messages.vodcast.vod.vod_id,a=this.props.pubsub.messages.vodcast.vod.title);var r=u.createElement(M.a,{type:M.e.Span,bold:!0},e.displayName||"");return e.stream.type===pt.a.Rerun?(t=u.createElement(_.a,{asset:I.a.VideoRerun,height:16,width:16}),n=i&&a?Object(m.d)("Rerun of video from {channelName}: {videoLink}",{channelName:r,videoLink:u.createElement(ae.a,{to:{pathname:this.getVODPath(i),state:{location:k.PageviewLocation.Channel,medium:k.PageviewMedium.Channel}}},u.createElement(M.a,{type:M.e.Span,color:T.c.OverlayAlt},a))},"ChannelVodcastTopbar"):Object(m.d)("Rerun of video from {channelName}",{channelName:r},"ChannelVodcastTopbar")):e.stream.type===pt.a.Premiere&&(t=u.createElement(_.a,{asset:I.a.VideoPremiere,type:_.b.Live,height:16,width:16}),n=Object(m.d)("Premiere of video from {channelName}",{channelName:r},"ChannelVodcastTopbar")),u.createElement(j.a,{background:T.a.Accent,color:T.c.Overlay,padding:1,alignItems:N.b.Center,display:N.d.Flex,flexWrap:N.f.NoWrap,overflow:N.i.Hidden},t,u.createElement(D.a,{display:N.d.Inline,padding:{left:.5},ellipsis:!0},u.createElement(M.a,{fontSize:T.d.Size5,ellipsis:!0,"data-test-selector":"channel-vodcast-topbar",title:a},n)))},t}(u.Component),zi=Object(a.d)(Object(f.a)(Gi,{options:function(e){return{pollInterval:12e4,fetchPolicy:"network-only",variables:{channelLogin:e.channelLogin}}}}),Object(De.a)([{skip:function(e){return e.data.loading||!e.data.user||!e.data.user.id},topic:function(e){return e.data.user&&e.data.user.id?Object(_e.V)(e.data.user.id):""},mapMessageTypesToProps:(Bi={},Bi[Ne.PubsubMessageType.Vodcast]="vodcast",Bi)}]),Object(oe.withLatencyTracking)("ChannelVodcastTopbar"))(Wi),Qi=n("bRMw"),Yi=y.a.wrap((function(){return n.e(129).then(n.bind(null,"nKq/"))}),"ChannelCollaborationBanner"),$i=y.a.wrap((function(){return n.e(88).then(n.bind(null,"5k+0"))}),"MultiviewBanner"),Ki=y.a.wrap((function(){return n.e(89).then(n.bind(null,"/G4D"))}),"MultiviewInfoBalloon"),Xi=y.a.wrap((function(){return n.e(254).then(n.bind(null,"Wgfy"))}),"WatchPartyChannelBanner",{placeholder:null});!function(e){e.CollaborationBanner="channel_root_collaboration_banner",e.MultiviewBanner="channel_page_multiview_banner",e.MultiviewInfoBalloon="channel_root_multiview_info_balloon",e.NonLiveVideoBanner="channel_root_non_live_video_banner"}(Vi||(Vi={}));var Ji=1,Zi="twilight.multiview_owl_ftue_done",ea=function(e){function t(t){var n=e.call(this,t)||this;return n.playSessionId=null,n.lastVideoOffset=ot.a,n.getLiveChannelSources=function(){var e=n.props.contentType!==Ce.a.LIVE&&n.props.currentUser&&n.props.currentUser.roles&&n.props.currentUser.roles.isSiteAdmin,t=n.props,i=t.hostedChannel,a=t.channel,r=t.channelLogin,o=void 0;return a&&a.login===r&&i&&!e&&(o=i.login),{contentLogin:o||r,isHosting:!!o}},n.onVideoPlaying=function(e){n.playSessionId!==e&&(n.playSessionId=e,n.props.setMainPlayerPlaySessionId(n.playSessionId))},n.onVideoPauseToggled=function(e){e&&n.props.onMainPlayerPause?n.props.onMainPlayerPause():!e&&n.props.onMainPlayerPlay&&n.props.onMainPlayerPlay()},n.onPlaybackBlocked=function(){n.props.onPlaybackBlocked()},n.onStreamOnline=function(){n.props.handleStreamStatusChange("online")},n.onStreamOffline=function(){n.props.handleStreamStatusChange("offline")},n.onPlayerNavigationEvent=function(e){var t=n.props.video,i=t?t.id:"",a=n.props.collection&&n.props.collection.id||void 0;!function(e,t,n){if(e.collectionID||!e.videoID)if(e.collectionID&&e.videoID){if(n&&n.currentVideoID&&n.currentCollectionID&&n.currentVideoID===e.videoID&&n.currentCollectionID===e.collectionID)return;t.push("/videos/"+e.videoID+"?collection="+e.collectionID)}else!e.collectionID||e.videoID?m.k.withCategory("video-player").errorAndReport(new Error("No collection or video specified from the emitted player transition event."),"No collection or video specified from the emitted player transition event."):t.push("/collections/"+e.collectionID);else t.push("/videos/"+e.videoID)}(e,n.props.history,{currentCollectionID:a,currentVideoID:i})},n.triggerPlayerReposition=function(){n.repositionPlayer&&n.repositionPlayer()},n.onVideoTimeChange=function(e){var t=Math.floor(e);if(t!==n.lastVideoOffset)if(n.lastVideoOffset=t,n.props.clip){var i=t+n.getSourceVideoClipStartOffset()-Ji;n.props.onVideoTimeChange(i)}else n.props.onVideoTimeChange(t);else n.props.requestedVideoOffset===t&&n.props.requestVideoOffset(ot.a)},n.getMiniPlayerTitle=function(){if(n.props.contentType===Ce.a.VIDEO||n.props.contentType===Ce.a.COLLECTION)return n.props.video&&n.props.video.title||Object(m.d)("Watching video","ChannelRoot");if(n.props.contentType===Ce.a.CLIP)return n.props.clip&&n.props.clip.title||Object(m.d)("Watching clip","ChannelRoot");var e;if(n.props.hostedChannel)return e=n.props.hostedChannel.displayName||n.props.hostedChannel.login,Object(m.d)("Hosting {channel}",{channel:e},"ChannelRoot");var t=n.props.channel;return e=t&&t.displayName||n.props.channelLogin,Object(m.d)("Watching {channelName}",{channelName:e},"ChannelRoot")},n.setRepositionPlayer=function(e){n.repositionPlayer=e},n.getLastVideoOffset=function(){return n.lastVideoOffset},n.onEnterMultiview=function(){n.props.history.push("/"+n.props.match.params.channelLogin+"/commandcenter"),n.endMultiviewFTUE()},n.endMultiviewFTUE=function(){n.state.multiviewFTUEDone||(m.p.storage.set(Zi,!0),n.setState({multiviewFTUEDone:!0}))},n.state={multiviewFTUEDone:m.p.storage.get(Zi,!1)},n}return Object(c.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){var e=this.props.channelLogin,t=this.props.channel,n=this.props.collectionID,i=this.props.clipSlug,a=this.props.videoID,r=!a&&!n&&!i,o=this.props.video,s=Object(ht.b)(t),l=Object(Qi.d)(e)&&r&&this.props.firstPageLoaded&&!this.channelIsHosting()&&s.length>0,c=Object(ot.d)(t)===pt.a.Live,d=!!(t&&t.self&&t.self.subscriptionBenefit),p=d&&!this.state.multiviewFTUEDone,h={type:bt.a.Invalid},f={disableStreamInfoTags:!0,enableExtensions:!0,trackingProperties:{is_pbyp:this.props.isShowing}},g=Re.a.Site,v=this.props.requestedVideoOffset!==ot.a?this.props.requestedVideoOffset:void 0,k=this.props,y=k.onMainPlayerAdPodStart,S=k.onMainPlayerAdPodEnd,C=k.onMainPlayerContentRestricted,E=k.onMainPlayerInit;if(r){var w=l?{buttonText:Object(m.d)("Enter Command Center","ChannelRootPlayerUI"),parentChannelLogin:e,parentChannelID:t&&t.id||"",isFTUE:p}:void 0,O=this.getLiveChannelSources();h={type:bt.a.Live,channelLogin:O.contentLogin,hostChannel:O.isHosting?e:void 0,multiview:w}}else n?h={type:bt.a.Collection,collectionID:n,videoOffset:v,vodID:a}:a?h={type:bt.a.VOD,vodID:a,videoOffset:v}:i&&(h={type:bt.a.Clip,clipSlug:i,videoOffset:v},f={disableStatusOverlay:!0,onClick:vt.c.TOGGLE_PLAYBACK},g=Re.a.ClipsWatchPage);var N=!this.props.live&&!this.channelIsHosting()&&!o||!!i,_=null;r&&this.props.firstPageLoaded&&!this.channelIsHosting()&&t&&t.id&&(_=u.createElement(Yi,{channelID:t.id,channelLogin:e,channelDisplayName:t.displayName,triggerPlayerReposition:this.triggerPlayerReposition,"data-test-selector":Vi.CollaborationBanner}));var I=null;l&&t&&t.id&&c&&(I=u.createElement($i,{channelID:t.id,channelLogin:e,chanlets:s,triggerPlayerReposition:this.triggerPlayerReposition,viewerIsAuthorized:d,"data-test-selector":Vi.MultiviewBanner}));var M=null;l&&p&&(M=u.createElement(Ki,{channelLogin:e,"data-test-selector":Vi.MultiviewInfoBalloon}));var j=null;o&&o.scope===b.pd.PRIVATE&&o.owner&&o.owner.login&&(j=u.createElement(ti,{ownerLogin:e}));var T=r&&!this.channelIsHosting()&&Object(ot.c)(t)&&u.createElement(zi,{channelLogin:e}),P=null;return this.props.firstPageLoaded&&t&&t.id&&t.displayName&&!this.props.live&&r&&!this.channelIsHosting()&&!Object(ot.c)(t)&&(P=u.createElement(Xi,{channel:{login:e,id:t.id,displayName:t.displayName},triggerPlayerReposition:this.triggerPlayerReposition})),u.createElement(u.Fragment,null,u.createElement(D.a,{className:"channel-root__player-container",padding:{bottom:2}},P,_,I,j,T,u.createElement(gt.a,{triggerPlayerReposition:this.triggerPlayerReposition},u.createElement(Jt,null,u.createElement(ft.a,{repositionPlayerRef:this.setRepositionPlayer,playerProps:{content:h,behaviors:f,type:g,callbacks:{onEnterMultiview:l?this.onEnterMultiview:void 0,onNavigationRequest:this.onPlayerNavigationEvent,onPlaying:this.onVideoPlaying,onSeek:this.onVideoTimeChange,onStreamOnline:this.onStreamOnline,onStreamOffline:this.onStreamOffline,onVideoTimeChange:this.onVideoTimeChange,onPlaybackBlocked:this.onPlaybackBlocked,onContentRestricted:C,onPauseToggled:this.onVideoPauseToggled,onAdStart:function(e){y(e)},onAdEnd:function(e){S(e)},onInit:function(e){E(e)}}},miniPlayerTitle:this.getMiniPlayerTitle(),miniPlayerContentRoute:this.props.contentCanonicalUrl,disablePersistenceOnUnmount:N,disablePersistenceOnScroll:N}))),M,this.renderDescription()))},t.prototype.renderDescription=function(){var e=this.props,t=e.contentType;switch(t){case Ce.a.LIVE:return u.createElement(Qt,{channelLogin:e.channelLogin,channelIsHosting:!!e.hostedChannel});case Ce.a.COLLECTION:case Ce.a.VIDEO:return u.createElement(qi,{collectionID:e.collection&&e.collection.id,currentUser:e.currentUser,video:e.video,getLastVideoOffset:this.getLastVideoOffset});case Ce.a.CLIP:return u.createElement(ei,{clip:e.clip,channelLogin:e.channelLogin});case Ce.a.NONE:return null;default:return t}},t.prototype.channelIsHosting=function(){return!!this.props.hostedChannel},t.prototype.getSourceVideoClipStartOffset=function(){return this.props.clip&&this.props.clip.videoOffsetSeconds?this.props.clip.videoOffsetSeconds:0},t}(u.Component);var ta=Object(a.d)(mt.j,Object(i.b)((function(e){return{firstPageLoaded:e.session.firstPageLoaded,theatreModeEnabled:e.ui.theatreModeEnabled}}),(function(e){return Object(a.b)({onVideoTimeChange:at.r,onPlaybackBlocked:at.q},e)})),Object(Se.b)((function(e){return{contentType:e.contentType,channelLogin:e.channelLogin,videoID:e.videoID,collectionID:e.collectionID,clipSlug:e.clipSlug,loading:e.loading,channel:e.channel,video:e.video,collection:e.collection,clip:e.clip,contentCanonicalUrl:e.contentCanonicalUrl,live:e.live,videoPlayerSource:e.videoPlayerSource,currentUser:e.currentUser,hostedChannel:e.hostedChannel,requestedVideoOffset:e.requestedVideoOffset,requestVideoOffset:e.requestVideoOffset,handleStreamStatusChange:e.handleStreamStatusChange}})),Object(je.b)((function(e){return{isShowing:e.isShowing,onMainPlayerAdPodEnd:e.onMainPlayerAdPodEnd,onMainPlayerAdPodStart:e.onMainPlayerAdPodStart,onMainPlayerContentRestricted:e.onMainPlayerContentRestricted,onMainPlayerPlay:e.onMainPlayerPlay,onMainPlayerPause:e.onMainPlayerPause,onMainPlayerInit:e.onMainPlayerInit,setMainPlayerPlaySessionId:e.setMainPlayerPlaySessionId}})),u.memo,Object(oe.withLatencyTracking)("ChannelPlayer"))(ea),na=n("+Jjl"),ia=n("Bh3T"),aa=n("JoTo"),ra=(n("nc/C"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.renderRightColumn,n=e.children,i=e.persistentPlayerIsPersisting,a=e.theatreModeEnabled,r=e.renderVideoPlayer,o=e.renderSideNav,s=e.renderHeader,l=E({"channel-root__scroll-area--theatre-mode":a}),c=E({"channel-root":!0,"channel-root--persistent-player":i});return u.createElement(j.a,{className:c,fullHeight:!0},u.createElement(ia.b,{className:l,suppressScrollToTop:!0,suppressScrollX:!0}),s,u.createElement(aa.a,null,o),u.createElement(na.b,null,u.createElement(j.a,{className:"channel-root__right-column",display:N.d.Flex,flexDirection:N.e.Column,flexGrow:0,flexShrink:0,flexWrap:N.f.NoWrap,fullHeight:!0,borderLeft:!0},t)),r&&u.createElement(D.a,{className:"channel-root__player-container",padding:{bottom:2}},r),n)},t}(u.Component)),oa=n("bdHe"),sa=n("9MrB"),la=n("YXxK"),ca=n("K+jS");function da(e){var t=e.title,n=e.count,i=n?Object(m.f)(n):null;return u.createElement(D.a,{alignItems:N.b.Baseline,display:N.d.Flex,margin:{top:2}},u.createElement(ca.a,{size:ca.b.Large,type:M.e.H1},t),i&&u.createElement(D.a,{margin:{left:1}},u.createElement(M.a,{fontSize:T.d.Size2,type:M.e.H2,color:T.c.Alt2,fontWeight:T.e.SemiBold},i)))}var ua=n("gHOn"),ma=y.a.wrap((function(){return Promise.resolve().then(n.bind(null,"EJeP"))}),"ChannelFollowersContent",{placeholder:u.createElement(oa.a,null)}),pa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.__extends)(t,e),t.prototype.render=function(){var e=this.props.data&&this.props.data.user&&this.props.data.user.followers?this.props.data.user.followers.totalCount:null;return u.createElement(u.Fragment,null,u.createElement(da,{title:Object(m.d)("Followers","ChannelPageHeaders"),count:e}),u.createElement(ma,{channelLogin:this.props.channelLogin}))},t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive(1),this.setPageTitle(),this.props.updateChatTrackingContext({viewerContext:la.c.ChannelFollowersPage})},t.prototype.componentDidUpdate=function(e){(this.props.channel&&e.channel&&this.props.channel.displayName!==e.channel.displayName||this.props.channelLogin!==e.channelLogin)&&this.setPageTitle()},t.prototype.setPageTitle=function(){var e=this.props.channel&&this.props.channel.displayName||this.props.channelLogin;G.q.setPageTitle(Object(m.d)("{channelName}'s Followers",{channelName:e},"ChannelRootFollowersPage"))},t}(u.Component);var ha=Object(a.d)(Object(Se.b)((function(e){return{channel:e.channel,channelLogin:e.channelLogin,error:e.error,loading:e.loading,pageviewProps:Object(st.d)(e.channel,e.video,e.collection,e.clip)}})),Object(f.a)(ua,{options:function(e){return{variables:{login:e.channelLogin}}},skip:function(e){return!e.channelLogin}}),Object(sa.b)((function(e){return Object(c.__assign)({},e)})),Object(oe.withPageTracking)("ChannelFollowersPage",{destination:ct.a.ChannelFollowers,location:k.PageviewLocation.Followers,pageviewProperties:function(e){return e.pageviewProps},skipPageviewTracking:function(e){return e.loading||!!e.error}}))(pa);var fa=Object(a.d)(Object(i.b)((function(e){return{firstPageLoaded:e.session.firstPageLoaded}})))(ha),ga=n("7JxC"),va=(n("4IKE"),y.a.wrap((function(){return Promise.all([n.e(0),n.e(127)]).then(n.bind(null,"EuHz"))}),"ChannelPanels",{placeholder:u.createElement(ga.a,null)})),ba=y.a.wrap((function(){return n.e(132).then(n.bind(null,"kiH+"))}),"SocialMediaSpace",{placeholder:null}),ka="panel-container",ya=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.__extends)(t,e),t.prototype.render=function(){return u.createElement(D.a,{display:N.d.Flex,flexDirection:N.e.Column,margin:{x:"auto"},padding:{bottom:3}},u.createElement(p.a,{name:"vxp_multipass"},this.props.firstPageLoaded&&u.createElement(ba,null)),u.createElement(D.a,{className:"channel-page__panel-container","data-test-selector":ka,flexGrow:1,flexShrink:1},this.props.firstPageLoaded&&this.props.channel&&this.props.channel.id&&u.createElement(va,{channelID:this.props.channel.id,channelLogin:this.props.channelLogin})))},t.prototype.componentDidMount=function(){this.setPageTitle(),this.props.updateChatTrackingContext({viewerContext:la.c.ChannelPage})},t.prototype.componentDidUpdate=function(e){(!e.channel&&this.props.channel||this.props.channel&&e.channel&&this.props.channel.displayName!==e.channel.displayName||this.props.channelLogin!==e.channelLogin)&&this.setPageTitle()},t.prototype.setPageTitle=function(){var e=this.props.channel&&this.props.channel.displayName?this.props.channel.displayName:this.props.channelLogin;m.p.setPageTitle(e)},t}(u.Component);var Sa=Object(a.d)(Object(Se.b)((function(e){return{channel:e.channel,channelLogin:e.channelLogin,error:e.error,loading:e.loading,pageviewProps:Object(st.d)(e.channel,e.video,e.collection,e.clip)}})),Object(sa.b)((function(e){return Object(c.__assign)({},e)})),Object(oe.withPageTracking)("ChannelPage",{autoReportInteractive:!0,destination:ct.a.ChannelIndex,location:k.PageviewLocation.Channel,pageviewProperties:function(e){return e.pageviewProps},skipPageviewTracking:function(e){return e.loading||!!e.error}}))(ya);var Ca,Ea=Object(a.d)(mt.j,Object(i.b)((function(e){return{firstPageLoaded:e.session.firstPageLoaded}})))(Sa),wa=n("H1ft"),Oa=n("ttMT"),Da=n("XKWF"),Na=n("tLDJ"),_a=function(e){return u.createElement(ni.a,{ownerLogin:e.channelLogin,permittedRoles:{owner:!0,editor:!0,staff:!1}},(function(t){return t.permitted?u.createElement(B.a,{type:B.d.Primary,linkTo:Object(Na.o)(e.channelLogin)},Object(m.d)("Manage collections","collection-page")):null}))},Ia=n("kyTI"),Ma=n("QdeI"),ja=n("cERj"),Ta=n("EmXd"),Pa=n("u03v");function La(e){return"sort-interactable-"+e.searchValue}function Ra(e){var t=d.parse(e)[Li.d];if("string"!=typeof t)return null;switch(t.toUpperCase()){case Li.f.Newest.toUpperCase():return Li.f.Newest;case Li.f.Popular.toUpperCase():return Li.f.Popular;default:return null}}!function(e){e.ButtonText="button-text",e.SortText="sort-text",e.ManageYourVideosButton="manage-your-videos-button"}(Ca||(Ca={}));var Fa,Ua=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderSort=function(e){return u.createElement(gn.a,{"data-test-selector":La(e),onClick:function(){t.handleSortClick(e)},key:e.label,selected:!!e.selected},u.createElement(D.a,{padding:{x:1,y:.5},"data-test-selector":Ca.SortText},e.label))},t.handleSortClick=function(e){t.props.history.push(t.generateLocationWithSort(t.props.location,e.searchValue))},t}return Object(c.__extends)(t,e),t.prototype.componentDidMount=function(){this.checkSortValue(this.props.location)},t.prototype.render=function(){var e=this,t=this.getSorts(),n=t.find((function(e){return!!e.selected}));return u.createElement(D.a,{alignItems:N.b.End,display:N.d.Flex,flexDirection:N.e.Row,justifyContent:N.h.Between},u.createElement(D.a,{display:N.d.Flex,flexDirection:N.e.Row,alignItems:N.b.Center},u.createElement(D.a,{padding:{right:.5}},u.createElement(M.a,{bold:!0},Object(m.d)("Sorted by","VideoSort"))),u.createElement(mn.a,{hideBalloonOnInsideClick:!0},u.createElement(Ta.a,{dropdown:Pa.b.ArrowDown},u.createElement(M.a,{bold:!0,"data-test-selector":Ca.ButtonText},n?n.label:t[0].label)),u.createElement(tn.a,{noTail:!0},t.map(this.renderSort)))),u.createElement(ni.a,{ownerLogin:this.props.channelLogin,permittedRoles:{owner:!0,editor:!0,staff:!1}},(function(t){return t.permitted&&u.createElement(D.a,{alignItems:N.b.End,display:N.d.Flex,flexDirection:N.e.Row},u.createElement(B.a,{"data-test-selector":Ca.ManageYourVideosButton,linkTo:"/"+e.props.channelLogin+"/manager",targetBlank:!0,type:B.d.Primary},Object(m.d)("Manage videos","VideoSort")))})))},t.prototype.getSorts=function(){var e=[{label:Object(m.d)("Date","VideoSort"),searchValue:Li.f.Newest},{label:Object(m.d)("Popular","VideoSort"),searchValue:Li.f.Popular}],t=Ra(this.props.location.search),n=e.find((function(e){return null!==t&&e.searchValue===t}));return n&&(n.selected=!0),e},t.prototype.checkSortValue=function(e){Ra(e.search)||this.props.history.replace(this.generateLocationWithSort(e,Li.f.Newest))},t.prototype.generateLocationWithSort=function(e,t){var n;return Object(hn.f)(e,((n={})[Li.d]=t,n))},t}(u.Component),xa=Object(mt.j)(Ua),Aa=y.a.wrap((function(){return n.e(131).then(n.bind(null,"gcyA"))}),"ChannelVideosOverviewContent",{placeholder:u.createElement(Ma.a,null)}),Ba=y.a.wrap((function(){return n.e(122).then(n.bind(null,"6mes"))}),"ChannelClipsContent",{placeholder:u.createElement(Ma.a,null)}),Va=y.a.wrap((function(){return n.e(123).then(n.bind(null,"WfYB"))}),"ChannelCollectionsContent",{placeholder:u.createElement(Ma.a,null)}),Ha=y.a.wrap((function(){return n.e(126).then(n.bind(null,"TCEa"))}),"FilterableVideoTower",{placeholder:u.createElement(Ma.a,null)});!function(e){e.Content="content",e.Sort="sort"}(Fa||(Fa={}));var qa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.__extends)(t,e),t.prototype.render=function(){var e=Object(Li.w)(this.props.location.search),t=this.getComponentsForFilter(e);return u.createElement(D.a,{padding:{top:2}},e&&this.renderVideoOptions(t.sort),u.createElement("div",{"data-test-selector":Fa.Content},t.content))},t.prototype.componentDidMount=function(){var e=this.props.critical?1:0;this.props.latencyTracking.reportInteractive(e)},t.prototype.renderVideoOptions=function(e){return u.createElement(D.a,{"data-test-selector":Fa.Sort,display:N.d.Flex,flexDirection:N.e.Row,padding:{bottom:1}},u.createElement(D.a,{padding:{right:1}},u.createElement(ja.a,{channelLogin:this.props.channelLogin})),e)},t.prototype.getComponentsForFilter=function(e){var t=this.props.channelLogin,n=Object(Li.p)(this.props),i=Object(Li.x)(this.props.location.search)||Li.f.Newest,a=Object(Li.v)(this.props.location.search),r=a||void 0;if(!e)return{content:u.createElement(Aa,{channelLogin:t,collectionID:n})};switch(e){case Li.e.Highlights:case Li.e.PastPremieres:case Li.e.PastBroadcasts:case Li.e.Uploads:return{content:this.getFilterableVideoTower(e,r),sort:u.createElement(xa,{channelLogin:t})};case Li.e.Clips:return{content:u.createElement(Ba,{channelName:t,videoBrowseOptions:{filter:e,sort:i,range:r}}),sort:u.createElement(Oa.a,{key:r,hideLanguageFilter:!0,channelLogin:t})};case Li.e.Collections:return{content:u.createElement(Va,{channelLogin:t,videoBrowseOptions:{filter:e,sort:i,range:r}}),sort:u.createElement(D.a,{alignItems:N.b.End,display:N.d.Flex,fullWidth:!0,justifyContent:N.h.End},u.createElement(D.a,{flexGrow:0},u.createElement(_a,{channelLogin:t})))};case Li.e.All:return{content:this.getFilterableVideoTower(e),sort:u.createElement(xa,{channelLogin:t})};case Li.e.Featured:return{content:this.getFilterableVideoTower(e),sort:u.createElement(D.a,{flexGrow:1,flexShrink:1,display:N.d.Flex,justifyContent:N.h.End,alignItems:N.b.End},u.createElement(Ia.a,{channelLogin:this.props.channelLogin,trackingContext:{medium:k.PageviewMedium.ChannelVods,content:k.PageviewContent.CustomizeButton}}))};default:return e}},t.prototype.getFilterableVideoTower=function(e,t){var n=void 0;switch(e){case Li.e.Highlights:n=b.B.HIGHLIGHT;break;case Li.e.PastBroadcasts:n=b.B.ARCHIVE;break;case Li.e.PastPremieres:n=b.B.PAST_PREMIERE;break;case Li.e.Uploads:n=b.B.UPLOAD;break;case Li.e.Featured:case Li.e.All:break;default:return e}var i=Object(Li.x)(this.props.location.search)||Li.f.Newest;return u.createElement(Ha,{channelLogin:this.props.channelLogin,filter:n,sort:Object(Da.c)(i),videoBrowseOptions:{filter:e,sort:i,range:t},multipleVideoGameMarkersType:Object(wa.b)()})},t}(u.Component),Ga=Object(a.d)(mt.j,Object(oe.withLatencyTracking)("ChannelVideosContent"))(qa),Wa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.__extends)(t,e),t.prototype.componentDidMount=function(){this.setPageTitle(),this.setClipsFilter()},t.prototype.componentDidUpdate=function(){this.setPageTitle(),this.setClipsFilter()},t.prototype.render=function(){return Object(Li.w)(m.p.history.location.search)?u.createElement(u.Fragment,null,u.createElement(da,{title:Object(m.d)("Clips","ChannelPageHeaders")}),u.createElement(Ga,{critical:!0,channelLogin:this.props.channelLogin})):null},t.prototype.setPageTitle=function(){var e=this.props.channel&&this.props.channel.displayName||this.props.channelLogin;m.p.setPageTitle(Object(m.d)("{channelName}'s Clips",{channelName:e},"ChannelVideosClipsPage"))},t.prototype.setClipsFilter=function(){Object(Li.w)(m.p.history.location.search)||m.p.history.replace({search:"?filter="+Li.e.Clips,state:Object(c.__assign)({},m.p.history.location.state)})},t}(u.Component);var za=Object(a.d)(Object(Se.b)((function(e){return{channel:e.channel,channelLogin:e.channelLogin,error:e.error,loading:e.loading,pageviewProps:Object(st.d)(e.channel,e.video,e.collection,e.clip)}})),Object(oe.withPageTracking)("ClipsChannelPage",{destination:ct.a.ChannelClips,autoReportInteractive:!0,location:k.PageviewLocation.ChannelClips,pageviewProperties:function(e){return e.pageviewProps},skipPageviewTracking:function(e){return e.loading||!!e.error}}))(Wa),Qa=n("sQmm"),Ya=function(){return u.createElement(u.Fragment,null,u.createElement(D.a,{display:N.d.Flex,flexDirection:N.e.Row,alignItems:N.b.End,justifyContent:N.h.End,padding:.5},u.createElement(D.a,{margin:{right:1}},u.createElement(ee.a,{height:25,width:80})),u.createElement(D.a,null,u.createElement(ee.a,{height:25,width:80}))),u.createElement(j.a,{border:!0,padding:2,display:N.d.Flex,alignItems:N.b.Center,justifyContent:N.h.Center,margin:{top:1,bottom:1}},u.createElement(D.a,null,u.createElement(ee.a,{height:25,width:80}))),u.createElement(Qa.a,null))},$a=y.a.wrap((function(){return Promise.all([n.e(0),n.e(130)]).then(n.bind(null,"k7UE"))}),"ChannelVideosEditPageComponent",{placeholder:u.createElement(Ya,null)}),Ka=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.__extends)(t,e),t.prototype.render=function(){var e=this;return u.createElement(ni.a,{ownerLogin:this.props.channelLogin,permittedRoles:{owner:!0,editor:!0,staff:!1}},(function(t){var n=t.loading,i=t.permitted,a=t.error;return n?u.createElement(Ya,null):!i||a?e.redirectToVideosBrowse():u.createElement($a,{channelLogin:e.props.channelLogin})}))},t.prototype.redirectToVideosBrowse=function(){return u.createElement(mt.b,{to:Object(Li.l)(this.props.channelLogin)})},t}(u.Component);var Xa=Object(a.d)(Object(Se.b)((function(e){return{channelLogin:e.channelLogin,error:e.error,loading:e.loading,pageviewProps:Object(st.d)(e.channel,e.video,e.collection,e.clip)}})),Object(oe.withPageTracking)("ChannelVideosEditPage",{destination:ct.a.VideosEditPage,autoReportInteractive:!0,location:k.PageviewLocation.ChannelVideosEdit,pageviewProperties:function(e){return e.pageviewProps},skipPageviewTracking:function(e){return e.loading||!!e.error}}))(Ka),Ja=n("RtvB"),Za=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.__extends)(t,e),t.prototype.componentDidMount=function(){this.setPageTitle()},t.prototype.componentDidUpdate=function(){this.setPageTitle()},t.prototype.render=function(){var e=this.props.data&&this.props.data.user&&this.props.data.user.videos?this.props.data.user.videos.totalCount:null;return u.createElement(u.Fragment,null,u.createElement(da,{title:Object(m.d)("Videos","ChannelPageHeaders"),count:e}),u.createElement(Ga,{critical:!0,channelLogin:this.props.channelLogin}))},t.prototype.setPageTitle=function(){var e=this.props.channel&&this.props.channel.displayName||this.props.channelLogin;m.p.setPageTitle(Object(m.d)("{channelName}'s Videos",{channelName:e},"ChannelRootVideosPage"))},t}(u.Component);var er=Object(a.d)(Object(Se.b)((function(e){return{channel:e.channel,channelLogin:e.channelLogin,error:e.error,loading:e.loading,pageviewProps:Object(st.d)(e.channel,e.video,e.collection,e.clip)}})),Object(f.a)(Ja,{options:function(e){return{variables:{login:e.channelLogin}}},skip:function(e){return!e.channelLogin}}),Object(oe.withPageTracking)("ChannelVideosPage",{destination:ct.a.VideosPage,autoReportInteractive:!0,location:k.PageviewLocation.ChannelVideos,pageviewProperties:function(e){return e.pageviewProps},skipPageviewTracking:function(e){return e.loading||!!e.error}}))(Za),tr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.__extends)(t,e),t.prototype.render=function(){return u.createElement(u.Fragment,null,this.props.firstPageLoaded&&this.props.channel&&this.props.channel.id&&u.createElement(Ga,{channelLogin:this.props.channelLogin}))},t}(u.Component);var nr=Object(a.d)(Object(Se.b)((function(e){return{channel:e.channel,channelLogin:e.channelLogin,error:e.error,loading:e.loading,pageviewProps:Object(st.d)(e.channel,e.video,e.collection,e.clip)}})),Object(oe.withPageTracking)("VideoWatchPage",{autoReportInteractive:!0,destination:ct.a.VideoWatchPage,location:k.PageviewLocation.VideoWatchPage,pageviewProperties:function(e){return e.pageviewProps},skipPageviewTracking:function(e){return e.loading||!!e.error}}),Object(i.b)((function(e){return{firstPageLoaded:e.session.firstPageLoaded}})))(tr),ir=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.redirectFollowingPage=function(){if(t.props.channel&&t.props.currentUser){var e="/"+t.props.channel.login;return t.props.channel.id===t.props.currentUser.id&&(e="/directory/following"),u.createElement(mt.b,{from:"/:channelLogin/:contentType(video|clip|collection)?/:contentID?/following",to:e})}},t.renderPanelArea=function(){return u.createElement(Ea,null)},t.renderVideosArea=function(){return u.createElement(nr,null)},t.renderFollowersPage=function(){return t.props.channel&&t.props.channel.id?u.createElement(fa,null):null},t.renderVideosPage=function(){return t.props.channel&&t.props.channel.id?u.createElement(er,null):null},t.renderVideosEditPage=function(){return t.props.channel&&t.props.channel.id?u.createElement(Xa,null):null},t.renderClipsPage=function(){return t.props.channel&&t.props.channel.id?u.createElement(za,null):null},t.redirectLegacyChannelCollections=function(){var e=Object(Li.l)(t.props.match.params.channelLogin,{filter:Li.e.Collections});return u.createElement(mt.b,{to:e})},t.redirectLegacyVideoFilters=function(e){var n,i=t.props.match.params.channelLogin,a=Object(Li.t)(e),r=Object(Li.x)(e.location.search)||void 0,o=Object(c.__assign)({},e.location.state);return n=a?Object(Li.l)(i,{filter:Object(Li.y)(a)||void 0,sort:r}):Object(Li.l)(i),u.createElement(mt.b,{to:{pathname:n,state:o}})},t}return Object(c.__extends)(t,e),t.prototype.render=function(){return u.createElement(mt.e,null,u.createElement(mt.c,{path:"/collections/:collectionID",render:this.renderVideosArea}),u.createElement(mt.c,{path:"/videos/:videoID",render:this.renderVideosArea}),u.createElement(mt.c,{path:"/:channelLogin",exact:!0,render:this.renderPanelArea}),u.createElement(mt.c,{path:"/:channelLogin/:contentType(video|clip|collection)?/:contentID?/about",render:this.renderPanelArea}),u.createElement(mt.c,{path:"/:channelLogin/:contentType(video|clip|collection)?/:contentID?/followers",render:this.renderFollowersPage}),u.createElement(mt.c,{path:"/:channelLogin/p/:entityID",render:this.renderPanelArea}),u.createElement(mt.c,{path:"/:channelLogin/rooms/:roomName",render:this.renderPanelArea}),u.createElement(mt.c,{path:"/:channelLogin/videos/edit",exact:!0,render:this.renderVideosEditPage}),u.createElement(mt.c,{path:"/:channelLogin/:contentType(video|clip|collection)?/:contentID?/videos",exact:!0,render:this.renderVideosPage}),u.createElement(mt.c,{path:"/:channelLogin/:contentType(video|clip|collection)?/:contentID?/videos/:filter(all|archive|upload|highlight|past_premiere)",render:this.redirectLegacyVideoFilters}),u.createElement(mt.c,{path:"/:channelLogin/clips",render:this.renderClipsPage}),u.createElement(mt.c,{path:"/:channelLogin/collections",render:this.redirectLegacyChannelCollections}),this.redirectFollowingPage(),u.createElement(mt.c,{path:"/:channelLogin/:contentType(video|clip|collection)?/:contentID?",render:this.renderVideosArea}))},t}(u.Component);var ar=Object(a.d)(mt.j,Object(Se.b)((function(e){return{channel:e.channel,currentUser:e.currentUser}})))(ir),rr=n("8QXX"),or=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentWatchingActivity={userID:null,isWatching:!1},t.hasRecordedReferralMission=!1,t.renderHeader=function(){return u.createElement(ye,{contextLoading:t.props.loading,currentUser:t.props.currentUser,channel:t.props.channel,channelLogin:t.props.channelLogin,page:t.props.page,live:t.props.live,hostedChannel:t.props.hostedChannel})},t.renderSideNav=function(){return u.createElement(it.a,{channelLogin:t.props.channelLogin})},t.renderRightColumn=function(){var e=t.props.contentType===Ce.a.LIVE;return t.renderChat(e,t.props.video)},t.renderVideoPlayer=function(){return t.props.contentType===Ce.a.LIVE&&t.props.page!==W.c.About||t.props.contentType===Ce.a.VIDEO&&t.props.page!==W.c.Videos||t.props.contentType===Ce.a.CLIP&&t.props.page!==W.c.Clips||t.props.contentType===Ce.a.COLLECTION&&t.props.page!==W.c.Videos?null:u.createElement(ta,null)},t.onChatHostingChange=function(e){m.o.track(k.SpadeEventType.HostModeDebug,{log_type:"chat_msg",channel:t.props.channelLogin,data_target_channel_login:e})},t.onPlayerSeekRequest=function(e){t.props.requestVideoOffset(e)},t}return Object(c.__extends)(t,e),t.prototype.componentDidMount=function(){this.onRender(),this.updateWatchingActivity(this.props)},t.prototype.componentDidUpdate=function(e){this.onRender(),e.channelLogin===(this.props.channel&&this.props.channel.login)&&e.videoID===this.props.videoID&&e.collectionID===this.props.collectionID&&e.clipSlug===this.props.clipSlug&&e.page===this.props.page&&Object(st.f)(e)===Object(st.f)(this.props)||e.scrollToTop(),this.updateWatchingActivity(this.props)},t.prototype.componentWillUnmount=function(){Object(v.a)()},t.prototype.render=function(){var e=this.props.channelLogin,t=this.props.channel,n=t&&t.stream&&t.stream.game?t.stream.game.name:void 0;return(this.props.loading||this.props.error||!(!this.props.match.params.contentType&&this.props.match.params.contentID||this.props.contentType===Ce.a.LIVE&&(!t||t&&!t.id)||this.props.contentType===Ce.a.CLIP&&Object(ot.e)(e,this.props.clip)||this.props.contentType===Ce.a.VIDEO&&Object(ot.j)(e,this.props.video)))&&(this.props.loading||!this.props.error||this.props.contentType!==Ce.a.VIDEO&&this.props.contentType!==Ce.a.COLLECTION&&this.props.contentType!==Ce.a.CLIP)?u.createElement(ra,{renderHeader:this.renderHeader(),renderSideNav:this.renderSideNav(),renderRightColumn:this.renderRightColumn(),theatreModeEnabled:this.props.theatreModeEnabled,persistentPlayerIsPersisting:this.props.persistentPlayerIsPersisting,renderVideoPlayer:this.renderVideoPlayer()},u.createElement(Ee.a,{game:n,hostingInfo:this.getHostingContext()}),u.createElement(Oe,null),u.createElement(D.a,{padding:{x:2}},u.createElement(ar,null))):u.createElement(ut,null)},t.prototype.renderChat=function(e,t){var n,i,a=null,r=this.props.channelLogin,o=this.props.collectionID,s=this.props.hostedChannel,l=this.props.channel&&this.props.channel.id,d=this.props.contentType,m=!this.props.loading&&o&&this.props.collection&&0===this.props.collection.items.totalCount;return e?a=u.createElement(u.Fragment,null,l&&u.createElement(p.a,{name:Me.b},u.createElement(tt,{channelLogin:r,channelId:l,contentType:d})),u.createElement(nt.a,{channelLogin:r,hostedChannelDisplayName:s&&s.displayName?s.displayName:void 0,routedRoomName:this.props.match.params.roomName,onHostingChange:this.onChatHostingChange})):this.props.clip?a=u.createElement(D.a,{flexGrow:1,fullHeight:!0},u.createElement(rt.a,{clipVideoID:(i=null===(n=this.props.clip.video)||void 0===n?void 0:n.id,null!=i?i:null),videoOffsetSeconds:this.props.clip.videoOffsetSeconds,durationSeconds:this.props.clip.durationSeconds,onPlayerSeekRequestHandler:this.onPlayerSeekRequest,onShowLogin:this.props.videoChatLogin})):m||(a=u.createElement(D.a,{flexGrow:1,fullHeight:!0},u.createElement(at.l,Object(c.__assign)({onPlayerSeekRequest:this.onPlayerSeekRequest,onShowLogin:this.props.videoChatLogin,videoID:Object(st.e)(this.props)||t&&t.id||""},Object(ot.h)(this.props))))),a},t.prototype.updateWatchingActivity=function(e){if(e.match.params.channelLogin&&!e.loading&&!e.error&&e.channel&&e.firstPageLoaded&&e.initialUserAvailabilityIsSet){var t=e.channel.id,n=!!Object(ot.d)(e.channel)||Object(ot.b)(e.channel);this.currentWatchingActivity.userID===t&&this.currentWatchingActivity.isWatching===n||(this.currentWatchingActivity={userID:t,isWatching:n},n?Object(v.f)({type:b.b.WATCHING,userID:t,gameID:null}):Object(v.a)())}},t.prototype.getHostingContext=function(){if(this.props.hostedChannel&&this.props.channel&&this.props.channel.id)return{hostingChannelId:this.props.channel.id,hostedChannelId:this.props.hostedChannel.id}},t.prototype.onRender=function(){this.props.loading||(this.props.latencyTracking.reportInteractive(),this.recordReferralMissionExperiment(this.props),this.props.clipSlug?Object(ot.i)(null,this.props.clip):this.props.videoID&&Object(ot.i)(this.props.video,null))},t.prototype.recordReferralMissionExperiment=function(e){var t=/rmexp_(.*)/;if(!(this.hasRecordedReferralMission||e.loading||e.error)&&e.channel&&d.parse(e.location.search).referrer&&d.parse(e.location.search).referrer.match(t)){var n=d.parse(e.location.search).referrer.match(t)[1],i={channelID:e.channel.id,referralCode:n};e.recordMissionReferralExperiment(Object(g.a)(i)).catch((function(){return null})),this.hasRecordedReferralMission=!0}},t}(u.PureComponent);var sr=Object(a.d)(Object(f.a)(rr,{name:"recordMissionReferralExperiment"}),Object(Se.b)((function(e){return{handleStreamStatusChange:e.handleStreamStatusChange,contentType:e.contentType,channelLogin:e.channelLogin,videoID:e.videoID,collectionID:e.collectionID,clipSlug:e.clipSlug,loading:e.loading,error:e.error,channel:e.channel,video:e.video,collection:e.collection,clip:e.clip,contentCanonicalUrl:e.contentCanonicalUrl,live:e.live,videoPlayerSource:e.videoPlayerSource,currentUser:e.currentUser,page:e.page,hostedChannel:e.hostedChannel,streamStatus:e.streamStatus,requestVideoOffset:e.requestVideoOffset}})),Object(h.d)((function(e){return{scrollToTop:e.scrollToTop}})),Object(oe.withLatencyTracking)("ChannelRoot"))(or);var lr=Object(a.d)(l.a,Object(i.b)((function(e){return{firstPageLoaded:e.session.firstPageLoaded,isLoggedIn:Object(s.f)(e),initialUserAvailabilityIsSet:!!e.session.initialUserAvailabilityIsSet,theatreModeEnabled:e.ui.theatreModeEnabled,persistentPlayerIsPersisting:e.ui.persistentPlayerIsPersisting,sessionUser:Object(s.e)(e)}}),(function(e){return Object(a.b)({videoChatLogin:function(){return Object(o.e)(r.a.VODComment)}},e)})))(sr);n.d(t,"ChannelRoot",(function(){return lr}))},DOvc:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelPage__ChannelViewersCount"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewersCount"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:113}};n.loc.source={body:"query ChannelPage__ChannelViewersCount($login: String!) {\nuser(login: $login) {\nid\nstream {\nid\nviewersCount\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.ChannelPage__ChannelViewersCount=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"ChannelPage__ChannelViewersCount")},DfWg:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoOptions_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentOwnerID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"contentOwnerID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isEditor"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:100}};n.loc.source={body:"query VideoOptions_User($contentOwnerID: ID!) {\nuser(id: $contentOwnerID) {\nid\nself {\nisEditor\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.VideoOptions_User=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"VideoOptions_User")},DnOo:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("fvjX"),o=n("/7QA"),s=n("SDEh"),l=n("8EUQ"),c=n("GnwI"),d=n("br9A"),u=n("dEDE"),m=n("C7sF"),p=n("vCsY"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(){t.openCheckout(),t.props.handleSubAction({action:t.props.overrideSubEventAction?t.props.overrideSubEventAction:d.a.ClickCheckout,checkoutButtonTier:t.props.tierPrice})},t.openCheckout=function(){t.props.isMobileCheckout||o.n.set(l.a.SUB_CHECKOUT__PRODUCT_KEY,t.props.productName)},t}return Object(i.__extends)(t,e),t.prototype.render=function(){if(this.props.isSubbedToTier){var e=Object(o.d)("Subscribed","SubTierButton");return a.createElement(u.a,{ariaLabel:e,"data-test-selector":"subscribe-button__subscribe-tier-button",disabled:!0,icon:m.a.Star},e)}var t;return t=this.props.customSubscribeNowMessage?this.props.customSubscribeNowMessage:Object(o.d)("Subscribe","SubTierButton"),a.createElement(u.a,Object(i.__assign)({ariaLabel:t+" "+this.props.tierPrice,"data-test-selector":"subscribe-button__subscribe-tier-button",icon:this.props.icon,linkTo:this.props.isMobileCheckout?this.props.url:void 0,onClick:this.handleClick,purchase:this.props.tierPrice},Object(p.a)(this.props),{fullWidth:this.props.fullWidth,targetBlank:!!Object(s.b)()||void 0}),t)},t}(a.Component),f=Object(r.d)(Object(c.withLatencyTracking)("SubTierButton",{autoReportInteractive:!0}))(h);n.d(t,"a",(function(){return f}))},DpwM:function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return c})),n.d(t,"h",(function(){return d}));var i="video",a="published",r="unpublished",o="pending_review",s="pending_review_spam",l="current",c="",d=function(e){return""!==e.parentId}},Dufr:function(e,t,n){"use strict";var i=n("q1tI"),a=n("/7QA"),r=n("sUnt"),o=n("hnjF"),s=n("Ws8v"),l=n("+80q"),c=n("X2PJ"),d=function(e){var t=new Date(e.dateString);return"[object Date]"!==Object.prototype.toString.call(t)||isNaN(t.getTime())?null:i.createElement(r.a,{display:o.d.Flex,alignItems:o.b.Center},i.createElement(s.a,{margin:{right:1,left:1},flexGrow:1,borderBottom:!0}),i.createElement(l.a,{color:c.c.Alt2},Object(a.c)(t)),i.createElement(s.a,{margin:{right:1,left:1},flexGrow:1,borderBottom:!0}))};n.d(t,"a",(function(){return d}))},DwV5:function(e,t,n){"use strict";var i=n("mrSG"),a=n("p46w"),r=n("/7QA"),o=n("mDos"),s=n("geRD"),l=n("ZxDf"),c=n("DMoW"),d=n("3yfl"),u=n("enD+"),m=183;function p(e,t){return Object(i.__awaiter)(this,void 0,Promise,(function(){var n,r;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),(n=a.get(o.g))?[4,f(v(n),t,o.a)]:(t.warn("User is not logged into Amazon."),[2]);case 1:return(r=i.sent())?(e(r.accessToken),[2]):(t.warn("User's Amazon login is no longer valid."),[2]);case 2:return i.sent(),t.warn("AuthorizeToken failed."),[2];case 3:return[2]}}))}))}function h(){a.remove(o.e,{domain:Object(d.a)()}),a.remove(o.g,{domain:Object(d.a)()})}function f(e,t,n){return Object(i.__awaiter)(this,void 0,Promise,(function(){var r;return Object(i.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,7]),[4,b(e)];case 1:return(r=s.sent().data)&&r.updateLWAToken?r.updateLWAToken.error&&r.updateLWAToken.error.code===c.wd.FORBIDDEN?(h(),t.warn("Tokens revoked."),[2,null]):r.updateLWAToken.token?(d=r.updateLWAToken.token,u=Date.now()+1e3*d.expiresIn,p=new Date(u),a.set(o.e,d.accessToken,Object(i.__assign)(Object(i.__assign)({},l.a),{expires:p,sameSite:"strict",secure:!0})),a.set(o.g,d.refreshToken,Object(i.__assign)(Object(i.__assign)({},l.a),{expires:m,sameSite:"strict",secure:!0})),[2,{accessToken:r.updateLWAToken.token.accessToken,refreshToken:r.updateLWAToken.token.refreshToken}]):[2,null]:[2,null];case 2:if(s.sent(),!(n&&n>0))return[3,6];s.label=3;case 3:return s.trys.push([3,5,,6]),[4,g()];case 4:return s.sent(),[2,f(e,t,n-1)];case 5:return s.sent(),[2,null];case 6:return[2,null];case 7:return[2]}var d,u,p}))}))}function g(e){return void 0===e&&(e=o.c),new Promise((function(t){setTimeout((function(){t()}),e)}))}function v(e){return{grant:e,grantType:c.Eb.REFRESH_TOKEN}}function b(e){var t=Object(i.__assign)(Object(i.__assign)({mutation:u},Object(s.a)(e)),{fetchPolicy:"no-cache"});return r.p.apollo.client.mutate(t)}var k=null;function y(){return!!a.get(o.g)}function S(e){return r.p.logger.withCategory(e).withCategory("amazon-auth")}function C(e,t){return Object(i.__awaiter)(this,void 0,Promise,(function(){var n;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),[4,(r=t,s={scope:["aiv:playback"],scope_data:{"aiv:playback":{essential:!0}},response_type:"code"},new Promise((function(e){r.Login.authorize(s,(function(t){e(t)}))})))];case 1:return(n=i.sent()).code?[4,f((a=n.code,{grant:a,grantType:c.Eb.AUTHORIZATION_CODE}),e,o.a)]:[3,3];case 2:return[2,!!i.sent()];case 3:n.error&&e.warn("Failed to login with Amazon.",{loginResponse:n}),i.label=4;case 4:return[2,!1];case 5:return i.sent(),e.warn("Failed to login with Amazon."),[2,!1];case 6:return[2]}var a,r,s}))}))}function E(){return new Promise((function(e,t){if(window.amazon)e(window.amazon);else if(window.onAmazonLoginReady=function(){var n=window.amazon;n?(n.Login.setClientId(o.f),e(n)):t(new Error("could not init lwa sdk library"))},!document.getElementById(o.h)){var n=document.createElement("script");n.async=!0,n.id=o.h,n.src=o.d,document.body.prepend(n)}}))}function w(e,t){null===k&&(p(e,t),k=setInterval((function(){return p(e,t)}),o.b))}function O(){null!==k&&(clearInterval(k),k=null)}function D(e,t){return Object(i.__awaiter)(this,void 0,Promise,(function(){var n,r;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:if(!(n={accessToken:a.get(o.e),refreshToken:a.get(o.g)}).refreshToken)return h(),[2,null];if(!t||n.accessToken)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,f(v(n.refreshToken),e,o.a)];case 2:return(r=i.sent())?[2,r.accessToken]:[2,null];case 3:return i.sent(),[2,null];case 4:return n.accessToken?[2,n.accessToken]:[2,null]}}))}))}n.d(t,"c",(function(){return y})),n.d(t,"a",(function(){return S})),n.d(t,"e",(function(){return C})),n.d(t,"d",(function(){return E})),n.d(t,"f",(function(){return w})),n.d(t,"g",(function(){return O})),n.d(t,"b",(function(){return D}))},"E/0f":function(e,t,n){"use strict";var i,a=n("mrSG"),r=n("q1tI"),o=n("/7QA"),s=n("DMoW"),l=n("3tQW"),c=n("y4j+"),d=n("0Hf3"),u=n("sUnt"),m=n("hnjF"),p=n("Ws8v"),h=n("XQbB"),f=n("X2PJ"),g=n("5zf8"),v=n("+80q"),b=n("wp5a"),k=n("b7S+"),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getLabel=function(){if(!t.props.banStatus)return"";if(t.props.banStatus.isPermanent)return Object(o.d)("Banned","ViewerCardModLogsFeature");if(t.props.banStatus.expiresAt){var e=new Date(t.props.banStatus.createdAt).valueOf(),n=new Date(t.props.banStatus.expiresAt).valueOf(),i=Object(g.b)((n-e)/1e3,g.a.Humanized);return Object(o.d)("Timeout {duration}",{duration:i},"ViewerCardModLogsFeature")}return Object(o.d)("Unknown","ViewerCardModLogsFeature")},t}return Object(a.__extends)(t,e),t.prototype.render=function(){if(!this.props.banStatus)return null;var e=r.createElement(v.a,{bold:!0,type:v.e.Span},this.props.channelName);return r.createElement(p.a,{fullWidth:!0,background:f.a.Alt,borderTop:!0,padding:{y:.5,x:1},verticalAlign:m.m.TextBottom},r.createElement(u.a,{display:m.d.InlineBlock,padding:{right:.5}},r.createElement(v.a,{fontSize:f.d.Size5,type:v.e.Span},r.createElement(b.a,{type:b.b.Alert,label:this.getLabel()}))),r.createElement(v.a,{type:v.e.Span},Object(o.d)(" in {channelName}",{channelName:e},"ViewerCardModLogsFeature")),r.createElement(v.a,{color:f.c.Alt2,type:v.e.Span},this.modActionLabel))},Object.defineProperty(t.prototype,"modActionLabel",{get:function(){if(!this.props.banStatus||!this.props.banStatus.moderator)return"";var e=r.createElement(v.a,{bold:!0,type:v.e.Span},this.props.banStatus.moderator.displayName),t=new Date(this.props.banStatus.createdAt),n=t&&(Date.now()-t.getTime())/36e5,i=Object(o.d)(" {timestamp, date, short} at {timestamp, time, short} ",{timestamp:t},"ViewerCardModLogsFeature"),a=i;if(n&&n<12){var s=Object(o.h)(t,{style:"best fit"});a=r.createElement(k.a,{label:i},s)}return Object(o.d)(" {spacer} by {modDisplay} {spacer} {timeElement}",{spacer:"â¢",modDisplay:e,timeElement:a},"ViewerCardModLogsFeature")},enumerable:!0,configurable:!0}),t}(r.Component),S=n("7qXh"),C=n("TSYQ"),E=n("fvjX"),w=n("GnwI"),O=n("i4Ys"),D=n("PL8s"),N=(n("fGoN"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(e){e.preventDefault(),t.props.onClick(t.props.value)},t}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){var e=C("viewer-card-mod-drawer-tab",{"viewer-card-mod-drawer-tab--active":this.props.isActive});return r.createElement(u.a,{"data-test-selector":"viewer-card-mod-drawer-tab",className:e,display:m.d.Flex,flexGrow:2,flexShrink:1},r.createElement(m.g,{flexGrow:1,flexDirection:m.e.Column,textAlign:m.l.Left},r.createElement(O.a,{blurAfterClick:!0,replace:!0,type:O.b.Alpha,"data-action":this.props.value,onClick:this.onClick,linkTo:"not-a-location"},r.createElement(u.a,{className:"viewer-card-mod-drawer-tab__title",padding:.5},this.props.loading?r.createElement(D.a,null):r.createElement(v.a,{bold:!0,color:f.c.Link,fontSize:f.d.Size5},this.props.count),r.createElement(v.a,{fontSize:this.props.fontSize},this.props.label)))))},t}(r.Component)),_=Object(E.d)(Object(w.withLatencyTracking)("ViewerCardModDrawerTab"))(N),I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.render=function(){var e=f.d.Size6,t=Object(o.d)("Messages","ViewerCardModLogsFeature"),n=Object(o.d)("Timeouts","ViewerCardModLogsFeature"),i=Object(o.d)("Bans","ViewerCardModLogsFeature"),a=Object(o.d)("Mod Comments","ViewerCardModLogsFeature");[t,n,i,a].every((function(t){return!("string"==typeof t&&t.length>=24)||(e=f.d.Size7,!1)}));var s=this.props.data&&this.props.data.loading;return r.createElement(p.a,{fullWidth:!0,display:m.d.Flex,padding:{top:.5},className:"viewer-card-mod-drawer-tabs"},r.createElement(_,{count:this.getMessageCountString(),label:t,fontSize:e,isActive:this.props.currentPage===he.Messages,onClick:this.props.changeTab,value:he.Messages,loading:s}),r.createElement(_,{count:this.getTimeoutCount(),label:n,fontSize:e,isActive:this.props.currentPage===he.Timeouts,onClick:this.props.changeTab,value:he.Timeouts,loading:s}),r.createElement(_,{count:this.getChannelBanCount(),label:i,fontSize:e,isActive:this.props.currentPage===he.Bans,onClick:this.props.changeTab,value:he.Bans,loading:s}),r.createElement(_,{count:this.getCommentsCountString(),label:a,fontSize:e,isActive:this.props.currentPage===he.ModComments,onClick:this.props.changeTab,value:he.ModComments,loading:s}))},t.prototype.getTimeoutCount=function(){var e=this.props.data&&this.props.data.channelUser&&this.props.data.channelUser.modLogs,t=e&&e.timeouts&&e.timeouts.actionCount||0,n=e&&e.timeouts&&e.timeouts.pageInfo&&e.timeouts.pageInfo.hasNextPage;return t>=99&&n?"99+":""+t},t.prototype.getChannelBanCount=function(){var e=this.props.data&&this.props.data.channelUser&&this.props.data.channelUser.modLogs,t=e&&e.bans&&e.bans.actionCount||0,n=e&&e.bans&&e.bans.pageInfo&&e.bans.pageInfo.hasNextPage;return t>=99&&n?"99+":""+t},t.prototype.getCommentsCountString=function(){var e=this.props.data&&this.props.data.channelUser&&this.props.data.channelUser.modLogs,t=e&&e.comments&&e.comments.edges||[],n=e&&e.comments&&e.comments.pageInfo&&e.comments.pageInfo.hasNextPage;return t.length>=99&&n?"99+":""+t.length},t.prototype.getMessageCountString=function(){var e=this.props.data&&this.props.data.channelUser&&this.props.data.channelUser.modLogs,t=e&&e.messages&&e.messages.messageCount||0;return t>=999?"999+":""+t},t}(r.Component),M=n("1jQf"),j=n("/MKj"),T=n("XDQu"),P=n("kY/a"),L=n("8/mp"),R=n("HAa/"),F=n("a1OF"),U=n("uG/k"),x=n("7uM4"),A=n("C7sF"),B=n("3aAs"),V=n("dEDE"),H=2,q=500,G=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={error:!1,commentText:"",sendingComment:!1},t.onInputChange=function(e){t.setState({commentText:e.currentTarget.value})},t.handleKeyPress=function(e){if("Enter"===e.key)return t.onSend()},t.onSend=function(){var e=t.state.commentText;if(!(t.state.sendingComment||t.state.commentText.length<H||t.state.commentText.length>q))return t.setState({sendingComment:!0}),t.props.onCreateComment(e).then((function(){t.setState({commentText:"",error:!1,sendingComment:!1})})).catch((function(){t.setState({error:!0,sendingComment:!1})}))},t}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){var e=q-this.state.commentText.length,t=!!this.state.commentText&&e<=20;return r.createElement(p.a,{padding:{x:1,bottom:1,top:.5},className:"viewer-card-mod-logs-comment-input"},this.state.error&&r.createElement(v.a,{color:f.c.Error},Object(o.d)("Sorry, something went wrong. Please try again later.","ViewerCardModLogsFeature")),t&&r.createElement(p.a,{display:m.d.Flex,borderTop:!0},e<0?r.createElement(x.a,{asset:A.a.NotificationError,width:20,type:x.b.Alert}):r.createElement(x.a,{asset:A.a.Warning,width:20,type:x.b.Warn}),r.createElement(u.a,{padding:.5},r.createElement(v.a,{"data-test-selector":"viewer-card-mod-logs-comment-input-chars-remaining",color:e>=0?f.c.Alt2:f.c.Error},Object(o.d)("{charsRemaining} characters remaining",{charsRemaining:e},"ViewerCardModLogsFeature")))),r.createElement(u.a,{display:m.d.Flex,alignItems:m.b.Start},r.createElement(u.a,{flexGrow:1,padding:{right:.5},position:m.j.Relative},r.createElement(B.a,{"data-test-selector":"viewer-card-mod-logs-comment-text-input",error:this.state.error,icon:A.a.Whisper,type:B.c.Text,value:this.state.commentText,placeholder:Object(o.d)("Add a comment","ViewerCardModLogsFeature"),onChange:this.onInputChange,onKeyDown:this.handleKeyPress})),r.createElement(V.a,{"data-test-selector":"viewer-card-mod-logs-comment-input-button",onClick:this.onSend,disabled:e<0||this.state.sendingComment},Object(o.d)("Add","ViewerCardModLogsFeature"))))},t}(r.Component),W=Object(E.d)(Object(w.withLatencyTracking)("ViewerCardModLogsCommentInput"))(G),z=n("oe5X"),Q=n("cys1"),Y=n("EE1E"),$=n("Jsra"),K=n("7d/q"),X=(n("6ZXE"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.onDeleteComment=function(){if(t.props.comment)return t.props.onDeleteComment(t.props.comment.id)},t.onMouseEnter=function(){t.props.showDelete&&t.setState({hover:!0})},t.onMouseOut=function(){t.props.showDelete&&t.setState({hover:!1})},t}return Object(a.__extends)(t,e),t.prototype.render=function(){if(!this.props.comment||!this.props.comment.details||!this.props.comment.details.text)return null;var e,t=new Date(this.props.comment.timestamp),n=(Date.now()-t.getTime())/36e5,i=Object(o.j)(t,{year:"numeric",month:"numeric",day:"numeric"}),a=Object(o.h)(t,{style:"best fit"});e=n&&n<24?r.createElement(k.a,{label:i,"data-test-selector":"viewer-card-mod-comment-timestamp-tooltip"},a):r.createElement(r.Fragment,null,i);var s=this.renderCommentParts(this.props.comment.details.text),l=this.props.comment&&this.props.comment.author&&this.props.comment.author.chatColor;l&&this.props.useHighContrastColors&&(l="#"+Object(Y.a)(l,this.props.theme));var c=C("viewer-card-mod-logs-comment-line",{"viewer-card-mod-logs-comment-line-deleteable":this.props.showDelete});return r.createElement(m.g,{"data-test-selector":"viewer-card-mod-comment",position:m.j.Relative,display:m.d.Flex,alignItems:m.b.Start,padding:{x:1,y:.5},className:c},r.createElement("div",{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseOut},r.createElement(x.a,{asset:A.a.NavMessages,type:x.b.Alt2}),r.createElement(p.a,{padding:{left:1}},r.createElement(v.a,{color:f.c.Base,wordBreak:v.g.BreakWord,"data-test-selector":"viewer-card-mod-comment-text"},s),r.createElement(p.a,{color:f.c.Alt2,display:m.d.Flex,alignItems:m.b.Center},r.createElement($.a,{blurAfterClick:!0,hoverUnderlineNone:!0,targetBlank:!0,type:$.b.Inherit,"data-test-selector":"viewer-card-mod-comment-author",to:"/"+(this.props.comment&&this.props.comment.author&&this.props.comment.author.login)},r.createElement(v.a,{fontSize:f.d.Size7},r.createElement("span",{style:l?{color:l}:void 0},this.props.comment&&this.props.comment.author&&this.props.comment.author.displayName))),r.createElement(u.a,{padding:{x:.5}},"â¢"),r.createElement(p.a,{"data-test-selector":"viewer-card-mod-comment-timestamp",fontSize:f.d.Size7},e))),this.state.hover&&r.createElement(p.a,{position:m.j.Absolute,padding:{x:1,bottom:.5},className:"viewer-card-mod-logs-comment-line-delete"},r.createElement(K.a,{blurAfterClick:!0,"data-test-selector":"viewer-card-mod-comment-delete",icon:A.a.Trash,size:K.b.Small,type:K.c.Alert,onClick:this.onDeleteComment}))))},t.prototype.renderCommentParts=function(e){return Object(Q.f)(Object(z.a)(e))},t}(r.Component));!function(e){e.NoComments="no-comments",e.Loading="loading",e.Error="error",e.CommentList="comment-list"}(i||(i={}));var J=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={comments:[],cursor:null,hasMoreLeft:!0,loading:!1},t.initialLoad=null,t.saveScrollRef=function(e){return t.scroll=e},t.loadMore=function(){return Object(a.__awaiter)(t,void 0,void 0,(function(){var e=this;return Object(a.__generator)(this,(function(t){return!this.state.loading&&this.state.hasMoreLeft?[2,new Promise((function(t){e.setState({loading:!0},t)})).then((function(){return e.props.loadMore({channelID:e.props.channelID,targetID:e.props.targetID,cursor:e.state.cursor})})).then((function(t){return new Promise((function(n){e.setState({cursor:t.cursor,comments:Object(a.__spreadArrays)(e.state.comments,t.comments),loading:!1,hasMoreLeft:!(!t.cursor||t.cursor===e.state.cursor)},n)}))})).catch((function(){return new Promise((function(t){e.setState({error:!0},t)}))})).then((function(){return Promise.resolve()}))]:[2,Promise.resolve()]}))}))},t.onCreateComment=function(e){return t.props.onCreateComment(e).then((function(e){e&&t.setState(Object(a.__assign)(Object(a.__assign)({},t.state),{comments:Object(a.__spreadArrays)([e],t.state.comments)}))}))},t.onDeleteComment=function(e){return t.props.onDeleteComment(e).then((function(){t.setState(Object(a.__assign)(Object(a.__assign)({},t.state),{comments:t.state.comments.filter((function(t){return t.id!==e}))}))}))},t}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){this.initialLoad?(this.props.latencyTracking.reportInteractive(),this.scrollToBottom()):this.initialLoad=this.loadMore()},t.prototype.getSnapshotBeforeUpdate=function(){return this.scroll&&this.scroll.scrollContent&&this.scroll.scrollContent.scrollHeight&&(this.prevScrollHeight=this.scroll.scrollContent.scrollHeight),null},t.prototype.componentDidUpdate=function(e,t){if(this.initialLoad){if(this.state.comments&&t.comments&&this.state.comments.length>t.comments.length){var n=this.state.comments[0]&&this.state.comments[0],i=t.comments[0]&&t.comments[0];if(n&&i&&n.id===i.id){if(this.scroll&&this.scroll.scrollContent&&this.prevScrollHeight&&this.prevScrollHeight!==this.scroll.scrollContent.scrollHeight){var a=this.scroll.scrollContent.scrollHeight-this.prevScrollHeight;this.scroll.scrollContent.scrollTop=a}}else this.scrollToBottom()}}else this.initialLoad=this.loadMore()},t.prototype.render=function(){var e=this;if(this.state.error)return r.createElement(u.a,{fullHeight:!0,fullWidth:!0,"data-test-selector":i.Error},r.createElement(S.a,null));if(!this.initialLoad||this.state.loading&&0===this.state.comments.length)return r.createElement(u.a,{padding:{x:1,y:2}},r.createElement(h.a,{delay:0,fillContent:!0,size:h.b.Large,"data-test-selector":i.Loading}));var t=this.props.currentUser&&this.props.currentUser.id,n=this.state.comments.map((function(n){var i=n.channel&&n.channel.id;return r.createElement(X,{key:n.id,comment:n,theme:e.props.theme,showDelete:!!t&&!!i&&i===t,useHighContrastColors:e.props.useHighContrastColors,onDeleteComment:e.onDeleteComment})})).reverse(),a=!!this.state.hasMoreLeft&&!this.state.loading;return r.createElement(u.a,{display:m.d.Flex,flexDirection:m.e.Column,flexGrow:1,flexShrink:1,className:"mod-logs-entry-list"},r.createElement(m.g,{flexGrow:1,flexShrink:1},n.length?r.createElement(L.b,{suppressScrollX:!0,scrollRef:this.saveScrollRef},r.createElement(u.a,null,r.createElement(L.a,{loadMore:this.loadMore,enabled:a,orientation:R.b.Down,contentLength:n.length,pixelThreshold:200}),r.createElement(u.a,{key:"comments-list-start",padding:.5}),n,r.createElement(u.a,{key:"comments-list-end",padding:.5}))):this.renderEmptyState()),r.createElement(W,{onCreateComment:this.onCreateComment}))},t.prototype.renderEmptyState=function(){return r.createElement(u.a,{flexGrow:1,"data-test-selector":i.NoComments,padding:{x:1,y:2}},r.createElement(u.a,{alignItems:m.b.Center,display:m.d.Flex,justifyContent:m.h.Center,textAlign:m.l.Center,flexDirection:m.e.Column},r.createElement(u.a,null,r.createElement(U.a,{src:Object(F.d)(fe.id,2),alt:fe.alt})),r.createElement(u.a,{padding:{x:4,y:0},margin:{x:4,y:0}},r.createElement(v.a,{color:f.c.Alt2,fontSize:f.d.Size5},Object(o.d)("There are no mod comments for this user.","ViewerCardModLogsFeature")))))},t.prototype.scrollToBottom=function(){this.scroll&&this.scroll.scrollToBottom()},t}(r.Component),Z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loadMore=function(e){return Object(M.d)(Object(M.b)(o.p.apollo.client.link,{query:P,variables:e})).then((function(e){var t=e.data&&e.data.channelUser&&e.data.channelUser.modLogs&&e.data.channelUser.modLogs.comments,n=null,i=t&&t.edges&&t.edges.map((function(e){return n=e.cursor,e.node}))||[];return{cursor:n,comments:i}}))},t}return Object(a.__extends)(t,e),t.prototype.render=function(){return r.createElement(J,Object(a.__assign)({},this.props,{loadMore:this.loadMore}))},t}(r.Component);var ee,te=Object(E.d)(Object(j.b)((function(e){return{theme:Object(T.a)(e)}})),Object(l.b)((function(e){return{useHighContrastColors:e.value}})),Object(w.withLatencyTracking)("ViewerCardModLogsCommentsList"))(Z),ne=n("yR8l"),ie=n("uIkQ"),ae=n("w4P5"),re=n("mjSZ"),oe=n("34IA"),se=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loadMore=function(e){return Object(M.d)(Object(M.b)(o.p.apollo.client.link,{query:oe,variables:e})).then((function(e){var t=e.data&&e.data.channel&&e.data.channel.modLogs&&e.data.channel.modLogs.messagesBySender,n=null,i=[];return t&&t.edges&&t.edges.forEach((function(e){if(!e||!e.node)return null;"ModLogsMessage"===e.node.__typename?i.unshift(Object(a.__assign)(Object(a.__assign)({},e.node),{__typename:"Message"})):i.unshift(e.node),n=e.cursor||n})),{cursor:n,messages:i}}))},t}return Object(a.__extends)(t,e),t.prototype.render=function(){return r.createElement(re.a,Object(a.__assign)({},this.props,{loadMore:this.loadMore}))},t}(r.Component),le=Object(E.d)(Object(ne.a)(ae,{options:function(e){return{variables:Object(a.__assign)({},e)}},props:function(e){var t=new ie.c([]);if(e.data){var n=e.data,i=n.badges,a=n.channel;i&&a&&a.broadcastBadges&&a.login&&(t=new ie.c(i,a.broadcastBadges,a.login))}return{badgeSets:t}}}))(se),ce=n("Dufr"),de=n("na98");!function(e){e.DateSeparator="viewer-card-mod-logs-date-separator",e.EmptyState="viewer-card-mod-logs-mod-actions-empty-state",e.OutOfSyncState="viewer-card-mod-logs-mod-actions-out-of-sync-state",e.RefetchButtonIcon="viewer-card-mod-logs-mod-actions-out-of-sync-state"}(ee||(ee={}));var ue="64138",me="SeemsGood",pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={loading:!1},t.sprinkleDateSeparators=function(e){return e&&e.edges&&e.edges.reduce((function(e,t,n,i){if(!t.node)return e;var a=new Date(t.node.timestamp).toLocaleDateString(),o=i[n+1],s="";return o&&o.node&&(s=new Date(o.node.timestamp).toLocaleDateString()),e.push(r.createElement(de.a,{key:t.node.action+"."+t.node.timestamp,entry:t.node})),s&&a!==s&&e.push(r.createElement(ce.a,{key:""+a,"data-test-selector":ee.DateSeparator,dateString:a})),n===i.length-1&&e.push(r.createElement(ce.a,{key:""+a,"data-test-selector":ee.DateSeparator,dateString:a})),e}),[])},t.iconClick=function(){return Object(a.__awaiter)(t,void 0,void 0,(function(){var e=this;return Object(a.__generator)(this,(function(t){switch(t.label){case 0:return this.setState({loading:!0}),[4,this.props.refetch().then((function(){e.setState({loading:!1})}),(function(){e.setState({loading:!1})}))];case 1:return t.sent(),[2]}}))}))},t.saveScrollRef=function(e){return t.scroll=e},t.scrollToBottom=function(){t.scroll&&t.scroll.scrollToBottom()},t}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){this.scrollToBottom()},t.prototype.componentDidUpdate=function(){this.scrollToBottom()},t.prototype.render=function(){if(this.state.loading)return r.createElement(h.a,{delay:0,fillContent:!0,size:h.b.Large});var e=this.props.modActions,t=this.sprinkleDateSeparators(e);return r.createElement(u.a,{className:"mod-logs-entry-list",flexGrow:1,flexShrink:1,display:m.d.Flex,flexDirection:m.e.Column},t&&t.length>0?r.createElement(L.b,{suppressScrollX:!0,scrollRef:this.saveScrollRef},r.createElement(u.a,null,r.createElement(u.a,{key:"targeted-mod-actions-list-start",padding:.5}),t.reverse(),r.createElement(u.a,{key:"targeted-mod-actions-list-end",padding:.5}))):this.renderEmptyState())},t.prototype.renderEmptyState=function(){var e,t,n;switch(this.props.page){case he.Bans:e=Object(o.d)("This user has not been banned in the channel.","ViewerCardModLogsFeature"),t=Object(o.d)("Bans are currently out of sync. See the current status below or refresh.","ViewerCardModLogsBans"),n=Boolean(this.props.banStatus&&this.props.banStatus.isPermanent);break;case he.Timeouts:e=Object(o.d)("This user has not been timed out in the channel.","ViewerCardModLogsFeature"),t=Object(o.d)("Timeouts are currently out of sync. See the current status below or refresh.","ViewerCardModLogsTimeouts"),n=Boolean(this.props.banStatus&&this.props.banStatus.expiresAt);break;default:e="",t="",n=!1}var i=n?t:e,a=r.createElement(u.a,{padding:{x:1,y:0},margin:{x:1,y:0}},r.createElement(v.a,{color:f.c.Alt2,fontSize:f.d.Size5},i)),s=r.createElement(u.a,{padding:{top:1}},r.createElement(V.a,{type:V.d.Secondary,blurAfterClick:!0,icon:A.a.Refresh,onClick:this.iconClick,ariaLabel:Object(o.d)("Refresh Chat Logs","ViewerCardModLogs"),"data-test-selector":ee.RefetchButtonIcon})),l=r.createElement(u.a,null,r.createElement(U.a,{src:Object(F.d)(ue,2),alt:me})),c=a;return n&&(l=a,c=s),r.createElement(u.a,{padding:{x:n?1:3,y:3},"data-test-selector":n?ee.OutOfSyncState:ee.EmptyState},r.createElement(u.a,{alignItems:m.b.Center,display:m.d.Flex,justifyContent:m.h.Center,textAlign:m.l.Center,flexDirection:m.e.Column},l,c))},t}(r.Component);n("NWfm"),n("OxSk");n.d(t,"a",(function(){return fe})),n.d(t,"c",(function(){return he})),n.d(t,"b",(function(){return ge}));var he,fe={id:"114836",alt:"Jebaited"};!function(e){e[e.Messages=0]="Messages",e[e.Timeouts=1]="Timeouts",e[e.Bans=2]="Bans",e[e.ModComments=3]="ModComments"}(he||(he={}));var ge=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={currentPage:null},t.refetchTargetedModActions=function(){return Object(a.__awaiter)(t,void 0,void 0,(function(){return Object(a.__generator)(this,(function(e){switch(e.label){case 0:return this.props&&this.props.data?[4,this.props.data.refetch()]:[3,2];case 1:return[2,e.sent()];case 2:return[2]}}))}))},t.onTabClick=function(e){var n=d.a.Expand,i=e;e===he.Messages&&o.m.set(c.b,!0),e===t.state.currentPage&&(i=t.props.isPopoutCard?i:null,n=t.props.isPopoutCard?null:d.a.Collapse),t.props.data&&t.props.data.targetUser&&t.props.permissionsData.channel&&Object(d.c)({targetUserID:t.props.data.targetUser.id,targetLogin:t.props.data.targetUser.login,channelID:t.props.permissionsData.channel.id,channelLogin:t.props.permissionsData.channel.login,clickText:e,action:n}),t.onTabChange(i)},t.onTabChange=function(e){t.setState({currentPage:e})},t.onCreateComment=function(e){return t.props.createModComment({variables:{input:{channelID:t.props.channelID,targetID:t.props.targetID,text:e}}}).then((function(e){var n=e&&e.data.createModeratorComment&&e.data.createModeratorComment.comment;return n&&Object(d.e)(t.props,n),Promise.resolve(n)})).catch((function(){return Promise.reject()}))},t.onDeleteComment=function(e){return t.props.deleteModComment({variables:{input:{ID:e}}}).then((function(e){var n=e.data.deleteModeratorComment&&e.data.deleteModeratorComment.comment;return n?(Object(d.f)(t.props,n),Promise.resolve()):Promise.reject()})).catch((function(){return Promise.reject()}))},t}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive(),this.props.isPopoutCard&&this.onTabChange(he.Messages),this.props.permissionsData.channel&&null===this.props.permissionsData.channel.modLogsRoleAccess&&this.props.permissionsData.refetch()},t.prototype.render=function(){var e=this.props.permissionsData.channel&&this.props.permissionsData.channel.modLogsRoleAccess&&this.props.permissionsData.channel.modLogsRoleAccess.accessLevel===s.Qb.WRITE,t=this.props.permissionsData.channel&&this.props.permissionsData.currentUser&&this.props.permissionsData.channel.id===this.props.permissionsData.currentUser.id;return e||t?r.createElement(u.a,{fullWidth:!0,className:"viewer-card-mod-logs","data-test-selector":"viewer-card-mod-drawer",display:m.d.Flex,flexDirection:m.e.Column,flexGrow:1,flexShrink:1},r.createElement(l.a,null,r.createElement(p.a,{borderTop:!0,margin:{x:1},flexGrow:0},r.createElement(I,{data:this.props.data,currentPage:this.state.currentPage,changeTab:this.onTabClick,"data-test-selector":"viewer-card-mod-drawer-tab-bar"})),this.renderPage(),r.createElement(p.a,{flexGrow:0},r.createElement(y,{banStatus:this.props.banStatusData.chatRoomBanStatus,channelName:this.props.channelLogin})))):null},t.prototype.renderPage=function(){var e=this.props.data&&this.props.data.targetUser&&this.props.data.targetUser.id;if(!e)return null;if(this.props.data.error)return r.createElement(u.a,{fullHeight:!0,fullWidth:!0},r.createElement(S.a,null));if(this.props.data.loading)return r.createElement(h.a,{delay:0,fillContent:!0,size:h.b.Large});var t=this.props.data.channelUser&&this.props.data.channelUser.modLogs;if(!t)return null;var n=null;switch(this.state.currentPage){case he.Messages:n=r.createElement(le,{key:e,channelLogin:this.props.channelLogin,senderID:e});break;case he.ModComments:n=r.createElement(te,{channelID:this.props.channelID,targetID:e,currentUser:this.props.permissionsData.currentUser,onCreateComment:this.onCreateComment,onDeleteComment:this.onDeleteComment});break;case he.Bans:n=r.createElement(pe,{modActions:t.bans,page:he.Bans,banStatus:this.props.banStatusData.chatRoomBanStatus,refetch:this.refetchTargetedModActions});break;case he.Timeouts:n=r.createElement(pe,{modActions:t.timeouts,page:he.Timeouts,banStatus:this.props.banStatusData.chatRoomBanStatus,refetch:this.refetchTargetedModActions});break;default:return null}return r.createElement(p.a,{className:this.props.isPopoutCard?"viewer-card-mod-logs-page viewer-card-mod-logs-page--popout":"viewer-card-mod-logs-page","data-test-selector":"viewer-card-mod-drawer-page",background:f.a.Base,display:m.d.Flex,flexDirection:m.e.Column,flexGrow:1,flexShrink:1},n)},t}(r.Component)},E78O:function(e,t,n){},EE1E:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var i=n("EN5X"),a=n("G7cy"),r=n("m7BI"),o=n("E8D/"),s=n("DtRd"),l=n("R4sh"),c=n("/0dD"),d=n("76Lv"),u=4.5,m=[250,249,250],p=[15,14,17],h=.1,f=50,g="7A7A7A",v=36,b={};function k(e,t){var n=s(e),k=y(a(n));if(void 0===t&&(t=Object(d.d)()),k in b[t])return b[t][k];if(t===c.a.Dark&&n.every((function(e){return e<v})))return g;var S=t===c.a.Light?m:p,C=Object(l.a)(n,S);if(C>u)return k;for(var E=[n[0],n[1],n[2]],w=f;w>=0&&C<u;w--){var O=r(E);t===c.a.Light?O[0]-=O[0]*h:O[0]+=O[0]*h,E=o(i(O)),C=Object(l.a)(E,S)}var D=y(a(E));return b[t][k]=D,D}function y(e){return"#"===e[0]?e.substr(1):e}b[c.a.Dark]={},b[c.a.Light]={}},EJeP:function(e,t,n){"use strict";n.r(t);var i=n("mrSG"),a=n("q1tI"),r=n("fvjX"),o=n("yR8l"),s=n("geRD"),l=n("DMoW"),c=n("/7QA"),d=n("ZDlU"),u=n("8/mp"),m=n("jytb"),p=n("sUnt"),h=n("ygYM"),f=n("hnjF"),g=n("+80q"),v=n("X2PJ"),b=n("uOxs"),k=n("bdHe"),y=(n("Eqxc"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderUserCards=function(e){return e.map((function(e){return e&&e.node&&e.node.id?a.createElement(p.a,{className:"channel-follow-listing--card",key:e.node.id,margin:{bottom:2}},a.createElement(m.b,{requestContext:t.props.requestContext,id:e.node.id,balloonDirection:h.b.Right,showButtonsOnHover:!0,userData:{user:e.node}})):null}))},t}return Object(i.__extends)(t,e),t.prototype.render=function(){return this.props.loading&&!this.props.followEdge?a.createElement(k.a,null):this.props.error?a.createElement(d.PageError,{message:Object(c.d)("Error loading Follow List","ChannelFollowListing")}):this.props.loading||this.props.userExist?a.createElement(p.a,{fullWidth:!0,padding:{x:3,y:2}},this.renderListOfCards(),a.createElement(u.a,{loadMore:this.props.loadMore,enabled:this.props.hasNextPage&&!this.props.loading,pixelThreshold:300})):a.createElement(d.PageError,{message:Object(c.d)("User does not exist","ChannelFollowListing")})},t.prototype.renderListOfCards=function(){var e=(this.props.followEdge||[]).filter((function(e){return e&&e.node&&e.node.id}));return e&&e.length?a.createElement(b.a,{placeholderItems:e.length,center:!0,gutterSize:b.c.Small,childWidth:b.b.Large},this.renderUserCards(e)):a.createElement(p.a,{"data-test-selector":"no-follow-users",margin:{top:5},display:f.d.Flex,flexDirection:f.e.Row,justifyContent:f.h.Center},a.createElement(g.a,{type:g.e.H4,color:v.c.Alt2,italic:!0},Object(c.d)("No Users Found","ChannelFollowListing")))},t}(a.Component)),S=n("J71B"),C=n("GnwI"),E=n("w09P"),w=n("ghdf"),O=7,D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loadMore=function(){var e=t.props,n=e.data.user&&e.data.user.followers&&e.data.user.followers.edges,i=null;if(n){var a=n.filter((function(e){return!!e}));a.length>0&&(i=a[a.length-1].cursor)}return e.data.fetchMore({query:w,variables:{cursor:i,limit:O,login:e.channelLogin,order:l.Jc.DESC},updateQuery:function(e,t){var n=t.fetchMoreResult;if(!n||!n.user||!n.user.followers)return e;var i=e.user&&e.user.followers&&e.user.followers.edges||[],a=n.user&&n.user.followers&&n.user.followers.edges||[];return E(n,(function(e){return e.user.followers}),(function(e){return e.edges=Object(s.d)(i,a),e}))}})},t}return Object(i.__extends)(t,e),t.prototype.componentDidUpdate=function(){var e=this.props.data;if(!e.loading){var t=0;!e.error&&e.user&&e.user.followers&&e.user.followers.edges&&(t=e.user.followers.edges.length),this.props.latencyTracking.reportInteractive(t)}},t.prototype.render=function(){var e=this.props.data;return a.createElement(y,{loading:e.loading,channelLogin:this.props.channelLogin,hasNextPage:!!(e.user&&e.user.followers&&e.user.followers.edges&&e.user.followers.pageInfo&&e.user.followers.pageInfo.hasNextPage),error:e.error,loadMore:this.loadMore,followEdge:e.user&&e.user.followers&&e.user.followers.edges,requestContext:S.a.ChannelFollowers,userExist:!(!e.user||!e.user.id)})},t}(a.Component),N=Object(r.d)(Object(C.withLatencyTracking)("ChannelFollowersContent"),Object(o.a)(w,{options:function(e){return{variables:{limit:15,login:e.channelLogin,order:l.Jc.DESC}}}}))(D);n.d(t,"REQUEST_LIMIT",(function(){return 15})),n.d(t,"ChannelFollowersContentComponent",(function(){return D})),n.d(t,"ChannelFollowersContent",(function(){return N}))},EOIh:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChatInput"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"isEmbedded"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsBalance"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isPartner"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"isEmbedded"}}}]}]}]}},{kind:"Field",alias:{kind:"Name",value:"channel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"banStatus"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isPermanent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"expiresAt"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"50"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hashtags"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"imageURL"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteMinimumBits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheerMinimumBits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"event"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:390}};n.loc.source={body:"query ChatInput($channelLogin: String! $isEmbedded: Boolean!) {\ncurrentUser {\nid\nbitsBalance\nisPartner @include(if: $isEmbedded)\n}\nchannel: user(login: $channelLogin) {\nid\nself {\nbanStatus {\nisPermanent\nexpiresAt\n}\n}\ndisplayName\nprofileImageURL(width:50)\ncheer {\nid\nhashtags {\nedges {\ncursor\nnode {\nid\ndescription\nimageURL\n}\n}\n}\nsettings {\nid\nemoteMinimumBits\ncheerMinimumBits\nevent\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.ChatInput=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"ChatInput")},EgE3:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return l})),n.d(t,"k",(function(){return m})),n.d(t,"g",(function(){return p})),n.d(t,"j",(function(){return h})),n.d(t,"i",(function(){return f})),n.d(t,"h",(function(){return g})),n.d(t,"f",(function(){return v}));var i,a,r,o,s,l,c=n("/7QA"),d=n("2xye"),u=n("W1jp");function m(e,t,n){var i={channel_login:e,channel_id:t,view_uuid:n};c.o.track(d.SpadeEventType.ChannelPointsViewRewards,i)}function p(e){var t="CommunityPointsCustomReward"===e.reward.__typename&&(!e.reward.isInStock||e.reward.isPaused),n=e.userBalance===1/0?null:e.userBalance,i={channel_id:e.channelID,channel_login:e.channelLogin,is_available:!t,is_eligible:e.isUserEligible,reward_cost:Object(u.b)(e.reward),reward_id:e.reward.id,transaction_uuid:e.transactionID,user_points_balance:n,view_uuid:e.viewTrackingID};c.o.track(d.SpadeEventType.ChannelPointsSelectReward,i)}function h(e,t,n){var i={ui_context:e,channel_login:t,channel_id:n};c.o.track(d.SpadeEventType.ChannelPointsViewRequestQueue,i)}function f(e,t,n,i){var a={ui_context:e,viewer_type:t,channel_id:n,channel_login:i};c.o.track(d.SpadeEventType.ChannelPointsViewEarnScorecard,a)}function g(e){var t={channel_id:e.channelID,channel_login:e.channelLogin,points_spent:Object(u.b)(e.reward),reward_id:e.reward.id,reward_type:"CommunityPointsAutomaticReward"===e.reward.__typename?i.Automatic:i.Custom,transaction_uuid:e.transactionID,view_uuid:e.viewTrackingID};c.o.track(d.SpadeEventType.ChannelPointsSpend,t)}function v(e,t,n,i){var a={channel_id:e,channel_login:t,onboarding_collateral:n,ui_context:i};c.o.track(d.SpadeEventType.ChannelPointsOnboardingInteraction,a)}!function(e){e.Automatic="automatic",e.Custom="custom"}(i||(i={})),function(e){e.ActivityFeed="activity_feed",e.ChatCommand="chat_command",e.CreatorsSettings="creators_settings",e.CustomRewardModal="custom_reward_modal",e.DeleteModal="delete_modal",e.ModTools="chat_settings",e.QuickAction="quick_action",e.RewardSelectionPane="reward_selection_pane"}(a||(a={})),function(e){e.RewardSelectionPane="reward_selection_pane",e.CreatorsSettings="creators_settings",e.CustomRewardModal="custom_reward_modal",e.AutomaticRewardModal="automatic_reward_modal"}(r||(r={})),function(e){e.CustomRewardCreationModal="custom_reward_creation_modal",e.RewardsPageOnboarding="rewards_page_onboarding",e.ChannelPointsSettings="channel_points_settings"}(o||(o={})),function(e){e.IconSetDownload="icon_set_download",e.GetStartedGuide="get_started_guide"}(s||(s={})),function(e){e.Viewer="viewer",e.Moderator="moderator",e.Broadcaster="broadcaster"}(l||(l={}))},EihZ:function(e,t,n){},EkBt:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("mrSG"),a=n("q1tI"),r=n("tiJ6");function o(e){return function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(i.__extends)(n,t),n.prototype.render=function(){return a.createElement(r.a,Object(i.__assign)({},this.props),a.createElement(e,Object(i.__assign)({},this.props)))},n}(a.Component)}},EmXd:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n("pVnL"),a=n.n(i),r=n("q1tI"),o=n("fNzW"),s=n("2Ob2"),l=n("9qaG"),c=n("u03v"),d=n("G3YM"),u=(n("wu0I"),function(e){var t={"tw-select-button":!0,"tw-select-button--overlay":e.overlay,"tw-select-button--error":e.error,"tw-select-button--disabled":e.disabled};return r.createElement(l.a,a()({},e,{className:Object(o.a)(t)}),r.createElement(d.a,{icon:e.icon,size:e.size,dropdown:e.dropdown?e.dropdown:c.b.Select},e.children))});u.displayName="SelectButtonComponent",u.displayName="SelectButtonComponent";var m=Object(s.c)(u)},Epr8:function(e,t,n){},Eqxc:function(e,t,n){},EuPq:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("3aAs"),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClickHandler=function(e){t.props.onClick&&t.props.onClick(),e.currentTarget.select()},t}return Object(i.__extends)(t,e),t.prototype.render=function(){return a.createElement(r.a,{readOnly:!0,type:r.c.Text,value:this.props.value,onClick:this.handleClickHandler})},t}(a.Component);n.d(t,"a",(function(){return o}))},F6GT:function(e,t,n){"use strict";var i=n("mrSG"),a=n("/7QA"),r="control",o=n("VJH5");n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return d}));var s="chatSettings";function l(){var e,t=a.m.get(s,{});return Object(i.__assign)({lastUsedFollowerDurations:{},lastUsedSlowModeDurations:{},showAutoModActions:!0,showMessageFlags:!0,showModerationActions:!0,showModIcons:!1,showTimestamps:!1,viewerChatFilterSettings:(e={},e[o.a.Aggressive]=!0,e[o.a.Identity]=!0,e[o.a.Profanity]=!1,e[o.a.Sexual]=!0,e),zachModeStatus:r},t)}function c(e,t){var n=l();n[e]=t,a.m.set(s,n)}function d(e){var t=l();delete t[e],a.m.set(s,t)}},F9p4:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"earningSettingsFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CommunityPointsChannelEarningSettings"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"averagePointsPerHour"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheerPoints"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"claimPoints"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"followPoints"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"passiveWatchPoints"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"raidPoints"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionGiftPoints"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"watchStreakPoints"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"points"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:220}};n.loc.source={body:"fragment earningSettingsFragment on CommunityPointsChannelEarningSettings {\nid\naveragePointsPerHour\ncheerPoints\nclaimPoints\nfollowPoints\npassiveWatchPoints\nraidPoints\nsubscriptionGiftPoints\nwatchStreakPoints {\npoints\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},FAYk:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UnmodUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnmodUserInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unmodUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"channel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"target"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:131}};n.loc.source={body:"mutation UnmodUser($input: UnmodUserInput!){\nunmodUser(input: $input) {\nchannel {\nid\nlogin\n}\ntarget {\nid\nlogin\n}\nerror {\ncode\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.UnmodUser=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"UnmodUser")},FQLb:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"SyncedSettingsDeletedMessageDisplaySetting"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatUISettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deletedMessageDisplaySetting"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:119}};n.loc.source={body:"query SyncedSettingsDeletedMessageDisplaySetting {\ncurrentUser {\nid\nchatUISettings {\ndeletedMessageDisplaySetting\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.SyncedSettingsDeletedMessageDisplaySetting=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"SyncedSettingsDeletedMessageDisplaySetting")},FS60:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ChatInput_SendCheer"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"SendCheerInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sendCheer"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsBalance"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"validationError"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"messageContent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fragments"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AutoMod"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"topics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"weight"},arguments:[],directives:[]}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CheermoteToken"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bitsAmount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"prefix"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Emote"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"emoteID"},name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}}],loc:{start:0,end:377}};n.loc.source={body:"mutation ChatInput_SendCheer($input: SendCheerInput!) {\nsendCheer(input: $input) {\nid\ncurrentUser {\nid\nbitsBalance\n}\nvalidationError {\ncode\nmessage\nmessageContent {\ntext\nfragments {\ntext\ncontent {\n... on AutoMod {\ntopics {\ntype\nweight\n}\n}\n... on CheermoteToken {\nbitsAmount\nprefix\ntier\n}\n... on Emote {\nemoteID: id\nsetID\ntoken\n}\n... on User {\nid\nlogin\ndisplayName\n}\n}\n}\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.ChatInput_SendCheer=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"ChatInput_SendCheer")},Ff8q:function(e,t,n){"use strict";function i(e){return e.startsWith("@")?e.slice(1):e}n.d(t,"a",(function(){return i}))},GCGb:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return h}));var i=n("mrSG"),a=n("q1tI"),r=n("/7QA"),o=n("cZKs"),s=n("Ws8v"),l=n("X2PJ"),c=n("sUnt"),d=n("hnjF"),u=n("dEDE"),m=(n("gPTj"),"confirm-button"),p="deny-button",h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.render=function(){return a.createElement(s.a,{className:"twp-modal",background:l.a.Base,color:l.c.Alt,padding:3},a.createElement("h3",null,this.props.title),a.createElement(c.a,{className:"twp-modal__message",margin:{bottom:2}},this.props.children),a.createElement(c.a,{display:d.d.Flex,justifyContent:d.h.End},a.createElement(c.a,{margin:{right:1}},a.createElement(u.a,{onClick:this.props.onDenyClick,type:u.d.Secondary,"data-test-selector":p},Object(r.d)("Cancel","ConfirmationModal"))),a.createElement(u.a,{onClick:this.props.onConfirmClick,type:u.d.Alert,disabled:this.props.isConfirmDisabled,"data-test-selector":m},Object(r.d)("Ok","ConfirmationModal"))),a.createElement(o.a,{closeOnBackdropClick:!0}))},t}(a.Component)},GEha:function(e,t,n){},GEnX:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n("mrSG"),a=n("q1tI"),r=n("/7QA"),o=n("XXm5"),s=n("sUnt"),l=n("hnjF"),c=n("7uM4"),d=n("C7sF"),u=n("+80q"),m=n("7d/q"),p=n("Ws8v"),h=n("X2PJ"),f=n("fCiU"),g=(n("sPFP"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onReplyClickHandler=function(){t.props.replyCommentContext?t.props.onReplyClick(Object(f.b)(t.props.replyCommentContext.author)):t.props.onReplyClick()},t}return Object(i.__extends)(t,e),t.prototype.render=function(){var e=Object(r.d)("Reply","DashboardModerationReplyButton");return this.props.context===o.c?a.createElement("button",{className:"video-chat-reply-button",onClick:this.onReplyClickHandler,"data-test-selector":"parent-reply-button"},a.createElement(s.a,{display:l.d.Flex},a.createElement(s.a,{className:"video-chat-reply-button__icon",display:l.d.Flex,padding:{right:.5}},a.createElement(c.a,{width:13,height:13,asset:d.a.Conversations,type:c.b.Inherit})),a.createElement(u.a,{align:l.m.Middle,type:u.e.Span},e))):this.props.context===o.a?a.createElement(m.a,{ariaLabel:e,type:m.c.Primary,icon:d.a.Conversations,onClick:this.onReplyClickHandler,"data-test-selector":"moderation-reply-button","data-a-selector":"qa-vod-chat-reply-button"}):a.createElement(p.a,{color:h.c.Link,display:l.d.Inline,margin:{left:1}},a.createElement("button",{onClick:this.onReplyClickHandler,"data-test-selector":"reply-reply-button"},a.createElement(u.a,{type:u.e.Span},e)))},t}(a.Component))},GHzV:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("3sMn"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.render=function(){return this.props.hideOnboardingPrompts?null:this.props.children},t}(a.Component);var s=Object(r.b)((function(e){return{hideOnboardingPrompts:e.hideOnboardingPrompts}}))(o);n.d(t,"a",(function(){return s}))},GLn2:function(e,t,n){},GOKC:function(e,t,n){},GSWs:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SyncedSettingsSetReadableChatColors"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"SetReadableChatColorsEnabledInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setReadableChatColorsEnabled"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isReadableChatColorsEnabled"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:167}};n.loc.source={body:"mutation SyncedSettingsSetReadableChatColors($input: SetReadableChatColorsEnabledInput!) {\nsetReadableChatColorsEnabled(input:$input) {\nisReadableChatColorsEnabled\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.SyncedSettingsSetReadableChatColors=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"SyncedSettingsSetReadableChatColors")},GXBl:function(e,t,n){},GuJR:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"BitsGemNotifications"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bitsGemNotifications"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isChecked"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:169}};n.loc.source={body:"query BitsGemNotifications($channelID: ID!) {\nuser(id: $channelID) {\nid\nself {\nbitsGemNotifications {\nid\ntitle\ndescription\ncreatedAt\nisChecked\n}\n}\n}\ncurrentUser {\nid\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.BitsGemNotifications=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"BitsGemNotifications")},GvwK:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"hostingChannel"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hosting"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"70"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"language"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:160}};n.loc.source={body:"fragment hostingChannel on User {\nhosting {\nid\nlogin\ndisplayName\nprofileImageURL(width: 70)\nbroadcastSettings {\nid\nlanguage\n}\nstream {\nid\ngame {\nid\nname\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},GzyO:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return p}));var i=n("mrSG"),a=n("/7QA"),r=n("OpME"),o="twilight.emote_picker_history",s=24,l=[{id:"64138",token:"SeemsGood"},{id:"41",token:"Kreygasm"},{id:"245",token:"ResidentSleeper"},{id:"28087",token:"WutFace"},{id:"86",token:"BibleThump"},{id:"9",token:"<3"},{id:"58765",token:"NotLikeThis"},{id:"81274",token:"VoHiYo"},{id:"88",token:"PogChamp"},{id:"425618",token:"LUL"},{id:"25",token:"Kappa"},{id:"30259",token:"HeyGuys"}];function c(e){var t=h(),n=t[e.id];n?(n.uses++,n.lastUpdatedAt=Date.now()):t[e.id]={emote:e,lastUpdatedAt:Date.now(),uses:1},a.m.set(o,t)}function d(){var e=h();if(!(Object.keys(e).length>=s)){for(var t={},n=0;n<l.length;n++){var r=l[n];e[r.id]||(t[r.id]={emote:r,lastUpdatedAt:n,uses:0})}var c=Object(i.__assign)(Object(i.__assign)({},t),e);a.m.set(o,c)}}function u(){return Object(r.b)(l)}function m(e){var t=h(),n=[],i=!1;return Object.keys(t).forEach((function(a){var r=t[a];if(void 0!==r&&void 0!==e[r.emote.token]){var o=e[r.emote.token].id;o!==a&&(r.emote.id=o,t[o]=r,delete t[o],i=!0),n.push(r)}})),i&&a.m.set(o,t),n.sort((function(e,t){return e.uses>t.uses?-1:t.uses>e.uses?1:e.lastUpdatedAt>t.lastUpdatedAt?-1:t.lastUpdatedAt>e.lastUpdatedAt?1:0})),Object(r.b)(n.slice(0,24).map((function(e){return e.emote})))}function p(){var e=h(),t={};return Object.keys(e).forEach((function(n){void 0!==e[n]&&(t[e[n].emote.token]={count:e[n].uses})})),t}function h(){var e=a.m.get(o,{})||{};return e.undefined&&(delete e.undefined,a.m.set(o,e)),e}},H1ft:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var i,a=n("/7QA"),r=n("D7An");!function(e){e.None="None",e.Inline="Inline",e.Balloon="moments_with_images"}(i||(i={}));var o=function(){switch(a.p.experiments.getAndTrackAssignment(r.c.Archer)){case"moments_with_images":return i.Balloon;case"inline":return i.Inline;case"control":default:return i.None}}},H82h:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("mrSG"),a=n("/7QA"),r=n("2xye"),o=n("IZXT"),s=n("a6LY"),l=n("xf5M"),c=function(e,t,n,c,d){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var u,m,p,h,f,g,v;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:u=null,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,a.p.apollo.client.query({query:l,variables:{channelID:t,targetUserID:n}})];case 2:return u=i.sent(),[3,4];case 3:return m=i.sent(),Object(o.d)()?a.k.warn("Moderation action tracking failed query failed."):a.k.errorAndReport(m,"Moderation action tracking failed query failed."),[3,4];case 4:return u&&u.data?(p=u.data,h=p.currentUser,f=p.channel,g=p.target,t===n?v=s.c.Broadcaster:h&&h.roles&&h.roles.isStaff&&(v=s.c.Staff),f&&f.self&&(f.self.isEditor?v=s.c.Editor:f.self.isModerator&&(v=s.c.Mod)),a.o.track(r.SpadeEventType.ChatLoginModeration,{action:e,channel:f&&f.login,channel_id:f&&f.id,target_login:g&&g.login,target_user_id:g&&g.id,mod_status:v,args:d,source:c}),[2]):[2]}}))}))}},HECQ:function(e,t,n){},HSqT:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return d}));var i=n("/7QA"),a=[{code:"ar",label:"Ø§ÙØ¹Ø±Ø¨ÙØ©",tagID:"73cc486a-e56b-41ed-a1df-7afedbc84f6f"},{code:"bg",label:"ÐÑÐ»Ð³Ð°ÑÑÐºÐ¸",tagID:"21d85c73-701f-4259-8c4e-4321265847b5"},{code:"ca",label:"CatalÃ ",tagID:"b1650f8e-cf56-4e62-99e3-0142cfc7e081"},{code:"cs",label:"ÄeÅ¡tina",tagID:"a6cddaba-f0ce-4526-9087-6de2f603a24d"},{code:"da",label:"Dansk",tagID:"43e598cc-918b-4247-b02c-b13543a1eac9"},{code:"de",label:"Deutsch",tagID:"9166ad14-41f1-4b04-a3b8-c8eb838c6be6"},{code:"el",label:"ÎÎ»Î»Î·Î½Î¹ÎºÎ¬",tagID:"902f6815-a655-4918-99e7-48c74a71feac"},{code:"en",label:"English",tagID:"6ea6bca4-4712-4ab9-a906-e3336a9d8039"},{code:"es",label:"EspaÃ±ol",tagID:"d4bb9c58-2141-4881-bcdc-3fe0505457d1"},{code:"fi",label:"Suomi",tagID:"220eb274-ab25-425b-8a9b-826103404997"},{code:"fr",label:"FranÃ§ais",tagID:"6f655045-9989-4ef7-8f85-1edcec42d648"},{code:"hi",label:"à¤®à¤¾à¤¨à¤ à¤¹à¤¿à¤¨à¥à¤¦à¥",tagID:"56d53a63-f048-40a9-ab61-d363aa3b9c57"},{code:"hu",label:"Magyar",tagID:"a298cca5-d408-47c7-a1e7-0c76ca878bc6"},{code:"id",label:"Bahasa Indonesia",tagID:"8b1246f2-2cec-4b90-9d86-01ebdf13b848"},{code:"it",label:"Italiano",tagID:"5b9935eb-1e9a-4217-98ad-62bda5cff0d1"},{code:"ja",label:"æ¥æ¬èª",tagID:"6ba1d230-e52f-4d81-b1e0-41f25a8a9f5d"},{code:"ko",label:"íêµ­ì´",tagID:"ab2975e3-b9ca-4b1a-a93e-fb61a5d5c3a4"},{code:"ms",label:"Ø¨ÙØ§Ø³ ÙÙØ§ÙÙ",tagID:"34a56dbd-6add-49e6-83b6-cffacbf18bcd"},{code:"nl",label:"Nederlands",tagID:"e13e6734-37ae-4d85-897b-3015f0168355"},{code:"no",label:"Norsk",tagID:"5647bf35-f99e-49aa-8578-0e07d936188c"},{code:"pl",label:"Polski",tagID:"f9d04efa-6e25-49bf-bf0a-da3e2addaf1b"},{code:"pt",label:"PortuguÃªs",tagID:"39ee8140-901a-4762-bfca-8260dea1310f"},{code:"ro",label:"RomÃ¢nÄ",tagID:"75a99c80-0f15-4159-b1fd-3812c25b4aca"},{code:"ru",label:"Ð ÑÑÑÐºÐ¸Ð¹",tagID:"0569b171-2a2b-476e-a596-5bdfb45a1327"},{code:"sk",label:"SlovenÄina",tagID:"9b773670-05f8-4c06-ac99-e6649f906171"},{code:"sv",label:"Svenska",tagID:"145b073b-cb70-4e91-b170-f5fab2ebba05"},{code:"th",label:"à¸ à¸²à¸©à¸²à¹à¸à¸¢",tagID:"f19c7524-c18d-41af-9f39-034c8d0b0fee"},{code:"tl",label:"Tagalog",tagID:"91d21edf-9d63-4ac8-9508-5448c3daf3f0"},{code:"tr",label:"TÃ¼rkÃ§e",tagID:"f08d5873-f0c7-4912-94ba-a41933b4c141"},{code:"uk",label:"Ð£ÐºÑÐ°ÑÐ½ÑÑÐºÐ°",tagID:"b547f13b-4b4b-460f-97e6-3af350356a69"},{code:"vi",label:"Tiáº¿ng Viá»t",tagID:"ba3b69fe-899c-4518-ac46-707275e3eba1"},{code:"zh",label:"ä¸­æ",tagID:"74c92063-a389-4fd2-8460-b1bb82b04ec7"},{code:"zh-hk",label:"ç²µèª",tagID:"0c8c6543-4019-47d0-9b8a-57a81ee6ace5"}];function r(e){return void 0===e&&(e=!1),[{code:"asl",label:"American Sign Language",tagID:"5ad4b978-495f-4093-9461-c194f58201ab"},{code:"other",label:e?Object(i.d)("Other","broadcaster-languages"):"Other",tagID:"fd76c790-0505-4c4c-865a-d6bd139c0901"}]}var o=a.concat(r()).map((function(e){return e.code})),s=new Set(o);function l(e){return a.concat(r(!0)).find((function(t){return t.code===e}))}function c(e){var t=l(e);return t&&t.tagID||""}function d(){var e=i.p.intl.getLanguageCode(),t=function(t){return"en"===t.code?1:e&&e.startsWith(t.code.split("-")[0])?0:2};return a.slice().sort((function(e,n){var i=t(e),a=t(n);return i!==a?i-a:i+":"+e.label<a+":"+n.label?-1:1})).concat(r(!0))}},HWU2:function(e,t,n){},HXcb:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelPage_ChannelHeader"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"smallProfileImage"},name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"70"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isPartner"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"300"}}],directives:[]}]}}]}}],loc:{start:0,end:198}};n.loc.source={body:"query ChannelPage_ChannelHeader($login: String!) {\nuser(login: $login) {\nid\ndisplayName\nsmallProfileImage: profileImageURL(width: 70)\nroles {\nisPartner\n}\nstream {\nid\n}\nprofileImageURL(width:300)\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.ChannelPage_ChannelHeader=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"ChannelPage_ChannelHeader")},HfAM:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"subProduct"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SubscriptionProduct"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"priceInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"subscriptionProductPriceInfo"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interval"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unit"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"promotion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"subscriptionProductPromotion"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"cumulativeTenure"},name:{kind:"Name",value:"subscriptionTenure"},arguments:[{kind:"Argument",name:{kind:"Name",value:"tenureMethod"},value:{kind:"EnumValue",value:"CUMULATIVE"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"months"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"benefit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"promotion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"subscriptionProductPromotion"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionProducts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:648}};i.loc.source={body:'#import "twilight/features/subscribe-button/models/subscription-product-price-info.gql"\n#import "twilight/features/subscribe-button/models/subscription-product-promotion.gql"\nfragment subProduct on SubscriptionProduct {\nid\nurl\nprice\npriceInfo {\n...subscriptionProductPriceInfo\n}\nname\ntier\ninterval {\nunit\n}\nstate\nemotes {\nid\nsetID\ntoken\n}\npromotion {\n...subscriptionProductPromotion\n}\nself {\ncumulativeTenure: subscriptionTenure(tenureMethod: CUMULATIVE) {\nmonths\n}\nbenefit {\nid\ntier\n}\npromotion {\n...subscriptionProductPromotion\n}\n}\nowner {\nid\ndisplayName\nlogin\nsubscriptionProducts {\nid\ntier\nurl\nprice\nemotes {\nid\ntoken\n}\n}\nstream {\nid\ntype\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)}))}i.definitions=i.definitions.concat(r(n("35qb").definitions)),i.definitions=i.definitions.concat(r(n("WJ1t").definitions)),e.exports=i},HjUq:function(e,t,n){},HjbF:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return c}));var i=n("DpwM");function a(e,t,n,i){return e in t?{bitsConfig:i,commentID:e,cursor:t[e]}:{bitsConfig:i,commentID:e,videoID:n}}function r(e){var t=e.currentVideoTime<e.offsetRange.beginSec,n=e.currentVideoTime>e.offsetRange.endSec;return t&&l(e.cursor)||n&&s(e.cursor)}function o(e){return s(e.cursor)&&function(e){var t=e.offsetEndTime-e.offsetThreshold;return e.currentVideoTime>=t&&e.currentVideoTime<=e.offsetEndTime}({currentVideoTime:e.currentVideoTime,offsetEndTime:e.offsetEndTime,offsetThreshold:e.offsetThreshold})}function s(e){return e.future!==i.g}function l(e){return e.past!==i.g}function c(e,t){if(!e)return!1;var n=!!t&&null!==t.id&&e.id===t.id,i=e.roles&&(e.roles.isGlobalMod||e.roles.isSiteAdmin||e.roles.isStaff)||!1;return!(!t||!t.self)&&!!t.self.isModerator||i||n}},HwKw:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PbyPGame"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:107}};n.loc.source={body:"query PbyPGame($channelLogin: String!) {\nuser(login: $channelLogin) {\nid\nstream {\nid\ngame {\nid\nname\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.PbyPGame=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"PbyPGame")},HzXE:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChatRoomBanStatus"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetUserID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"chatRoomBanStatus"},arguments:[{kind:"Argument",name:{kind:"Name",value:"channelID"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}},{kind:"Argument",name:{kind:"Name",value:"userID"},value:{kind:"Variable",name:{kind:"Name",value:"targetUserID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bannedUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"expiresAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isPermanent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"moderator"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}}]}},{kind:"Field",alias:{kind:"Name",value:"targetUser"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"targetUserID"}}},{kind:"Argument",name:{kind:"Name",value:"lookupType"},value:{kind:"EnumValue",value:"ALL"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:299}};n.loc.source={body:"query ChatRoomBanStatus($targetUserID: ID! $channelID: ID!) {\nchatRoomBanStatus(channelID: $channelID userID: $targetUserID) {\nbannedUser {\nid\nlogin\ndisplayName\n}\ncreatedAt\nexpiresAt\nisPermanent\nmoderator {\nid\nlogin\ndisplayName\n}\n}\ntargetUser: user (id: $targetUserID lookupType: ALL) {\nid\nlogin\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.ChatRoomBanStatus=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"ChatRoomBanStatus")},IArS:function(e,t,n){"use strict";n.d(t,"b",(function(){return R})),n.d(t,"a",(function(){return F})),n.d(t,"c",(function(){return U})),n.d(t,"d",(function(){return B}));var i=n("mrSG"),a=n("TSYQ"),r=n("q1tI"),o=n("fvjX"),s=n("/7QA"),l=n("yR8l"),c=n("8Ad5"),d=n("geRD"),u=n("b5C3"),m=n("XmgI"),p=n("0Lz3"),h=n("X31c"),f=n("ZVTe"),g=n("cys1"),v=n("fezU"),b=n("p52R"),k=n("TApp"),y=n("ZtEv"),S=n("oK83"),C=n("2EzP"),E=n("a1OF"),w=n("1VX3"),O=n("sUnt"),D=n("PL8s"),N=n("dEDE"),_=n("+80q"),I=n("9yes"),M=n("R2Ti"),j=n("g17B"),T=n("frkH"),P=n("4zGI"),L=n("tX9j"),R="#9147FF",F={twitchbot:"1"},U={badges:F,badgeDynamicData:{},bits:0,color:R,displayName:"AutoMod",id:"automod",userID:"automod",username:"automod",userType:b.a.GlobalMod,emotes:{}};function x(e){var t;switch(e){case"aggressive":t=Object(s.d)("aggressive","AutoModLine");break;case"sexual":t=Object(s.d)("sexual","AutoModLine");break;case"profanity":t=Object(s.d)("profanity","AutoModLine");break;case"identity":t=Object(s.d)("identity","AutoModLine");break;default:return Object(s.d)("Message is being held for review. Allow will post it to chat.","AutoModLine")}return Object(s.d)("Held a message for reason: {category}. Allow will post it to chat.",{category:t},"AutoModLine")}var A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isResolved:!1},t.getAllowMessageCallback=function(e){return e!==y.a.CheerMessageRejectedPrompt?t.allowAutoModRejectedMessage:t.allowAutoModRejectedCheerMessage},t.getDenyMessageCallback=function(e){return e!==y.a.CheerMessageRejectedPrompt?t.denyAutoModRejectedMessage:t.denyAutoModRejectedCheerMessage},t.allowAutoModRejectedMessage=function(){t.setState({isResolved:!0});var e=t.props.message;e.autoModType===y.a.MessageRejectedPrompt&&t.props.allowRejectedChatMessage&&t.props.allowRejectedChatMessage(Object(d.a)({id:e.rejectedMessage.id}))},t.denyAutoModRejectedMessage=function(){t.setState({isResolved:!0});var e=t.props.message;e.autoModType===y.a.MessageRejectedPrompt&&t.props.denyRejectedChatMessage&&t.props.denyRejectedChatMessage(Object(d.a)({id:e.rejectedMessage.id}))},t.allowAutoModRejectedCheerMessage=function(){t.setState({isResolved:!0});var e=t.props,n=e.message,i=e.allowRejectedCheer;if(n.autoModType===y.a.CheerMessageRejectedPrompt&&i){var a={id:n.rejectedMessage.id,targetUserID:n.targetUserID};i(Object(d.a)(a))}},t.denyAutoModRejectedCheerMessage=function(){t.setState({isResolved:!0});var e=t.props,n=e.message,i=e.denyRejectedCheer;if(n.autoModType===y.a.CheerMessageRejectedPrompt&&i){var a={id:n.rejectedMessage.id,targetUserID:n.targetUserID};i(Object(d.a)(a))}},t.surfaceError=function(e){t.props.messageHandlerAPI&&t.props.messageHandlerAPI.handleMessage(Object(k.a)(e))},t.openViewerCard=function(e){t.isKeyboardEvent(e)&&e.keyCode!==c.a.Space&&e.keyCode!==c.a.Enter||t.props.message.autoModType===y.a.MessageRejectedPrompt&&t.props.onUsernameClick(t.props.message.rejectedMessage.user.userLogin,S.b.chat_message,t.props.message.id,e.currentTarget.getBoundingClientRect().bottom)},t}return Object(i.__extends)(t,e),t.prototype.render=function(){var e,t=this.props.message,n=Object(i.__assign)({},U);switch(t.autoModType){case y.a.MessageRejectedPrompt:e=x(t.category);break;case y.a.CheerMessageRejectedPrompt:e=x(t.category);var o=this.props.data&&this.props.data.user&&this.props.data.user.cheer?this.props.data.user.cheer:{__typename:"CheerInfo",id:null,emotes:[]},l=Object(m.g)(t.originalMessage,Object(p.a)(o.emotes||[]));t.rejectedMessage=Object(i.__assign)(Object(i.__assign)({},t.rejectedMessage),{messageParts:l});break;case y.a.MessageRejected:e=Object(s.d)("Hey! Your message is being checked by mods and has not been sent.","AutoModLine");break;case y.a.MessageAllowed:e=Object(s.d)("Mods have allowed your message. Happy chatting!","AutoModLine");var c=(e+=" VoHiYo").match("VoHiYo");c&&void 0!==c.index&&(n.emotes[""+c.index]={startIndex:c.index,id:"81274"});break;case y.a.MessageDenied:e=Object(s.d)("Mods have removed your message.","AutoModLine");break;case y.a.CheerMessageDenied:e=Object(s.d)("Mods have removed your text message. Your Cheermote was sent.","AutoModLine");break;case y.a.CheerMessageTimeout:e=Object(s.d)("Mods did not approve your message in time.  Your Cheermote was sent without the text.","AutoModLine");break;case y.a.MessageModApproved:case y.a.MessageModDenied:return null;default:throw new Error("Invalid message type")}var d=Object(E.a)(e,n,m.a);switch(t.autoModType){case y.a.MessageRejectedPrompt:case y.a.CheerMessageRejectedPrompt:if(!(t.autoModType!==y.a.CheerMessageRejectedPrompt||this.props.data&&this.props.data.user&&this.props.data.user.cheer))return null;if(t.rejectedMessage.deleted)return null;if(this.state.isResolved)return r.createElement(O.a,{className:"chat-line__status"},Object(s.d)("Thank you for your feedback!","ChatLine"));var v=["chat-line__message--alert","chat-line__message--special","chat-line__message--clearfix"],b=void 0;return b=this.props.extractedMessage&&this.props.extractedMessage.message&&!this.props.extractedMessage.error?r.createElement(O.a,{className:a(v)},r.createElement(w.a,{badgeSets:this.props.badgeSets,channelID:this.props.channelID,message:this.props.extractedMessage.message,hasModPermissions:!0,showModerationIcons:this.props.showModerationIcons,showTimestamps:!1,currentUserLogin:this.props.channelLogin,onUsernameClick:this.openViewerCard,surfaceError:this.surfaceError})):this.props.extractedMessage&&this.props.extractedMessage.loading?r.createElement(D.a,{lineCount:2}):r.createElement(h.a,Object(i.__assign)({},this.props,{canDelete:!1,isCurrentUserStaff:!1,isDeleted:!1,isHidden:!1,showTimestamps:!1,className:a(v),message:t.rejectedMessage})),r.createElement(O.a,{className:"chat-line__message"},r.createElement(u.a,{badgeSets:this.props.badgeSets,badgesToRender:d.badges}),r.createElement(f.a,{userData:d.user}),r.createElement("span",{key:"separator"},": "),Object(g.f)(d.messageParts),r.createElement(O.a,{key:"automod-prompt",className:"chat-line__nested-component--float-right"},r.createElement(N.a,{size:N.b.Small,onClick:this.getAllowMessageCallback(t.autoModType),type:N.d.Text},Object(s.d)("Allow","AutoModLine")),r.createElement(_.a,{type:_.e.Span},"â¢"),r.createElement(N.a,{size:N.b.Small,onClick:this.getDenyMessageCallback(t.autoModType),type:N.d.Text},Object(s.d)("Deny","AutoModLine"))),b);case y.a.MessageRejected:case y.a.MessageAllowed:case y.a.MessageDenied:case y.a.CheerMessageDenied:case y.a.CheerMessageTimeout:return r.createElement(O.a,{className:a(["chat-line__message","chat-line__message--special","chat-line__message--alert"])},r.createElement(u.a,{badgeSets:this.props.badgeSets,badgesToRender:d.badges}),r.createElement(f.a,{userData:d.user}),r.createElement("span",{key:"separator"},": "),Object(g.f)(d.messageParts));default:throw new Error("Invalid message type")}},t.prototype.isKeyboardEvent=function(e){return void 0!==e.keyCode},t}(r.Component);var B=Object(o.d)(C.a,Object(v.b)((function(e){return{onUsernameClick:e.onShowViewerCard}})),Object(l.a)(I,{name:"allowRejectedChatMessage"}),Object(l.a)(T,{name:"denyRejectedChatMessage"}),Object(l.a)(M,{name:"allowRejectedCheer"}),Object(l.a)(P,{name:"denyRejectedCheer"}),Object(l.a)(j,{name:"data",options:function(e){return{variables:{channelLogin:e.channelLogin}}}}),Object(l.a)(L,{options:function(e){return{variables:{msgID:e.message.rejectedMessage.id,channelID:e.channelID}}},props:function(e){return{extractedMessage:{message:e.data&&e.data.rejectedChatMessage&&e.data.rejectedChatMessage.message||null,loading:!(!e.data||!e.data.loading),error:!(!e.data||!e.data.error)}}},skip:function(e){return!e.channelID||e.message.autoModType!==y.a.MessageRejectedPrompt}}))(A)},IKE4:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"badge"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Badge"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"version"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"image1x"},name:{kind:"Name",value:"imageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"EnumValue",value:"NORMAL"}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"image2x"},name:{kind:"Name",value:"imageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"EnumValue",value:"DOUBLE"}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"image4x"},name:{kind:"Name",value:"imageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"EnumValue",value:"QUADRUPLE"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"clickAction"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"clickURL"},arguments:[],directives:[]}]}}],loc:{start:0,end:170}};n.loc.source={body:"fragment badge on Badge {\nid\nsetID\nversion\ntitle\nimage1x: imageURL(size: NORMAL)\nimage2x: imageURL(size: DOUBLE)\nimage4x: imageURL(size: QUADRUPLE)\nclickAction\nclickURL\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},INxu:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"pollVoter"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PollVoter"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"choices"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"pollVoterChoice"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"poll"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"tokens"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"pollTokenBreakdown"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"votes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"pollVoteBreakdown"},directives:[]}]}}]}}],loc:{start:0,end:396}};i.loc.source={body:'#import "twilight/features/polls/models/poll-voter-choice-fragment.gql"\n#import "twilight/features/polls/models/poll-token-breakdown-fragment.gql"\n#import "twilight/features/polls/models/poll-vote-breakdown-fragment.gql"\nfragment pollVoter on PollVoter {\nid\nchoices {\n...pollVoterChoice\n}\npoll {\nid\n}\ntokens {\n...pollTokenBreakdown\n}\nuser {\nid\nlogin\ndisplayName\n}\nvotes {\n...pollVoteBreakdown\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)}))}i.definitions=i.definitions.concat(r(n("WWj3").definitions)),i.definitions=i.definitions.concat(r(n("/x02").definitions)),i.definitions=i.definitions.concat(r(n("wMQt").definitions)),e.exports=i},IQZc:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("fvjX"),o=n("YV90"),s=n("OUdD");function l(e,t){return e.cost!==t.cost||!t.isEnabled||"CommunityPointsCustomReward"===e.__typename&&"CommunityPointsCustomReward"===t.__typename&&(e.title!==t.title||e.prompt!==t.prompt||e.isUserInputRequired!==t.isUserInputRequired)}var c=function(e){function t(t){var n=e.call(this,t)||this,i="CommunityPointsCustomReward"===t.reward.__typename&&(!t.reward.isInStock||t.reward.isPaused);return n.state={changed:!1,stockChanged:!1,outOfStock:i},n}return Object(i.__extends)(t,e),t.getDerivedStateFromProps=function(e,t){var n=e.reward,i=e.rewardMap[e.reward.id];if(!i)return{changed:!1,outOfStock:!1};var a="CommunityPointsCustomReward"===i.__typename&&(!i.isInStock||i.isPaused);return{changed:l(n,i),stockChanged:t.stockChanged||t.outOfStock!==a,outOfStock:a}},t.prototype.render=function(){if(this.state.changed&&this.props.renderOnRequirementsChange)return this.props.renderOnRequirementsChange;if(this.state.outOfStock){if(!this.state.stockChanged&&this.props.renderOnInitiallyOutOfStock)return this.props.renderOnInitiallyOutOfStock;if(this.props.renderOnStockChange)return this.props.renderOnStockChange}return this.props.children||null},t.prototype.componentDidMount=function(){this.props.onRequirementsChange&&this.state.changed&&this.props.onRequirementsChange(this.state.changed),this.props.onStockChange&&this.state.outOfStock&&this.props.onStockChange(this.state.outOfStock)},t.prototype.componentDidUpdate=function(e,t){this.props.onRequirementsChange&&this.state.changed!==t.changed&&this.props.onRequirementsChange(this.state.changed),this.props.onStockChange&&this.state.outOfStock!==t.outOfStock&&this.props.onStockChange(this.state.outOfStock)},t}(a.Component);var d=Object(r.d)(Object(o.a)((function(e){return{channelLogin:e.channelLogin,displayName:e.displayName,rewardMap:e.rewardMap}})),Object(s.b)((function(e){return{openReward:e.openReward}})))(c);n.d(t,"a",(function(){return d}))},IRJ5:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("/MKj"),o=n("fvjX"),s=n("/7QA"),l=n("gcd7"),c=n("yR8l"),d=n("5zf8"),u=n("DMoW"),m=n("2xye"),p=n("3kHA"),h=n("5Siz"),f=n("Y5lD"),g=n("eAdp"),v=n("gMwc");function b(){return Object(s.d)("An unexpected error occurred. Try again.","BookmarkCommandHandler")}function k(){return Object(s.d)("You can only add stream markers during live streams. Try again when the channel is live streaming.","BookmarkCommandHandler")}var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bookmark=function(e){if(void 0===e&&(e=""),t.props.markersData)return{deferred:t.props.markersData.refetch().then((function(){var n=t.props.markersData,i=n.user&&n.user.stream&&n.user.stream.id,a=n.user&&n.user.stream&&n.user.stream.createdAt;return i?t.createBookmarkHelper(i,e,a):Promise.resolve({notice:k()})}))}},t.createBookmarkHelper=function(e,n,i){var a=n.substring(0,h.a).trim();return t.props.createVideoBookmark({variables:{input:{broadcastID:e,description:a,medium:t.props.isPopout?"popout_chat":"chat",platform:m.SpadePlatform.Web}}}).then((function(e){var t=e.data&&e.data.createVideoBookmark;if(t&&t.error&&t.error.code)switch(t.error.code){case u.kb.ARCHIVES_DISABLED:return{notice:Object(s.d)("Past Broadcast storage must be enabled in order to add stream markers. Enable via Channel Settings and try again.","BookmarkCommandHandler")};case u.kb.BROADCAST_FORMAT_INVALID_PREMIERE:case u.kb.BROADCAST_FORMAT_INVALID_RERUN:return{notice:Object(s.d)("You can only add stream markers during live streams. Try again when the channel is live streaming and not running a Premiere or Rerun.","BookmarkCommandHandler")};case u.kb.BROADCASTER_NOT_LIVE:return{notice:k()};case u.kb.USER_UNAUTHORIZED:return{notice:Object(s.d)("You don't have permission to create stream markers for this channel.","BookmarkCommandHandler")};case u.kb.INTERNAL_SERVER_ERROR:case u.kb.VOD_NOT_READY:default:return{notice:b()}}var n=null===i?null:Object(d.b)(Object(f.a)(i),d.a.ClockHMS),r=""!==a;return{notice:n&&r?Object(s.d)('Successfully added a stream marker at {time}: "{description}"',{description:a,time:n},"BookmarkCommandHandler"):n?Object(s.d)("Successfully added a stream marker at {time}",{time:n},"BookmarkCommandHandler"):r?Object(s.d)('Successfully added a stream marker: "{description}"',{description:a},"BookmarkCommandHandler"):Object(s.d)("Successfully added a stream marker","BookmarkCommandHandler")}})).catch((function(){return{notice:b()}}))},t}return Object(i.__extends)(t,e),t.prototype.render=function(){return this.props.markersData?a.createElement(l.a,{args:[{name:"description",isRequired:!1}],channelLogin:this.props.channelLogin,command:"marker",description:Object(s.d)("Add a stream marker at the current timestamp","BookmarkCommandHandler"),handler:this.bookmark,helpText:Object(s.d)('Usage: "/marker" - Adds a stream marker (with an optional comment, max 140 characters) at the current timestamp. You can use markers in the Highlighter for easier editing.',"BookmarkCommandHandler"),permissionLevel:p.b.Broadcaster}):null},t}(a.Component);var S=Object(o.d)(Object(r.b)((function(e){return{firstPageLoaded:e.session.firstPageLoaded}})),Object(c.a)(g,{name:"createVideoBookmark"}),Object(c.a)(v,{name:"markersData",skip:function(e){return!e.firstPageLoaded}}))(y);n.d(t,"a",(function(){return S}))},J2EQ:function(e,t,n){"use strict";var i=n("/MKj"),a=n("fvjX"),r=n("yR8l"),o=n("XDCx"),s=n("Owek"),l=n("nHtq"),c=n("mrSG"),d=n("q1tI"),u=n("/7QA"),m=n("gcd7"),p=n("geRD"),h=n("f00E"),f=n("DMoW"),g=n("3kHA"),v=n("RBh2"),b=n("i5+p"),k=n("NIpN"),y=n("SUI5"),S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.openPollModal=function(){var e=Object(u.d)("Unable to create poll. Please try again.","Polls--PollCommandHandler");return t.props.isUserPollAdmin?null!==t.props.viewablePoll&&t.props.viewablePoll.status===f.jc.ACTIVE?{deferred:Promise.resolve({notice:Object(u.d)("A poll is already active.","Polls--PollCommandHandler")})}:t.props.channelID?void t.props.showModal(y.a,{channelID:t.props.channelID}):{deferred:Promise.resolve({notice:e,error:g.a.MissingParameters})}:{deferred:Promise.resolve({notice:t.getForbiddenMessage()})}},t.endPoll=function(){var e=Object(u.d)("Unable to end poll. Please try again.","Polls--PollCommandHandler");return t.props.isUserPollAdmin?t.props.viewablePoll&&t.props.terminatePoll?Object(b.f)(t.props.viewablePoll.status)?{deferred:t.props.terminatePoll(Object(p.a)({pollID:t.props.viewablePoll.id})).then((function(t){return null===t?{notice:e}:{notice:Object(u.d)("Poll ended successfully.","Polls--PollCommandHandler")}})).catch((function(){return{notice:e}}))}:{deferred:Promise.resolve({notice:Object(u.d)("Poll already ended.","Polls--PollCommandHandler")})}:{deferred:Promise.resolve({notice:t.getNoPollErrorMessage()})}:{deferred:Promise.resolve({notice:t.getForbiddenMessage()})}},t.deletePoll=function(){var e=Object(u.d)("Unable to delete poll. Please try again.","Polls--PollCommandHandler"),n=t.props.viewablePoll;return t.props.isUserPollAdmin?n&&t.props.archivePoll?n.tokens.bits>0?void t.props.showModal(k.a,{pollID:n.id}):{deferred:t.props.archivePoll(Object(p.a)({pollID:n.id})).then((function(t){return null===t?{notice:e}:{notice:Object(u.d)("Poll deleted successfully.","Polls--PollCommandHandler")}})).catch((function(){return{notice:e}}))}:{deferred:Promise.resolve({notice:t.getNoPollErrorMessage()})}:{deferred:Promise.resolve({notice:t.getForbiddenMessage()})}},t.voteInPoll=function(e){var n=e.trim().split(/\s+/),i=parseInt(n[0],10)-1,a=t.props.viewablePoll;if(1!==n.length)return{deferred:Promise.resolve({notice:t.voteUsage(),error:g.a.InvalidParameters})};if(t.props.userID){if(null===a)return{deferred:Promise.resolve({notice:t.getNoPollErrorMessage()})};if(t.props.voteInPoll){if(i<0||i>a.choices.length-1)return{deferred:Promise.resolve({notice:t.getBadChoiceMessage()})};t.trackPollsClientInteraction(v.a.Vote);var r=a.choices[i];return{deferred:t.props.voteInPoll(Object(p.a)({choiceID:r.id,pollID:a.id,userID:t.props.userID,voteID:Object(h.c)()})).then((function(e){if(null===e||null===e.data||null===e.data.voteInPoll)return{notice:t.getNoPollErrorMessage()};if(e.data.voteInPoll.error)switch(e.data.voteInPoll.error.code){case f.vd.USER_FORBIDDEN:return{notice:Object(u.d)("Forbidden from voting in this poll.","Polls--PollCommandHandler")};case f.vd.TOKENS_REQUIRED:return{notice:Object(u.d)("Only one free vote is allowed.","Polls--PollCommandHandler")};case f.vd.POLL_NOT_ACTIVE:case f.vd.POLL_NOT_FOUND:return{notice:t.getNoPollErrorMessage()};case f.vd.INVALID_CHOICE_ID:return{notice:t.getBadChoiceMessage()};default:return{notice:t.getVoteErrorMessage()}}return{notice:Object(u.d)("Voted in poll successfully.","Polls--PollCommandHandler")}})).catch((function(){return{notice:t.getVoteErrorMessage()}}))}}return{deferred:Promise.resolve({notice:t.getVoteErrorMessage()})}}return{deferred:Promise.resolve({notice:t.getVoteErrorMessage(),error:g.a.MissingParameters})}},t}return Object(c.__extends)(t,e),t.prototype.render=function(){return this.props.data&&this.props.data.channel&&this.props.data.channel.roles&&(this.props.data.channel.roles.isAffiliate||this.props.data.channel.roles.isPartner)?d.createElement(d.Fragment,null,d.createElement(m.a,{channelLogin:this.props.channelLogin,command:"poll",description:Object(u.d)("Open a setup menu to create a poll.","Polls--PollCommandHandler"),handler:this.openPollModal,helpText:this.pollUsage(),permissionLevel:g.b.Moderator}),d.createElement(m.a,{channelLogin:this.props.channelLogin,command:"endpoll",description:Object(u.d)("End the active poll on the given channel.","Polls--PollCommandHandler"),handler:this.endPoll,helpText:this.endPollUsage(),permissionLevel:g.b.Moderator}),d.createElement(m.a,{channelLogin:this.props.channelLogin,command:"deletepoll",description:Object(u.d)("Delete the active poll on the given channel.","Polls--PollCommandHandler"),handler:this.deletePoll,helpText:this.deletePollUsage(),permissionLevel:g.b.Moderator}),d.createElement(m.a,{channelLogin:this.props.channelLogin,args:[{name:"index",isRequired:!0}],command:"vote",description:Object(u.d)("Vote in the active poll on the given channel.","Polls--PollCommandHandler"),handler:this.voteInPoll,helpText:this.voteUsage(),permissionLevel:g.b.Viewer})):null},t.prototype.pollUsage=function(){return Object(u.d)('Usage: "/poll" - Opens the setup menu to create a poll.',"Polls--PollCommandHandler")},t.prototype.endPollUsage=function(){return Object(u.d)('Usage: "/endpoll" - Ends the active poll.',"Polls--PollCommandHandler")},t.prototype.deletePollUsage=function(){return Object(u.d)('Usage: "/deletepoll" - Deletes the active poll.',"Polls--PollCommandHandler")},t.prototype.voteUsage=function(){return Object(u.d)('Usage: "/vote <index>" - Vote for the option represented by its numeric position.',"Polls--PollCommandHandler")},t.prototype.getVoteErrorMessage=function(){return Object(u.d)("Unable to vote in poll. Please try again.","Polls--PollCommandHandler")},t.prototype.getNoPollErrorMessage=function(){return Object(u.d)("A poll is not currently active.","Polls--PollCommandHandler")},t.prototype.getForbiddenMessage=function(){return Object(u.d)("You don't have permission to perform that action.","Polls--PollCommandHandler")},t.prototype.getBadChoiceMessage=function(){return Object(u.d)("Please vote for a valid option. Use 1, 2, 3...","Polls--PollCommandHandler")},t.prototype.trackPollsClientInteraction=function(e,t){var n=this.props,i=n.data,a=n.viewablePoll;i&&i.channel&&i.channel.id&&a&&Object(v.d)({userID:i.channel.id,channelID:i.channel.id,pollID:a.id,action:e,bitsSpent:t})},t}(d.Component);var C=Object(a.d)(Object(i.b)((function(e){return{firstPageLoaded:e.session.firstPageLoaded}}),(function(e){return Object(a.b)({showModal:o.e},e)})),Object(s.b)((function(e){return{viewablePoll:e.viewablePoll,voteInPoll:e.voteInPoll,archivePoll:e.archivePoll,terminatePoll:e.terminatePoll,isUserPollAdmin:e.isUserPollAdmin}})),Object(r.a)(l,{options:function(e){return{variables:{channelLogin:e.channelLogin}}},skip:function(e){return!e.firstPageLoaded||!e.channelLogin}}))(S);n.d(t,"a",(function(){return C}))},J6gT:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelPage_StreamType_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:126}};n.loc.source={body:"query ChannelPage_StreamType_User($channelLogin: String!) {\nuser(login: $channelLogin) {\nid\ndisplayName\nstream {\nid\ntype\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.ChannelPage_StreamType_User=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"ChannelPage_StreamType_User")},JGCS:function(e,t,n){},JN5s:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("/7QA");function a(){return Object(i.d)("Your message is identical to the one you sent within the last 30 seconds.","DuplicatedMessageErrorTray")}},JPUa:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ActiveWatchParty"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"watchParty"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"session"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"watchPartySession"},directives:[]}]}}]}}]}}]}}],loc:{start:0,end:199}};i.loc.source={body:'#import "twilight/features/watch-party/models/watch-party-session-fragment.gql"\nquery ActiveWatchParty($channelID: ID!) {\nuser(id: $channelID) {\nid\nwatchParty {\nsession {\n...watchPartySession\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("6JW5").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})));var r={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),r[e.name.value]=t}})),e.exports=i,e.exports.ActiveWatchParty=function(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=r[t]||new Set,a=new Set,s=new Set;for(i.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(r[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(t){var i=o(e,t);i&&n.definitions.push(i)})),n}(i,"ActiveWatchParty")},JXcx:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"CreatePoll"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CreatePollInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createPoll"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"poll"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ownedBy"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"latestPoll"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"poll"},directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:202}};i.loc.source={body:'#import "twilight/features/polls/models/poll-fragment.gql"\nmutation CreatePoll($input: CreatePollInput!) {\ncreatePoll(input: $input) {\npoll {\nid\nownedBy {\nid\nlatestPoll{\n...poll\n}\n}\n}\nerror {\ncode\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("wAVh").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})));var r={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),r[e.name.value]=t}})),e.exports=i,e.exports.CreatePoll=function(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=r[t]||new Set,a=new Set,s=new Set;for(i.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(r[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(t){var i=o(e,t);i&&n.definitions.push(i)})),n}(i,"CreatePoll")},JbWT:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("+GjP"),o=n("2xye"),s=n("Rjl4"),l=n("Jsra"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.referralID=Object(s.e)(),t.onTryPrimeClick=function(){Object(s.w)({tp_refcode:t.referralID,medium:o.PageviewMedium.Chat,content:o.PageviewContent.TwitchPrimeSubNotification,tp_campaign:s.b.TrackingAlpha})},t}return Object(i.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.channel,n=e.reference,i=e.text,o=Object(r.g)("https://twitch.amazon.com/prime",{reference:n,channel:t,twitchReferral:this.referralID});return a.createElement(l.a,{onClick:this.onTryPrimeClick,className:"chat-line__message--link",linkTo:o,targetBlank:!0,rel:"noopener"},i)},t}(a.PureComponent);n.d(t,"a",(function(){return c}))},JiJH:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UnVIPUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"RevokeVIPInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"revokeVIP"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"channel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"revokee"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:126}};n.loc.source={body:"mutation UnVIPUser($input: RevokeVIPInput!){\nrevokeVIP(input: $input) {\nchannel {\nid\n}\nrevokee {\nid\nlogin\n}\nerror {\ncode\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.UnVIPUser=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"UnVIPUser")},JoTo:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("i8i4"),o=n("fvjX"),s=n("/7QA"),l=n("GnwI"),c=n("/IfK"),d=n("Ws8v"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={errored:!1},t.logger=s.k.withCategory("SideNavPageInfoSectionContent"),t}return Object(i.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.componentDidCatch=function(e,t){var n=this;this.setState({errored:!0},(function(){n.logger.errorAndReport(e,"A unhandled exception occurred in the component hierarchy",{info:t})}))},t.prototype.componentDidUpdate=function(){this.props.children&&Object(c.b)()&&this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){var e=Object(c.b)();return e?r.createPortal(this.renderContent(),e):null},t.prototype.renderContent=function(){return this.state.errored?null:a.createElement(d.a,{className:"side-nav-page-info"},this.props.children)},t}(a.Component),m=Object(o.d)(Object(l.withLatencyTracking)("SideNavPageInfoSection"))(u);n.d(t,"a",(function(){return m}))},JqNv:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"watchPartyError"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"WatchPartyError"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}}],loc:{start:0,end:52}};n.loc.source={body:"fragment watchPartyError on WatchPartyError {\ncode\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"K+jS":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c}));var i,a=n("pVnL"),r=n.n(a),o=n("q1tI"),s=n("+80q"),l=n("X2PJ");!function(e){e[e.ExtraLarge=0]="ExtraLarge",e[e.Large=1]="Large",e[e.Default=2]="Default",e[e.Small=3]="Small",e[e.ExtraSmall=4]="ExtraSmall"}(i||(i={}));var c=function(e){var t={fontSize:l.d.Size3,fontWeight:l.e.SemiBold};return e.size===i.ExtraLarge&&(t={fontSize:l.d.Size1,fontWeight:l.e.Bold}),e.size===i.Large&&(t={fontSize:l.d.Size2,fontWeight:l.e.Bold}),e.size===i.Small&&(t={fontSize:l.d.Size4,fontWeight:l.e.SemiBold}),e.size===i.ExtraSmall&&(t={fontSize:l.d.Size5,fontWeight:l.e.SemiBold}),o.createElement(s.a,r()({type:e.type,ellipsis:e.ellipsis,lineHeight:e.lineHeight},t),e.children)};c.displayName="Title",c.defaultProps={size:i.Default,lineHeight:s.b.Heading},c.displayName="Title"},"K+oU":function(e,t,n){},K29g:function(e,t,n){"use strict";var i,a;n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),function(e){e.TrackingID="trackingID",e.GameName="game",e.GameID="gameID",e.Title="title",e.Start="start",e.End="end",e.Segments="segments"}(i||(i={})),function(e){e.SequenceID="sid",e.SequenceNum="sn",e.TrackingContent="tt_content",e.TrackingMedium="tt_medium",e.VideoStartTime="t"}(a||(a={}))},KD05:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var i=function(e){return"v"+e},a=function(e){return e+"s"}},KGti:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"j",(function(){return u})),n.d(t,"c",(function(){return m})),n.d(t,"i",(function(){return p})),n.d(t,"e",(function(){return h})),n.d(t,"g",(function(){return f})),n.d(t,"h",(function(){return g})),n.d(t,"f",(function(){return v})),n.d(t,"b",(function(){return b})),n.d(t,"d",(function(){return k})),n.d(t,"k",(function(){return y})),n.d(t,"m",(function(){return S})),n.d(t,"l",(function(){return C}));var i,a=n("mrSG"),r=n("XmgI"),o=n("ZtEv"),s=n("a1OF"),l=n("aF6k"),c=n("p52R");function d(e){return e+"-automod-rejected"}function u(e,t,n,i){var l={badges:null,badgeDynamicData:null,bits:0,color:"",displayName:"",id:"",userID:n,username:n,userType:c.a.User,emotes:{}},u=Object(s.a)(t,l,r.a);return{type:o.b.AutoMod,autoModType:o.a.MessageRejectedPrompt,id:d(e),category:i,rejectedMessage:Object(a.__assign)(Object(a.__assign)({},u),{type:o.b.Message,messageType:o.c.Post,id:e})}}function m(e,t,n,i,l){var u={badges:null,badgeDynamicData:null,bits:0,color:"",displayName:"",id:"",userID:n,username:n,userType:c.a.User,emotes:{}},m=Object(s.a)(t,u,r.a);return{type:o.b.AutoMod,autoModType:o.a.CheerMessageRejectedPrompt,id:d(e),messageID:e,category:i,targetUserID:l,originalMessage:t,rejectedMessage:Object(a.__assign)(Object(a.__assign)({},m),{type:o.b.Message,messageType:o.c.Post,id:e})}}function p(){return{id:Object(l.a)("automod-message-rejected"),type:o.b.AutoMod,autoModType:o.a.MessageRejected}}function h(){return{id:Object(l.a)("automod-message-allowed"),type:o.b.AutoMod,autoModType:o.a.MessageAllowed}}function f(e){return{id:Object(l.a)("automod-message-denied"),msg_id:e.data.msg_id,type:o.b.AutoMod,autoModType:o.a.MessageModApproved}}function g(e){return{id:Object(l.a)("automod-message-denied"),msg_id:e.data.msg_id,type:o.b.AutoMod,autoModType:o.a.MessageModDenied}}function v(){return{id:Object(l.a)("automod-message-denied"),type:o.b.AutoMod,autoModType:o.a.MessageDenied}}function b(){return{id:Object(l.a)("automod-cheer-message-denied"),type:o.b.AutoMod,autoModType:o.a.CheerMessageDenied}}function k(){return{id:Object(l.a)("automod-cheer-message-timeout"),type:o.b.AutoMod,autoModType:o.a.CheerMessageTimeout}}function y(e,t,n,a){return{id:Object(l.a)("channel-moderation-action"),type:o.b.ModerationAction,moderationActionType:e,level:i.Channel,createdByLogin:t,createdByUserID:n,args:a}}function S(e,t,n,a,r,s,c,d){return{id:Object(l.a)("channel-moderation-action"),type:o.b.ModerationAction,moderationActionType:e,level:i.User,createdByLogin:t,createdByUserID:n,targetUserLogin:a,duration:r,reason:s,messageBody:c,messageID:d}}function C(e,t,n,i){return{id:Object(l.a)("channel-moderation-action"),type:o.b.TargetedModerationAction,targetedModerationActionType:e,targetUserID:t,messageBody:n,targetMessageID:i}}!function(e){e[e.Channel=0]="Channel",e[e.User=1]="User"}(i||(i={}))},KIkj:function(e,t,n){},KOTp:function(e,t,n){"use strict";var i,a=n("q1tI"),r=n("/7QA"),o=n("yWUM"),s=n("dEDE");!function(e){e.ClipWatchFullButton="clips-watch-full-button"}(i||(i={}));var l=function(e){var t=e.buttonType||s.d.Primary;if(!e.video)return a.createElement(s.a,{type:t,disabled:!0},Object(r.d)("Full Video Unavailable","ClipsFullVideoButton"));var n=(e.useAbsoluteURL?"https://twitch.tv/videos/"+e.video.id:"/videos/"+e.video.id)+"?tt_content="+e.tt_content+"&tt_medium="+e.tt_medium+"&t="+Object(o.a)(e.video.offsetSeconds);return a.createElement(s.a,{linkTo:n,type:t,targetBlank:e.targetBlank,"data-test-selector":i.ClipWatchFullButton},Object(r.d)("Watch Full Video","ClipsFullVideoButton"))};n.d(t,"a",(function(){return l}))},KYAw:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var i=n("mrSG"),a=n("cr+I"),r=n("6zXJ");function o(e,t){var n=new URL("https://www.twitch.tv/collections/"+e);return t&&(n.search=a.stringify(t)),n.toString()}function s(e,t){var n=new URL("https://www.twitch.tv/videos/"+e);return t&&(n.search=a.stringify(Object(i.__assign)(Object(i.__assign)({},t),{t:"number"==typeof t.t?Object(r.a)(t.t):void 0}))),n.toString()}},KrPZ:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"communityPointsEmoteFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CommunityPointsEmote"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}}],loc:{start:0,end:74}};n.loc.source={body:"fragment communityPointsEmoteFragment on CommunityPointsEmote {\nid\ntoken\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},L5dg:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("q1tI"),a=n("0Rl0"),r=function(e){for(var t=[],n=void 0===e.placeholderCount?20:e.placeholderCount,r=0;r<n;r++)t.push(i.createElement(a.a,{key:r}));return i.createElement(i.Fragment,null,t)}},L6L7:function(e,t,n){},LZFU:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e,t){return"https://static-cdn.jtvnw.net/ttv-boxart/"+encodeURIComponent(e)+"-"+t.width+"x"+t.height+".jpg"}},MAph:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelContext_HostedChannel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"hostedChannelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"hostedChannelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"hostedChannel"},directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"hostedChannel"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"70"}}],directives:[]}]}}],loc:{start:0,end:205}};n.loc.source={body:"query ChannelContext_HostedChannel($hostedChannelLogin: String!) {\nuser(login: $hostedChannelLogin) {\n...hostedChannel\n}\n}\nfragment hostedChannel on User {\nid\nlogin\ndisplayName\nprofileImageURL(width: 70)\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.ChannelContext_HostedChannel=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"ChannelContext_HostedChannel")},MQZ3:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"NewPollModalQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"channel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"latestPoll"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"durationSeconds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"pollSettings"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"cheer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:210}};i.loc.source={body:'#import "twilight/features/polls/models/poll-settings-fragment.gql"\nquery NewPollModalQuery($id: ID!) {\nchannel: user(id: $id) {\nid\nlatestPoll{\nid\ndurationSeconds\nsettings { ...pollSettings }\n}\ncheer {\nid\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("OGC9").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})));var r={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),r[e.name.value]=t}})),e.exports=i,e.exports.NewPollModalQuery=function(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=r[t]||new Set,a=new Set,s=new Set;for(i.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(r[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(t){var i=o(e,t);i&&n.definitions.push(i)})),n}(i,"NewPollModalQuery")},MVDO:function(e,t,n){},MXoD:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("mrSG"),a=n("cr+I"),r=function(e,t){if(!(e.content||e.content_index||e.medium)||!t)return t;if("string"==typeof t&&(/^\w+:\/\//.test(t)||t.startsWith("//"))){var n=new URL(t),r=""!==n.search?a.parse(n.search):{};return e.content&&(r.tt_content=e.content),e.content_index&&(r.tt_content_index=e.content_index),e.medium&&(r.tt_medium=e.medium),n.search=a.stringify(r),n.toString()}var o="string"==typeof t?{pathname:t}:t;return Object(i.__assign)(Object(i.__assign)({},o),{state:Object(i.__assign)(Object(i.__assign)({},o.state),{content:e.content||o.state&&o.state.content,content_index:e.content_index||o.state&&o.state.content_index,medium:e.medium||o.state&&o.state.medium})})}},MfJU:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"modLogsMessage"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ModLogsMessage"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fragments"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Emote"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"emoteID"},name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"sender"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatColor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayBadges"},arguments:[{kind:"Argument",name:{kind:"Name",value:"channelLogin"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"version"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}],loc:{start:0,end:345}};n.loc.source={body:"# fragment for mod logs message\nfragment modLogsMessage on ModLogsMessage {\nid\nsentAt\ncontent {\ntext\nfragments {\ntext\ncontent {\n... on Emote {\nemoteID: id\nsetID\ntoken\n}\n... on User {\nid\n}\n__typename\n}\n}\n__typename\n}\nsender {\nid\nlogin\nchatColor\ndisplayName\ndisplayBadges(channelLogin: $channelLogin) {\nid\nsetID\nversion\n}\n__typename\n}\n__typename\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},MglV:function(e,t,n){},Mj6i:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("mrSG"),a=n("yR8l"),r=n("0FG4"),o=n("S4w9");function s(){return Object(a.a)(o,{options:function(e){return{variables:{withOwner:!0}}},props:function(e){if(e.data){var t=e.data.currentUser&&e.data.currentUser.emoteSets||[],n=t&&Object(r.b)(t);return{emoteSetsData:Object(i.__assign)(Object(i.__assign)({},e.data),{currentUser:e.data.currentUser||null,emoteMap:n,emoteSets:t})}}return{}},skip:function(e){return!e.isLoggedIn}})}},MkkA:function(e,t,n){"use strict";var i=n("fBrF");n.d(t,"withWatchPartyContext",(function(){return i.b}));var a=n("yJn7");n.o(a,"mapWatchPartyContextToProviderProps")&&n.d(t,"mapWatchPartyContextToProviderProps",(function(){return a.mapWatchPartyContextToProviderProps})),n.o(a,"mapWatchPartyStateToChatProps")&&n.d(t,"mapWatchPartyStateToChatProps",(function(){return a.mapWatchPartyStateToChatProps})),n.o(a,"withWatchPartyContextManager")&&n.d(t,"withWatchPartyContextManager",(function(){return a.withWatchPartyContextManager}));var r=n("CNnA");n.d(t,"mapWatchPartyContextToProviderProps",(function(){return r.a})),n.d(t,"mapWatchPartyStateToChatProps",(function(){return r.b}));var o=n("t4UF");n.d(t,"withWatchPartyContextManager",(function(){return o.a}))},MvLD:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelPollContext_GetViewablePoll"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"channel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewablePoll"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"poll"},directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"voter"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"pollVoter"},directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"subscriptionBenefit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"isEditor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isModerator"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsBalance"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:366}};i.loc.source={body:'#import "twilight/features/polls/models/poll-fragment.gql"\n#import "twilight/features/polls/models/poll-voter-fragment.gql"\nquery ChannelPollContext_GetViewablePoll($login: String!) {\nchannel: user(login: $login) {\nid\nviewablePoll {\n...poll\nself {\nvoter {\n...pollVoter\n}\n}\n}\nself {\nsubscriptionBenefit {\nid\n}\nisEditor\nisModerator\n}\n}\ncurrentUser {\nid\nbitsBalance\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)}))}i.definitions=i.definitions.concat(r(n("wAVh").definitions)),i.definitions=i.definitions.concat(r(n("INxu").definitions));var o={};function s(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),o[e.name.value]=t}})),e.exports=i,e.exports.ChannelPollContext_GetViewablePoll=function(e,t){var n={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=o[t]||new Set,a=new Set,r=new Set;for(i.forEach((function(e){r.add(e)}));r.size>0;){var l=r;r=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(o[e]||new Set).forEach((function(e){r.add(e)})))}))}return a.forEach((function(t){var i=s(e,t);i&&n.definitions.push(i)})),n}(i,"ChannelPollContext_GetViewablePoll")},NIpN:function(e,t,n){"use strict";var i=n("/MKj"),a=n("fvjX"),r=n("yR8l"),o=n("XDCx"),s=n("ati1"),l=n("mrSG"),c=n("q1tI"),d=n("/7QA"),u=n("geRD"),m=n("sUnt"),p=n("hnjF"),h=n("zTPm"),f=n("76Xh"),g=n("jqPd"),v=n("+80q"),b=n("PCM+"),k=n("dEDE"),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={archivingPoll:!1,archivingPollError:!1},t.deletePoll=function(){return Object(l.__awaiter)(t,void 0,void 0,(function(){return Object(l.__generator)(this,(function(e){switch(e.label){case 0:this.setState({archivingPoll:!0}),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.props.archivePoll(Object(u.a)({pollID:this.props.pollID}))];case 2:return e.sent(),this.props.closeModal(),[3,4];case 3:return e.sent(),this.setState({archivingPollError:!0}),[3,4];case 4:return this.setState({archivingPoll:!1}),[2]}}))}))},t}return Object(l.__extends)(t,e),t.prototype.render=function(){return c.createElement(m.a,{display:p.d.Flex,justifyContent:p.h.Center},c.createElement(h.a,{size:h.b.Small},c.createElement(f.a,{title:Object(d.d)("Delete Poll","Polls--DeletePollModal"),closeButton:{ariaLabel:Object(d.d)("Close","Polls--DeletePollModal"),onClick:this.props.closeModal}}),c.createElement(g.a,null,c.createElement(m.a,{display:p.d.Flex,flexDirection:p.e.Column,padding:{left:2,right:2,bottom:1,top:1}},c.createElement(v.a,null,Object(d.d)("Bits cheered in this poll will not be refunded to the Cheerer. Are you sure you want to archive this poll?","Polls--DeletePollModal")))),c.createElement(b.a,{secondaryButtonProps:{ariaLabel:Object(d.d)("Cancel","Polls--DeletePollModal-Aria"),children:Object(d.d)("Cancel","Polls--DeletePollModal"),onClick:this.props.closeModal},primaryButtonProps:{ariaLabel:Object(d.d)("Delete","Polls--DeletePollModal-Aria"),children:Object(d.d)("Delete","Polls--DeletePollModal"),onClick:this.deletePoll,state:this.state.archivingPoll?k.c.Loading:k.c.Default}})))},t}(c.Component);n.d(t,"a",(function(){return S}));var S=Object(a.d)(Object(i.b)(null,(function(e){return Object(a.b)({closeModal:o.d},e)})),Object(r.a)(s,{name:"archivePoll"}))(y)},NJiF:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"channelCurrentUser"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isStaff"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isSiteAdmin"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:84}};n.loc.source={body:"fragment channelCurrentUser on User {\nid\ndisplayName\nroles {\nisStaff\nisSiteAdmin\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},NNSq:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("mrSG"),a=n("/7QA"),r=n("sAMt");function o(e){return Object(i.__awaiter)(this,void 0,Promise,(function(){var t,n;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:t=null,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,a.p.apollo.client.query({query:r,variables:{login:e}})];case 2:return t=i.sent(),[3,4];case 3:return n=i.sent(),a.k.warn(n,"Failed to fetch user targeted by chat command.",{userLogin:e}),[3,4];case 4:return t&&t.data.user.id?[2,t.data.user.id]:[2,null]}}))}))}},NWfm:function(e,t,n){},NeSQ:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"activeMultipliersFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CommunityPointsMultiplier"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reasonCode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"factor"},arguments:[],directives:[]}]}}],loc:{start:0,end:85}};n.loc.source={body:"fragment activeMultipliersFragment on CommunityPointsMultiplier {\nreasonCode\nfactor\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},NgDb:function(e,t,n){},Nimz:function(e,t,n){},NxUI:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("/7QA"),o=n("Ws8v"),s=n("hnjF"),l=n("sUnt"),c=n("IbuL"),d=n("C7sF"),u=n("+80q"),m=n("X2PJ"),p=n("7d/q"),h=(n("6bwK"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.render=function(){return a.createElement(o.a,{padding:1,display:s.d.Flex,flexDirection:s.e.Row,className:"poll-service-error__service-error",justifyContent:s.h.Between,alignItems:s.b.Center,position:s.j.Relative},a.createElement(l.a,{display:s.d.Flex,flexDirection:s.e.Row},a.createElement(l.a,{className:"poll-service-error__service-error__icon"},a.createElement(c.a,{asset:d.a.Halt})),a.createElement(l.a,{margin:{left:1},display:s.d.Flex,flexDirection:s.e.Column},a.createElement(u.a,null,this.props.message),this.props.showTryAgain&&a.createElement(u.a,{color:m.c.Alt2,fontSize:m.d.Size6},Object(r.d)("Try again in a moment.","Polls--PollServiceError")))),a.createElement(o.a,{position:s.j.Absolute,attachTop:!0,attachRight:!0,className:"poll-service-error__service-error__close"},a.createElement(p.a,{size:p.b.Small,type:p.c.Secondary,onClick:this.props.onClose,ariaLabel:Object(r.d)("Close","Polls--PollServiceError"),icon:d.a.Close})))},t}(a.Component));n.d(t,"a",(function(){return h}))},O0eq:function(e,t,n){"use strict";var i=n("mrSG"),a=n("dMq0"),r=n("q1tI"),o=n("fvjX"),s=n("yR8l"),l=n("geRD"),c=n("2Ygb"),d=n("DMoW"),u=n("DwV5"),m=function(e){return!!e.accessToken},p=function(e,t){return function(n){return Object(o.d)(function(e,t){return function(n){return function(o){function s(n){var r=o.call(this,n)||this;return r.parentHasSkipped=!1,r.shouldRetryAuth=!0,r.loadingDataProp={loading:!0},r.erroredDataProp={loading:!1,error:new a.b({networkError:new Error("Error retrieving Access Token")})},r.retryQueryOnce=function(e){r.shouldRetryAuth&&e.code===d.wd.FORBIDDEN&&(r.shouldRetryAuth=!1,r.setAccessToken())},r.setAccessToken=function(){r.setState({isLoadingToken:!0},(function(){return Object(i.__awaiter)(r,void 0,void 0,(function(){var e,t=this;return Object(i.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,Object(u.b)(Object(u.a)("with-lwa-access-token"),this.shouldRetryAuth)];case 1:return e=n.sent(),this.setState({accessToken:e,isLoadingToken:!1},(function(){t.state.accessToken||(t.parentHasSkipped=!0)})),[3,3];case 2:return n.sent(),this.setState({accessToken:null,isLoadingToken:!1}),[3,3];case 3:return[2]}}))}))}))},r.didParentSkip=function(){var e=!1;return t&&t.skip&&(e="function"==typeof t.skip?t.skip(r.props):t.skip),e},r.getName=function(){return t&&t.name||"data"},r.optionsWithToken=function(){var t=r.getExistingOptions();return Object(l.g)(e)?t:r.getQueryOptions(t)},r.getExistingOptions=function(){return t&&t.options?"function"==typeof t.options?t.options(r.props):t.options:{}},r.getQueryOptions=function(e){var t=Object(i.__assign)(Object(i.__assign)({},e.variables),{accessToken:r.state.accessToken});return Object(i.__assign)(Object(i.__assign)({},e),{variables:t})},r.parentHasSkipped=r.didParentSkip(),r.state={accessToken:null,isLoadingToken:!0},r}return Object(i.__extends)(s,o),s.prototype.componentDidMount=function(){this.parentHasSkipped||this.setAccessToken()},s.prototype.shouldComponentUpdate=function(e,t){var n=!this.parentHasSkipped&&!this.didParentSkip(),i=this.state.isLoadingToken&&t.isLoadingToken;return!(n&&i)},s.prototype.componentDidUpdate=function(){this.parentHasSkipped&&!this.didParentSkip()&&(this.parentHasSkipped=!1,this.setAccessToken())},s.prototype.render=function(){var t,a,o=this.optionsWithToken(),s=o.variables&&m(o.variables)&&o.variables.accessToken;if(this.didParentSkip()||this.parentHasSkipped)return r.createElement(n,Object(i.__assign)({},this.props,{evaluatedOperationOptionsWithToken:o,skip:!0}));if(this.state.isLoadingToken){var c=((t={})[this.getName()]=this.loadingDataProp,t);return r.createElement(n,Object(i.__assign)({},this.props,c,{evaluatedOperationOptionsWithToken:o,skip:!0}))}if(null===this.state.accessToken){c=((a={})[this.getName()]=this.erroredDataProp,a);return r.createElement(n,Object(i.__assign)({},this.props,c,{evaluatedOperationOptionsWithToken:o,refreshTokenRevoked:!0,skip:!0}))}return r.createElement(n,Object(i.__assign)({},this.props,{retryIfPossible:this.retryQueryOnce,buildAccessTokenInput:Object(l.g)(e)?this.buildMutationInput.bind(this):void 0,evaluatedOperationOptionsWithToken:o,skip:this.parentHasSkipped||!s}))},s.prototype.buildMutationInput=function(e){return Object(l.a)(Object(i.__assign)(Object(i.__assign)({},e),{accessToken:this.state.accessToken}))},s.displayName=Object(c.a)(s.name,n),s}(r.Component)}}(e,t),Object(s.a)(e,Object(i.__assign)(Object(i.__assign)({},t),{options:function(e){return e.evaluatedOperationOptionsWithToken},skip:function(e){return e.skip}})))(n)}};n.d(t,"a",(function(){return p}))},OBzG:function(e,t,n){},OCTF:function(e,t,n){},OGC9:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"pollSettings"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PollSettings"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bitsVotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"pollSettingsBitsVotes"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriberMultiplier"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"pollSettingsSubscriberMultiplier"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subscriberOnly"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"pollSettingsSubscriberOnly"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"multichoice"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"pollSettingsMultichoice"},directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"pollSettingsBitsVotes"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PollSettingsBitsVotes"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isEnabled"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"pollSettingsSubscriberMultiplier"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PollSettingsSubscriberMultiplier"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isEnabled"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"pollSettingsSubscriberOnly"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PollSettingsSubscriberOnly"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isEnabled"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"pollSettingsMultichoice"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PollSettingsMultichoice"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isEnabled"},arguments:[],directives:[]}]}}],loc:{start:0,end:557}};n.loc.source={body:"fragment pollSettings on PollSettings {\nbitsVotes { ...pollSettingsBitsVotes }\nid\nsubscriberMultiplier { ...pollSettingsSubscriberMultiplier }\nsubscriberOnly { ...pollSettingsSubscriberOnly }\nmultichoice { ...pollSettingsMultichoice }\n}\nfragment pollSettingsBitsVotes on PollSettingsBitsVotes {\ncost\nisEnabled\n}\nfragment pollSettingsSubscriberMultiplier on PollSettingsSubscriberMultiplier {\nisEnabled\n}\nfragment pollSettingsSubscriberOnly on PollSettingsSubscriberOnly {\nisEnabled\n}\nfragment pollSettingsMultichoice on PollSettingsMultichoice {\nisEnabled\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},OOag:function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return k}));var i=n("mrSG"),a=n("q1tI"),r=n("/7QA"),o=n("geRD"),s=n("DMoW"),l=n("zwF8"),c=n("IQZc"),d=n("g+79"),u=n("+80q"),m=n("B30r"),p=n("UNTo"),h=n("W1jp"),f=n("nAiT"),g=n("EgE3");function v(e){var t=this;return{icon:a.createElement(d.a,{data:e.reward,size:d.b.ExtraSmall}),title:e.reward.title,body:a.createElement(c.a,{onRequirementsChange:function(t){return t?e.setTrayError(Object(f.e)(e.channelDisplayName||e.channelLogin,(function(){e.clearTray(),e.openReward()}))):e.clearTrayError()},onStockChange:function(t){return t?e.setTrayError(Object(f.c)()):e.clearTrayError()},reward:e.reward},a.createElement(u.a,{wordBreak:u.g.BreakWord},e.reward.prompt||void 0)),disableCommands:!0,disableBits:!0,ignoredRestrictions:new Set([s.I.FOLLOWERS_ONLY,s.I.SLOW_MODE,s.I.SUBSCRIBERS_ONLY,s.I.VERIFIED_ONLY]),pointsCost:Object(h.b)(e.reward),sendButtonOverride:l.b.CommunityPointsSpend,sendMessageHandler:{type:l.c.Custom,handleMessage:function(n){return Object(i.__awaiter)(t,void 0,void 0,(function(){var t;return Object(i.__generator)(this,(function(a){switch(a.label){case 0:return n.trim()?[4,k(e.channelID,e.reward,e.transactionID,n)]:(b(e),[2,!1]);case 1:return(t=a.sent()).data&&t.data.redeemCommunityPointsCustomReward&&!t.data.redeemCommunityPointsCustomReward.error?(e.clearTray(),Object(g.h)({channelID:e.channelID,channelLogin:e.channelLogin,reward:e.reward,transactionID:e.transactionID,viewTrackingID:e.viewTrackingID}),[2,!0]):(b(Object(i.__assign)(Object(i.__assign)({},e),{errorCode:t.data&&t.data.redeemCommunityPointsCustomReward&&t.data.redeemCommunityPointsCustomReward.error&&t.data.redeemCommunityPointsCustomReward.error.code||void 0,message:n})),[2,!1])}}))}))}}}}function b(e){var t=e.message?Object(m.a)(e.errorCode):Object(m.b)();e.setTrayError(t)}function k(e,t,n,a){return r.p.apollo.client.mutate(Object(i.__assign)({mutation:p},Object(o.a)({channelID:e,cost:Object(h.b)(t),prompt:t.prompt,rewardID:t.id,textInput:a,title:t.title,transactionID:n})))}},OTul:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"i",(function(){return c})),n.d(t,"b",(function(){return d})),n.d(t,"f",(function(){return u})),n.d(t,"c",(function(){return m})),n.d(t,"g",(function(){return p})),n.d(t,"e",(function(){return h})),n.d(t,"d",(function(){return f})),n.d(t,"h",(function(){return g}));var i=n("+GjP"),a=n("bRfm"),r=n("tLDJ"),o=n("rwoo"),s="https://static-cdn.jtvnw.net/emoticons/v1/",l="video-producer";function c(e){return void 0===e&&(e=""),"https://www.twitch.tv/"+e}function d(e){return void 0===e&&(e=""),"https://clips.twitch.tv/"+e}function u(e,t){return void 0===e&&(e=null),void 0===t&&(t={}),e?Object(i.g)(Object(r.gb)()+"/u/"+e+"/content/clips",t):Object(i.g)(Object(r.gb)()+"/content/clips",t)}function m(e,t){return void 0===t&&(t={}),Object(i.g)(c(""+e),t)}function p(e,t,n){return void 0===n&&(n={}),Object(i.g)(function(e,t){return void 0===e&&(e=null),void 0===t&&(t={}),e?Object(i.g)(Object(r.gb)()+"/u/"+e+"/content/"+l,t):Object(i.g)(Object(r.gb)()+"/content/"+l,t)}(e)+"/highlighter/"+t,n)}function h(e,t){return void 0===t&&(t={}),Object(i.g)(function(e){return c("directory/game/"+e)}(e)+"/clips",t)}function f(e,t){void 0===t&&(t={});var n=Object(i.g)(m(e)+"/clips",t);return a.a.os.isAndroid()?"intent://stream/"+e+"#Intent;scheme=twitch;package=tv.twitch.android.app;S.browser_fallback_url="+n+";end":n}function g(e){return void 0===e&&(e=o.a.Default),"/clips/"+e}},OUdD:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var i=n("1rIY"),a=n("VaVM"),r=Object(i.a)("RewardRedemptionContext",{closeRewardCenter:function(){return null},isRewardCenterOpen:!1,openReward:function(){return null},openEarnRatesList:function(){return null},rewardCenterState:{type:a.a.ListRewards},transactionID:""}),o=r.context,s=r.withContext},OXoN:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i="cf_video_chat_sunset"},OhOW:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("mrSG"),a=n("/7QA"),r=n("+U0Y"),o=n("5xw2");function s(e){return e.userPreferences.languagePreferences}a.p.store.registerReducer("userPreferences",(function(e,t){switch(void 0===e&&(e={languagePreferences:Object(o.b)()}),t.type){case r.a:return Object(i.__assign)(Object(i.__assign)({},e),{languagePreferences:t.languagePreferences});default:return e}}))},Ohqu:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SyncedSettingsSetChatPauseSetting"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"SetChatPauseSettingInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setChatPauseSetting"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"chatPauseSetting"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:137}};n.loc.source={body:"mutation SyncedSettingsSetChatPauseSetting($input: SetChatPauseSettingInput!) {\nsetChatPauseSetting(input: $input) {\nchatPauseSetting\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.SyncedSettingsSetChatPauseSetting=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"SyncedSettingsSetChatPauseSetting")},OpME:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return m})),n.d(t,"e",(function(){return p})),n.d(t,"d",(function(){return h}));var i=n("mrSG"),a=n("lZdE"),r=n("cpJf"),o={"B-?\\)":"B)","\\:-?[z|Z|\\|]":":|","\\:-?\\)":":)","\\:-?\\(":":(","\\:-?(p|P)":":P","\\;-?(p|P)":";P","\\:-?[\\\\/]":":/","\\;-?\\)":";)","R-?\\)":"R)",":>":":>","\\:\\&gt\\;":":>","[oO](_|\\.)[oO]":"O_o","\\:-?D":":D","\\:-?(o|O)":":O",">\\\\(":">(",":-?(?:7|L)":":7","\\:-?(S|s)":":S","#-?[\\\\/]":"#/","<\\]":"<]","<3":"<3","\\&lt\\;3":"<3","\\&lt\\;\\]":"<]","\\&gt\\;\\(":">("},s=["1.0","2.0","3.0"],l=new Set([457,33,42,0]);function c(e){for(var t=[],n=function(e){if(!e||null===e.id||null===e.token)return"continue";var n=o[e.token]||e.token,a=s.reduce((function(t,n){var i=t;return i&&(i=i.concat(", ")),i.concat("https://static-cdn.jtvnw.net/emoticons/v1/"+e.id+"/"+n+" "+n+"x")}),"");t.push(Object(i.__assign)(Object(i.__assign)({},e),{displayName:n,srcSet:a}))},a=0,r=e;a<r.length;a++){n(r[a])}return t}function d(e){return e.filter((function(e){return!!e&&!!e.id&&!!e.token})).sort((function(e,t){return parseInt(e.id,10)-parseInt(t.id,10)}))}function u(e){for(var t=[],n=0,i=e;n<i.length;n++){var a=i[n];if(a&&a.id&&a.emotes){for(var r={id:a.id,emotes:[]},o=0,s=a.emotes;o<s.length;o++){var l=s[o];l&&l.id&&l.token&&r.emotes.push(l)}t.push(r)}}return t}function m(e){for(var t=[],n=[],i=0,a=e;i<a.length;i++){var r=a[i];if(r&&r.id&&r.emotes){var o={id:r.id,emotes:c(d(r.emotes))};r.owner&&(o.owner=r.owner),l.has(parseInt(r.id,10))?t.push(o):n.push(o)}}return n.concat(t)}var p=function(e,t,n){var i=n||r.c,o=[],s=[],l=[],c=new RegExp("^"+Object(a.a)(t),"i");return e.forEach((function(e){i[e.token]?l.push(e):e.token.match(c)?o.push(e):s.push(e)})),o.sort((function(e,t){return e.token.localeCompare(t.token)})),s.sort((function(e,t){return e.token.localeCompare(t.token)})),l.sort((function(e,t){return i[t.token].count-i[e.token].count})),l.concat(o).concat(s)},h=function(e){var t={};return e.filter((function(e){return!t.hasOwnProperty(e.token)&&(t[e.token]=!0)}))}},"Os+Q":function(e,t,n){},OvAg:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"IncomingRaidLine_Channel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"channel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"50"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:146}};n.loc.source={body:"query IncomingRaidLine_Channel($channelLogin: String!) {\nchannel: user(login: $channelLogin) {\nid\ndisplayName\nprofileImageURL(width: 50)\nlogin\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.IncomingRaidLine_Channel=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"IncomingRaidLine_Channel")},Owek:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("/MKj"),o=n("fvjX"),s=n("yR8l"),l=n("wUQP"),c=n("XDCx"),d=n("kRBY"),u=n("8D7W"),m=n("DLI4"),p=n("w09P"),h=n("eDVu"),f=n("0Log"),g=n("geRD"),v=n("/aPz"),b=n("1rIY"),k=n("H31v"),y=n("ati1"),S=n("smCe"),C=n("i5+p"),E=n("SUI5"),w=n("MvLD"),O=n("5aDA"),D=Object(b.a)("ChannelPollContext",{viewablePoll:null,selfVoter:null,isUserPollAdmin:!1,bitsBalance:0,topContributor:null}),N=D.context,_=D.withContext,I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.voteInPoll=function(e){return Object(i.__awaiter)(t,void 0,Promise,(function(){var t,n,a,r,o,s;return Object(i.__generator)(this,(function(l){switch(l.label){case 0:if(!(this.props.data&&this.props.data.channel&&this.props.data.channel.viewablePoll&&this.props.data.channel.viewablePoll.ownedBy))return[2,Promise.resolve({data:{voteInPoll:null}})];t=this.props.data.channel.viewablePoll,n=t.settings.subscriberMultiplier.isEnabled&&this.props.data.channel&&this.props.data.channel.self&&this.props.data.channel.self.subscriptionBenefit?2:1,a=e.variables.input.tokens?e.variables.input.tokens.bits:0,r=a>0,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.props.voteInPoll(e)];case 2:return(o=l.sent()).data.voteInPoll&&!o.data.voteInPoll.error&&Object(g.i)(w,{login:this.props.channelLogin},(function(s){var l=Object(i.__assign)({},s);if(s.channel&&s.channel.viewablePoll&&s.channel.viewablePoll.self){var c=s.channel.viewablePoll.self.voter;if(l=p(l,(function(e){return e.channel.viewablePoll}),(function(e){var o=e.totalVoters,s={},l={};return c||(o=Math.max(e.totalVoters,t.totalVoters+1)),s.total=Math.max(e.votes.total,t.votes.total+n),r?(s.bits=Math.max(e.votes.bits,t.votes.bits+n),l.bits=Math.max(e.tokens.bits,t.tokens.bits+a)):s.base=Math.max(e.votes.bits,t.votes.bits+n),Object(i.__assign)(Object(i.__assign)({},e),{totalVoters:o,votes:Object(i.__assign)(Object(i.__assign)({},e.votes),s),tokens:Object(i.__assign)(Object(i.__assign)({},e.tokens),l)})})),l=p(l,(function(e){return e.channel.viewablePoll.choices}),(function(o){return o.map((function(o){var s=o.totalVoters,l={},d={};if(o.id===e.variables.input.choiceID){var u=t.choices.find((function(e){return e.id===o.id}))||o;c||s++,l.total=Math.max(o.votes.total,u.votes.total+n),r?(l.bits=Math.max(o.votes.bits,u.votes.bits+n),d.bits=Math.max(o.tokens.bits,u.tokens.bits+a)):l.base=Math.max(o.votes.bits,u.votes.bits+n)}return Object(i.__assign)(Object(i.__assign)({},o),{totalVoters:s,votes:Object(i.__assign)(Object(i.__assign)({},o.votes),l),tokens:Object(i.__assign)(Object(i.__assign)({},o.tokens),d)})}))})),o.data.voteInPoll&&o.data.voteInPoll.voter&&(l=p(l,(function(e){return e.channel.viewablePoll.self.voter}),(function(){return o.data.voteInPoll.voter}))),l.currentUser&&l.currentUser.bitsBalance){var d=l.currentUser.bitsBalance-a;l=p(l,(function(e){return e.currentUser.bitsBalance}),(function(){return d}))}}return l})),[2,Promise.resolve(o)];case 3:return s=l.sent(),[2,Promise.reject(s)];case 4:return[2]}}))}))},t.createPoll=function(){t.props.showModal(E.a,{channelID:t.props.data.channel.id})},t.terminatePoll=function(){return Object(i.__awaiter)(t,void 0,void 0,(function(){var e,t;return Object(i.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.props.terminatePoll(Object(g.a)({pollID:this.props.data.channel.viewablePoll.id}))];case 1:return e=n.sent(),[2,Promise.resolve(e)];case 2:return t=n.sent(),[2,Promise.reject(t)];case 3:return[2]}}))}))},t.archivePoll=function(){return Object(i.__awaiter)(t,void 0,void 0,(function(){var e,t;return Object(i.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.props.archivePoll(Object(g.a)({pollID:this.props.data.channel.viewablePoll.id}))];case 1:return e=n.sent(),[2,Promise.resolve(e)];case 2:return t=n.sent(),[2,Promise.reject(t)];case 3:return[2]}}))}))},t.getBitsAmount=function(){var e=t.props.data;return e&&e.currentUser&&e.currentUser.bitsBalance?e.currentUser.bitsBalance:0},t}return Object(i.__extends)(t,e),t.prototype.render=function(){var e=null,t=null;this.props.data&&this.props.data.channel&&this.props.data.channel.viewablePoll&&(e=this.props.data.channel.viewablePoll,this.props.data.channel.viewablePoll.self&&(t=this.props.data.channel.viewablePoll.self.voter));var n=!(!this.props.user||this.props.user.login!==this.props.channelLogin),i=!!(this.props.user&&this.props.user.roles&&this.props.user.roles.isStaff),r=!1;this.props.data&&this.props.data.channel&&this.props.data.channel.self&&(r=this.props.data.channel.self.isEditor||this.props.data.channel.self.isModerator||i||n);var o={viewablePoll:e,selfVoter:t,isUserPollAdmin:r,bitsBalance:this.getBitsAmount(),topContributor:e&&e.topContributor};return this.props.data&&this.props.data.channel&&this.props.data.channel.viewablePoll&&!Object(C.e)(this.props.data.channel.viewablePoll.status)&&(o.terminatePoll=this.terminatePoll,o.voteInPoll=this.voteInPoll),this.props.data&&this.props.data.channel&&this.props.data.channel.viewablePoll&&(o.archivePoll=this.archivePoll),(this.props.data&&this.props.data.channel&&!this.props.data.channel.viewablePoll||this.props.data&&this.props.data.channel&&this.props.data.channel.viewablePoll&&Object(C.e)(this.props.data.channel.viewablePoll.status))&&(o.createPoll=this.createPoll),a.createElement(N.Provider,{value:o},this.props.children)},t}(a.Component),M=Object(o.d)(Object(s.a)(w,{skip:function(e){return!e.channelLogin||!e.isPollsEnabled},options:function(e){return{variables:{login:e.channelLogin}}}}),Object(s.a)(O,{name:"voteInPoll"}),Object(s.a)(y,{name:"archivePoll"}),Object(s.a)(S,{name:"terminatePoll"}),Object(h.a)((function(e){return{query:w,variables:{login:e.channelLogin},skip:!(e.data&&e.data.channel&&e.channelLogin&&e.isPollsEnabled),topic:e.data&&e.data.channel?Object(v.j)(e.data.channel.id):"",types:[f.PubsubMessageType.PollUpdateEvent,f.PubsubMessageType.PollArchivedEvent,f.PubsubMessageType.PollCompletedEvent,f.PubsubMessageType.PollCreatedEvent,f.PubsubMessageType.PollTerminatedEvent,f.PubsubMessageType.PollModeratedEvent],mutator:function(t,n){var a=Object(C.g)(t.data.poll),r=Object(C.f)(a.status),o=n.channel&&n.channel.viewablePoll&&n.channel.viewablePoll.id===t.data.poll.poll_id;if(!r)return o?p(n,(function(e){return e.channel}),(function(e){return e.viewablePoll=null,e})):n;var s=t.type===f.PubsubMessageType.PollCreatedEvent,l=n.channel&&n.channel.viewablePoll&&n.channel.viewablePoll.id===t.data.poll.poll_id&&n.channel.viewablePoll.votes.total<=a.votes.total;return(s||l)&&(n=p(n,(function(e){return e.channel}),(function(e){return e.viewablePoll=Object(i.__assign)(Object(i.__assign)({},e.viewablePoll),a),e}))),s&&(n=e.user?p(n,(function(e){return e.channel.viewablePoll.self}),(function(e){return Object(i.__assign)(Object(i.__assign)({__typename:"PollSelfEdge"},e),{voter:null})})):p(n,(function(e){return e.channel.viewablePoll.self}),(function(){return null}))),n}}})),Object(h.a)((function(e){return{query:w,variables:{login:e.channelLogin},type:f.PubsubMessageType.UserBitsBalanceUpdate,skip:!(e.data&&e.data.channel&&e.data.currentUser&&e.data.currentUser.id&&e.channelLogin&&e.isPollsEnabled),topic:e.data&&e.data.currentUser?Object(v.R)(e.data.currentUser.id):"",mutator:function(e,t){return t&&e.message_type===k.b.Balance?(t.currentUser&&e.data&&(t=p(t,(function(e){return e.currentUser.bitsBalance}),(function(){return e.data.balance}))),t):t}}})))(I);var j=Object(o.d)(Object(s.a)(u,{skip:function(e){return!e.channelLogin||!Object(l.c)(m.a)},options:function(e){return{variables:{login:e.channelLogin}}}}),Object(r.b)((function(e){return{user:Object(d.e)(e)}}),(function(e){return Object(o.b)({showModal:c.e},e)})))((function(e){var t=!!(e.data&&e.data.channel&&e.data.channel.roles&&(e.data.channel.roles.isAffiliate||e.data.channel.roles.isPartner)),n=Object(l.c)(m.a)&&t;return a.createElement(M,Object(i.__assign)({isPollsEnabled:n},e))}));n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return _}))},OxSk:function(e,t,n){},P5MF:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Core_Services_Spade_EmoteCard_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasPrime"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"canPrimeSubscribe"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionBenefit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"purchasedWithPrime"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:176}};n.loc.source={body:"query Core_Services_Spade_EmoteCard_User($channelID: ID!) {\nuser(id: $channelID) {\nid\nhasPrime\nself {\ncanPrimeSubscribe\nsubscriptionBenefit {\nid\ntier\npurchasedWithPrime\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.Core_Services_Spade_EmoteCard_User=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"Core_Services_Spade_EmoteCard_User")},P6kH:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return f}));var i,a=n("/7QA"),r=n("DMoW"),o=n("dGMd"),s="owl2019_emote_ids",l="OverwatchLeague",c="137512364",d="12658",u="324",m="139075904",p=5e8;function h(e){return e.emote.subscriptionProduct?e.emote.subscriptionProduct.id===d?i.Prime:e.emote.subscriptionProduct.id===u?i.Turbo:(t=e.emote.id,a.b.get(s,[]).includes(t)?i.OWL2019:e.emote.subscriptionProduct.owner&&e.emote.subscriptionProduct.owner.id?e.emote.subscriptionProduct.owner.id===m||e.emote.subscriptionProduct.state===r.Xc.INACTIVE?i.LimitedTime:i.Subscription:i.Unavailable):e.emote.setID===o.a?i.ChannelPoints:e.emote.setID&&f(e.emote.setID)?i.BitsTier:i.Global;var t}function f(e){return parseInt(e,10)>=p}!function(e){e[e.Unknown=0]="Unknown",e[e.Prime=1]="Prime",e[e.Turbo=2]="Turbo",e[e.OWL2019=3]="OWL2019",e[e.LimitedTime=4]="LimitedTime",e[e.ChannelPoints=5]="ChannelPoints",e[e.Unavailable=6]="Unavailable",e[e.Subscription=7]="Subscription",e[e.BitsTier=8]="BitsTier",e[e.Global=9]="Global"}(i||(i={}))},"PCM+":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("pVnL"),a=n.n(i),r=n("VbXa"),o=n.n(r),s=n("q1tI"),l=n("dEDE"),c=n("hnjF"),d=n("sUnt"),u=n("Ws8v"),m=n("zTPm"),p=function(e){function t(){return e.apply(this,arguments)||this}return o()(t,e),t.prototype.render=function(){var e=this.props.size===m.b.Small?{fullWidth:!0,flexGrow:1,flexShrink:1}:{};return s.createElement(u.a,{padding:1,display:c.d.Flex,alignItems:c.b.Center,justifyContent:c.h.Start,flexDirection:c.e.RowReverse},s.createElement(d.a,e,s.createElement(l.a,a()({type:l.d.Primary,fullWidth:!0},this.props.primaryButtonProps))),s.createElement(d.a,e,this.props.secondaryButtonProps&&s.createElement(d.a,{padding:{right:1}},s.createElement(l.a,a()({type:l.d.Secondary,fullWidth:!0},this.props.secondaryButtonProps)))))},t}(s.Component);p.displayName="ModalFooter"},PkcC:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("q1tI"),a=function(e){var t={};return null!==e.inputColorHex&&(t["--color-accent"]=e.inputColorHex),i.createElement("div",{style:t},e.children)};a.displayName="ColorContext"},PrJw:function(e,t,n){"use strict";var i=n("vGFN");n.d(t,"a",(function(){return i.b})),n.d(t,"b",(function(){return i.c})),n.d(t,"c",(function(){return i.d})),n.d(t,"d",(function(){return i.e})),n.d(t,"e",(function(){return i.f})),n.d(t,"f",(function(){return i.g})),n.d(t,"g",(function(){return i.h})),n.d(t,"h",(function(){return i.i})),n.d(t,"i",(function(){return i.j})),n.d(t,"j",(function(){return i.k})),n.d(t,"k",(function(){return i.m})),n.d(t,"l",(function(){return i.p})),n.d(t,"m",(function(){return i.q}))},PtXu:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("fvjX"),o=n("/7QA"),s=n("gcd7"),l=n("AKV8"),c=n("yzwe"),d=n("3HtZ"),u=n("QVaV"),m=n("DMoW"),p=n("3kHA"),h=n("a6LY"),f=n("vSeP"),g=n("Ff8q"),v=n("H82h"),b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.modUser=function(e){var n=e.trim().split(/\s+/),i=t.userLogin(n[0]);return 1===n.length&&i&&0!==i.length?{deferred:t.props.modUserMutation(i).then((function(e){if(e&&e.modUser&&e.modUser.error)switch(e.modUser.error.code){case m.Sb.FORBIDDEN:return{notice:y()};case m.Sb.TARGET_ALREADY_MOD:return{notice:Object(o.d)("{login} is already a moderator of this channel.",{login:i},"ModCommandHandler")};case m.Sb.TARGET_IS_CHAT_BANNED:return{notice:Object(o.d)("{login} is banned in this channel. You must unban this user before granting mod status.",{login:i},"ModCommandHandler")};case m.Sb.TARGET_NOT_FOUND:return{notice:k(i)};default:return{notice:S()}}return t.props.channelID&&e&&e.modUser&&e.modUser.target&&e.modUser.target.id&&Object(v.a)(h.a.ModUser,t.props.channelID,e.modUser.target.id,h.b.ChatCommand),{notice:Object(o.d)("You have added {login} as a moderator of this channel.",{login:i},"ModCommandHandler")}})).catch((function(){return{notice:S()}}))}:{deferred:Promise.resolve({notice:w(),error:p.a.InvalidParameters})}},t.mods=function(e){return{deferred:o.p.apollo.client.query({query:d,fetchPolicy:"network-only",variables:{login:t.props.channelLogin}}).then((function(e){if(!e.data.user||!e.data.user.mods)return{notice:C()};var t=e.data.user.mods.edges.filter((function(e){return e.node.login}));if(0===t.length)return{notice:Object(o.d)("There are no moderators of this channel.","ModCommandHandler")};var n=t.map((function(e){return e.node.login})).join(", ");return{notice:Object(o.d)("The moderators of this channel are: {mods}.",{mods:n},"ModCommandHandler")}})).catch((function(){return{notice:C()}}))}},t.unmodUser=function(e){var n=e.trim().split(/\s+/),i=t.userLogin(n[0]);return 1===n.length&&i&&0!==i.length?{deferred:t.props.unmodUserMutation(i).then((function(e){if(e&&e.unmodUser&&e.unmodUser.error)switch(e.unmodUser.error.code){case m.ed.FORBIDDEN:return{notice:y()};case m.ed.TARGET_NOT_FOUND:return{notice:k(i)};case m.ed.TARGET_NOT_MOD:return{notice:Object(o.d)("{login} is currently not a moderator of this channel.",{login:i},"ModCommandHandler")};default:return{notice:E()}}return t.props.channelID&&e&&e.unmodUser&&e.unmodUser.target&&e.unmodUser.target.id&&Object(v.a)(h.a.UnmodUser,t.props.channelID,e.unmodUser.target.id,h.b.ChatCommand),{notice:Object(o.d)("You have removed {login} as a moderator of this channel.",{login:i},"ModCommandHandler")}})).catch((function(){return{notice:E()}}))}:{deferred:Promise.resolve({notice:O(),error:p.a.InvalidParameters})}},t.userLogin=function(e){return e=Object(g.a)(e),Object(u.b)(e)?e:t.props.activeChattersAPI?t.props.activeChattersAPI.getActiveChatterLoginFromDisplayName(e)||e:t.props.displayNameToLogin&&t.props.displayNameToLogin(e)||e},t}return Object(i.__extends)(t,e),t.prototype.render=function(){return a.createElement(a.Fragment,null,a.createElement(s.a,{args:[{name:"username",isRequired:!0}],channelLogin:this.props.channelLogin,command:"mod",description:Object(o.d)("Grant moderator status to a user","ModCommandHandler"),handler:this.modUser,helpText:w(),permissionLevel:p.b.Broadcaster}),a.createElement(s.a,{channelLogin:this.props.channelLogin,command:"mods",description:Object(o.d)("Display a list of moderators for this channel","ModCommandHandler"),handler:this.mods,helpText:Object(o.d)('Usage: "/mods" - Lists the moderators of this channel.',"ModCommandHandler"),permissionLevel:p.b.Viewer}),a.createElement(s.a,{args:[{name:"username",isRequired:!0}],channelLogin:this.props.channelLogin,command:"unmod",description:Object(o.d)("Revoke moderator status from a user","ModCommandHandler"),handler:this.unmodUser,helpText:O(),permissionLevel:p.b.Broadcaster}))},t}(a.Component);function k(e){return Object(o.d)("Invalid username: {login}",{login:e},"ModCommandHandler")}function y(){return Object(o.d)("You don't have permission to perform that action.","ModCommandHandler")}function S(){return Object(o.d)("Unable to add moderator.","ModCommandHandler")}function C(){return Object(o.d)("There was a problem fetching the list of mods.","ModCommandHandler")}function E(){return Object(o.d)("Unable to remove moderator.","ModCommandHandler")}function w(){return Object(o.d)('Usage: "/mod <username>" - Grants moderator status to a user. Use "/unmod" to revoke mod status. Use "/mods" to list the moderators of this channel.',"ModCommandHandler")}function O(){return Object(o.d)('Usage: "/unmod <username>" - Revokes moderator status from a user.',"ModCommandHandler")}var D=function(e){return{channelID:e.channelID}},N=Object(r.d)(f.a,Object(c.a)(D),Object(l.a)(D))(b);n.d(t,"a",(function(){return N}))},"Pub/":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("HzXE");function a(e,t,n){try{return e.readQuery({query:i,variables:{channelID:t,targetUserID:n}})}catch(e){}}},Q34B:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e.LIVE="LIVE",e.VIDEO="VIDEO",e.COLLECTION="COLLECTION",e.CLIP="CLIP",e.NONE="NONE"}(i||(i={}))},Q8Sx:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdateRoomModes"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateRoomModesInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateRoomModes"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"room"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"slowModeDurationSeconds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"r9kModeEnabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotesOnlyModeEnabled"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"minimumSlowModeDurationSeconds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"maximumSlowModeDurationSeconds"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:254}};n.loc.source={body:"mutation UpdateRoomModes($input: UpdateRoomModesInput!) {\nupdateRoomModes(input: $input) {\nroom {\nid\nmodes {\nslowModeDurationSeconds\nr9kModeEnabled\nemotesOnlyModeEnabled\n}\n}\nerror {\ncode\nminimumSlowModeDurationSeconds\nmaximumSlowModeDurationSeconds\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.UpdateRoomModes=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"UpdateRoomModes")},Q94S:function(e,t,n){"use strict";n.d(t,"d",(function(){return f})),n.d(t,"a",(function(){return g})),n.d(t,"e",(function(){return v})),n.d(t,"f",(function(){return b})),n.d(t,"b",(function(){return k})),n.d(t,"c",(function(){return C}));var i=n("mrSG"),a=(n("cr+I"),n("+GjP")),r=n("vRsq"),o=n("2xye"),s=n("+aHn"),l=n("efpB"),c=n("Hz5m");function d(e){return e&&e.hosting&&e.hosting.stream&&e.hosting.stream.game&&e.hosting.stream.game.name}function u(e){return e&&e.hosting&&e.hosting.broadcastSettings&&e.hosting.broadcastSettings.language}function m(e){return e&&e.stream&&e.stream.game&&e.stream.game.name}function p(e){return e&&e.lastBroadcast&&e.lastBroadcast.game&&e.lastBroadcast.game.name}function h(e){return e&&e.broadcastSettings&&e.broadcastSettings.language}function f(e,t,n,a){var r=e&&e.login;return Object(i.__assign)(Object(i.__assign)({channel:r,channel_id:e&&e.id||null,game:m(e)||S(t)||w(n)||p(e),hosted_game:d(e),is_following:!(!e||!e.self||null===e.self.follower||null===e.self.follower.node),is_live:!!(e&&e.stream&&e.stream.id&&e.stream.id.length>0),language:u(e)||h(e)||y(t)||E(n)},function(e,t){var n=e&&e.id,i=t&&t.id;if(!n&&!i)return null;var a=null,r=null;e?a=e.broadcastType:i&&(r=o.SpadeVideoBroadcastType.Clip);r||(r=a?Object(s.a)(a):null);return{vod_type:r,vod_id:n||i}}(t,a)),Object(l.b)())}function g(e){return e.match.params.contentType===r.g.Clip&&e.match.params.contentID||null}function v(e){return e.match.params.videoID||e.match.params.contentType===r.g.Video&&e.match.params.contentID||null}function b(e){return e.match.params.contentType!==c.a.Video&&e.match.params.contentType!==c.a.Clip&&e.match.params.contentType!==c.a.Collection&&e.match.params.page!==c.c.Videos?null:Object(a.a)(e.location.search,"filter")}function k(e){return e.match.params.collectionID?e.match.params.collectionID:e.match.params.contentType===r.g.Collection&&e.match.params.contentID?e.match.params.contentID:Object(a.a)(e.location.search,"collection")||void 0}function y(e){return e&&e.language}function S(e){return e&&e.game&&e.game.name}function C(e){return e&&e.items&&e.items.edges&&e.items.edges[0]&&e.items.edges[0].node&&e.items.edges[0].node.id?e.items.edges[0].node:null}function E(e){var t=C(e);return t&&t.language}function w(e){var t=C(e);return t&&t.game&&t.game.name}},QY5S:function(e,t,n){},QZCf:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SplitLight_CreateHighlight"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CreateMultiVideoHighlightInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createMultiVideoHighlight"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"highlight"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:142}};n.loc.source={body:"mutation SplitLight_CreateHighlight($input: CreateMultiVideoHighlightInput!) {\ncreateMultiVideoHighlight(input: $input) {\nhighlight {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.SplitLight_CreateHighlight=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"SplitLight_CreateHighlight")},QdeI:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("q1tI"),a=n("L5dg"),r=n("uOxs"),o=function(){return i.createElement(i.Fragment,null,i.createElement(r.a,{gutterSize:r.c.ExtraSmall,childWidth:r.b.Large,placeholderItems:20},i.createElement(a.a,null)))}},Qdho:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"RoomSelector"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"channel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"channelRooms"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"topic"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isPreviewable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"minimumAllowedRole"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isArchived"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isMuted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isUnread"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"unreadMentionCount"},arguments:[],directives:[]}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"cheer"},directives:[]},{kind:"Field",name:{kind:"Name",value:"hosting"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"banStatus"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isPermanent"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"isChannelMember"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isModerator"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionBenefit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:395}};i.loc.source={body:'#import "twilight/features/chat/models/cheer-fragment.gql"\nquery RoomSelector ($login: String!) {\nchannel: user(login: $login) {\nid\ndisplayName\nchannelRooms {\nname\nid\ntopic\nisPreviewable\nminimumAllowedRole\nself {\nisArchived\nisMuted\nisUnread\nunreadMentionCount\n}\n}\n...cheer\nhosting {\nid\n}\nself {\nbanStatus {\nisPermanent\n}\nisChannelMember\nisModerator\nsubscriptionBenefit {\nid\n}\n}\nstream {\nid\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("F9eG").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})));var r={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),r[e.name.value]=t}})),e.exports=i,e.exports.RoomSelector=function(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=r[t]||new Set,a=new Set,s=new Set;for(i.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(r[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(t){var i=o(e,t);i&&n.definitions.push(i)})),n}(i,"RoomSelector")},QfRJ:function(e,t,n){},R2Ti:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Chat_AllowRejectedCheerMessage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AllowRejectedCheerInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allowRejectedCheer"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:118}};n.loc.source={body:"mutation Chat_AllowRejectedCheerMessage($input: AllowRejectedCheerInput!) {\nallowRejectedCheer(input: $input) {\nid\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.Chat_AllowRejectedCheerMessage=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"Chat_AllowRejectedCheerMessage")},R4sh:function(e,t,n){"use strict";function i(e){var t=[e[0],e[1],e[2]].map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}));return.2126*t[0]+.7152*t[1]+.0722*t[2]}function a(e,t){var n=i(e)+.05,a=i(t)+.05;return n>a?n/a:a/n}n.d(t,"a",(function(){return a}))},RBh2:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return l}));var i,a=n("/7QA"),r=n("2xye");function o(e){var t={user_id:e.userID||null,channel_id:e.channelID,poll_id:e.pollID,total_responses:e.totalResponses,has_subscriber_bonus:e.hasSubscriberBonus,is_subscriber_only:e.isSubscriberOnly,bits_per_vote:e.bitsPerVote,poll_duration_seconds_remaining:e.pollDurationSecondsRemaining};a.o.track(r.SpadeEventType.PollsClientImpression,t)}function s(e){var t={user_id:e.userID||null,channel_id:e.channelID,poll_id:e.pollID,action:e.action,bits_spent:e.bitsSpent||null};a.o.track(r.SpadeEventType.PollsClientInteraction,t)}function l(e){var t=Date.parse(e.pollStartTime)+1e3*e.pollDuration-Date.now(),n={user_id:e.userID||null,poll_id:e.pollID,time_difference_ms:Math.abs(e.serverTimeRemaining-t),server_time_remaining_ms:e.serverTimeRemaining,client_time_remaining_ms:t,device_id:a.p.session.deviceID};a.o.track(r.SpadeEventType.PollsTimeDifferenceImpression,n)}!function(e){e.Vote="vote",e.Expand="expand",e.Collapse="collapse"}(i||(i={}))},RNNG:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"f",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return u})),n.d(t,"a",(function(){return m}));var i=n("mrSG"),a=n("DpwM"),r=Number.MAX_VALUE,o=Number.MIN_VALUE,s=function(e){return Object(i.__assign)({commentCount:0,maxOffset:o,minOffset:r,parentComments:{},offsets:{},replies:{}},e)},l=function(e,t){var n=h(e);return t.forEach((function(e){var t,a=e.id,r=e.contentOffset,o=e.parentId;if(""===o){n.minOffset=Math.min(n.minOffset,r),n.maxOffset=Math.max(n.maxOffset,r),n.parentComments=Object(i.__assign)(Object(i.__assign)({},n.parentComments),((t={})[a]=e,t));var s=n.offsets[r];Array.isArray(s)?s.includes(a)||(n.offsets[r]=s.concat(a),n.commentCount++):(n.offsets[r]=[a],n.commentCount++)}else{var l=n.replies[o];if(Array.isArray(l)){var c=l.findIndex((function(t){return t.id===e.id}));-1!==c?l[c]=e:(n.replies[o]=l.concat(e),n.commentCount++)}else n.replies[o]=[e],n.commentCount++}})),n},c=function(e,t){if(t in e.parentComments)return e.parentComments[t]},d=function(e,t){var n=h(e);return Object(a.h)(t)?v(n,t.parentId,t.id):g(n,t.id)},u=function(e,t){if(e.commentCount<t||p(e))return e;for(var n=e;n.commentCount>t&&!p(e);)n=b(n,n.minOffset);return n},m=function(e,t){var n=h(e);return Object.keys(e.parentComments).forEach((function(i){var a=e.parentComments[i];t(a)||(n=g(n,a.id))})),Object.keys(e.replies).forEach((function(i){e.replies[i].forEach((function(e){t(e)||(n=v(n,e.id,e.parentId))}))})),n},p=function(e){return e.minOffset===e.maxOffset},h=function(e){return{commentCount:e.commentCount,maxOffset:e.maxOffset,minOffset:e.minOffset,offsets:f(e.offsets),parentComments:Object(i.__assign)({},e.parentComments),replies:Object(i.__assign)({},e.replies)}},f=function(e){return Object.keys(e).reduce((function(t,n){return t[Number(n)]=e[Number(n)].slice(),t}),{})},g=function(e,t){if(!(t in e.parentComments))return e;var n=e.parentComments[t].contentOffset,i=e.offsets[n],a=[];if(i&&(a=i.filter((function(e){return e!==t}))),e.offsets[n]=a,delete e.parentComments[t],e.commentCount--,t in e.replies){var r=e.replies[t].length;delete e.replies[t],e.commentCount-=r}return e},v=function(e,t,n){if(!(t in e.replies))return e;var i=e.replies[t].length,a=e.replies[t].filter((function(e){if(e.id!==n)return e}));e.replies[t]=a,0===a.length&&delete e.replies[t];var r=i-a.length;return e.commentCount-=r,e},b=function(e,t){return t>=e.minOffset&&t<=e.maxOffset&&!p(e)?(t in e.offsets&&e.offsets[t].forEach((function(t){e=g(e,t)})),delete e.offsets[t],e.maxOffset===t?e.maxOffset--:e.minOffset===t&&e.minOffset++,e):e}},RS58:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("1rIY"),o=n("B9yr"),s=Object(r.a)("ChatInputTrayContext",{setTray:function(e){return null},clearTray:function(){return null},setModifierTray:function(e){return null},clearModifierTray:function(){return null},setTrayError:function(e){return null},clearTrayError:function(){return null},tray:void 0,setAutocompleteInputRef:function(e){return null},setChatInputRef:function(e){return null},appendToTrayInput:function(e){return null}}),l=s.context,c=s.withContext,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={tray:void 0,prevPropsChannelLogin:t.props.channelLogin,baseInputValue:""},t.setTray=function(e){var n=t.state.baseInputValue;t.autocompleteInputRef&&!t.state.tray&&(n=t.autocompleteInputRef.getValue()),t.setState((function(){return{tray:e,baseInputValue:n,modifierTray:void 0}}),(function(){return t.setAutocompleteInputValue(e.inputValue||"",!0)}))},t.clearTray=function(){var e=t.state.baseInputValue;t.setState((function(){return{tray:void 0,modifierTray:void 0,baseInputValue:""}}),(function(){t.setAutocompleteInputValue(e)}))},t.setModifierTray=function(e){t.setState({modifierTray:e}),e.inputValue&&t.setAutocompleteInputValue(e.inputValue)},t.setTrayError=function(e){var n=t.state.tray;n&&(n.error=e,t.setState({tray:n}))},t.clearTrayError=function(){var e=t.state.tray;e&&(delete e.error,t.setState({tray:e}))},t.clearModifierTray=function(){t.setState({modifierTray:void 0})},t.setAutocompleteInputRef=function(e){t.autocompleteInputRef=e},t.setChatInputRef=function(e){t.chatInputRef=e},t.appendToTrayInput=function(e){if(t.autocompleteInputRef){var n=t.autocompleteInputRef.getValue();t.autocompleteInputRef.setValue(Object(o.a)(n,e))}},t}return Object(i.__extends)(t,e),Object.defineProperty(t.prototype,"tray",{get:function(){return this.state.modifierTray?this.state.modifierTray:this.state.tray},enumerable:!0,configurable:!0}),t.getDerivedStateFromProps=function(e,t){return e.channelLogin!==t.prevPropsChannelLogin?{prevPropsChannelLogin:e.channelLogin,tray:void 0,modifierTray:void 0,baseInputValue:""}:null},t.prototype.render=function(){return a.createElement(l.Provider,{value:{tray:this.tray,setTray:this.setTray,clearTray:this.clearTray,setModifierTray:this.setModifierTray,clearModifierTray:this.clearModifierTray,setAutocompleteInputRef:this.setAutocompleteInputRef,setChatInputRef:this.setChatInputRef,setTrayError:this.setTrayError,clearTrayError:this.clearTrayError,appendToTrayInput:this.appendToTrayInput}},this.props.children)},t.prototype.setAutocompleteInputValue=function(e,t){this.autocompleteInputRef&&(this.autocompleteInputRef.setValue(e),this.chatInputRef&&t&&this.chatInputRef.focus())},t}(a.Component);n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return d}))},RTtf:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"channelVideo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Video"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lengthSeconds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"publishedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"scope"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"previewThumbnailURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"126"}},{kind:"Argument",name:{kind:"Name",value:"height"},value:{kind:"IntValue",value:"71"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"boxArtURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"138"}},{kind:"Argument",name:{kind:"Name",value:"height"},value:{kind:"IntValue",value:"190"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channel"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"language"},arguments:[],directives:[]}]}}],loc:{start:0,end:291}};i.loc.source={body:'#import "twilight/features/channel/queries/channel.gql"\nfragment channelVideo on Video {\nid\nbroadcastType\ntitle\ndescription\nlengthSeconds\npublishedAt\nviewCount\nscope\npreviewThumbnailURL(width: 126 height: 71)\ngame {\nid\nboxArtURL(width: 138 height: 190)\nname\n}\nowner {\n...channel\n}\nlanguage\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("BbLt").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)}))),e.exports=i},Ro6I:function(e,t,n){},RtvB:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelPage_ChannelVideoCount"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"videos"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:105}};n.loc.source={body:"query ChannelPage_ChannelVideoCount($login: String!) {\nuser(login: $login) {\nid\nvideos {\ntotalCount\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.ChannelPage_ChannelVideoCount=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"ChannelPage_ChannelVideoCount")},"S+L1":function(e,t,n){},S4w9:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"UserEmotes"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"withOwner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteSets"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"withOwner"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"28"}}],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:188}};n.loc.source={body:"query UserEmotes ($withOwner: Boolean!) {\ncurrentUser {\nid\nemoteSets {\nid\nemotes {\nid\nsetID\ntoken\n}\nowner @include(if: $withOwner) {\nid\nlogin\ndisplayName\nprofileImageURL(width: 28)\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.UserEmotes=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"UserEmotes")},S58p:function(e,t,n){},SCHm:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CommunityPoints_Icon"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"community"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"pointCustomizationFragment"},directives:[]}]}}]}}],loc:{start:0,end:213}};i.loc.source={body:'#import "twilight/features/community-points/models/point-customization-fragment.gql"\nquery CommunityPoints_Icon($channelLogin: String!) {\ncommunity: user(login:$channelLogin) {\nid\n...pointCustomizationFragment\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("XBQy").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})));var r={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),r[e.name.value]=t}})),e.exports=i,e.exports.CommunityPoints_Icon=function(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=r[t]||new Set,a=new Set,s=new Set;for(i.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(r[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(t){var i=o(e,t);i&&n.definitions.push(i)})),n}(i,"CommunityPoints_Icon")},SHP0:function(e,t,n){},"SHn+":function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("sUnt"),o=n("hnjF"),s=n("Ws8v"),l=n("+80q"),c=n("X2PJ"),d=n("Jsra"),u=n("vCsY"),m=function(e){return a.createElement(r.a,{margin:{right:1},display:o.d.Flex,alignItems:e.alignItems||o.b.Center},a.createElement(r.a,{margin:{right:.5}},a.createElement(s.a,{display:o.d.Flex,alignItems:o.b.Center},a.createElement(l.a,{fontSize:c.d.Size5,"data-test-selector":"labeled-text-label"},e.label))),a.createElement(l.a,{fontSize:c.d.Size5,ellipsis:!0},a.createElement(d.a,Object(i.__assign)({to:e.linkTo},Object(u.a)(e),{targetBlank:e.targetBlank,"data-test-selector":"labeled-link-title"}),e.title)))};n.d(t,"a",(function(){return m}))},SSXq:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("3yfl");function a(e,t){var n;void 0===t&&(t="www"),n=t;var a="https://"+(t=Object(i.b)(n)?n:"www")+".twitch.tv",r=window.location,o=r.hostname,s=r.origin;if(o.endsWith(".twitch.tech")){var l=o.substr(0,o.length-".twitch.tech".length),c=l,d=l.indexOf("-");d>=0&&Object(i.b)(l.substr(0,d))&&(c=l.substr(d+1)),a="www"===t?"https://"+c+".twitch.tech":"https://"+t+"-"+c+".twitch.tech"}var u=new URL(e,a),m=u.origin,p=u.href;return m===s?p.substr(s.length):p}},SUI5:function(e,t,n){"use strict";var i,a=n("/MKj"),r=n("fvjX"),o=n("yR8l"),s=n("XDCx"),l=n("JXcx"),c=n("mrSG"),d=n("q1tI"),u=n("/7QA"),m=n("geRD"),p=n("DMoW"),h=n("/7Tk"),f=n("NxUI"),g=n("sUnt"),v=n("akKH"),b=n("3aAs"),k=n("kqSx"),y=n("hnjF"),S=n("IbuL"),C=n("C7sF"),E=n("+80q"),w=n("DY5q"),O=n("zTPm"),D=n("76Xh"),N=n("jqPd"),_=n("PCM+"),I=n("dEDE"),M=(n("mziE"),1e4);!function(e){e.ServiceError="new-poll_service-error"}(i||(i={}));var j=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={pendingCreation:!1,showCreationErrorBox:!1,errorCode:"",titleError:!1,title:"",choices:["","","","",""],choicesError:!1,allowVotingWithBits:!1,bitsPerVote:10,bitsPerVoteError:!1,subscriberOnly:!1,subscriberMultiplier:!1,durationMinutes:1},t.renderTitle=function(){return d.createElement(g.a,{margin:{bottom:1}},d.createElement(v.a,{label:Object(u.d)("Question","Polls--NewPollModal"),error:t.state.titleError,errorMessage:Object(u.d)("* You must provide a question","Polls--NewPollModal")},d.createElement(b.a,{type:b.c.Text,value:t.state.title,onChange:t.onQuestionChange,maxLength:60,error:t.state.titleError})))},t.renderChoices=function(){return d.createElement(g.a,{margin:{bottom:1}},d.createElement(v.a,{label:Object(u.d)("Responses (Minimum 2)","Polls--NewPollModal"),error:t.state.choicesError,errorMessage:Object(u.d)("* You must provide at least two choices","Polls--NewPollModal")},d.createElement(g.a,{margin:{bottom:1}},d.createElement(b.a,{type:b.c.Text,onChange:t.onResponseChanged.bind(t,0),maxLength:25})),d.createElement(g.a,{margin:{bottom:1}},d.createElement(b.a,{type:b.c.Text,onChange:t.onResponseChanged.bind(t,1),maxLength:25})),d.createElement(g.a,{margin:{bottom:1}},d.createElement(b.a,{type:b.c.Text,onChange:t.onResponseChanged.bind(t,2),maxLength:25})),d.createElement(g.a,{margin:{bottom:1}},d.createElement(b.a,{type:b.c.Text,onChange:t.onResponseChanged.bind(t,3),maxLength:25})),d.createElement(g.a,{margin:{bottom:1}},d.createElement(b.a,{type:b.c.Text,onChange:t.onResponseChanged.bind(t,4),maxLength:25}))))},t.renderSettings=function(){var e=!(!t.props.data.channel||!t.props.data.channel.cheer);return d.createElement(g.a,{margin:{bottom:1}},d.createElement(v.a,{label:Object(u.d)("Settings","Polls--NewPollModal"),error:t.state.bitsPerVoteError,errorMessage:Object(u.d)("The maximum Bits per vote is {bits}",{bits:M},"Polls--NewPollModal")},e&&d.createElement(g.a,{margin:{bottom:1}},d.createElement(k.a,{label:Object(u.d)("Allow Voting with Bits","Polls--NewPollModal"),checked:t.state.allowVotingWithBits,onChange:t.onAllowVotingChange})),e&&d.createElement(g.a,{margin:{bottom:1,left:1},display:y.d.Flex,flexDirection:y.e.Row,alignItems:y.b.Center},d.createElement(b.a,{type:b.c.Number,disabled:!t.state.allowVotingWithBits,onChange:t.onBitsPerVoteChange,value:String(t.state.bitsPerVote),maxLength:60,max:M,min:1}),d.createElement(g.a,{margin:{left:.5,right:.5}},d.createElement(S.a,{asset:C.a.Bits})),d.createElement(E.a,null,Object(u.d)("per Vote","Polls--NewPollModal"))),d.createElement(g.a,{margin:{bottom:1}},d.createElement(k.a,{label:Object(u.d)("Subscriber Votes Count 2x","Polls--NewPollModal"),checked:t.state.subscriberMultiplier,onChange:t.onSubscriberMultiplierChange})),d.createElement(g.a,{margin:{bottom:1}},d.createElement(k.a,{label:Object(u.d)("Subscriber Only","NewPollModal"),checked:t.state.subscriberOnly,onChange:t.onSubscriberOnlyChange}))))},t.renderDurationPicker=function(){return d.createElement(g.a,{margin:{bottom:1}},d.createElement(v.a,{label:Object(u.d)("Duration","Polls--NewPollModal")},d.createElement(w.a,{value:String(t.state.durationMinutes),onChange:t.onDurationSelectionChange},d.createElement("option",{value:"1"},Object(u.d)("1m","Polls--NewPollModal")),d.createElement("option",{value:"2"},Object(u.d)("2m","Polls--NewPollModal")),d.createElement("option",{value:"3"},Object(u.d)("3m","Polls--NewPollModal")))))},t.closeErrorMessage=function(){t.setState({showCreationErrorBox:!1})},t.onStartPoll=function(){return Object(c.__awaiter)(t,void 0,void 0,(function(){var e,t;return Object(c.__generator)(this,(function(n){switch(n.label){case 0:if(!this.checkInputs())return[2];this.setState({pendingCreation:!0}),e=[],this.state.choices.forEach((function(t){if(""!==t){var n={title:t};e.push(n)}})),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.props.createPoll(Object(m.a)({bitsCost:this.state.bitsPerVote,bitsVoting:this.state.allowVotingWithBits,durationSeconds:60*this.state.durationMinutes,ownedBy:this.props.channelID,subscriberOnly:this.state.subscriberOnly,subscriberMultiplier:this.state.subscriberMultiplier,multichoiceEnabled:!0,title:this.state.title,choices:e}))];case 2:return!(t=n.sent()).data.createPoll||t.data.createPoll.error?(this.setState({showCreationErrorBox:!0,pendingCreation:!1,errorCode:t.data.createPoll&&t.data.createPoll.error?t.data.createPoll.error.code:""}),[2]):(this.props.closeModal(),this.props.onPollCreated&&this.props.onPollCreated(),[3,4]);case 3:return n.sent(),this.setState({showCreationErrorBox:!0,pendingCreation:!1}),[3,4];case 4:return[2]}}))}))},t.checkInputs=function(){var e=!0;""===t.state.title&&(t.setState({titleError:!0}),e=!1);var n=0;return t.state.choices.forEach((function(e){""!==e&&n++})),n<2&&(t.setState({choicesError:!0}),e=!1),e},t.onClose=function(){t.props.closeModal()},t.onQuestionChange=function(e){t.setState({title:e.target.value,titleError:""===e.target.value})},t.onBitsPerVoteChange=function(e){var n=parseInt(e.target.value||"0",10);n>M||n<=0?t.setState({bitsPerVoteError:!0}):t.setState({bitsPerVoteError:!1}),t.setState({bitsPerVote:n})},t.onResponseChanged=function(e,n){var i=n.target.value;t.setState((function(t){var n=t.choices.slice(0);return n[e]=i,{choices:n}}))},t.onAllowVotingChange=function(e){t.setState({allowVotingWithBits:e.currentTarget.checked})},t.onSubscriberMultiplierChange=function(e){t.setState({subscriberMultiplier:e.currentTarget.checked})},t.onSubscriberOnlyChange=function(e){t.setState({subscriberOnly:e.currentTarget.checked})},t.onDurationSelectionChange=function(e){var n=parseInt(e.currentTarget.value,10);t.setState({durationMinutes:n})},t.setPreferences=function(){if(t.props.data.channel&&t.props.data.channel.latestPoll){var e=t.props.data.channel.latestPoll,n=Math.round(e.durationSeconds/60);t.setState({allowVotingWithBits:e.settings.bitsVotes.isEnabled,bitsPerVote:e.settings.bitsVotes.cost,subscriberOnly:e.settings.subscriberOnly.isEnabled,subscriberMultiplier:e.settings.subscriberMultiplier.isEnabled,durationMinutes:n})}},t.getErrorMessage=function(){var e=Object(u.d)("Service Error","Polls--NewPollModal");switch(t.state.errorCode){case p.hb.AUTOMOD_FAILED:e=Object(u.d)("Content does not meet guidelines","Polls--NewPollModal");break;case p.hb.POLL_ALREADY_ACTIVE:e=Object(u.d)("A poll is already active","Polls--NewPollModal")}return e},t}return Object(c.__extends)(t,e),t.prototype.componentDidUpdate=function(e){e.data.loading&&!this.props.data.loading&&this.setPreferences()},t.prototype.componentDidMount=function(){this.props.data.loading||this.setPreferences()},t.prototype.render=function(){if(this.props.data.loading)return d.createElement(h.a,null);var e=Object(u.d)("Start Poll","Polls--NewPollModal"),t=Object(u.d)("Cancel","Polls--NewPollModal");return d.createElement(g.a,{display:y.d.Flex,justifyContent:y.h.Center,className:"new-poll-modal"},d.createElement(O.a,{size:O.b.Medium},d.createElement(D.a,{title:Object(u.d)("Create a New Poll","Polls--NewPollModal"),closeButton:{ariaLabel:Object(u.d)("Close","Polls--NewPollModal"),onClick:this.onClose}}),d.createElement(N.a,null,d.createElement(g.a,{display:y.d.Flex,flexDirection:y.e.Column,padding:{x:4,bottom:1,top:1}},this.renderTitle(),this.renderChoices(),this.renderSettings(),this.renderDurationPicker(),this.state.showCreationErrorBox&&d.createElement(f.a,{message:this.getErrorMessage(),onClose:this.closeErrorMessage,showTryAgain:""===this.state.errorCode||this.state.errorCode===p.hb.UNKNOWN}))),d.createElement(g.a,{padding:{x:3,bottom:2}},d.createElement(_.a,{primaryButtonProps:{ariaLabel:e,children:e,onClick:this.onStartPoll,state:this.state.pendingCreation?I.c.Loading:I.c.Default},secondaryButtonProps:{ariaLabel:t,children:t,onClick:this.props.closeModal}}))))},t}(d.Component),T=n("MQZ3");n.d(t,"a",(function(){return P}));var P=Object(r.d)(Object(a.b)(null,(function(e){return Object(r.b)({closeModal:s.d},e)})),Object(o.a)(l,{name:"createPoll"}),Object(o.a)(T,{options:function(e){return{variables:{id:e.channelID}}}}))(j)},SaoI:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"MarkGemNotificationAsChecked"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CheckGemNotificationInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"checkGemNotification"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updatedNotification"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isChecked"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:182}};n.loc.source={body:"mutation MarkGemNotificationAsChecked($input: CheckGemNotificationInput!) {\ncheckGemNotification(input: $input) {\nupdatedNotification {\nid\ntitle\ndescription\ncreatedAt\nisChecked\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.MarkGemNotificationAsChecked=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"MarkGemNotificationAsChecked")},SceP:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ClipsChatCard_Clip"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"slug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"clip"},arguments:[{kind:"Argument",name:{kind:"Name",value:"slug"},value:{kind:"Variable",name:{kind:"Name",value:"slug"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"thumbnailURL"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"curator"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"broadcaster"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:151}};n.loc.source={body:"query ClipsChatCard_Clip($slug: ID!) {\nclip(slug: $slug) {\nid\nthumbnailURL\ntitle\nslug\nurl\ncurator {\nid\ndisplayName\n}\nbroadcaster {\nid\ndisplayName\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.ClipsChatCard_Clip=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"ClipsChatCard_Clip")},Sfdh:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("4rCz");function a(){return{messageCreatedTooQuickError:Object(i.d)("Your message was not sent because you are sending messages too quickly.","format-error-messages"),chatReplayFilterError:Object(i.d)("Your message has been posted. However, other messages posted after the live stream are hidden.","format-error-messages")}}},SyZi:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("q1tI"),a=n("ZGDZ"),r=n("XIEs"),o=n("nAiT"),s=n("7uM4"),l=n("C7sF"),c=n("uG/k"),d=n("sUnt"),u=n("ALJo"),m=(n("e9QR"),{"channel-points-icon--small":12,"channel-points-icon--medium":20,"channel-points-icon--large":50}),p=function(e){var t=e.iconSize||u.a.Medium,n=m[t],a=i.createElement(s.a,{asset:l.a.ChannelPoints,width:n,height:n});if(e.image){var p=h(n,e.image);a=i.createElement(c.a,{className:"channel-points-icon__image",alt:e.name||Object(o.a)(),src:p,srcSet:p===e.image.url?Object(r.a)(e.image):void 0})}return i.createElement(d.a,{className:"channel-points-icon "+t},a)},h=function(e,t){return e<=a.a.SMALL?t.url:e<=a.a.MEDIUM?t.url2x:e<=a.a.LARGE?t.url4x:t.url}},T7Bf:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Drops_ChannelDrops_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"isLoggedIn"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lastBroadcast"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"isLoggedIn"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isDropsLinked"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"activeDropCampaigns"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"connectionURL"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"applicableChannels"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"isAvailableToAllChannels"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isStreamDropsEnabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:330}};n.loc.source={body:"query Drops_ChannelDrops_User($login: String! $isLoggedIn: Boolean!) {\nuser(login: $login) {\nid\nlogin\ndisplayName\nlastBroadcast {\nid\ngame {\nid\nself @include(if: $isLoggedIn) {\nisDropsLinked\n}\nactiveDropCampaigns{\nid\nconnectionURL\napplicableChannels {\nid\n}\nisAvailableToAllChannels\n}\n}\n}\nstream {\nid\nisStreamDropsEnabled\ntype\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.Drops_ChannelDrops_User=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"Drops_ChannelDrops_User")},T84l:function(e,t,n){},TApp:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("ZtEv"),a=n("aF6k");function r(e){return{type:i.b.Info,id:Object(a.a)("info"),message:e}}},TOso:function(e,t,n){"use strict";var i=n("mrSG"),a=n("/7QA"),r=n("cMjZ"),o=n("geRD"),s=n("f00E"),l=n("DMoW"),c=n("w09P"),d=n("xXlL"),u=n("U1yz"),m=n("a1OF");var p=n("3YIm"),h=n("NMMG"),f=n("Vl9+");function g(e){var t=e.currentUserID,n=e.emotes,g=e.message,v=e.recipientUserID;if(""===t||""===g||""===v)return Promise.reject(new Error("Tried to send a whisper with nonsensical parameters."));var b=Object(s.c)(),k=Object(i.__assign)({mutation:p},Object(o.a)({message:g,nonce:b,recipientUserID:v})),y=Object(h.a)(t,v),S=Object(u.a)(a.p.apollo.client.cache,y,!0);if(S&&S.messages){var C=function(e,t){for(var n=[],i=/\S+/g,a=i.exec(e);a;){var r=a[0],o=t[r];if(o){var s=Object(m.c)(e.slice(0,a.index)),l=s?s.length:a.index;n.push({id:o.id,start:l,end:l+r.length-1})}a=i.exec(e)}return n}(g,n).map(d.a);k.optimisticResponse={sendWhisper:{__typename:"SendWhisperPayload",message:{content:{content:g,emotes:C,__typename:"MessageBody"},from:{id:t,__typename:"User"},id:b,nonce:b,sentAt:(new Date).toISOString(),deletedAt:null,editedAt:null,thread:{id:y,__typename:"WhisperThread",participants:[{id:t,__typename:"User",self:{__typename:"UserSelfConnection",whisperPermissions:{receive:l.zd.NOT_PERMITTED,__typename:"WhisperPermissions"}}},{id:v,__typename:"User",self:{__typename:"UserSelfConnection",whisperPermissions:{receive:l.zd.PERMITTED,__typename:"WhisperPermissions"}}}]},__typename:"WhisperMessage"},error:null}},k.update=function(e,t){if(t.data){var n=t.data;if(n.sendWhisper&&n.sendWhisper.message&&!n.sendWhisper.error){var i=n.sendWhisper.message,a=Object(u.a)(e,y);if(a&&a.messages){var o=a.messages.edges.findIndex((function(e){return e.node.id===b||e.node.nonce===b||e.node.id===i.id}));if(o<0){var s={cursor:(1+S.messages.edges.reduce((function(e,t){return Math.max(parseInt(t.cursor,10),e)}),0)).toString(),node:i,__typename:"WhisperMessageEdge"};a=c(a,(function(e){return e.messages.edges}),(function(e){return e.unshift(s),e}))}else a=c(a,(function(e){return e.messages.edges[o].node}),(function(){return i}));a.userLastMessageRead&&(a=c(a,(function(e){return e.userLastMessageRead.sentAt}),(function(){return i.sentAt}))),a.unreadMessagesCount=0,e.writeFragment({id:Object(r.a)(a),fragment:f,data:a})}}}}}return a.p.apollo.client.mutate(k)}n.d(t,"a",(function(){return g}))},Tqc9:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return o}));var i="@",a="Enter",r="Escape",o=" "},TqpA:function(e,t,n){"use strict";var i,a=n("mrSG"),r=n("TSYQ"),o=n("q1tI"),s=n("4rCz"),l=n("sUnt"),c=n("hnjF"),d=n("7d/q"),u=n("C7sF"),m=n("Ws8v"),p=n("X2PJ");n("OCTF");!function(e){e.CloseButton="bits-card-wrapper-close-button-selector",e.OuterWrapper="bits-card-wrapper-outer-selector",e.InnerWrapper="bits-card-wrapper-inner-selector"}(i||(i={}));var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.onUserClose,n=e.children,a=e.className,h=e.dataATarget,f=e.closeDataATarget,g=t?o.createElement(l.a,{position:c.j.Absolute,padding:{top:.5,right:.5},attachRight:!0,attachTop:!0,zIndex:c.o.Above},o.createElement(d.a,{ariaLabel:Object(s.d)("close bits card","BitsCard"),"data-a-target":f,"data-test-selector":i.CloseButton,onClick:t,icon:u.a.Close,type:d.c.Secondary,size:d.b.Small})):null;return o.createElement(m.a,{"data-test-selector":i.OuterWrapper,className:r("bits-card-wrapper",a),"data-a-target":h,display:c.d.Flex,flexDirection:c.e.Column,position:c.j.Absolute,background:p.a.Base,borderRadius:p.b.Large,elevation:3,zIndex:c.o.Above,fullWidth:!0},g,o.createElement(l.a,{"data-test-selector":i.InnerWrapper,display:c.d.Flex,flexDirection:c.e.Column,alignItems:c.b.Center,justifyContent:c.h.Center,flexGrow:1,fullWidth:!0},n))},t.defaultProps={dataATarget:"bits-card",closeDataATarget:"bits-card-close-button"},t}(o.PureComponent);n.d(t,"a",(function(){return h}))},TvOw:function(e,t,n){"use strict";var i,a;n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a})),function(e){e.Spam="spam",e.Harassment="harassment"}(i||(i={})),function(e){e.Spam="spam",e.Harassment="harassment",e.Other="other"}(a||(a={}))},Tznh:function(e,t,n){"use strict";var i,a,r=n("mrSG"),o=n("q1tI"),s=n("/MKj"),l=n("fvjX"),c=n("/7QA"),d=n("yR8l"),u=n("D7An"),m=n("kRBY"),p=n("1rIY"),h=n("+pBb"),f=n("CbHG");!function(e){e.Excluded="control",e.OptIn="opt-in",e.OptOut="opt-out"}(i||(i={})),function(e){e.FilteredMessage="chat_filter_message",e.Onboarding="onboarding",e.Other="other"}(a||(a={}));var g=Object(p.a)("ChatFilterContext",{chatFilterExperimentMembership:i.Excluded,chatFilterSettingsSource:a.Other,isShowingChatFilterSettings:!1,hideChatFilterSettings:function(){return null},showChatFilterSettings:function(){return null}}),v=g.context,b=g.withContext,k=function(e){function t(n){var r=e.call(this,n)||this;return r.hideChatFilterSettings=function(){r.setState({isShowingChatFilterSettings:!1})},r.showChatFilterSettings=function(e){r.setState({chatFilterSettingsSource:e||a.Other,isShowingChatFilterSettings:!0})},r.state={chatFilterExperimentMembership:i.Excluded,chatFilterSettingsSource:a.Other,isShowingChatFilterSettings:!1,hideChatFilterSettings:r.hideChatFilterSettings,showChatFilterSettings:r.showChatFilterSettings},t.assignmentForNewUsers=c.p.experiments.getAndTrackAssignment(u.c.ChatFiltersNewUsers),t.assignmentForOldUsers=c.p.experiments.getAndTrackAssignment(u.c.ChatFiltersExistingUsers),r}return Object(r.__extends)(t,e),t.getDerivedStateFromProps=function(e){switch(t.getExperimentMembership(e)){case i.OptIn:return void 0===e.viewerChatFilterEnabled&&e.disableViewerChatFilter(a.Other),{chatFilterExperimentMembership:i.OptIn};case i.OptOut:return void 0===e.viewerChatFilterEnabled&&e.enableViewerChatFilter(a.Other),{chatFilterExperimentMembership:i.OptOut};case i.Excluded:default:return{chatFilterExperimentMembership:i.Excluded}}},t.getExperimentMembership=function(e){if("off"===c.b.get("chat_filter_enabled","off"))return i.Excluded;if(!e.isLoggedIn||"en"!==e.languageCode)return i.Excluded;if(e.data&&e.data.currentUser&&e.data.currentUser.createdAt){var n=c.b.get("chat_filter_start","3000-01-01"),a=new Date(e.data.currentUser.createdAt)>=new Date(n)?t.assignmentForNewUsers:t.assignmentForOldUsers;switch(a){case i.Excluded:case i.OptIn:case i.OptOut:return a;default:return i.Excluded}}return i.Excluded},t.prototype.render=function(){return o.createElement(v.Provider,{value:this.state},this.props.children)},t}(o.Component);var y=Object(l.d)(Object(s.b)((function(e){return{isLoggedIn:Object(m.f)(e),languageCode:Object(m.b)(e),viewerChatFilterEnabled:e.chat.viewerChatFilterEnabled}}),(function(e){return Object(l.b)({disableViewerChatFilter:h.F,enableViewerChatFilter:h.K},e)})),Object(d.a)(f,{skip:function(e){return!e.isLoggedIn||"en"!==e.languageCode}}))(k);n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return b})),n.d(t,"a",(function(){return y}))},U1yz:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("2Dht");function a(e,t,n){try{var a=e.readQuery({query:i,variables:{id:t}},n);return a?a.whisperThread:null}catch(e){return null}}},U1zV:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n("pVnL"),a=n.n(i),r=n("q1tI"),o=n("fNzW"),s=n("vCsY"),l=n("IbuL"),c=n("hnjF"),d=n("sUnt"),u=n("b7S+"),m=(n("8gBY"),function(e){var t;e.icon&&(t=r.createElement(l.a,{fill:!0,asset:e.icon}));var n=r.createElement(d.a,a()({display:c.d.InlineFlex,alignItems:c.b.Center,className:Object(o.a)({"tw-stat":!0})},Object(s.a)(e)),r.createElement(d.a,{display:c.d.InlineFlex,alignItems:c.b.Center,className:"tw-stat__icon"},t),r.createElement(d.a,{margin:{left:.5},className:"tw-stat__value","data-a-target":"tw-stat-value"},e.value));return e.label?r.createElement(u.a,{direction:e.tooltipDirection?e.tooltipDirection:u.c.Bottom,align:e.tooltipAlign?e.tooltipAlign:u.b.Center,label:e.label},n):n});m.displayName="Stat"},UBeo:function(e,t,n){"use strict";var i=n("mrSG"),a=n("w09P"),r=n("q1tI"),o=n("/MKj"),s=n("fvjX"),l=n("/7QA"),c=n("yR8l"),d=n("4ilF"),u=n("geRD"),m=n("DMoW"),p=n("kRBY"),h=n("1rIY"),f=n("Ohqu"),g=n("pMvt"),v="chatPauseSetting",b=Object(h.a)("ChatPauseSettingContext",{setValue:function(){return null},value:void 0}),k=b.context,y=b.withContext,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={value:t.constructor.localValue()},t.setValue=function(e){if(t.props.isLoggedIn){var n=Object(i.__assign)(Object(i.__assign)({},Object(u.a)({chatPauseSetting:e})),{optimisticResponse:{setChatPauseSetting:{__typename:"SetChatPauseSettingPayload",chatPauseSetting:e}},update:function(t){var n;try{n=t.readQuery({query:g})}catch(e){return}if(n&&n.currentUser&&n.currentUser.chatUISettings){var i=a(n,(function(e){return e.currentUser.chatUISettings.chatPauseSetting}),(function(){return e}));t.writeQuery({query:g,data:i})}}}),r=t.state.value;t.setState({value:e}),l.m.set(v,e),t.props.setChatPauseSetting(n).catch((function(){r&&(l.m.set(v,r),t.setState({value:r}))}))}},t}return Object(i.__extends)(t,e),t.localValue=function(){return l.m.get(v,void 0)},t.remoteValue=function(e){return e.data&&e.data.currentUser&&e.data.currentUser.chatUISettings&&e.data.currentUser.chatUISettings.chatPauseSetting},t.getDeferredStateFromProps=function(e){return{value:this.remoteValue(e)||this.localValue()}},t.prototype.render=function(){return r.createElement(k.Provider,{value:{setValue:this.setValue,value:this.value}},this.props.children)},t.prototype.componentDidUpdate=function(e){var t=this.props.data,n=e&&e.data&&e.data.currentUser,i=t&&!t.loading&&!t.error&&t.currentUser,a=this.constructor.localValue(),r=this.constructor.remoteValue(this.props);i&&!n&&a!==r&&(r?this.setValue(r):a&&this.setValue(a))},Object.defineProperty(t.prototype,"value",{get:function(){if(l.b.get("chat_pause",!1)){var e=this.props,t=e.channelID,n=e.userID,i=e.userModStatus;if(t&&t===n||i&&i.user&&i.user.isModerator)return l.m.get(v,void 0)||this.state.value||m.H.SCROLL_ONLY}},enumerable:!0,configurable:!0}),t}(r.Component);var C=Object(s.d)(Object(o.b)((function(e){var t=Object(p.e)(e);return{isLoggedIn:Object(p.f)(e),userID:t&&t.id}})),Object(d.a)(),Object(c.a)(g,{skip:function(e){return!e.isLoggedIn}}),Object(c.a)(f,{name:"setChatPauseSetting"}))(S);function E(e){return{setChatPauseSetting:e.setValue,chatPauseSetting:e.value}}n.d(t,"b",(function(){return k})),n.d(t,"d",(function(){return y})),n.d(t,"a",(function(){return C})),n.d(t,"c",(function(){return E}))},UNTo:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"RedeemCustomReward"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"RedeemCommunityPointsCustomRewardInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"redeemCommunityPointsCustomReward"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:148}};n.loc.source={body:"mutation RedeemCustomReward($input: RedeemCommunityPointsCustomRewardInput!) {\nredeemCommunityPointsCustomReward(input: $input) {\nerror {\ncode\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.RedeemCustomReward=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"RedeemCustomReward")},UUau:function(e,t,n){},UWbL:function(e,t,n){"use strict";function i(e){var t=/^((\d+)[Hh])?((\d+)[Mm])?((\d+)[Ss])?$/.exec(e||"");return t?3600*(parseInt(t[2],10)||0)+60*(parseInt(t[4],10)||0)+(parseInt(t[6],10)||0):0}n.d(t,"a",(function(){return i}))},UZgS:function(e,t,n){},Uh2Q:function(e,t,n){"use strict";var i,a=n("NAv5"),r=n("/7QA"),o=n("3Bft"),s=n("HGFl"),l=n("mrSG"),c=n("q1tI"),d=n("/MKj"),u=n("/0dD"),m=n("XDQu"),p=n("5zXJ"),h=n("RiD7"),f=n("uG/k"),g=n("sUnt"),v=n("+80q"),b=n("X2PJ"),k=n("Jsra"),y=n("hnjF");n("m66z");!function(e){e.Container="lazy-carousel-container",e.Prev="lazy-carousel-prev-button",e.Next="lazy-carousel-next-button",e.NavDot="lazy-carousel-nav-dot",e.NavDotContainer="lazy-carousel-nav-dot-container",e.Animation="lazy-carousel-animation-container"}(i||(i={}));var S=[{src:p.h+"/mega-commerce/bits-card/1.png",emoteString:"emote1"},{src:p.h+"/mega-commerce/bits-card/2.png",emoteString:"emote2"},{src:p.h+"/mega-commerce/bits-card/3.png",emoteString:"emote3"},{src:p.h+"/mega-commerce/bits-card/4.png",emoteString:"emote4"},{src:p.h+"/mega-commerce/bits-card/5.png",emoteString:"emote5"},{src:p.h+"/mega-commerce/bits-card/6.png",emoteString:"emote6"},{src:p.h+"/mega-commerce/bits-card/7.png",emoteString:"emote7"}],C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={currIndex:0},t.renderEmotes=S.map((function(e){return c.createElement(f.a,{key:e.emoteString,className:"seasonal-megacommerce-introduction__emote",src:e.src,srcSet:{"112w":e.src},sizes:[{size:"28px"}],alt:e.emoteString})})),t.learnMoreClick=function(){Object(h.p)({user_id:t.props.currentUserID||"",source:h.e.BitsCard})},t}return Object(l.__extends)(t,e),t.prototype.render=function(){var e=this,t="";return t=this.props.theme===u.a.Dark?"seasonal-megacommerce-introduction__dark":"seasonal-megacommerce-introduction__light",c.createElement(g.a,{className:t},c.createElement(g.a,{padding:{top:3}},c.createElement(v.a,{fontSize:b.d.Size5,bold:!0},Object(r.d)("Happy HAHAHAlidays!","MegaCommerceMegaCheerBitsIntroduction")),c.createElement(g.a,{padding:{x:1,top:.5}},c.createElement(v.a,null,Object(r.d)("Cheer at least 300 Bits, Subscribe, or Gift a sub to receive exclusive holiday emotes and gift emotes to your community. Collect them all by {date}!",{date:Object(r.c)(N(O),{day:"numeric",month:"numeric",year:"numeric"})},"MegaCommerceMegaCheerBitsIntroduction"))),c.createElement(g.a,{padding:{top:.5,bottom:1}},c.createElement(v.a,null,Object(r.d)("<x:link>Learn more</x:link>",{"x:link":function(t){return c.createElement(k.a,{targetBlank:!0,linkTo:I(O),onClick:e.learnMoreClick},t)}},"MegaCommerceMegaCheerBitsIntroduction")))),c.createElement(g.a,{display:y.d.Flex,justifyContent:y.h.Center,flexDirection:y.e.Row,padding:{bottom:1}},this.renderEmotes))},t}(c.Component);var E,w=Object(d.b)((function(e){return{theme:Object(m.a)(e),currentUserID:e.session.user&&e.session.user.id||null}}))(C);n.d(t,"b",(function(){return E})),n.d(t,"a",(function(){return O})),n.d(t,"f",(function(){return D})),n.d(t,"h",(function(){return N})),n.d(t,"g",(function(){return _})),n.d(t,"e",(function(){return I})),n.d(t,"d",(function(){return M})),n.d(t,"c",(function(){return j})),function(e){e.Cheer="CHEER",e.Subscription="SUBSCRIPTION",e.SubGift="SUBGIFT"}(E||(E={}));var O={startDateDynamicSetting:"megacommerce_2019_start_date",endDateDynamicSetting:"megacommerce_2019_end_date",eventDomain:"megacommerce_2019",eventTestDomain:"megacommerce_2019-test",intro:w,tier1ImageUrl:p.h+"/mega-commerce/MegaCheer-01.png",tier2ImageUrl:p.h+"/mega-commerce/MegaCheer-02.png",tier3ImageUrl:p.h+"/mega-commerce/MegaCheer-03.png",tier4ImageUrl:p.h+"/mega-commerce/MegaCheer-04.png",helpLinkDynamicSetting:"megacommerce_2019_help_link"};function D(e){if(!e)return!1;var t=r.b.get(e.startDateDynamicSetting,"2019-12-03T20:00:00Z");if(Object(a.isAfter)(Object(s.e)(t),Date.now()))return!1;var n=r.b.get(e.endDateDynamicSetting,"2020-01-03T07:00:00Z");return Object(a.isAfter)(Object(s.e)(n),Date.now())}function N(e){var t=r.b.get(e.endDateDynamicSetting,"2020-01-03T07:00:00Z");return Object(s.e)(t)}function _(e,t){return!!t&&(e===t.eventDomain||e===t.eventTestDomain)}function I(e){return r.b.get(e.helpLinkDynamicSetting,"https://help.twitch.tv/s/article/winter-megacheer")}function M(e,t){var n=0;t===o.a.Tier3?n=2:t===o.a.Tier2&&(n=1);var i=1;return e>=20?i=15:e>=10?i=7:e>=5&&(i=5),i+n}function j(e,t){var n=0;t===o.a.Tier3?n=10:t===o.a.Tier2&&(n=5);var i=5;return e>=100?i=500:e>=50?i=250:e>=20?i=100:e>=10?i=50:e>=5&&(i=25),i+n}},Ukwn:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"automaticRewardFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CommunityPointsAutomaticReward"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"backgroundColor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"defaultBackgroundColor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"defaultCost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"defaultImage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"pointsImageFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"pointsImageFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"isEnabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isHiddenForSubs"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"minimumCost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}],loc:{start:0,end:323}};i.loc.source={body:'#import "twilight/features/community-points/models/points-image-fragment.gql"\nfragment automaticRewardFragment on CommunityPointsAutomaticReward {\nid\nbackgroundColor\ncost\ndefaultBackgroundColor\ndefaultCost\ndefaultImage {\n...pointsImageFragment\n}\nimage {\n...pointsImageFragment\n}\nisEnabled\nisHiddenForSubs\nminimumCost\ntype\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("r+cx").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)}))),e.exports=i},V3Pk:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"h",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"g",(function(){return s})),n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return c})),n.d(t,"f",(function(){return d})),n.d(t,"d",(function(){return u})),n.d(t,"i",(function(){return m}));var i=n("mrSG"),a="vodChat.channel-moderation-comments.RESULTS_RECEIVED",r=function(e,t){return Object(i.__assign)(Object(i.__assign)({type:a},e),{bitsConfig:t})},o="vodChat.channel-moderation-comments.RESULTS_FAILED",s=function(e){return{type:o,error:e}},l=function(e){return{type:"vodChat.channel-moderation-comments.BAN_FAILED",error:e}},c="vodChat.channel-moderation-comments.BAN_SUCCESS",d=function(e){return{type:c,user:e}},u="vodChat.channel-moderation-comments.SEARCH_SUCCESS",m=function(e){return{type:u,hits:e}}},VAW9:function(e,t,n){"use strict";var i,a=n("mrSG"),r=n("w09P"),o=n("q1tI"),s=n("/MKj"),l=n("fvjX"),c=n("yR8l"),d=n("x7UT"),u=n("eDVu"),m=n("0Log"),p=n("/aPz"),h=n("kRBY"),f=n("bBAb"),g=n("6C1D"),v=n("hO8c"),b=n("+pBb"),k=n("3sMn"),y=n("1rIY");!function(e){e[e.DISCONNECTED=0]="DISCONNECTED",e[e.RECONNECTING=1]="RECONNECTING",e[e.CONNECTED=2]="CONNECTED"}(i||(i={}));var S=Object(y.a)("ChatConnectionStateContext",{chatConnectionState:i.DISCONNECTED,updateChatConnectionState:function(){return null}}),C=S.context,E=S.withContext,w=function(e){function t(t){var n=e.call(this,t)||this;return n.updateChatConnectionState=function(e){n.setState({chatConnectionState:e})},n.state={chatConnectionState:i.DISCONNECTED,updateChatConnectionState:n.updateChatConnectionState},n}return Object(a.__extends)(t,e),t.prototype.render=function(){return o.createElement(C.Provider,{value:this.state},this.props.children)},t}(o.Component),O=n("RS58"),D=n("+l4d"),N=n("/gva");var _=n("GnwI");var I=n("MkkA"),M=n("JPUa"),j=n("/7QA"),T=n("w0yC"),P=n("ZS2+"),L=n("DMoW"),R=(n("7NxT"),n("vSeP")),F=n("XIZb"),U=Object(F.a)("ChatConnection"),x=U.withChatServiceManager,A=(0,U.withContext)((function(e){return{chatConnectionAPI:e.serviceAPI,setChatConnectionAPI:e.setServiceAPI}})),B=Object(F.a)("ChatRestrictions"),V=B.context,H=B.withChatServiceManager,q=B.withContext,G=(V.Provider,H),W=q((function(e){return{chatRestrictionsAPI:e.serviceAPI,setChatRestrictionsAPI:e.setServiceAPI}})),z=Object(F.a)("MessageBuffer"),Q=z.withChatServiceManager,Y=(0,z.withContext)((function(e){return{messageBufferAPI:e.serviceAPI,setMessageBufferAPI:e.setServiceAPI}})),$=n("2EzP"),K=n("26nv"),X=n("/0dD"),J=n("Mj6i"),Z=n("jZLd"),ee=n("XDQu"),te=n("/i69"),ne=n("IRJ5"),ie=n("gcd7"),ae=n("3kHA"),re=function(e){return o.createElement(ie.a,{channelLogin:e.channelLogin,command:"clear",description:Object(j.d)("Clear chat history for all viewers","ClearCommandHandler"),helpText:Object(j.d)('Usage: "/clear" - Clears chat history for all viewers.',"ClearCommandHandler"),permissionLevel:ae.b.Moderator})},oe=n("bhOa"),se=function(e){return o.createElement(ie.a,{args:[{name:"length",isRequired:!1}],channelLogin:e.channelLogin,command:"commercial",description:Object(j.d)("Run an ad break during your stream","CommercialCommandHandler"),helpText:Object(j.d)('Usage: "/commercial [length]" - Triggers a commercial. Length (optional) must be a positive number of seconds.',"CommercialCommandHandler"),hidden:!e.isPartner,permissionLevel:ae.b.Broadcaster})},le=n("cJKN"),ce=function(e){return o.createElement(o.Fragment,null,o.createElement(ie.a,{args:[{name:"duration",isRequired:!1}],channelLogin:e.channelLogin,command:"followers","data-test-selector":"followers-command-handler",description:Object(j.d)("Restrict Chat to followers based on their follow duration","FollowersCommandHandler"),helpText:Object(j.d)('Usage: "/followers [duration]" - Turns on followers-only mode (only users who have followed for "duration" may chat). Examples: "30m", "1 week", "5 days 12 hours". Must be less than 3 months.',"FollowersCommandHandler"),permissionLevel:ae.b.Moderator}),o.createElement(ie.a,{channelLogin:e.channelLogin,command:"followersoff","data-test-selector":"followers-off-command-handler",description:Object(j.d)("Turn off followers-only mode","FollowersCommandHandler"),helpText:Object(j.d)('Usage: "/followersoff" - Disables followers-only mode.',"FollowersCommandHandler"),permissionLevel:ae.b.Moderator}))},de=n("b6Pe"),ue=function(e){return o.createElement(o.Fragment,null,o.createElement(ie.a,{args:[{name:"channel",isRequired:!0}],channelLogin:e.channelLogin,command:"host","data-test-selector":"host-command-handler",description:Object(j.d)("Host another stream on your channel","HostCommandHandler"),helpText:Object(j.d)('Usage: "/host <channel>" - Hosts another stream on your channel. Use "/unhost" to remove host mode.',"HostCommandHandler"),permissionLevel:ae.b.Broadcaster}),o.createElement(ie.a,{channelLogin:e.channelLogin,command:"unhost","data-test-selector":"unhost-command-handler",description:Object(j.d)("Stop hosting a channel","HostCommandHandler"),helpText:Object(j.d)('Usage: "/unhost" - Stops hosting another channel.',"HostCommandHandler"),permissionLevel:ae.b.Broadcaster}))},me=n("D91L"),pe=n("hAD8"),he=n("PtXu"),fe=n("J2EQ"),ge=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.render=function(){return o.createElement(o.Fragment,null,o.createElement(ie.a,{args:[{name:"channel",isRequired:!0}],channelLogin:this.props.channelLogin,command:"raid","data-test-selector":"raid-command-handler",description:Object(j.d)("Send viewers to another channel when your stream ends","RaidCommandHandler"),helpText:Object(j.d)('Usage: "/raid <channel>" - Raids another channel. Use "/unraid" to cancel the Raid.',"RaidCommandHandler"),permissionLevel:ae.b.Broadcaster}),o.createElement(ie.a,{channelLogin:this.props.channelLogin,command:"unraid","data-test-selector":"unraid-command-handler",description:Object(j.d)("Cancel an ongoing Raid","RaidCommandHandler"),helpText:Object(j.d)('Usage: "/unraid" - Cancels a Raid.',"RaidCommandHandler"),permissionLevel:ae.b.Broadcaster}))},t}(o.Component),ve=n("wUQP"),be=n("YV90"),ke=n("BdUW"),ye=n("EgE3");var Se=Object(be.a)((function(e){return{isChannelPointsEnabled:e.isChannelPointsEnabled}}))((function(e){return e.isChannelPointsEnabled&&Object(ve.c)("copo_full_launch")?o.createElement(ie.a,{channelLogin:e.channelLogin,command:"requests",description:Object(j.d)("Open the Channel Points reward requests queue","RequestsCommandHandler"),handler:function(){return Object(ke.a)(ye.d.ChatCommand,e.channelLogin,e.channelID||void 0)},helpText:Object(j.d)('Usage: "/requests" - Opens the Channel Points requests queue to view and manage custom reward requests.',"RequestsCommandHandler"),permissionLevel:ae.b.Moderator}):null})),Ce=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showChatRules=function(){t.props.showChatRules()},t}return Object(a.__extends)(t,e),t.prototype.render=function(){return o.createElement(ie.a,{channelLogin:this.props.channelLogin,command:"rules",description:Object(j.d)("Show the rules of this channel","RulesCommandHandler"),handler:this.showChatRules,helpText:Object(j.d)('Usage: "/rules" - Show the rules of this channel, if they exist.',"RulesCommandHandler"),hidden:!0,permissionLevel:ae.b.Broadcaster})},t}(o.Component);var Ee,we,Oe=Object(s.b)(null,(function(e){return Object(l.b)({showChatRules:function(){return b.O()}},e)}))(Ce),De=n("AnlW"),Ne=function(e){return o.createElement(o.Fragment,null,o.createElement(ie.a,{channelLogin:e.channelLogin,command:"subscribers","data-test-selector":"subscribers-command-handler",description:Object(j.d)("Restrict Chat to subscribers","SubscribersCommandHandler"),helpText:Object(j.d)('Usage: "/subscribers" - Enables subscribers-only mode (only subscribers may chat in this channel). Use "/subscribersoff" to disable subscriber-only chat.',"SubscribersCommandHandler"),permissionLevel:ae.b.Moderator}),o.createElement(ie.a,{channelLogin:e.channelLogin,command:"subscribersoff","data-test-selector":"subscribers-off-command-handler",description:Object(j.d)("Turn off subscribers-only mode","SubscribersCommandHandler"),helpText:Object(j.d)('Usage: "/subscribersoff" - Disables subscribers-only mode.',"SubscribersCommandHandler"),permissionLevel:ae.b.Moderator}))},_e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setUniqueChatMode=function(){return t.props.sendMessage("/r9kbeta"),{}},t.unsetUniqueChatMode=function(){return t.props.sendMessage("/r9kbetaoff"),{}},t}return Object(a.__extends)(t,e),t.prototype.render=function(){return o.createElement(o.Fragment,null,o.createElement(ie.a,{channelLogin:this.props.channelLogin,command:"uniquechat","data-test-selector":"unique-command-handler",description:Object(j.d)("Prevent users from sending duplicate messages in Chat","UniqueChatCommandHandler"),helpText:Object(j.d)('Usage: "/uniquechat" - Users can only send unique messages in Chat. Duplicate messages will not be allowed. Use "/uniquechatoff" to disable.',"UniqueChatCommandHandler"),handler:this.setUniqueChatMode,permissionLevel:ae.b.Moderator}),o.createElement(ie.a,{channelLogin:this.props.channelLogin,command:"uniquechatoff","data-test-selector":"uniquechat-off-command-handler",description:Object(j.d)("Turn off unique-chat mode","UniqueChatCommandHandler"),helpText:Object(j.d)('Usage: "/uniquechatoff" - Disables unique-chat mode.',"UniqueChatCommandHandler"),handler:this.unsetUniqueChatMode,permissionLevel:ae.b.Moderator}))},t}(o.Component),Ie=n("bfuM"),Me=n("CpU+"),je=n("fKMw"),Te=n("k/I/");!function(e){e.QUERY_ERROR="QUERY_ERROR"}(Ee||(Ee={})),function(e){e.UnVIP="vip-command-handler_unvip",e.VIP="vip-command-handler_vip",e.VIPs="vip-command-handler_vips"}(we||(we={}));var Pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.vips=function(){return{deferred:j.p.apollo.client.query({query:Te,fetchPolicy:"network-only",variables:{login:t.props.channelLogin}}).then((function(e){var n=e.data;if(!n||!n.user||!n.user.vips)return{notice:t.getVIPsErrorMessage()};var i=n.user.vips.edges.filter((function(e){return e.node&&e.node.login}));if(0===i.length)return{notice:Object(j.d)("This channel does not have any VIPs.","VIPCommandHandler")};var a=i.map((function(e){return e.node&&e.node.login})).join(", ");return{notice:Object(j.d)("VIPs for this channel are: {vips}.",{vips:a},"VIPCommandHandler")}})).catch((function(){return{notice:t.getVIPsErrorMessage()}}))}},t.unVIPUser=function(e){var n=e.trim().split(/\s+/),i=t.getLogin(e);return 1===n.length&&i&&0!==i.length?{deferred:t.props.unVIPUserMutation(i).then((function(e){var n=e.revokeVIP;if(!n||!n.revokee||!n.revokee.login)return{notice:t.getUnVIPErrorMessage(Ee.QUERY_ERROR)};var a=n.error,r=a&&a.code;return r?{notice:t.getUnVIPErrorMessage(r,i)}:{notice:Object(j.d)("You have removed {login} as a VIP of this channel.",{login:i},"VIPCommandHandler")}})).catch((function(){return{notice:t.getUnVIPErrorMessage(Ee.QUERY_ERROR)}}))}:{deferred:Promise.resolve({notice:t.unvipUsage(),error:ae.a.InvalidParameters})}},t.vipUser=function(e){var n=t.getLogin(e);return 1===e.trim().split(/\s+/).length&&n&&0!==n.length?{deferred:t.props.vipUserMutation(n).then((function(e){var i=e.grantVIP;if(!i||!i.grantee||!i.grantee.login)return{notice:t.getVIPErrorMessage(Ee.QUERY_ERROR)};var a=i.error,r=a&&a.code;return r?{notice:t.getVIPErrorMessage(r,n)}:{notice:Object(j.d)("You have added {login} as a VIP of this channel.",{login:n},"VIPCommandHandler")}})).catch((function(){return{notice:t.getVIPErrorMessage(Ee.QUERY_ERROR)}}))}:{deferred:Promise.resolve({notice:t.vipUsage(),error:ae.a.InvalidParameters})}},t}return Object(a.__extends)(t,e),t.prototype.render=function(){return o.createElement(o.Fragment,null,o.createElement(ie.a,{args:[{name:"username",isRequired:!0}],channelLogin:this.props.channelLogin,command:"vip","data-test-selector":we.VIP,description:Object(j.d)("Grant VIP status to a user","VIPCommandHandler"),handler:this.vipUser,helpText:this.vipUsage(),permissionLevel:ae.b.Broadcaster}),o.createElement(ie.a,{args:[{name:"username",isRequired:!0}],channelLogin:this.props.channelLogin,command:"unvip","data-test-selector":we.UnVIP,description:Object(j.d)("Revoke VIP status from a user","VIPCommandHandler"),handler:this.unVIPUser,helpText:this.unvipUsage(),permissionLevel:ae.b.Broadcaster}),o.createElement(ie.a,{channelLogin:this.props.channelLogin,command:"vips","data-test-selector":we.VIPs,description:Object(j.d)("Display a list of VIPs for this channel","VIPCommandHandler"),handler:this.vips,helpText:Object(j.d)('Usage: "/vips" - Lists the VIPs of this channel.',"VIPCommandHandler"),permissionLevel:ae.b.Viewer}))},t.prototype.getLogin=function(e){var t=this.props.activeChattersAPI;return t&&t.getActiveChatterLoginFromDisplayName(e)||e},t.prototype.getCommonErrorMessage=function(e,t){switch(e){default:return"";case L.Fb.GRANTEE_NOT_FOUND:case L.yc.REVOKEE_NOT_FOUND:return Object(j.d)("Invalid username: {login}.",{login:t},"VIPCommandHandler");case L.Fb.FORBIDDEN:case L.yc.FORBIDDEN:return Object(j.d)("You don't have permission to perform that action.","VIPCommandHandler")}},t.prototype.getVIPErrorMessage=function(e,t){switch(void 0===t&&(t=""),e){case L.Fb.FORBIDDEN:case L.Fb.GRANTEE_NOT_FOUND:return this.getCommonErrorMessage(e,t);case L.Fb.GRANTEE_ALREADY_VIP:return Object(j.d)("{login} is already a VIP of this channel.",{login:t},"VIPCommandHandler");case L.Fb.GRANTEE_CHAT_BANNED:return Object(j.d)("{login} is banned in this channel. You must unban this user before granting VIP status.",{login:t},"VIPCommandHandler");case L.Fb.MAX_VIPS_REACHED:return Object(j.d)("Unable to add VIP. Visit the Achievements page on your dashboard to learn how to unlock additional VIP slots.","VIPCommandHandler");case L.Fb.VIP_ACHIEVEMENT_INCOMPLETE:return Object(j.d)("Unable to add VIP. Visit the Achievements page on your dashboard to learn how to unlock this feature.","VIPCommandHandler");case Ee.QUERY_ERROR:case L.Fb.CHANNEL_NOT_FOUND:default:return Object(j.d)("Unable to add VIP.","VIPCommandHandler")}},t.prototype.getUnVIPErrorMessage=function(e,t){switch(void 0===t&&(t=""),e){case L.yc.FORBIDDEN:case L.yc.REVOKEE_NOT_FOUND:return this.getCommonErrorMessage(e,t);case L.yc.REVOKEE_NOT_VIP:return Object(j.d)("{login} is not a VIP of this channel.",{login:t},"VIPCommandHandler");case Ee.QUERY_ERROR:case L.yc.CHANNEL_NOT_FOUND:default:return Object(j.d)("Unable to remove VIP.","VIPCommandHandler")}},t.prototype.getVIPsErrorMessage=function(){return Object(j.d)("There was a problem fetching the list of VIPs. Please try again.","VIPCommandHandler")},t.prototype.vipUsage=function(){return Object(j.d)('Usage: "/vip <username>" - Grants VIP status to a user. VIPs can bypass chat restrictions. Use "/unvip" to revoke VIP status. Use "/vips" to list the VIPs of this channel.',"VIPCommandHandler")},t.prototype.unvipUsage=function(){return Object(j.d)('Usage: "/unvip <username>" - Revokes VIP status from a user.',"VIPCommandHandler")},t}(o.Component),Le=Object(l.d)(Object(Me.a)(),Object(je.a)(),R.a)(Pe),Re=n("vKai"),Fe=n("ilvU"),Ue=n("Tznh"),xe=n("GHzV"),Ae=n("UBeo"),Be=n("jBwP"),Ve=n("xzy9"),He=n("3tQW"),qe=n("fezU"),Ge=n("ZtEv"),We=n("aF6k");var ze=n("lZdE");function Qe(e){switch(e.type){case Ge.b.Message:return[{displayName:e.user.userDisplayName,id:e.user.userID,login:e.user.userLogin}];case Ge.b.Ritual:return[{displayName:e.message.user.userDisplayName,id:e.message.user.userID,login:e.message.user.userLogin}];case Ge.b.Raid:return[{displayName:e.params.displayName,id:e.params.userID,login:e.params.login}];case Ge.b.Resubscription:case Ge.b.Subscription:return[{displayName:e.user.displayName,id:e.user.userID,login:e.user.username}];case Ge.b.SubGift:return[{displayName:e.user.displayName,id:e.user.userID,login:e.user.username},{displayName:e.recipientDisplayName,id:e.recipientID,login:e.recipientLogin}];case Ge.b.ChannelPointsReward:return[{displayName:e.displayName,id:e.userID,login:e.login}];default:return[]}}var Ye=function(e){function t(t){var n=e.call(this,t)||this;return n.getActiveChatters=function(e,t){if(void 0===e&&(e=""),void 0===t&&(t=1/0),n.isDirty&&n.sortChatters(),!e)return n.sortedChatters.slice(0,t);var i=new RegExp("^"+Object(ze.a)(e),"i");return n.sortedChatters.filter((function(e){return i.test(e.login)||e.displayName&&i.test(e.displayName)})).slice(0,t)},n.handleMessage=function(e){Qe(e).forEach((function(e){return n.handleActiveChatter({displayName:e.displayName,login:e.login})}))},n.getActiveChatterLoginFromDisplayName=function(e){return Object.keys(n.activeChatters).find((function(t){return n.activeChatters[t]&&n.activeChatters[t].displayName===e}))||null},n.reset(),n}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.setActiveChattersAPI({getActiveChatters:this.getActiveChatters,getActiveChatterLoginFromDisplayName:this.getActiveChatterLoginFromDisplayName}),this.props.messageHandlerAPI&&this.props.messageHandlerAPI.addMessageHandler(this.handleMessage)},t.prototype.componentWillUnmount=function(){this.props.setActiveChattersAPI(),this.props.messageHandlerAPI&&this.props.messageHandlerAPI.removeMessageHandler(this.handleMessage)},t.prototype.render=function(){return null},t.prototype.componentDidUpdate=function(e){this.props.channelLogin!==e.channelLogin&&this.reset(),this.props.currentUserLogin&&this.props.currentUserLogin!==e.currentUserLogin&&this.activeChatterLogins.has(this.props.currentUserLogin)&&(this.isDirty=!0,this.removeActiveChatter(this.props.currentUserLogin)),e.messageHandlerAPI!==this.props.messageHandlerAPI&&(e.messageHandlerAPI&&e.messageHandlerAPI.removeMessageHandler(this.handleMessage),this.props.messageHandlerAPI&&this.props.messageHandlerAPI.addMessageHandler(this.handleMessage))},t.prototype.reset=function(){this.activeChatterLogins=new Set,this.activeChatters={},this.isDirty=!0,this.sortedChatters=[]},t.prototype.handleActiveChatter=function(e){e.login!==this.props.channelLogin&&e.login!==this.props.currentUserLogin&&(this.activeChatterLogins.has(e.login)?(this.activeChatterLogins.delete(e.login),this.addActiveChatter(e)):(this.addActiveChatter(e),this.trimActiveChatters(),this.isDirty=!0))},t.prototype.addActiveChatter=function(e){this.activeChatterLogins.add(e.login),this.activeChatters[e.login]=e},t.prototype.removeActiveChatter=function(e){this.activeChatterLogins.delete(e),delete this.activeChatters[e]},t.prototype.trimActiveChatters=function(){if(!(this.activeChatterLogins.size<=300))for(var e=this.activeChatterLogins.size-300,t=this.activeChatterLogins.values(),n=0;n<e;n++){var i=t.next().value;this.removeActiveChatter(i)}},t.prototype.sortChatters=function(){var e=this,t=[{displayName:this.props.channelDisplayName||void 0,login:this.props.channelLogin}],n=Object.keys(this.activeChatters).map((function(t){return e.activeChatters[t]}));n.sort((function(e,t){return e.login<t.login?-1:e.login>t.login?1:0})),this.sortedChatters=t.concat(n),this.isDirty=!1},t}(o.Component);var $e=Object(l.d)(Object(s.b)((function(e){var t=Object(h.e)(e);return{currentUserLogin:t&&t.login}})),R.a,$.a)(Ye),Ke=n("f00E"),Xe=n("D7An"),Je=n("kz7j"),Ze=n("XmgI"),et=n("2xye");function tt(e){var t;return((t={})[ae.b.Viewer]="viewer",t[ae.b.Vip]="vip",t[ae.b.Moderator]="moderator",t[ae.b.Broadcaster]="broadcaster",t)[e]}var nt=n("buTd"),it=n("amaQ"),at=n("pb7T");function rt(e){return{type:Ge.b.ChannelPointsReward,id:e.id,displayName:e.userDisplayName,login:e.userLogin,reward:e.reward,message:e.message,userID:e.userID}}var ot=n("TApp");var st=n("ptRJ");var lt=n("oK83");var ct=n("zwF8"),dt=n("W1jp");function ut(e,t){var n=e[t];if(n)return{cost:Object(dt.b)(n),isHighlighted:"CommunityPointsAutomaticReward"===n.__typename&&n.type===L.U.SEND_HIGHLIGHTED_MESSAGE,name:Object(dt.e)(n)}}var mt=n("oi4T"),pt=n("OpME"),ht=n("XQbB"),ft=function(e){function t(t){var n=e.call(this,t)||this;return n.hasConnected=!1,n.connectingToChatMessage=function(){return Object(j.d)("Connecting to Chat","ChatConnection")},n.sendMessage=function(e){var t=n.props.handleCommand(e,n.props.channelLogin);return t.handled?t.result&&t.result.deferred&&t.result.deferred.then((function(e){var t=e.notice,i=e.error;t&&(n.inChatCommandAutocompleteExperiment&&i?n.handleTrayNotice(t,i):n.addMessage(Object(ot.a)(t))),n.trackChatCommand(i)})):n.client.sendCommand(n.props.channelLogin,e).catch((function(e){j.k.warn("Failed to send message, or message timeout",e)})),t.result},n.onJoinedEvent=function(e){n.logger.debug("Connected",n.props.channelLogin),n.props.latencyTracking.reportInteractive(),n.hasConnected||(Object(mt.c)({channelLogin:n.props.channelLogin,isHostMode:n.props.isHostMode}),n.hasConnected=!0),n.chatConnected&&n.props.latencyTracking.reportCustomEvent(n.chatConnected),n.props.updateChatConnectionState(i.CONNECTED),n.postMessageToCurrentChannel(e,{type:Ge.b.Connected,id:Object(We.a)("connected")}),n.inChatInputRevampExperiment&&n.props.clearModifierTray()},n.onDisconnectedEvent=function(e){var t;n.props.latencyTracking.reportInteractive(),n.props.updateChatConnectionState(i.DISCONNECTED),n.addMessage((t=e.reason,{type:Ge.b.Disconnected,id:Object(We.a)("disconnected"),reason:t}))},n.onReconnectingEvent=function(e){n.props.updateChatConnectionState(i.RECONNECTING),n.addMessage({type:Ge.b.Reconnect,id:Object(We.a)("reconnect")}),n.inChatInputRevampExperiment&&n.props.setModifierTray({title:n.connectingToChatMessage(),sendButtonOverride:ct.b.NoOverride,persistent:!0,icon:o.createElement(ht.a,{size:ht.b.Small}),disableChat:!0})},n.onHostedEvent=function(e){return n.postMessageToCurrentChannel(e,(t=e.from,i=e.isAuto,a=e.viewers,{type:Ge.b.Hosted,id:Object(We.a)("hosted-"+t),hostingChannel:t,isAutohost:i,viewerCount:a}));var t,i,a},n.onHostingEvent=function(e){var t;n.postMessageToCurrentChannel(e,(t=e.target,{type:Ge.b.Hosting,id:Object(We.a)("hosting"),hostedChannel:t})),n.trackChatCommand()},n.onUnhostEvent=function(e){var t;n.postMessageToCurrentChannel(e,(t=e.channel,{type:Ge.b.Unhost,id:Object(We.a)("unhost-"+t)})),n.trackChatCommand()},n.onChatMessageEvent=function(e){n.postMessageToCurrentChannel(e,n.convertMessage(e))},n.onChatActionEvent=function(e){var t=n.props.bitsConfig||Ze.a,i=Object(st.a)(Ge.c.Action,e.action,e.message.user,t,n.getFilterFlagOptions(e.message.flags));n.postMessageToCurrentChannel(e,i)},n.onChatNoticeEvent=function(e){if(n.inChatCommandAutocompleteExperiment&&Ge.f.has(e.msgid))n.handleTrayNotice(e.body,e.msgid);else if("msg_rejected"!==e.msgid){var t=(i=e.channel,a=e.msgid,r=e.body,{type:Ge.b.Notice,id:Object(We.a)("notice"),channel:i,msgid:a,message:r});n.postMessageToCurrentChannel(e,t)}var i,a,r;Ge.f.has(e.msgid)&&n.trackChatCommand(e.msgid)},n.onTimeoutEvent=function(e){n.onModerationEvent(Ge.e.Timeout,e)},n.onBanEvent=function(e){n.onModerationEvent(Ge.e.Ban,e)},n.onClearMsgEvent=function(e){var t,i,a;n.postMessageToCurrentChannel(e,(t=e.userLogin,i=e.targetMessageID,a=e.body,{type:Ge.b.Moderation,moderationType:Ge.e.Delete,id:Object(We.a)(t+"-mod"),userLogin:t,targetMessageID:i,body:a}))},n.onModerationEvent=function(e,t){var i,a,r,o;n.postMessageToCurrentChannel(t,(i=e,a=t.userLogin,r=t.reason,o=t.duration,{type:Ge.b.Moderation,moderationType:i,id:Object(We.a)(a+"-mod"),userLogin:a,reason:r,duration:o}))},n.onSubscriptionEvent=function(e){var t;n.postMessageToCurrentChannel(e,(t={channel:e.channel,user:e.user,methods:e.methods},{type:Ge.b.Subscription,id:Object(We.a)(t.user.username+"-sub"),channel:t.channel.slice(1),user:t.user,methods:t.methods}))},n.onSubscriptionGiftEvent=function(e){var t,i=(t={channel:e.channel,user:e.user,methods:e.methods,recipientDisplayName:e.recipientName,recipientID:e.recipientID,recipientLogin:e.recipientLogin,senderCount:e.senderCount},{type:Ge.b.SubGift,id:Object(We.a)(t.user.username+"-sub"),channel:t.channel.slice(1),user:t.user,methods:t.methods,recipientDisplayName:t.recipientDisplayName,recipientID:t.recipientID,recipientLogin:t.recipientLogin,senderCount:t.senderCount});n.postMessageToCurrentChannel(e,i);var a=e.channel.toLowerCase().replace("#","");if(e.recipientID===n.props.currentUserID&&a===n.props.channelLogin)if("control"!==j.p.experiments.getAndTrackAssignment(Xe.c.ChatPrivateCalloutRedesign)){var r={event:{type:nt.a.ThankSubGifter,gifterDisplayName:i.user.displayName,channelLogin:a},key:i.id};n.props.pushCallout(r)}else n.props.channelID&&n.props.currentUserLogin&&Object(it.g)({channelID:n.props.channelID,channelLogin:n.props.channelLogin,calloutType:it.d.CommunitySubGift,privateCalloutSID:Object(Ke.c)(),hasCTA:!0})},n.onAnonSubscriptionGiftEvent=function(e){var t;n.postMessageToCurrentChannel(e,(t={channel:e.channel,methods:e.methods,recipientDisplayName:e.recipientName,recipientID:e.recipientID,recipientLogin:e.recipientLogin},{type:Ge.b.AnonSubGift,id:Object(We.a)(t.recipientDisplayName+"-sub"),channel:t.channel.slice(1),methods:t.methods,recipientDisplayName:t.recipientDisplayName,recipientID:t.recipientID,recipientLogin:t.recipientLogin}))},n.onSubscriptionMysteryGiftEvent=function(e){var t;n.postMessageToCurrentChannel(e,(t={channel:e.channel,user:e.user,plan:e.plan,massGiftCount:e.massGiftCount,senderCount:e.senderCount},{type:Ge.b.SubMysteryGift,id:Object(We.a)(t.user.username+"-sub"),channel:t.channel.slice(1),user:t.user,plan:t.plan,massGiftCount:t.massGiftCount,senderCount:t.senderCount}))},n.onAnonSubscriptionMysteryGiftEvent=function(e){var t;n.postMessageToCurrentChannel(e,(t={channel:e.channel,plan:e.plan,massGiftCount:e.massGiftCount},{type:Ge.b.AnonSubMysteryGift,id:Object(We.a)(t.massGiftCount+"-sub"),channel:t.channel.slice(1),plan:t.plan,massGiftCount:t.massGiftCount}))},n.onCommunityPayForwardEvent=function(e){var t;n.postMessageToCurrentChannel(e,(t={user:e.user,channel:e.channel,priorGifter:{id:e.priorGifterID,displayName:e.priorGifterName,anonymous:e.priorGifterAnonymous}},{type:Ge.b.CommunityPayForward,id:Object(We.a)(t.user.username+"-sub"),user:t.user,channel:t.channel.slice(1),priorGifter:t.priorGifter}))},n.onStandardPayForwardEvent=function(e){var t;n.postMessageToCurrentChannel(e,(t={user:e.user,channel:e.channel,priorGifter:{id:e.priorGifterID,displayName:e.priorGifterName,anonymous:e.priorGifterAnonymous},recipient:{id:e.recipientID,displayName:e.recipientName}},{type:Ge.b.StandardPayForward,id:Object(We.a)(t.user.username+"-sub"),user:t.user,channel:t.channel.slice(1),priorGifter:t.priorGifter,recipient:t.recipient}))},n.onBitsCharityEvent=function(e){var t,i,a,r,o,s;n.postMessageToCurrentChannel(e,(t=e.total,i=e.charityName,a=e.daysLeft,r=e.hoursLeft,o=e.hashtag,s=e.learnMore,{type:Ge.b.BitsCharity,id:Object(We.a)("charity"),total:t,charityName:i,daysLeft:a,hoursLeft:r,hashtag:o,learnMore:s}))},n.onResubscriptionEvent=function(e){var t,i;n.postMessageToCurrentChannel(e,(t={channel:e.channel,user:e.user,methods:e.methods,months:e.months,messageBody:e.body,cumulativeMonths:e.cumulativeMonths,shouldShareStreakTenure:e.shouldShareStreakTenure,streakMonths:e.streakMonths},i=void 0,t.messageBody&&(i=Object(st.a)(Ge.c.Post,t.messageBody,t.user,Ze.a,null)),{type:Ge.b.Resubscription,id:Object(We.a)(t.user.username+"-sub"),channel:t.channel.slice(1),user:t.user,methods:t.methods,message:i,months:t.months,cumulativeMonths:t.cumulativeMonths,shouldShareStreakTenure:t.shouldShareStreakTenure,streakMonths:t.streakMonths}))},n.onGiftPaidUpgradeEvent=function(e){var t;n.postMessageToCurrentChannel(e,(t={channel:e.channel,promoGiftTotal:e.promoGiftTotal,promoName:e.promoName,senderLogin:e.senderLogin,senderName:e.senderName,user:e.user},{type:Ge.b.GiftPaidUpgrade,id:Object(We.a)(t.user.username+"-sub"),channel:t.channel.slice(1),promoGiftTotal:t.promoGiftTotal,promoName:t.promoName,senderLogin:t.senderLogin,senderName:t.senderName,user:t.user}))},n.onAnonGiftPaidUpgradeEvent=function(e){var t;n.postMessageToCurrentChannel(e,(t={channel:e.channel,promoGiftTotal:e.promoGiftTotal,promoName:e.promoName,user:e.user},{type:Ge.b.AnonGiftPaidUpgrade,id:Object(We.a)(t.user.username+"-sub"),channel:t.channel.slice(1),promoGiftTotal:t.promoGiftTotal,promoName:t.promoName,user:t.user}))},n.onPrimePaidUpgradeEvent=function(e){var t;n.postMessageToCurrentChannel(e,(t={channel:e.channel,plan:e.plan,user:e.user},{type:Ge.b.PrimePaidUpgrade,id:Object(We.a)(t.user.username+"-sub"),channel:t.channel.slice(1),plan:t.plan,user:t.user}))},n.onPrimeCommunityGiftReceivedEvent=function(e){var t;n.postMessageToCurrentChannel(e,(t={giftName:e.giftName,sender:e.sender,receiver:e.receiver,user:e.user},{type:Ge.b.PrimeCommunityGiftReceivedEvent,id:Object(We.a)("primecommunitygiftreceived"),giftName:t.giftName,sender:t.sender?t.sender:t.user?t.user.displayName:"",receiver:t.receiver}))},n.onExtendSubscriptionEvent=function(e){var t;n.postMessageToCurrentChannel(e,(t={channel:e.channel,body:e.body,benefitEndMonth:e.benefitEndMonth,user:e.user},{type:Ge.b.ExtendSubscription,id:Object(We.a)(t.user.username+"-sub"),channel:t.channel.slice(1),body:t.body,benefitEndMonth:t.benefitEndMonth,user:t.user}))},n.onRoomModsEvent=function(e){return n.postMessageToCurrentChannel(e,(t=e.usernames,{type:Ge.b.RoomMods,id:Object(We.a)("roommods"),moderatorLogins:t}));var t},n.onRoomStateEvent=function(e){var t;n.postMessageToCurrentChannel(e,(t=e.state,{type:Ge.b.RoomState,id:Object(We.a)("roomstate"),state:t})),n.trackChatCommand()},n.onEmoteOnlyModeEvent=function(e){return n.postMessageToCurrentChannel(e,(t=e.enabled,{type:Ge.b.EmoteOnlyMode,id:Object(We.a)("emoteonlymode"),enabled:t}));var t},n.onSubscriberOnlyModeEvent=function(e){return n.postMessageToCurrentChannel(e,(t=e.enabled,{type:Ge.b.SubscriberOnlyMode,id:Object(We.a)("subscriber-only"),enabled:t}));var t},n.onR9KModeEvent=function(e){return n.postMessageToCurrentChannel(e,(t=e.enabled,{type:Ge.b.R9KMode,id:Object(We.a)("r9kmode"),enabled:t}));var t},n.onClearChatEvent=function(e){n.postMessageToCurrentChannel(e,{type:Ge.b.Clear,id:Object(We.a)("clear")}),n.trackChatCommand()},n.onRaidEvent=function(e){var t,i,a;n.postMessageToCurrentChannel(e,(t=e.channel,i=e.userLogin,a=e.params,{type:Ge.b.Raid,id:Object(We.a)("raid"),channel:t,userLogin:i,params:a})),n.trackChatCommand()},n.onUnraidEvent=function(e){var t,i,a;n.postMessageToCurrentChannel(e,(t=e.channel,i=e.userLogin,a=e.message,{type:Ge.b.Unraid,id:Object(We.a)("unraid"),channel:t,userLogin:i,message:a})),n.trackChatCommand()},n.onRitualEvent=function(e){var t,i;n.postMessageToCurrentChannel(e,(t=e.type,i=n.convertMessage(e),{type:Ge.b.Ritual,id:Object(We.a)(i.user.userLogin+"-"+t+"-ritual"),ritualType:t,message:i}))},n.onFirstCheerEvent=function(e){var t,i;n.postMessageToCurrentChannel(e,(t={message:n.convertMessage(e)},i=t.message,{type:Ge.b.FirstCheerMessage,id:Object(We.a)(i.user.userLogin+"-firstcheer"),message:i}))},n.onBitsBadgeTierEvent=function(e){var t,i,a;n.postMessageToCurrentChannel(e,(t=n.convertMessage(e),i=e.threshold,a=e.message.user,{type:Ge.b.BitsBadgeTierMessage,id:Object(We.a)("bits-badge-tier"),message:t,threshold:i,user:a}))},n.onBadgesUpdatedEvent=function(e){return n.addMessage((t=e.username,i=e.badges,a=e.badgeDynamicData,{type:Ge.b.BadgesUpdated,id:Object(We.a)("updateBadges"),userName:t,badges:i,badgeDynamicData:a}));var t,i,a},n.onPurchaseEvent=function(e){var t=n.props.bitsConfig||Ze.a;n.postMessageToCurrentChannel(e,function(e,t,n,i){return{bitsConfig:i,message:t,purchase:e,timestamp:n,id:Object(We.a)(t.user.userLogin+"-purchase"),type:Ge.b.Purchase}}(e.purchase,n.convertMessage(e),e.timestamp,t))},n.onCrateEvent=function(e){var t,i;n.postMessageToCurrentChannel(e,(t=n.convertMessage(e),i=e.selectedCount,{type:Ge.b.CrateGift,id:Object(We.a)("crate"),message:t,selectedCount:i}))},n.onRewardGiftEvent=function(e){var t,i,a,r,o,s;n.postMessageToCurrentChannel(e,(t=e.user,i=e.triggerType,a=e.triggerAmount,r=e.selectedCount,o=e.totalRewardCount,s=e.domain,{type:Ge.b.RewardGift,id:Object(We.a)("rewardGift"),triggerType:i,triggerAmount:a,selectedCount:r,totalRewardCount:o,messageID:t?t.id:null,userID:t?t.userID:null,userLogin:t?t.username:null,displayName:t?t.displayName:null,domain:s,sourceType:lt.b.chat_message}))},n.onChannelPointsRewardEvent=function(e){var t=n.convertMessage(e);n.postMessageToCurrentChannel(e,rt({id:t.id,message:t,reward:ut(n.props.rewardMap,e.rewardID),userDisplayName:t.user.userDisplayName,userID:t.user.userID,userLogin:t.user.userLogin}))},n.convertMessage=function(e){var t=n.props.bitsConfig||Ze.a;return Object(st.a)(Ge.c.Post,e.message.body,e.message.user,t,n.getFilterFlagOptions(e.message.flags))},n.handleTrayNotice=function(e,t){var i;switch(t){case"unrecognized_cmd":i=Object(j.d)("Unrecognized Command","ChatConnection");break;case"missing_parameters":i=Object(j.d)("Missing Parameters","ChatConnection");break;default:i=Object(j.d)("Invalid Parameters","ChatConnection")}var a,r=n.props.prevCommand;"unrecognized_cmd"!==t&&r&&(a="/"+r.command+" "),n.props.setModifierTray({title:i,body:e,timeout:3e4,icon:o.createElement(at.a,null),inputValue:a,type:ct.a.CommandWarning})},n.logger=j.k.withCategory("chat-service"),n.logger.debug("Created"),n.service=j.p.tmi,n.client=j.p.tmi.client,n.disabled=j.p.tmi.disabled,n.inChatInputRevampExperiment="variant1"===j.p.experiments.getAndTrackAssignment(Xe.c.ChatInputRevamp),n.inChatCommandAutocompleteExperiment="variant1"===j.p.experiments.getAndTrackAssignment(Xe.c.ChatCommandAutocomplete),n.registerCustomLatencyEvents(),n}return Object(a.__extends)(t,e),t.prototype.render=function(){return null},t.prototype.componentDidMount=function(){this.props.setChatConnectionAPI({sendMessage:this.sendMessage}),this.shouldConnectOnMount()?(this.inChatInputRevampExperiment&&this.props.setModifierTray({title:this.connectingToChatMessage(),sendButtonOverride:ct.b.NoOverride,persistent:!0,icon:o.createElement(ht.a,{size:ht.b.Small}),disableChat:!0}),this.join(this.props.channelLogin)):this.props.latencyTracking.reportInteractive(),this.props.emoteSets&&this.client.updateEmoteMap(Object(pt.c)(this.props.emoteSets)),null===this.props.channelID&&this.skipLatencyMeasurements()},t.prototype.componentWillUnmount=function(){this.props.setChatConnectionAPI(),this.disconnect(this.props.channelLogin)},t.prototype.componentDidUpdate=function(e){(null===this.props.channelID&&this.props.channelID!==e.channelID&&this.skipLatencyMeasurements(),this.props.emoteSets&&this.props.emoteSets!==e.emoteSets&&this.client.updateEmoteMap(Object(pt.c)(this.props.emoteSets)),!this.props.shouldConnect&&e.shouldConnect)?this.disconnect(e.channelLogin):(this.props.authToken!==e.authToken||this.props.channelLogin!==e.channelLogin||this.props.currentUserID!==e.currentUserID||this.props.shouldConnect&&!e.shouldConnect)&&(this.logger.debug("Reconnecting..."),this.registerCustomLatencyEvents(),this.join(this.props.channelLogin))},t.prototype.join=function(e){this.logger.debug("Joining channel and binding all event listeners",this.props.channelLogin),this.hasConnected=!1,this.joinedChannel&&this.joinedChannel!==e&&this.service.part(this.joinedChannel),this.joinedChannel=e,this.connectHandlers(),this.service.join(e)},t.prototype.disconnect=function(e){this.logger.debug("Parting channel and unbinding all event listeners",e),this.disconnectHandlers(),this.service.part(e)},t.prototype.getFilterFlagOptions=function(e){return e&&0!==e.length?this.props.chatFilterExperimentMembership===Ue.b.Excluded||!this.props.viewerChatFilterEnabled||this.props.isCurrentUserModerator?null:{list:e,preferences:this.props.viewerChatFilterSettings}:null},t.prototype.connectHandlers=function(){this.disconnectHandlers(),this.client.events.joined(this.onJoinedEvent),this.client.events.disconnected(this.onDisconnectedEvent),this.client.events.reconnecting(this.onReconnectingEvent),this.client.events.chat(this.onChatMessageEvent),this.client.events.usernotice(this.onChatMessageEvent),this.client.events.notice(this.onChatNoticeEvent),this.client.events.action(this.onChatActionEvent),this.client.events.badgesupdated(this.onBadgesUpdatedEvent),this.client.events.hosted(this.onHostedEvent),this.client.events.hosting(this.onHostingEvent),this.client.events.unhost(this.onUnhostEvent),this.client.events.purchase(this.onPurchaseEvent),this.client.events.crate(this.onCrateEvent),this.client.events.rewardgift(this.onRewardGiftEvent),this.client.events.ritual(this.onRitualEvent),this.client.events.firstcheer(this.onFirstCheerEvent),this.client.events.bitsbadgetier(this.onBitsBadgeTierEvent),this.client.events.channelpointsreward(this.onChannelPointsRewardEvent),this.client.events.subscription(this.onSubscriptionEvent),this.client.events.resub(this.onResubscriptionEvent),this.client.events.giftpaidupgrade(this.onGiftPaidUpgradeEvent),this.client.events.anongiftpaidupgrade(this.onAnonGiftPaidUpgradeEvent),this.client.events.primepaidupgrade(this.onPrimePaidUpgradeEvent),this.client.events.extendsub(this.onExtendSubscriptionEvent),this.client.events.subgift(this.onSubscriptionGiftEvent),this.client.events.anonsubgift(this.onAnonSubscriptionGiftEvent),this.client.events.submysterygift(this.onSubscriptionMysteryGiftEvent),this.client.events.anonsubmysterygift(this.onAnonSubscriptionMysteryGiftEvent),this.client.events.communitypayforward(this.onCommunityPayForwardEvent),this.client.events.standardpayforward(this.onStandardPayForwardEvent),this.client.events.timeout(this.onTimeoutEvent),this.client.events.ban(this.onBanEvent),this.client.events.clearchat(this.onClearChatEvent),this.client.events.clearmsg(this.onClearMsgEvent),this.client.events.raid(this.onRaidEvent),this.client.events.unraid(this.onUnraidEvent),this.client.events.mods(this.onRoomModsEvent),this.client.events.roomstate(this.onRoomStateEvent),this.client.events.subscribers(this.onSubscriberOnlyModeEvent),this.client.events.emoteonlymode(this.onEmoteOnlyModeEvent),this.client.events.r9kmode(this.onR9KModeEvent),this.client.events.charity(this.onBitsCharityEvent),this.client.events.primecommunitygiftreceived(this.onPrimeCommunityGiftReceivedEvent)},t.prototype.disconnectHandlers=function(){this.client.events.remove("joined",this.onJoinedEvent),this.client.events.remove("disconnected",this.onDisconnectedEvent),this.client.events.remove("reconnecting",this.onReconnectingEvent),this.client.events.remove("chat",this.onChatMessageEvent),this.client.events.remove("usernotice",this.onChatMessageEvent),this.client.events.remove("notice",this.onChatNoticeEvent),this.client.events.remove("action",this.onChatActionEvent),this.client.events.remove("badgesupdated",this.onBadgesUpdatedEvent),this.client.events.remove("hosted",this.onHostedEvent),this.client.events.remove("hosting",this.onHostingEvent),this.client.events.remove("unhost",this.onUnhostEvent),this.client.events.remove("purchase",this.onPurchaseEvent),this.client.events.remove("crate",this.onCrateEvent),this.client.events.remove("rewardgift",this.onRewardGiftEvent),this.client.events.remove("ritual",this.onRitualEvent),this.client.events.remove("firstcheer",this.onFirstCheerEvent),this.client.events.remove("bitsbadgetier",this.onBitsBadgeTierEvent),this.client.events.remove("channelpointsreward",this.onChannelPointsRewardEvent),this.client.events.remove("subscription",this.onSubscriptionEvent),this.client.events.remove("resub",this.onResubscriptionEvent),this.client.events.remove("subgift",this.onSubscriptionGiftEvent),this.client.events.remove("submysterygift",this.onSubscriptionMysteryGiftEvent),this.client.events.remove("communitypayforward",this.onCommunityPayForwardEvent),this.client.events.remove("standardpayforward",this.onStandardPayForwardEvent),this.client.events.remove("timeout",this.onTimeoutEvent),this.client.events.remove("ban",this.onBanEvent),this.client.events.remove("clearchat",this.onClearChatEvent),this.client.events.remove("raid",this.onRaidEvent),this.client.events.remove("unraid",this.onUnraidEvent),this.client.events.remove("mods",this.onRoomModsEvent),this.client.events.remove("roomstate",this.onRoomStateEvent),this.client.events.remove("subscribers",this.onSubscriberOnlyModeEvent),this.client.events.remove("emoteonlymode",this.onEmoteOnlyModeEvent),this.client.events.remove("r9kmode",this.onR9KModeEvent),this.client.events.remove("charity",this.onBitsCharityEvent)},t.prototype.postMessageToCurrentChannel=function(e,t){e.channel.toLowerCase().replace("#","")===this.props.channelLogin.toLowerCase()&&this.addMessage(t)},t.prototype.addMessage=function(e){this.props.messageHandlerAPI&&this.props.messageHandlerAPI.handleMessage(e)},t.prototype.shouldConnectOnMount=function(){return this.props.shouldConnect&&!this.disabled},t.prototype.registerCustomLatencyEvents=function(){this.logger.debug("Registering custom latency events"),this.props.latencyTracking.resetCustomEvents(Je.a.Chat),this.chatInitialized=this.registerInitEvent(),this.props.latencyTracking.reportCustomEvent(this.chatInitialized),this.shouldConnectOnMount()&&(this.chatConnected=this.registerConnectedEvent())},t.prototype.registerInitEvent=function(){return this.props.latencyTracking.registerCustomEvent({benchmark:3e3,group:Je.a.Chat,key:Je.b.ChatInit,label:Je.c.Init})},t.prototype.registerConnectedEvent=function(){return this.props.latencyTracking.registerCustomEvent({benchmark:4e3,group:Je.a.Chat,key:Je.b.ChatConnected,label:Je.c.Connected})},t.prototype.skipLatencyMeasurements=function(){this.props.latencyTracking.resetCustomEvents(Je.a.Chat),this.props.latencyTracking.reportInteractive()},t.prototype.trackChatCommand=function(e){var t,n,i,a=this.props.prevCommand;if(a){if(e)n={channelID:this.props.channelID,userID:this.props.userID,userType:this.props.commandPermissionLevel,body:a.message,errorType:e},i={user_id:n.userID||"",channel_id:n.channelID||"",user_type:tt(n.userType),body:n.body,error_type:(t=n.errorType,"unrecognized_cmd"===t?ae.a.UnrecognizedCommand:Ge.f.has(t)?ae.a.InvalidParameters:t)},j.o.track(et.SpadeEventType.ChatCommandClientFail,i);else this.props.getCommands(this.props.commandPermissionLevel).map((function(e){return e.name})).includes(a.command)&&function(e){var t,n={user_id:e.userID||"",channel_id:e.channelID||"",user_type:tt(e.userType),chat_command:e.chatCommand,args:(t=e.args,t.trim().split(/\s+/))};j.o.track(et.SpadeEventType.ChatCommandClientSuccess,n)}({channelID:this.props.channelID,userID:this.props.userID,userType:this.props.commandPermissionLevel,chatCommand:a.command,args:a.args});this.props.clearPrevCommand()}},t}(o.Component);var gt=Object(l.d)(Object(s.b)((function(e){var t=Object(h.e)(e);return{authToken:Object(h.a)(e),currentUserLogin:t&&t.login,currentUserID:t&&t.id,viewerChatFilterEnabled:e.chat.viewerChatFilterEnabled,viewerChatFilterSettings:e.chat.viewerChatFilterSettings}})),Object(_.withLatencyTracking)("ChatConnectionService"),A,$.a,Object(Ue.d)((function(e){return e})),Object(g.b)((function(e){return{getCommands:e.getCommands,handleCommand:e.handleCommand,prevCommand:e.prevCommand,clearPrevCommand:e.clearPrevCommand}})),Object(O.b)((function(e){return{setModifierTray:function(t){return e.setModifierTray(t)},clearModifierTray:e.clearModifierTray}})),Object(v.b)((function(e){return{pushCallout:function(t){return e.pushCallout(t)}}})),E((function(e){return{chatConnectionState:e.chatConnectionState,updateChatConnectionState:e.updateChatConnectionState}})),Object(f.b)((function(e){return{bitsConfig:e.bitsConfig}})),Object(be.a)((function(e){return{rewardMap:e.rewardMap}})))(ft);var vt,bt=n("olXY"),kt=n("HGFl"),yt=n("NAv5");function St(e,t){var n=Object(yt.addSeconds)(e,t);return Math.max(0,Object(yt.differenceInSeconds)(n,new Date))}!function(e){e.Banned="msg_banned",e.Timedout="msg_timedout",e.Ratelimit="msg_ratelimit",e.Duplicate="msg_duplicate",e.Subsonly="msg_subsonly",e.EmoteOnly="msg_emoteonly",e.VerifiedEmail="msg_verified_email",e.Slowmode="msg_slowmode",e.Facebook="msg_facebook",e.BlizzardConnect="msg_blizzard",e.R9k="msg_r9k",e.Followers="msg_followersonly",e.FollowersZero="msg_followersonly_zero",e.FollowersFollowed="msg_followersonly_followed",e.ChannelSuspended="msg_channel_suspended",e.Suspended="msg_suspended",e.BadCharacters="msg_bad_characters"}(vt||(vt={}));var Ct,Et=n("nIRf"),wt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.reasons=[],t.updateHandlers=[],t.followTimerRunning=!1,t.slowModeTimerRunning=!1,t.followSecondsRemaining=0,t.slowSecondsRemaining=0,t.lastMessageSentAt=new Date(0),t.getRestrictions=function(){return 0===t.reasons.length?null:t.reasons},t.updateRestrictionState=function(){var e;if(!t.props.data||!t.props.data.channel)return!1;var n=((e={})[L.I.SUBSCRIBERS_ONLY]=t.shouldEnforceSubsOnly(),e[L.I.VERIFIED_ONLY]=t.shouldEnforceVerifiedOnly(),e[L.I.FOLLOWERS_ONLY]=t.shouldEnforceFollowersOnly(),e[L.I.SLOW_MODE]=t.shouldEnforceSlowMode(),e),i=[],a=t.extractReasons(t.props);if(a)for(var r=0,o=a;r<o.length;r++){var s=o[r];if(n[s])if(s===L.I.VERIFIED_ONLY)t.props.data.currentUser&&t.props.data.currentUser.isEmailVerified||i.push(s);else if(s===L.I.FOLLOWERS_ONLY){if(null!==t.getFollowedTime()){if(0===t.props.followerDurationSeconds)continue;if(t.props.followerDurationSeconds>0&&t.followSecondsRemaining<=0)continue}i.push(s)}else s===L.I.SLOW_MODE?t.slowSecondsRemaining>0&&i.push(s):i.push(s)}return t.reasons=i,!0},t.getRemainingFollowSeconds=function(){return!!t.getFollowedTime()?Math.min(t.followSecondsRemaining,t.props.followerDurationSeconds):null},t.getRemainingSlowModeSeconds=function(){return t.slowSecondsRemaining},t.addUpdateHandler=function(e){-1===t.updateHandlers.indexOf(e)&&(t.updateHandlers=t.updateHandlers.concat(e))},t.removeUpdateHandler=function(e){t.updateHandlers=t.updateHandlers.filter((function(t){return t!==e}))},t.updateState=function(){var e=t.updateSlowState();return e=t.updateFollowState()||e,(e=t.updateRestrictionState()||e)&&t.notifyHandlers(),e},t.updateFollowState=function(){var e=t.getFollowedTime(),n=t.followSecondsRemaining,i=n;return e&&(i=St(e,t.props.followerDurationSeconds),t.followSecondsRemaining=i),t.followTimerRunning&&(null===e||t.followSecondsRemaining<=0||!t.props.followerMode)?(t.stopFollowTimer(),!0):!t.followTimerRunning&&t.props.followerMode&&t.props.followerDuration>0&&e&&0!==e.getTime()?(t.startFollowTimer(),!0):i!==n},t.updateSlowState=function(){if(t.props.data&&t.props.data.channel&&t.props.data.channel.self&&t.props.data.channel.self.lastRecentChatMessageAt){var e=Object(kt.e)(t.props.data.channel.self.lastRecentChatMessageAt);e>t.lastMessageSentAt&&(t.lastMessageSentAt=e)}var n=(new Date).getTime()/1e3,i=t.lastMessageSentAt.getTime()/1e3+t.props.slowModeDuration,a=t.slowSecondsRemaining;return t.slowSecondsRemaining=Math.round(Math.max(i-n,0)),t.slowModeTimerRunning&&(t.slowSecondsRemaining<=0||!t.props.slowMode||!t.shouldEnforceSlowMode())?(t.stopSlowTimer(),!0):t.slowSecondsRemaining>0&&a<=0?(t.startSlowTimer(),!0):t.slowSecondsRemaining!==a},t.notifyHandlers=function(){t.updateHandlers.forEach((function(e){return e()}))},t.onChatEvent=function(e){var n=new Date(0);switch(e.type){case Ge.b.Message:e.user.userID===t.props.currentUserID&&(n=new Date(e.timestamp));break;case Ge.b.Notice:Object.values(vt).includes(e.msgid)&&(t.stopSlowTimer(),t.updateRestrictionState(),t.notifyHandlers())}n>t.lastMessageSentAt&&(t.lastMessageSentAt=n,t.updateSlowState()&&(t.updateRestrictionState(),t.notifyHandlers()))},t.startFollowTimer=function(){var e=t.getFollowedTime(),n=t.props.followerDurationSeconds;null===e||n<=0||!t.shouldEnforceFollowersOnly()||(t.followSecondsRemaining=St(e,n),t.followTimerRunning=!0,t.countdownTimer.start())},t.stopFollowTimer=function(){t.followTimerRunning=!1,t.followSecondsRemaining=0,t.slowModeTimerRunning||t.countdownTimer.stop()},t.startSlowTimer=function(){t.shouldEnforceSlowMode()&&(t.slowModeTimerRunning=!0,t.countdownTimer.start())},t.stopSlowTimer=function(){t.slowModeTimerRunning=!1,t.slowSecondsRemaining=0,t.lastMessageSentAt=new Date(0),t.followTimerRunning||t.countdownTimer.stop()},t.tick=function(){t.updateState()},t.getFollowedTime=function(){return t.props.data&&t.props.data.channel&&t.props.data.channel.self&&t.props.data.channel.self.follower&&t.props.data.channel.self.follower.followedAt?Object(kt.e)(t.props.data.channel.self.follower.followedAt):null},t.extractReasons=function(e){return e.data&&e.data.channel&&e.data.channel.self&&e.data.channel.self.chatRestrictedReasons?e.data.channel.self.chatRestrictedReasons:null},t.extractRequireVerified=function(e){return!!(e.data&&e.data.channel&&e.data.channel.chatSettings)&&e.data.channel.chatSettings.requireVerifiedAccount},t.restrictionIncluded=function(e){var n=t.extractReasons(t.props);return!!n&&-1!==n.indexOf(e)},t.shouldEnforceSubsOnly=function(){return t.props.subsOnlyMode&&t.restrictionIncluded(L.I.SUBSCRIBERS_ONLY)},t.shouldEnforceVerifiedOnly=function(){return!(!t.extractRequireVerified(t.props)||!t.restrictionIncluded(L.I.VERIFIED_ONLY))},t.shouldEnforceFollowersOnly=function(){return t.props.followerMode&&t.restrictionIncluded(L.I.FOLLOWERS_ONLY)},t.shouldEnforceSlowMode=function(){return t.props.slowMode&&t.restrictionIncluded(L.I.SLOW_MODE)},t}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){var e=!1;this.props.setChatRestrictionsAPI({addUpdateHandler:this.addUpdateHandler,removeUpdateHandler:this.removeUpdateHandler,getRestrictions:this.getRestrictions,getRemainingFollowSeconds:this.getRemainingFollowSeconds,getRemainingSlowModeSeconds:this.getRemainingSlowModeSeconds}),this.props.messageHandlerAPI&&this.props.messageHandlerAPI.addMessageHandler(this.onChatEvent),this.countdownTimer=new Et.a({onInterval:this.tick,intervalMillis:1e3}),this.shouldEnforceFollowersOnly()&&(this.props.followerDuration>0&&this.startFollowTimer(),e=!0),(this.shouldEnforceSubsOnly()||this.shouldEnforceVerifiedOnly())&&(e=!0),this.props.data&&this.props.data.channel&&this.props.data.channel.self&&this.props.data.channel.self.lastRecentChatMessageAt&&(this.lastMessageSentAt=Object(kt.e)(this.props.data.channel.self.lastRecentChatMessageAt)),this.shouldEnforceSlowMode()&&(e=this.updateSlowState()||e),e&&this.updateState()},t.prototype.render=function(){return null},t.prototype.componentWillUnmount=function(){this.stopFollowTimer(),this.stopSlowTimer(),this.props.messageHandlerAPI&&this.props.messageHandlerAPI.removeMessageHandler(this.onChatEvent),this.props.setChatRestrictionsAPI()},t.prototype.componentDidUpdate=function(e){var t=!1,n=!1;n=this.needsStateUpdate(e)||n,n=this.updateSlowState()||n,n=this.updateFollowState()||n,this.slowModeTimerRunning&&e.slowModeDuration!==this.props.slowModeDuration&&(this.stopSlowTimer(),n=!0),e.pubsub.messages.subscriptionInfo!==this.props.pubsub.messages.subscriptionInfo&&(n=!0,t=!0),e.pubsub.messages.moderatorActions&&e.pubsub.messages.moderatorActions!==this.props.pubsub.messages.moderatorActions&&(t=!0),t&&this.props.data&&this.props.data.refetch(),n&&(this.updateRestrictionState(),this.notifyHandlers()),e.messageHandlerAPI!==this.props.messageHandlerAPI&&(e.messageHandlerAPI&&e.messageHandlerAPI.removeMessageHandler(this.onChatEvent),this.props.messageHandlerAPI&&this.props.messageHandlerAPI.addMessageHandler(this.onChatEvent))},t.prototype.needsStateUpdate=function(e){if((!e.data||e.data.loading)&&this.props.data&&!this.props.data.loading)return!0;var t=this.extractReasons(e),n=this.extractReasons(this.props);if(!t&&n||t&&!n)return!0;if(t&&n&&(t.length!==n.length||t.every((function(e,t){return e===n[t]}))))return!0;if(e.subsOnlyMode!==this.props.subsOnlyMode||e.followerMode!==this.props.followerMode)return!0;if(e.followerDuration!==this.props.followerDuration)return!0;if(this.extractRequireVerified(e)!==this.extractRequireVerified(this.props))return!0;if(e.data&&this.props.data){var i=e.data,a=this.props.data;if(i.currentUser&&a.currentUser&&i.currentUser.isEmailVerified!==a.currentUser.isEmailVerified)return!0;if(a.channel&&a.channel.self){var r=a.channel.self,o=new Date(0),s=!1,l=!(!r.follower||!r.follower.followedAt);if(i.channel&&i.channel.self&&i.channel.self.follower&&i.channel.self.follower.followedAt&&(o=Object(kt.e)(i.channel.self.follower.followedAt),s=!0),s&&!l)return!0;if(l){var c=new Date(0);if(r.follower&&r.follower.followedAt&&(c=Object(kt.e)(r.follower.followedAt)),o.getTime()!==c.getTime())return!0}}}return!1},t}(o.Component);function Ot(e){return!e.data||e.data.loading||!e.data.channel||!e.data.channel.id||!e.currentUserID}var Dt=Object(l.d)(Object(s.b)((function(e){var t=Object(h.e)(e);return{currentUserID:t&&t.id,isStaff:!!(t&&t.roles&&t.roles.isStaff)}})),W,$.a,Object(c.a)(bt,{options:function(e){return{variables:{channelLogin:e.channelLogin}}},skip:function(e){return!e.channelLogin}}),Object(d.a)([{topic:function(e){return Object(p.U)(e.currentUserID||"")},mapMessageTypesToProps:{"*":"subscriptionInfo"},skip:Ot},{topic:function(e){return Object(p.A)(e.currentUserID||"",e.data&&e.data.channel&&e.data.channel.id||"")},mapMessageTypesToProps:(Ct={},Ct[m.PubsubMessageType.ModeratorAdded]="moderatorActions",Ct[m.PubsubMessageType.ModeratorRemoved]="moderatorActions",Ct),skip:Ot,skipMessage:function(e,t){var n=e;return!t.data.currentUser||n.data.target_user_id!==t.data.currentUser.id}}]),Object(u.a)((function(e){return{query:bt,variables:{channelLogin:e.channelLogin},topic:Object(p.T)(e.currentUserID||""),type:m.PubsubMessageType.UserPropertiesUpdate,skip:Ot(e),mutator:function(e,t){return t&&t.currentUser?void 0===e.changed.email_verified?t:r(t,(function(e){return e.currentUser.isEmailVerified}),(function(){return e.changed.email_verified})):t}}})),Object(u.a)((function(e){return{query:bt,variables:{channelLogin:e.channelLogin},topic:Object(p.v)(e.currentUserID||""),types:[m.PubsubMessageType.UserFollowedEvent,m.PubsubMessageType.UserUnfollowedEvent],skip:Ot(e),mutator:function(e,t){if(!t||!t.channel||!t.channel.self)return t;if(function(e){return e.type===m.PubsubMessageType.UserFollowedEvent}(e))return e.target_user_id!==t.channel.id?t:t.channel.self.follower?r(t,(function(e){return e.channel.self.follower.followedAt}),(function(){return e.timestamp})):r(t,(function(e){return e.channel.self.follower}),(function(){return{__typename:"FollowerEdge",followedAt:e.timestamp}}));if(function(e){return e.type===m.PubsubMessageType.UserUnfollowedEvent}(e)){if(e.target_user_id!==t.channel.id)return t;if(t.channel.self.follower)return r(t,(function(e){return e.channel.self.follower.followedAt}),(function(){return null}))}return t}}})),Object(Be.b)((function(e){return{followerDuration:e.followerDuration,followerDurationSeconds:60*e.followerDuration,followerMode:e.followerMode,slowMode:e.slowMode,slowModeDuration:e.slowModeDuration,subsOnlyMode:e.subsOnlyMode}})))(wt),Nt=n("lw3P"),_t=n("nkgB"),It=n("KGti"),Mt=n("RcPG"),jt=1e3,Tt=150,Pt=40,Lt=200,Rt=function(e){function t(t){var n=e.call(this,t)||this;return n.slidingWindowEnd=0,n.paused=!1,n.delayedMessageBuffer=[],n.updateHandlers=[],n.handleMessage=function(e){var t=!1;if(n.messageIncludesBlockedUser(e)){if(!n.props.shouldSeeBlockedAndDeletedMessages)return;e.type===Ge.b.Message&&(e.hidden=!0)}switch(e.type){case Ge.b.Message:n.uncountedMessages++;var i=e.messageParts[0];if(i&&i.type===Mt.a.Text&&i.content.startsWith(":act "))return;t=!n.isOwnMessage(e);break;case Ge.b.ChannelPointsReward:case Ge.b.Resubscription:t=!!e.message&&!n.isOwnMessage(e.message);break;case Ge.b.ModerationAction:if(e.level===It.a.User&&e.targetUserLogin&&e.targetUserLogin===n.props.currentUserLogin)break;if(!n.props.isCurrentUserModerator)return;if(e.level===It.a.User&&(e.moderationActionType===m.ModerationActions.Ban||e.moderationActionType===m.ModerationActions.Timeout||e.moderationActionType===m.ModerationActions.Delete)){var a=e.moderationActionType,r=e.targetUserLogin,o=e.createdByLogin,s=e.messageID;if(n.moderatedUsers.has(r))return;var l=[n.buffer,n.delayedMessageBuffer.map((function(e){return e.event}))];a===m.ModerationActions.Delete?l.forEach((function(e){e.some((function(e){var t=n.markUserEventDeleted(e,void 0,s);return!!t&&(t.deletedCount=1,t.modLogin=o,t.modActionType=a,!0)}))})):n.moderateBuffers(l,r,e);break}break;case Ge.b.Moderation:if(n.props.isCurrentUserModerator)break;var c=e.moderationType,d=e.userLogin;if(n.moderatedUsers.has(d))return;var u=[n.buffer,n.delayedMessageBuffer.map((function(e){return e.event}))];if(c===Ge.e.Delete){var p=e.targetMessageID;u.forEach((function(e){e.some((function(e){var t=n.markUserEventDeleted(e,void 0,p);return!!t&&(t.deletedCount=1,!0)}))}))}else n.moderateBuffers(u,d);break;case Ge.b.Disconnected:return;case Ge.b.Reconnect:if(n.buffer.find((function(t){return t.id===e.id}))||n.delayedMessageBuffer.find((function(t){return t.event.id===e.id})))return;break;case Ge.b.Clear:n.clear();break;case Ge.b.AutoMod:switch(e.autoModType){case Ge.a.MessageModApproved:case Ge.a.MessageModDenied:return void[n.buffer,n.delayedMessageBuffer.map((function(e){return e.event}))].forEach((function(t){t.some((function(t){return!(t.type!==Ge.b.AutoMod||t.autoModType!==Ge.a.MessageRejectedPrompt||!t.rejectedMessage||t.rejectedMessage.id!==e.msg_id)&&(t.rejectedMessage.deleted=!0,!0)}))}))}}n.delayedMessageBuffer.push({event:e,time:Date.now(),shouldDelay:t})},n.getMessages=function(){return n.buffer.slice(0,n.slidingWindowEnd)},n.unsetModeratedUser=function(e){return function(){n.moderatedUsers.delete(e)}},n.isOwnMessage=function(e){var t=e.user;return!(!n.props.currentUserLogin||!t||t.userLogin!==n.props.currentUserLogin)},n.addUpdateHandler=function(e){-1===n.updateHandlers.indexOf(e)&&(n.updateHandlers=n.updateHandlers.concat(e))},n.removeUpdateHandler=function(e){n.updateHandlers=n.updateHandlers.filter((function(t){return t!==e}))},n.setPaused=function(e){n.paused!==e&&(n.paused=e,e||(n.slidingWindowEnd=Math.min(n.buffer.length,Tt)),n.props.isBackground||n.notifySubscribers())},n.isPaused=function(){return n.paused},n.hasNewerLeft=function(){return n.slidingWindowEnd<n.buffer.length},n.loadNewer=function(){if(n.hasNewerLeft()){var e=Math.min(n.buffer.length,n.slidingWindowEnd+Pt),t=Math.max(0,e-Tt);n.clear(n.buffer.length-t),n.slidingWindowEnd=e-t,n.props.isBackground||n.notifySubscribers()}},n.loadNewest=function(){n.hasNewerLeft()&&(n.clear(Tt),n.slidingWindowEnd=Math.min(Tt,n.buffer.length),n.props.isBackground||n.notifySubscribers())},n.delayedMessageBuffer=[],n.buffer=[],n.moderatedUsers=new Set,n.blockedUsers=new Set(n.props.blockedUsers),n.unhideUsers=new Set,n.flushInterval=setInterval((function(){return n.flushRawMessages()}),Lt),n.uncountedMessages=0,n.chatRateMeasurements=[],n.chatRateMeasurementInterval=setInterval((function(){return n.measureChatRate()}),jt),n}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.setMessageBufferAPI({addUpdateHandler:this.addUpdateHandler,removeUpdateHandler:this.removeUpdateHandler,getMessages:this.getMessages,isPaused:this.isPaused,setPaused:this.setPaused,hasNewerLeft:this.hasNewerLeft,loadNewer:this.loadNewer,loadNewest:this.loadNewest}),this.props.messageHandlerAPI&&this.props.messageHandlerAPI.addMessageHandler(this.handleMessage)},t.prototype.componentWillUnmount=function(){this.props.setMessageBufferAPI(),this.props.messageHandlerAPI&&this.props.messageHandlerAPI.removeMessageHandler(this.handleMessage),clearInterval(this.flushInterval),clearInterval(this.chatRateMeasurementInterval)},t.prototype.render=function(){return null},t.prototype.componentDidUpdate=function(e){e.messageHandlerAPI!==this.props.messageHandlerAPI&&(e.messageHandlerAPI&&e.messageHandlerAPI.removeMessageHandler(this.handleMessage),this.props.messageHandlerAPI&&this.props.messageHandlerAPI.addMessageHandler(this.handleMessage)),this.props.blockedUsers!==e.blockedUsers&&(this.blockedUsers=new Set(this.props.blockedUsers)),this.props.unhideIgnoredUsers!==e.unhideIgnoredUsers&&(this.unhideUsers=new Set(this.props.unhideIgnoredUsers)),e.isBackground&&!this.props.isBackground&&(this.chatRate>5&&this.clear(20),this.notifySubscribers())},t.prototype.messageIncludesBlockedUser=function(e){for(var t=0,n=Qe(e);t<n.length;t++){var i=n[t];if(this.blockedUsers.has(i.id)&&!this.unhideUsers.has(i.id))return!0}return!1},t.prototype.clear=function(e){if(void 0===e&&(e=0),e<=0)return this.buffer=[],this.delayedMessageBuffer=[],void(this.paused=!1);this.paused&&this.buffer.length>=900&&this.setPaused(!1),this.buffer=this.buffer.slice(-e)},t.prototype.isDeletable=function(e){return void 0!==e.deleted},t.prototype.markUserEventDeleted=function(e,t,n){var i=null;switch(e.type){case Ge.b.Message:i=e;break;case Ge.b.ChannelPointsReward:case Ge.b.Resubscription:case Ge.b.Ritual:i=e.message||null;break;default:return null}if(!i||i.deleted)return null;return Boolean(t&&i.user&&t===i.user.userLogin&&i.messageParts)||Boolean(n&&i.id===n)?(i.deleted=!0,i):null},t.prototype.moderateBuffers=function(e,t,n){var i=this,a=e.reduce((function(e,a){return a.reduce((function(e,a){var r=i.markUserEventDeleted(a,t);if(r){if(r.banned=!0,n){var o=n.moderationActionType,s=n.createdByLogin,l=n.duration;r.modLogin=s,r.modActionType=o,r.duration=l}return{lastDeletedMessage:r,deletedCount:e.deletedCount+1}}return e}),e)}),{deletedCount:0}),r=a.lastDeletedMessage,o=a.deletedCount;r&&(r.deletedCount=o),this.moderatedUsers.add(t),setTimeout(this.unsetModeratedUser(t),1e3)},t.prototype.flushRawMessages=function(){var e=this,t=[],n=Date.now(),i=!1,a=0,r=this.slidingWindowEnd,o=this.hasNewerLeft(),s=this.isPaused();this.delayedMessageBuffer.forEach((function(o){var s=o.event,l=o.time,c=o.shouldDelay;l<=n-e.delayDuration||!c?!e.props.shouldSeeBlockedAndDeletedMessages&&e.isDeletable(s)&&s.deleted||(e.buffer.push(s),i=!0,e.buffer.length>Tt&&!e.paused&&a++,e.buffer.length<=Tt&&!e.paused&&r++):t.push({event:s,time:l,shouldDelay:c})})),this.delayedMessageBuffer=t,i&&(this.clear(Math.min(900,this.buffer.length-a)),0===a&&r===this.slidingWindowEnd&&o===this.hasNewerLeft()&&s===this.isPaused()||(this.slidingWindowEnd=r,this.props.isBackground||this.notifySubscribers()))},t.prototype.measureChatRate=function(){3===this.chatRateMeasurements.length&&this.chatRateMeasurements.shift(),this.chatRateMeasurements.push(this.uncountedMessages),this.uncountedMessages=0},Object.defineProperty(t.prototype,"chatRate",{get:function(){return 0===this.chatRateMeasurements.length?0:this.chatRateMeasurements.reduce((function(e,t){return e+t}))/this.chatRateMeasurements.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"delayDuration",{get:function(){return this.props.isCurrentUserModerator?0:this.props.data.user&&this.props.data.user.chatSettings&&this.props.data.user.chatSettings.chatDelayMs||0},enumerable:!0,configurable:!0}),t.prototype.notifySubscribers=function(){this.updateHandlers.forEach((function(e){return e()}))},t}(o.Component);var Ft=Object(l.d)(Object(s.b)((function(e){var t=Object(h.e)(e);return{authToken:Object(h.a)(e),currentUserLogin:t&&t.login,isLoggedIn:Object(h.f)(e)}})),Object(c.a)(_t,{options:function(e){return{variables:{channelLogin:e.channelLogin}}}}),Object(Nt.a)(),Y,$.a)(Rt),Ut=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.messageHandlers=[],t.addMessageHandler=function(e){-1===t.messageHandlers.indexOf(e)&&(t.messageHandlers=t.messageHandlers.concat(e))},t.removeMessageHandler=function(e){t.messageHandlers=t.messageHandlers.filter((function(t){return t!==e}))},t.handleMessage=function(e){for(var n=t.messageHandlers.length,i=0;i<n;i++)t.messageHandlers[i](e)},t}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.setMessageHandlerAPI({addMessageHandler:this.addMessageHandler,removeMessageHandler:this.removeMessageHandler,handleMessage:this.handleMessage})},t.prototype.render=function(){return null},t.prototype.componentWillUnmount=function(){this.props.setMessageHandlerAPI()},t}(o.Component),xt=Object(l.d)($.a)(Ut),At=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.subscribe=function(e){t.unsubscribe(),e.channelID&&e.currentUserID&&(t.unsubscriber=j.l.subscribe({topic:Object(p.A)(e.currentUserID,e.channelID),onMessage:t.handleMessage}))},t.unsubscribe=function(){t.unsubscriber&&(t.unsubscriber(),t.unsubscriber=null)},t.handleMessage=function(e){switch(e.data.moderation_action){case m.ModerationActions.AutoModRejected:var n=Object(It.j)(e.data.msg_id,e.data.args[1],e.data.args[0],e.data.args[2]);t.addMessage(n);break;case m.ModerationActions.AutoModCheerRejected:var i=Object(It.c)(e.data.msg_id,e.data.args[1],e.data.args[0],e.data.args[2],e.data.target_user_id);t.addMessage(i);break;case m.ModerationActions.ApprovedAutoModMessage:t.addMessage(Object(It.g)(e));break;case m.ModerationActions.DeniedAutoModMessage:t.addMessage(Object(It.h)(e));break;case m.TargetedModerationActions.AutoModMessageRejected:t.addMessage(Object(It.i)());break;case m.TargetedModerationActions.AutoModMessageApproved:t.addMessage(Object(It.e)());break;case m.TargetedModerationActions.AutoModMessageDenied:t.addMessage(Object(It.f)());break;case m.TargetedModerationActions.AutoModCheerDenied:t.addMessage(Object(It.b)());break;case m.TargetedModerationActions.AutoModCheerTimeout:t.addMessage(Object(It.d)());break;case m.ModerationActions.Ban:t.addMessage(Object(It.m)(e.data.moderation_action,e.data.created_by,e.data.created_by_user_id,e.data.args[0],void 0,e.data.args[1]));break;case m.ModerationActions.Delete:t.addMessage(Object(It.m)(e.data.moderation_action,e.data.created_by,e.data.created_by_user_id,e.data.args[0],void 0,void 0,e.data.args[1],e.data.args[2]));break;case m.TargetedModerationActions.DeleteNotification:t.addMessage(Object(It.l)(m.TargetedModerationActions.DeleteNotification,e.data.target_user_id,e.data.args[0],e.data.msg_id));break;case m.ModerationActions.Unban:case m.ModerationActions.Timeout:case m.ModerationActions.Untimeout:t.addMessage(Object(It.m)(e.data.moderation_action,e.data.created_by,e.data.created_by_user_id,e.data.args[0],e.data.args[1],e.data.args[2]));break;case m.ModerationActions.Mod:case m.ModerationActions.Unmod:t.addMessage(Object(It.m)(e.data.moderation_action,e.data.created_by,e.data.created_by_user_id,e.data.target_user_login));break;case m.ModerationActions.AutoModEnabled:case m.ModerationActions.Clear:case m.ModerationActions.EmoteOnly:case m.ModerationActions.EmoteOnlyOff:case m.ModerationActions.FollowersOnly:case m.ModerationActions.FollowersOnlyOff:case m.ModerationActions.Host:case m.ModerationActions.R9kBeta:case m.ModerationActions.R9kBetaOff:case m.ModerationActions.Raid:case m.ModerationActions.Slow:case m.ModerationActions.SlowOff:case m.ModerationActions.SubsBeta:case m.ModerationActions.SubscribersOnly:case m.ModerationActions.SubscribersOnlyOff:case m.ModerationActions.Unhost:case m.ModerationActions.AddBlockedTerm:case m.ModerationActions.AddPermittedTerm:case m.ModerationActions.DeleteBlockedTerm:case m.ModerationActions.DeletePermittedTerm:case m.ModerationActions.ModifiedAutoModProperties:case m.ModerationActions.Unraid:t.addMessage(Object(It.k)(e.data.moderation_action,e.data.created_by,e.data.created_by_user_id,e.data.args));break;default:j.k.warn("Unknown moderation action type",e.data.moderation_action)}},t}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){this.subscribe(this.props)},t.prototype.componentDidUpdate=function(e){this.props.channelID===e.channelID&&this.props.currentUserID===e.currentUserID||this.subscribe(this.props)},t.prototype.componentWillUnmount=function(){this.unsubscribe()},t.prototype.render=function(){return null},t.prototype.addMessage=function(e){this.props.messageHandlerAPI?this.props.messageHandlerAPI.handleMessage(e):j.k.warn("ModerationActionService received an event before the MessageHandlerAPI was available.")},t}(o.Component);var Bt=Object(l.d)(Object(s.b)((function(e){var t=Object(h.e)(e);return{currentUserID:t&&t.id}})),$.a)(At),Vt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.unsubscribe=function(){t.unsubscriber&&(t.unsubscriber(),t.unsubscriber=null)},t.handleMessage=function(e){if(e.type===m.PubsubMessageType.CommunityPointsRedeemed&&!e.data.redemption.user_input){var n=rt({id:e.data.redemption.id,reward:ut(t.props.rewardMap,e.data.redemption.reward.id),userDisplayName:e.data.redemption.user.display_name,userID:e.data.redemption.user.id,userLogin:e.data.redemption.user.login});t.addMessage(n)}},t}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){this.subscribe()},t.prototype.componentDidUpdate=function(e){this.props.channelID!==e.channelID&&this.subscribe()},t.prototype.componentWillUnmount=function(){this.unsubscribe()},t.prototype.render=function(){return null},t.prototype.subscribe=function(){this.unsubscribe(),this.props.channelID&&(this.unsubscriber=j.l.subscribe({topic:Object(p.q)(this.props.channelID),onMessage:this.handleMessage}))},t.prototype.addMessage=function(e){this.props.messageHandlerAPI?this.props.messageHandlerAPI.handleMessage(e):j.k.warn("RewardEventHandler received an event before the MessageHandlerAPI was available.")},t}(o.Component),Ht=Object($.a)(Vt),qt=n("ZaoE"),Gt=n("xahZ"),Wt=n("8wAl");var zt=n("VaVM"),Qt=n("A4cy"),Yt=n("OOag"),$t=n("geRD"),Kt=n("IQZc"),Xt=n("g+79"),Jt=n("+80q"),Zt=n("B30r"),en=n("ApRi"),tn=n("nAiT");function nn(e){var t=e.message?Object(Zt.c)(e.errorCode):Object(Zt.b)();e.setTrayError(t)}var an=n("gb2O");function rn(e){var t=e.message?Object(Zt.c)(e.errorCode):Object(Zt.b)();e.setTrayError(t)}var on=n("OUdD"),sn=n("fwSA"),ln=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isRewardCenterOpen:!1,rewardCenterState:{type:zt.a.ListRewards},transactionID:Object(Ke.c)()},t.closeRewardCenter=function(){setTimeout((function(){t.setState({isRewardCenterOpen:!1,rewardCenterState:{type:zt.a.ListRewards}})}),0)},t.openEarnRatesList=function(){var e=t.getViewerType();Object(ye.i)(ye.a.RewardSelectionPane,e,t.props.channelID||"",t.props.channelLogin),t.openRewardCenterToState({type:zt.a.EarnRates})},t.openReward=function(e){if(e){var n=t.checkRewardEligibility(e),i=null;if(n)if(i=Object(Ke.c)(),t.setState({transactionID:i}),"CommunityPointsAutomaticReward"===e.__typename)switch(e.type){case L.U.SEND_HIGHLIGHTED_MESSAGE:t.openHighlightedMesssageReward(e,i);break;case L.U.SINGLE_MESSAGE_BYPASS_SUB_MODE:t.openSubsOnlyMessageReward(e,i);break;case L.U.CHOSEN_SUB_EMOTE_UNLOCK:t.openRewardCenterToState({type:zt.a.UnlockChosenSubscriberEmote,reward:e});break;case L.U.RANDOM_SUB_EMOTE_UNLOCK:t.openRewardCenterToState({type:zt.a.UnlockRandomEmote,reward:e});break;case L.U.CHOSEN_MODIFIED_SUB_EMOTE_UNLOCK:t.openRewardCenterToState({type:zt.a.ModifyEmote,reward:e})}else t.openCustomReward(e,i);Object(ye.g)({channelID:t.props.channelID||"",channelLogin:t.props.channelLogin,isUserEligible:n,reward:e,transactionID:i,userBalance:t.props.balance,viewTrackingID:t.state.viewTrackingID||""})}else t.openRewardCenterToState({type:zt.a.ListRewards})},t}return Object(a.__extends)(t,e),t.prototype.render=function(){return o.createElement(on.a.Provider,{value:Object(a.__assign)(Object(a.__assign)({},this.state),{closeRewardCenter:this.closeRewardCenter,openReward:this.openReward,openEarnRatesList:this.openEarnRatesList})},this.props.children)},t.prototype.openRewardCenterToState=function(e){if(!this.state.isRewardCenterOpen){var t=Object(Ke.c)();this.setState({viewTrackingID:t}),e.type===zt.a.ListRewards&&Object(ye.k)(this.props.channelLogin,this.props.channelID||"",t)}this.setState({isRewardCenterOpen:!0,rewardCenterState:e})},t.prototype.checkRewardEligibility=function(e){var t=Object(Qt.a)(e,{isUserSubscribed:this.isCurrentUserSubscribed,isChannelSubsOnlyMode:this.props.subsOnlyMode});return this.props.currentUserID?"CommunityPointsAutomaticReward"!==e.__typename||t.nonSubOnlyReward?Object(dt.b)(e)>this.props.balance&&!Object(dt.f)(e)?(this.openRewardCenterToState({type:zt.a.NotEnoughPoints,reward:e}),!1):"CommunityPointsCustomReward"!==e.__typename||t.subOnlyReward?!("CommunityPointsAutomaticReward"===e.__typename&&!t.subsModeRequiredReward)||(this.openRewardCenterToState({type:zt.a.NotSubOnlyMode,reward:e}),!1):(this.openRewardCenterToState({type:zt.a.NotSubbed,reward:e}),!1):(this.openRewardCenterToState({type:zt.a.AlreadySubbed,reward:e}),!1):(this.openRewardCenterToState({type:zt.a.NotLoggedIn,reward:e}),!1)},t.prototype.openHighlightedMesssageReward=function(e,t){this.props.channelID&&(this.props.setTray(function(e){var t=this;return{icon:o.createElement(Xt.a,{data:e.reward,size:Xt.b.ExtraSmall}),title:Object(dt.e)(e.reward),body:o.createElement(Kt.a,{onRequirementsChange:function(t){return t?e.setTrayError(Object(tn.e)(e.channelDisplayName||e.channelLogin,(function(){e.clearTray(),e.openReward()}))):e.clearTrayError()},reward:e.reward},o.createElement(Jt.a,null,Object(dt.c)(e.reward))),pointsCost:Object(dt.b)(e.reward),sendButtonOverride:ct.b.CommunityPointsSpend,disableBits:!0,disableCommands:!0,sendMessageHandler:{type:ct.c.Custom,handleMessage:function(n){return Object(a.__awaiter)(t,void 0,void 0,(function(){var t;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return n.trim()?[4,j.p.apollo.client.mutate(Object(a.__assign)({mutation:en},Object($t.a)({channelID:e.channelID,cost:Object(dt.b)(e.reward),message:n,transactionID:e.transactionID})))]:(nn(e),[2,!1]);case 1:return(t=i.sent()).data&&t.data.sendHighlightedChatMessage&&!t.data.sendHighlightedChatMessage.error?(e.clearTray(),Object(ye.h)({channelID:e.channelID,channelLogin:e.channelLogin,reward:e.reward,transactionID:e.transactionID,viewTrackingID:e.viewTrackingID}),[2,!0]):(nn(Object(a.__assign)(Object(a.__assign)({},e),{errorCode:t.data&&t.data.sendHighlightedChatMessage&&t.data.sendHighlightedChatMessage.error&&t.data.sendHighlightedChatMessage.error.code||L.Hc.UNKNOWN,message:n})),[2,!1])}}))}))}}}}({channelDisplayName:this.props.channelDisplayName,channelID:this.props.channelID,channelLogin:this.props.channelLogin,clearTray:this.props.clearTray,clearTrayError:this.props.clearTrayError,openReward:this.openReward,reward:e,setTrayError:this.props.setTrayError,transactionID:t,viewTrackingID:this.state.viewTrackingID||""})),this.closeRewardCenter())},t.prototype.openSubsOnlyMessageReward=function(e,t){this.props.channelID&&(this.props.setTray(function(e){var t=this;return{ignoredRestrictions:new Set([L.I.SUBSCRIBERS_ONLY]),icon:o.createElement(Xt.a,{data:e.reward,size:Xt.b.ExtraSmall}),title:Object(dt.e)(e.reward),body:o.createElement(Kt.a,{onRequirementsChange:function(t){return t?e.setTrayError(Object(tn.e)(e.channelDisplayName||e.channelLogin,(function(){e.clearTray(),e.openReward()}))):e.clearTrayError()},reward:e.reward},o.createElement(Jt.a,null,Object(dt.c)(e.reward))),pointsCost:Object(dt.b)(e.reward),sendButtonOverride:ct.b.CommunityPointsSpend,disableBits:!0,disableCommands:!0,sendMessageHandler:{type:ct.c.Custom,handleMessage:function(n){return Object(a.__awaiter)(t,void 0,void 0,(function(){var t;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return n.trim()?[4,j.p.apollo.client.mutate(Object(a.__assign)({mutation:an},Object($t.a)({channelID:e.channelID,cost:Object(dt.b)(e.reward),message:n,transactionID:e.transactionID})))]:(rn(e),[2,!1]);case 1:return(t=i.sent()).data&&t.data.sendChatMessageThroughSubscriberMode&&!t.data.sendChatMessageThroughSubscriberMode.error?(e.clearTray(),Object(ye.h)({channelID:e.channelID,channelLogin:e.channelLogin,reward:e.reward,transactionID:e.transactionID,viewTrackingID:e.viewTrackingID}),[2,!0]):(rn(Object(a.__assign)(Object(a.__assign)({},e),{errorCode:t.data&&t.data.sendChatMessageThroughSubscriberMode&&t.data.sendChatMessageThroughSubscriberMode.error&&t.data.sendChatMessageThroughSubscriberMode.error.code||void 0,message:n})),[2,!1])}}))}))}}}}({channelDisplayName:this.props.channelDisplayName,channelID:this.props.channelID,channelLogin:this.props.channelLogin,clearTray:this.props.clearTray,clearTrayError:this.props.clearTrayError,openReward:this.openReward,reward:e,setTrayError:this.props.setTrayError,transactionID:t,viewTrackingID:this.state.viewTrackingID||""})),this.closeRewardCenter())},t.prototype.openCustomReward=function(e,t){if(e.isUserInputRequired){if(!this.props.channelID)return;this.props.setTray(Object(Yt.a)({channelDisplayName:this.props.channelDisplayName,channelID:this.props.channelID,channelLogin:this.props.channelLogin,clearTray:this.props.clearTray,clearTrayError:this.props.clearTrayError,openReward:this.openReward,reward:e,setTrayError:this.props.setTrayError,transactionID:t,viewTrackingID:this.state.viewTrackingID||""})),this.closeRewardCenter()}else this.openRewardCenterToState({type:zt.a.CustomReward,reward:e})},t.prototype.getViewerType=function(){return this.props.channelID===this.props.currentUserID?ye.e.Broadcaster:this.isModerator?ye.e.Moderator:ye.e.Viewer},Object.defineProperty(t.prototype,"isCurrentUserSubscribed",{get:function(){return this.props.data.community&&this.props.data.community.self&&!!this.props.data.community.self.subscriptionBenefit},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isModerator",{get:function(){return this.props.data.community&&this.props.data.community.self&&this.props.data.community.self.isModerator},enumerable:!0,configurable:!0}),t}(o.Component);var cn=Object(l.d)(Object(c.a)(sn,{options:function(e){return{variables:{channelLogin:e.channelLogin}}}}),Object(O.b)((function(e){return{clearTray:e.clearTray,clearTrayError:e.clearTrayError,setTray:e.setTray,setTrayError:e.setTrayError}})),Object(Be.b)((function(e){return{subsOnlyMode:e.subsOnlyMode}})))(ln),dn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.render=function(){var e=this.rewardMap;return o.createElement(qt.a.Provider,{value:{activeMultipliers:this.activeMultipliers,automaticRewards:this.automaticRewards,balance:this.balance,channelID:this.props.data.community&&this.props.data.community.id,customRewards:this.customRewards,channelLogin:this.props.channelLogin,displayName:this.props.data.community&&this.props.data.community.displayName,emoteVariants:this.emoteVariants,isChannelPointsEnabled:this.isChannelPointsEnabled,isChannelPointsFeatureFlagOn:!0,isCurrentUserModerator:!!(this.props.data.community&&this.props.data.community.self&&this.props.data.community.self.isModerator),isLoaded:!!this.props.data.community,pointIcon:this.pointIcon,pointName:this.pointName,raidPointAmount:this.raidPointAmount,earning:this.earning,rewardMap:e}},o.createElement(Ht,{channelID:this.props.data.community&&this.props.data.community.id,rewardMap:e}),o.createElement(cn,{balance:this.balance,channelDisplayName:this.props.data.community&&this.props.data.community.displayName,channelID:this.props.data.community&&this.props.data.community.id,channelLogin:this.props.channelLogin,currentUserID:this.props.currentUserID},this.props.children))},Object.defineProperty(t.prototype,"activeMultipliers",{get:function(){var e=this.props.data;return e.community&&e.community.channel&&e.community.channel.self&&e.community.channel.self.communityPoints&&e.community.channel.self.communityPoints.activeMultipliers?e.community.channel.self.communityPoints.activeMultipliers:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"automaticRewards",{get:function(){var e=this.props.data;return e.community&&e.community.channel&&e.community.channel.communityPointsSettings&&e.community.channel.communityPointsSettings.automaticRewards?e.community.channel.communityPointsSettings.automaticRewards:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"balance",{get:function(){var e=this.props.data;return e.community&&e.community.channel&&e.community.channel.self&&e.community.channel.self.communityPoints?e.community.channel.self.communityPoints.canRedeemRewardsForFree?1/0:e.community.channel.self.communityPoints.balance:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"customRewards",{get:function(){var e=this.props.data;return e.community&&e.community.channel&&e.community.channel.communityPointsSettings&&e.community.channel.communityPointsSettings.customRewards?e.community.channel.communityPointsSettings.customRewards:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isChannelPointsEnabled",{get:function(){var e=this.props.data;return!!(e.community&&e.community.channel&&e.community.channel.communityPointsSettings)&&e.community.channel.communityPointsSettings.isEnabled},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointIcon",{get:function(){var e=this.props.data;return e.community&&e.community.channel&&e.community.channel.communityPointsSettings?e.community.channel.communityPointsSettings.image:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointName",{get:function(){var e=this.props.data;return e.community&&e.community.channel&&e.community.channel.communityPointsSettings?e.community.channel.communityPointsSettings.name:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"raidPointAmount",{get:function(){var e=this.props.data;return e.community&&e.community.channel&&e.community.channel.communityPointsSettings?e.community.channel.communityPointsSettings.raidPointAmount:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rewardMap",{get:function(){for(var e={},t=0,n=this.automaticRewards;t<n.length;t++){var i=n[t];e[i.id]=i}for(var a=0,r=this.customRewards;a<r.length;a++){var o=r[a];e[o.id]=o}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"emoteVariants",{get:function(){var e=this.props.data;return e.community&&e.community.channel&&e.community.channel.communityPointsSettings&&e.community.channel.communityPointsSettings.emoteVariants?e.community.channel.communityPointsSettings.emoteVariants:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"earning",{get:function(){var e=this.props.data;return e.community&&e.community.channel&&e.community.channel.communityPointsSettings&&e.community.channel.communityPointsSettings.earning?e.community.channel.communityPointsSettings.earning:null},enumerable:!0,configurable:!0}),t}(o.Component);var un=Object(l.d)(Object(s.b)((function(e){var t=Object(h.e)(e);return{currentUserID:t&&t.id}})),Object(c.a)(Gt,{options:function(e){return{variables:{channelLogin:e.channelLogin},fetchPolicy:"cache-and-network"}}}),Object(u.a)((function(e){return{query:Gt,variables:{channelLogin:e.channelLogin},skip:!e.data.community,topic:Object(p.q)(""+(e.data.community&&e.data.community.id)),types:[m.PubsubMessageType.CommunityPointsAutomaticRewardUpdated,m.PubsubMessageType.CommunityPointsCustomRewardCreated,m.PubsubMessageType.CommunityPointsCustomRewardDeleted,m.PubsubMessageType.CommunityPointsCustomRewardUpdated,m.PubsubMessageType.CommunityPointsSettings],mutator:function(e,t){switch(e.type){case m.PubsubMessageType.CommunityPointsSettings:return function(e,t){return e.community&&e.community.channel&&e.community.channel.communityPointsSettings?r(e,(function(e){return e.community.channel.communityPointsSettings}),(function(e){return Object(a.__assign)(Object(a.__assign)({},e),{image:t.data.settings.image?Object(Wt.c)(t.data.settings.image):null,isEnabled:t.data.settings.is_enabled,name:t.data.settings.name})})):e}(t,e);case m.PubsubMessageType.CommunityPointsAutomaticRewardUpdated:return function(e,t){return e.community&&e.community.channel&&e.community.channel.communityPointsSettings&&e.community.channel.communityPointsSettings.automaticRewards?r(e,(function(e){return e.community.channel.communityPointsSettings.automaticRewards}),(function(e){return e.map((function(e){return e.type!==t.data.updated_reward.reward_type?e:Object(a.__assign)(Object(a.__assign)({},e),Object(Wt.a)(t.data.updated_reward))}))})):e}(t,e);case m.PubsubMessageType.CommunityPointsCustomRewardCreated:return function(e,t){return e.community&&e.community.channel&&e.community.channel.communityPointsSettings&&e.community.channel.communityPointsSettings.customRewards?r(e,(function(e){return e.community.channel.communityPointsSettings.customRewards}),(function(e){return Object(a.__spreadArrays)(e,[Object(Wt.b)(t.data.new_reward)])})):e}(t,e);case m.PubsubMessageType.CommunityPointsCustomRewardDeleted:return function(e,t){return e.community&&e.community.channel&&e.community.channel.communityPointsSettings&&e.community.channel.communityPointsSettings.customRewards?r(e,(function(e){return e.community.channel.communityPointsSettings.customRewards}),(function(e){return e.map((function(e){return e.id!==t.data.deleted_reward.id?e:Object(a.__assign)(Object(a.__assign)({},e),{isEnabled:!1})}))})):e}(t,e);case m.PubsubMessageType.CommunityPointsCustomRewardUpdated:return function(e,t){return e.community&&e.community.channel&&e.community.channel.communityPointsSettings&&e.community.channel.communityPointsSettings.customRewards?r(e,(function(e){return e.community.channel.communityPointsSettings.customRewards}),(function(e){return e.map((function(e){return e.id!==t.data.updated_reward.id?e:Object(a.__assign)(Object(a.__assign)({},e),Object(Wt.b)(t.data.updated_reward))}))})):e}(t,e);default:return t}}}})),Object(u.a)((function(e){return{query:Gt,variables:{channelLogin:e.channelLogin},topic:Object(p.r)(""+e.currentUserID),skip:!e.data.community||!e.currentUserID,types:[m.PubsubMessageType.CommunityPointsMultipliersUpdated],mutator:function(t,n){if(!e.data.community||t.data.active_multipliers&&e.data.community.id!==t.data.active_multipliers.channel_id||!n.community||!n.community.channel||!n.community.channel.self)return n;var i=[];return t.data.active_multipliers&&(i=t.data.active_multipliers.multipliers.map((function(e){return{__typename:"CommunityPointsMultiplier",reasonCode:e.reason_code,factor:e.factor}}))),n.community.channel.self.communityPoints?r(n,(function(e){return e.community.channel.self.communityPoints.activeMultipliers}),(function(){return i})):r(n,(function(e){return e.community.channel.self.communityPoints}),(function(){return{__typename:"CommunityPointsProperties",availableClaim:null,balance:0,activeMultipliers:i,canRedeemRewardsForFree:!1}}))}}})),Object(u.a)((function(e){return{query:Gt,variables:{channelLogin:e.channelLogin},topic:Object(p.r)(""+e.currentUserID),skip:!e.data.community||!e.currentUserID,types:[m.PubsubMessageType.CommunityPointsEarned,m.PubsubMessageType.CommunityPointsSpent],mutator:function(t,n){if(!e.data.community||t.data.balance&&e.data.community.id!==t.data.balance.channel_id||!n.community||!n.community.channel||!n.community.channel.self)return n;var i=t.data.balance.balance;return n.community.channel.self.communityPoints?r(n,(function(e){return e.community.channel.self.communityPoints.balance}),(function(){return i})):r(n,(function(e){return e.community.channel.self.communityPoints}),(function(){return{__typename:"CommunityPointsProperties",availableClaim:null,balance:i,activeMultipliers:null,canRedeemRewardsForFree:!1}}))}}})))(dn),mn=function(e){return Object(ve.c)("copo_enabled")?o.createElement(un,Object(a.__assign)({},e)):o.createElement(o.Fragment,null,e.children)},pn=n("Awl1"),hn=n("Owek"),fn=n("TSYQ"),gn=n("Ty5D"),vn=n("6j5V"),bn=n("uIkQ"),kn=n("5zXJ"),yn=n("ZVTe"),Sn=n("cys1"),Cn=n("Ws8v"),En=n("hnjF"),wn=n("sUnt"),On=n("X2PJ"),Dn=n("dEDE"),Nn=function(e){return o.createElement(Cn.a,{padding:{top:1,bottom:.5},margin:{x:2},borderTop:!0,display:En.d.Block,flexDirection:En.e.Column},o.createElement(wn.a,{padding:{bottom:.5}},o.createElement(Jt.a,{color:On.c.Alt2},Object(j.d)("<x:strong>Anonymous Cheering</x:strong> only supports the anonymous Cheermote. Your Cheer will be modified to appear as shown below.",{"x:strong":function(e){return o.createElement(Jt.a,{type:Jt.e.Span,color:On.c.Link,bold:!0},e)}},"InvalidAnonymousCheerPrompt")),o.createElement(wn.a,{margin:{y:1}},o.createElement(bn.b,{badgeSets:e.badgeSets,badgesToRender:{"anonymous-cheerer":"1"}}),o.createElement(yn.a,{userData:{isIntl:!1,userDisplayName:kn.c,userID:kn.e,userLogin:kn.d,userType:"global_mod"}}),":Â ",Object(Sn.f)(e.messageParts))),o.createElement(wn.a,{display:En.d.Flex,flexDirection:En.e.Row},o.createElement(Dn.a,{onClick:e.onCheerAnyway},Object(j.d)("Continue","InvalidAnonymousCheerPrompt")),o.createElement(wn.a,{padding:{left:.5}},o.createElement(Dn.a,{onClick:e.onEditCheer,type:Dn.d.Secondary},Object(j.d)("Edit","InvalidAnonymousCheerPrompt")))))},_n=n("4rCz"),In=n("IArS"),Mn=n("7uM4"),jn=n("C7sF"),Tn=(n("e7rh"),function(e){return o.createElement(Cn.a,{padding:{top:1,bottom:.5},margin:{x:2},borderTop:!0,display:En.d.Block,flexDirection:En.e.Column},o.createElement(wn.a,{padding:{bottom:.5}},o.createElement(bn.b,{badgeSets:e.badgeSets,badgesToRender:{twitchbot:"1"}}),o.createElement(yn.a,{userData:{color:In.b,isIntl:!1,userDisplayName:"AutoMod",userID:"automod",userLogin:"automod",userType:"global_mod"}}),o.createElement(Jt.a,{type:Jt.e.Span,color:On.c.Alt2},Object(_n.d)(": Your text may be removed by moderation. Bits will still be sent to the streamer. Review the highlighted text or continue below.","BitsAutoModOffenderPrompt"))),o.createElement(wn.a,{display:En.d.Flex,flexDirection:En.e.Row},o.createElement(wn.a,{padding:{right:.5}},o.createElement(Dn.a,{onClick:e.onEditCheer},o.createElement(wn.a,{padding:{x:2}},Object(_n.d)("Edit","BitsAutoModOffender")))),o.createElement(Dn.a,{onClick:e.onCheerAnyway,type:Dn.d.Secondary},Object(_n.d)("Cheer Anyway","BitsAutoModOffender")),o.createElement(wn.a,{className:"bits-auto-mod-offender-prompt__notification-icon",display:En.d.Flex,flexDirection:En.e.Column,justifyContent:En.h.End,alignSelf:En.c.End,margin:{left:"auto",right:.5}},o.createElement(Mn.a,{asset:jn.a.NotificationWarning}))))}),Pn=P.a.wrap((function(){return Promise.all([n.e(0),n.e(55)]).then(n.bind(null,"qFtv"))}),"ChannelLeaderboard",{placeholder:null}),Ln=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={cheerIsTall:!1,recentCheerID:null,recentCheerExpireTime:null,pcheersV2Enabled:!1},t}return Object(a.__extends)(t,e),t.prototype.render=function(){return o.createElement(Pn,{channelID:this.props.channelID,userID:this.props.userID,currentUserDisplayName:this.props.currentUserDisplayName,currentUserLogin:this.props.currentUserLogin})},t}(o.Component);var Rn,Fn=Object(s.b)((function(e){var t=Object(h.e)(e);return{isStaff:t&&t.roles&&t.roles.isStaff}}))(Ln),Un=n("H31v"),xn=n("uGUt"),An=n("u5aL"),Bn=n("cw0r"),Vn=n("8Ad5"),Hn=n("5zf8"),qn=n("oe5X"),Gn=n("1/iK"),Wn=n("y5D0"),zn=n("okS7"),Qn=n("uhBA"),Yn=n("TqpA"),$n=n("jv9u"),Kn=new Qn,Xn=P.a.wrap((function(){return Promise.all([n.e(0),n.e(50)]).then(n.bind(null,"ry0r"))}),"BitsCard",{placeholder:null,onRendered:function(){return Kn.emit("bits_card_loaded")}}),Jn=function(e){var t=Object(o.useState)(!1),n=t[0],i=t[1];return Object(o.useEffect)((function(){e.eventEmitter.once("bits_card_loaded",(function(){return i(!0)}))}),[e.eventEmitter]),o.createElement(o.Fragment,null,e.visible&&!n&&o.createElement(Yn.a,{onUserClose:e.onUserClose},o.createElement($n.a,null)),o.createElement(Xn,Object(a.__assign)({},e)))},Zn=function(e){return o.createElement(Jn,Object(a.__assign)({},e,{eventEmitter:Kn}))},ei=Xn.Preload,ti=n("lZCe"),ni=n("SDEh"),ii=n("IZXT"),ai=n("7d/q"),ri=n("GuJR"),oi=n("SaoI");n("NgDb");!function(e){e.NotifIcon="gem-notification-icon"}(Rn||(Rn={}));var si="target",li=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={targetNotificationID:""},t.onClick=function(){return Object(a.__awaiter)(t,void 0,void 0,(function(){var e,t,n,i,r;return Object(a.__generator)(this,(function(o){switch(o.label){case 0:if(this.props.onClick(),j.p.experiments.getAndTrackAssignment(Xe.c.BitsGemNotification)!==si||!this.state.targetNotificationID)return[2];if(e={notificationID:this.state.targetNotificationID},!(this.props.data&&this.props.data.user&&this.props.data.user.self&&this.props.data.user.self.bitsGemNotifications))return[2];if(!(t=this.props.data.user.self.bitsGemNotifications.find((function(t){return t.id===e.notificationID}))))return[2];n={checkGemNotification:{__typename:"CheckGemNotificationPayload",updatedNotification:Object(a.__assign)(Object(a.__assign)({__typename:"BitsGemNotification"},t),{isChecked:!0})}},i=Object($t.b)(e,n),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.props.markGemNotificationAsChecked(i)];case 2:return o.sent(),this.setState({targetNotificationID:""}),[3,4];case 3:return r=o.sent(),Object(ii.d)()?j.k.warn("[BitsChatIconButton] Failed to clear gem notification"):j.k.errorAndReport(r,"[BitsChatIconButton] Failed to clear gem notification"),[3,4];case 4:return[2]}}))}))},t}return Object(a.__extends)(t,e),t.getDerivedStateFromProps=function(e,t){var n=e.data,i=j.p.experiments.getAndTrackAssignment(Xe.c.BitsGemNotification);if(!n||n.loading||!n.user||!n.user.self||!n.user.self.bitsGemNotifications)return null;if(n.user.self.bitsGemNotifications.length>0){var a=n.user.self.bitsGemNotifications.find((function(e){return!e.isChecked}));if(!t.targetNotificationID&&a)return i===si&&e.onGemNotification(!0),{targetNotificationID:a.id};if(t.targetNotificationID&&!a)return e.onGemNotification(!1),{targetNotificationID:""}}return null},t.prototype.render=function(){if(Object(ni.c)())return null;var e=this.state.targetNotificationID?o.createElement("span",{className:"gem-notif-icon__body","data-test-selector":Rn.NotifIcon}):null;return o.createElement(wn.a,{position:En.j.Relative,display:En.d.Inline},o.createElement(ai.a,{icon:jn.a.Bits,ariaLabel:Object(j.d)("Bits","ChatInput"),type:ai.c.Secondary,onClick:this.onClick,"data-a-target":"bits-button"}),o.createElement(wn.a,{position:En.j.Absolute,className:"gem-notif-icon"},o.createElement(ti.a,{name:Xe.c.BitsGemNotification,assignments:{fallback:function(){return null},target:function(){return e}}})))},t}(o.Component),ci=Object(l.d)(Object(c.a)(ri,{skip:function(e){return!e.channelID||Object(ni.c)()||j.p.experiments.getAndTrackAssignment(Xe.c.BitsGemNotification)!==si},options:function(e){return{variables:{channelID:e.channelID||""}}}}),Object(c.a)(oi,{name:"markGemNotificationAsChecked"}),Object(u.a)((function(e){return{query:ri,topic:e.data&&e.data.currentUser?Object(p.R)(e.data.currentUser.id):"",type:m.PubsubMessageType.UserBitsGemNotification,skip:!e.data||e.data.loading||!!e.data.error||!e.data.user||!e.data.currentUser,variables:{channelID:e.channelID},mutator:function(e,t){return t&&t.user&&t.user.self&&t.user.self.bitsGemNotifications&&e.message_type===Un.b.BitsGemNotification?t=r(t,(function(e){return e.user.self.bitsGemNotifications}),(function(t){return t.map((function(t){return t.id===e.data.id?Object(a.__assign)(Object(a.__assign)({},t),{isChecked:e.data.checked}):t}))})):t}}})))(li),di=n("uu1w"),ui=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.autocompleteType=di.a.Hashtag,t.canBeTriggeredByTab=!1,t.getMatches=function(e){return e.startsWith("#")&&null!==t.props.hashTags.edges?t.props.hashTags.edges.filter((function(t){return t.node.id.includes(e)})).map((function(n){return{current:e,replacement:n.node.id,element:t.genearateHashtagDisplay(n.node.id)}})):null},t.genearateHashtagDisplay=function(e){return o.createElement(wn.a,{padding:{right:.5},key:"hashtag:"+e},o.createElement(Jt.a,null,e))},t}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){this.unregister=this.props.registerAutocompleteProvider(this)},t.prototype.componentWillUnmount=function(){this.unregister()},t.prototype.render=function(){return null},t}(o.Component),mi=Object(zn.g)((function(e){return e}))(ui),pi=n("ebRM"),hi=n("RiD7"),fi=n("tFCv"),gi=n("QVaV"),vi=5,bi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.autocompleteType=di.a.Mention,t.canBeTriggeredByTab=!0,t.getMatches=function(e,n){return n||e.startsWith("@")?t.getMentions(e,n):null},t.getMentions=function(e,n){if(!t.props.activeChattersAPI)return[];var i=n?e:e.substring(1);return t.props.activeChattersAPI.getActiveChatters(i,vi).map((function(i){return{current:e,replacement:(n?"":"@")+(i.displayName||i.login),element:t.renderMention(i)}}))},t.renderMention=function(e){return o.createElement(wn.a,{padding:.5},Object(gi.a)(e.login,e.displayName||null))},t}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){this.unregister=this.props.registerAutocompleteProvider(this)},t.prototype.componentWillUnmount=function(){this.unregister()},t.prototype.render=function(){return null},t}(o.Component),ki=Object(l.d)(Object(zn.g)((function(e){return e})),R.a)(bi),yi=n("WytW"),Si=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.autocompleteType=di.a.Command,t.canBeTriggeredByTab=!1,t.getMatches=function(e,n,i){return 0===i&&e.startsWith("/")?t.getCommands(e):null},t.getCommands=function(e){var n=t.props.getCommands(t.props.permissionLevel);if(!n||0===n.length)return null;var i=e.substring(1),a=n.filter((function(e){return t.doesCommandMatchTerm(e,i)}));return a.sort(t.sortCommands),a.map((function(e){return{current:"/"+i,replacement:t.determineReplacement(e),element:t.renderCommandSuggestion(e,i),group:t.determineGroup(e),selection:Object(yi.m)(e)}}))},t.doesCommandMatchTerm=function(e,t){var n=new RegExp("^"+Object(ze.a)(t.toLowerCase()),"i");return e.name.match(n)},t.renderCommandSuggestion=function(e,t){var n=t.length,i=null;return e.commandArgs&&(i=e.commandArgs.map((function(t,n){return o.createElement(wn.a,{key:e.name+"-arg-"+n,margin:{right:.5}},o.createElement(Jt.a,{type:Jt.e.Span},"["+t.name+"]"))}))),o.createElement(wn.a,{padding:.5},o.createElement(wn.a,{display:En.d.Flex},o.createElement(wn.a,{margin:{right:.5}},o.createElement(Jt.a,{type:Jt.e.Span},"/"+t),o.createElement(Jt.a,{type:Jt.e.Span,bold:!0},e.name.substring(n))),i),o.createElement(Jt.a,{color:On.c.Alt2,fontSize:On.d.Size7},e.description))},t.sortCommands=function(e,n){var i=t.getPriorityLevel(e.permissionLevel),a=t.getPriorityLevel(n.permissionLevel);if(i===a){var r=t.trimStart(e.name),o=t.trimStart(n.name);return r.localeCompare(o)}return a-i},t}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){this.unregister=this.props.registerAutocompleteProvider(this)},t.prototype.componentWillUnmount=function(){this.unregister()},t.prototype.render=function(){return null},t.prototype.determineReplacement=function(e){var t=Object(yi.m)(e);return t?"/"+e.name+" "+t:"/"+e.name},t.prototype.determineGroup=function(e){if(this.props.permissionLevel!==ae.b.Viewer&&this.props.permissionLevel!==ae.b.Vip)return e.permissionLevel===ae.b.Moderator||e.permissionLevel===ae.b.Broadcaster?"channel management":"twitch"},t.prototype.getPriorityLevel=function(e){return e===ae.b.Viewer||e===ae.b.Vip?0:1},t.prototype.trimStart=function(e){return e.startsWith("un")&&!e.startsWith("unique")?e.substring(2):e},t}(o.Component);var Ci,Ei=Object(l.d)(Object(zn.g)((function(e){return e})),Object(g.b)((function(e){return{getCommands:e.getCommands}})))(Si),wi=n("HH5h"),Oi=(n("HECQ"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickConfirm=function(){t.markRoomSeen(),j.o.track(et.SpadeEventType.ChatRulesAccepted,{channel_id:t.props.channelID,channel_login:t.props.channelLogin}),t.props.onCloseChatRules()},t}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){j.o.track(et.SpadeEventType.ChatRulesViewed,{channel_login:this.props.channelLogin,channel_id:this.props.channelID})},t.prototype.render=function(){return o.createElement(Cn.a,{fullWidth:!0,position:En.j.Absolute,zIndex:En.o.Above,attachBottom:!0,attachLeft:!0},o.createElement(Cn.a,{background:On.a.Base,attachBottom:!0,borderRadius:On.b.Large,display:En.d.Block,elevation:3,className:"chat-rules-container",padding:.5},o.createElement(wn.a,{position:En.j.Relative,display:En.d.Flex,flexDirection:En.e.Row,alignItems:En.b.Start,padding:1},o.createElement(wn.a,{textAlign:En.l.Left,display:En.d.Flex,flexDirection:En.e.Row,alignItems:En.b.Center},o.createElement(wn.a,{padding:{right:1}},o.createElement(wi.a,{userLogin:this.props.channelLogin,alt:this.props.channelDisplayName?this.props.channelDisplayName:"",size:40,src:this.props.channelProfileImageUrl})),o.createElement(wn.a,{display:En.d.Flex,flexDirection:En.e.Column},o.createElement(wn.a,null,o.createElement(Jt.a,{"data-test-selector":"chat-rules-display-name",color:On.c.Alt2},this.props.channelDisplayName)),o.createElement(wn.a,null,o.createElement(Jt.a,{fontWeight:On.e.SemiBold,transform:Jt.d.Uppercase,type:Jt.e.H4},Object(j.d)("Chat Rules","ChatInputRevampChatRules"))))),o.createElement(wn.a,{attachRight:!0,attachTop:!0,position:En.j.Absolute,margin:{top:.5,right:.5}},o.createElement(ai.a,{"data-test-selector":"chat-rules-close-button",ariaLabel:Object(j.d)("Close","ChatInputRevampChatRules"),type:ai.c.Secondary,icon:jn.a.Close,onClick:this.props.onCloseChatRules}))),o.createElement(wn.a,{padding:.5},o.createElement(wn.a,{"data-test-selector":"chat-rules-list",padding:{x:1,bottom:1}},o.createElement("ul",null,this.props.chatRules&&this.props.chatRules.map((function(e,t){return o.createElement("li",{key:t},e)})))),o.createElement(wn.a,{display:En.d.Flex,justifyContent:En.h.Center},o.createElement(Dn.a,{"data-test-selector":"chat-rules-ok-button",fullWidth:!0,size:Dn.b.Large,onClick:this.onClickConfirm},o.createElement(Jt.a,{fontSize:On.d.Size5},Object(j.d)("Okay, Got It!","ChatRules")))))))},t.prototype.markRoomSeen=function(){var e=j.m.get("chat_rules_shown",{});this.props.channelLogin&&(e[this.props.channelLogin]=!0,j.m.set("chat_rules_shown",e))},t}(o.Component)),Di=n("9MrB");n("ZuCe");!function(e){e.AUTOMOD="automod",e.ANONYMOUS_CHEERING="anonymous-cheering",e.UNKNOWN="unknown"}(Ci||(Ci={}));var Ni,_i=function(e){var t=e.moderatedReason,n=void 0===t?Ci.UNKNOWN:t,i=e.moderatedMessageParts,a=fn("moderated-message-fake-input__container",n);return o.createElement(Cn.a,{position:En.j.Relative,borderRadius:On.b.Medium,className:a},o.createElement(Cn.a,{className:"moderated-message-fake-input__content",display:En.d.Block,overflow:En.i.Auto,color:On.c.Alt,background:On.a.Alt,fullWidth:!0},o.createElement(On.f,{padding:{y:.5,left:1},fullHeight:!0},o.createElement("div",{style:{paddingRight:"6rem"}},Object(Sn.f)(i)))),o.createElement(Cn.a,{position:En.j.Absolute,display:En.d.Flex,flexDirection:En.e.Row,attachRight:!0,attachTop:!0},o.createElement(wn.a,{display:En.d.InlineFlex,alignItems:En.b.Center,className:"moderated-message-fake-input__icon",padding:.5},o.createElement(Mn.a,{asset:jn.a.Bits,type:Mn.b.Inherit})),o.createElement(wn.a,{display:En.d.InlineFlex,alignItems:En.b.Center,className:"moderated-message-fake-input__icon",padding:.5},o.createElement(Mn.a,{asset:jn.a.Emoticons,type:Mn.b.Inherit}))))},Ii=n("ilCE");n("MVDO");function Mi(e,t){var n=t.action?{action:t.action}:{},i=Object(a.__assign)({raid_upsell_source_id:Number(t.sourceChannelID),raid_upsell_target_id:Number(t.targetChannelID)},n);j.o.track(e,i)}!function(e){e.Host="host",e.Raid="raid",e.Dismiss="dismiss"}(Ni||(Ni={}));var ji="raid-now-upsell";var Ti={"data-test-selector":"dismiss"},Pi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleDismissUpsell=function(){var e;e={sourceChannelID:t.props.data.sourceChannel.id,targetChannelID:t.props.data.targetChannel.id},Mi(et.SpadeEventType.RaidUpsellClick,Object(a.__assign)(Object(a.__assign)({},e),{action:Ni.Dismiss})),t.props.closeRaidUpsell()},t.handleSendHostMsgFromUpsell=function(){var e;e={sourceChannelID:t.props.data.sourceChannel.id,targetChannelID:t.props.data.targetChannel.id},Mi(et.SpadeEventType.RaidUpsellClick,Object(a.__assign)(Object(a.__assign)({},e),{action:Ni.Host})),t.handleSendHostMsg()},t.handleSendHostMsg=function(){t.props.send("/host "+t.props.targetChannelLogin),t.props.closeRaidUpsell()},t.handleSendRaidMsg=function(){var e;e={sourceChannelID:t.props.data.sourceChannel.id,targetChannelID:t.props.data.targetChannel.id},Mi(et.SpadeEventType.RaidUpsellClick,Object(a.__assign)(Object(a.__assign)({},e),{action:Ni.Raid})),t.props.send("/raid "+t.props.targetChannelLogin),t.props.closeRaidUpsell()},t}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.data.refetch()},t.prototype.componentDidUpdate=function(e){if(e.data.loading!==this.props.data.loading&&!this.props.data.loading){if(!this.channelDisplayName||!this.isViewersCountWithinRange||this.isAttemptingToHostSelf)return this.handleSendHostMsg();t={sourceChannelID:this.props.data.sourceChannel.id,targetChannelID:this.props.data.targetChannel.id},Mi(et.SpadeEventType.RaidUpsellImpression,t),j.m.set(ji,!0)}var t},t.prototype.render=function(){var e=this.props.data.loading,t=this.channelDisplayName;return e||!t||!this.isViewersCountWithinRange||this.isAttemptingToHostSelf?null:o.createElement(wn.a,{className:"raid-upsell-prompt",padding:1,margin:{x:2}},o.createElement(wn.a,{display:En.d.Flex,justifyContent:En.h.Between},o.createElement(wn.a,{display:En.d.Flex},o.createElement(wn.a,{className:"raid-upsell-prompt__notification",margin:{top:.5}},o.createElement(Mn.a,{asset:jn.a.NotificationInfo})),o.createElement(wn.a,{margin:{x:1}},o.createElement(Jt.a,{type:Jt.e.H6,bold:!0},Object(j.d)("How about raiding {channelDisplayName}?",{channelDisplayName:t},"RaidUpsellPrompt")),o.createElement(Jt.a,{type:Jt.e.P,color:On.c.Alt2},Object(j.d)("Now you can raid whenever you want instead of waiting 30 seconds.","RaidUpsellPrompt")))),o.createElement(Cn.a,{color:On.c.OverlayAlt},o.createElement(ai.a,Object(a.__assign)({},Ti,{icon:jn.a.Close,size:ai.b.Small,ariaLabel:Object(j.d)("Dismiss","RaidUpsellPrompt"),onClick:this.handleDismissUpsell})))),o.createElement(Li,{onSendHostMsg:this.handleSendHostMsgFromUpsell,onSendRaidMsg:this.handleSendRaidMsg}))},Object.defineProperty(t.prototype,"channelDisplayName",{get:function(){var e=this.props.data.targetChannel;return e&&e.displayName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isViewersCountWithinRange",{get:function(){var e=this.props.data.sourceChannel,t=e&&e.stream&&e.stream.viewersCount;return t&&t>=3&&t<1e5},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAttemptingToHostSelf",{get:function(){return this.props.targetChannelLogin===this.props.sourceChannelLogin},enumerable:!0,configurable:!0}),t}(o.Component),Li=function(e){return o.createElement(wn.a,{display:En.d.Flex,justifyContent:En.h.End,margin:{top:1}},o.createElement(wn.a,{margin:{right:1}},o.createElement(Dn.a,{type:Dn.d.Secondary,size:Dn.b.Small,onClick:e.onSendHostMsg},o.createElement(wn.a,{padding:{x:2}},Object(j.d)("Host","RaidUpsellPrompt")))),o.createElement(wn.a,null,o.createElement(Dn.a,{size:Dn.b.Small,onClick:e.onSendRaidMsg},o.createElement(wn.a,{padding:{x:2}},Object(j.d)("Raid","RaidUpsellPrompt")))))},Ri=Object(c.a)(Ii,{options:function(e){return{variables:{targetChannelLogin:e.targetChannelLogin,sourceChannelLogin:e.sourceChannelLogin}}}})(Pi),Fi=n("gTu3"),Ui=n("YXxK"),xi=n("B9yr"),Ai=n("lNGo"),Bi=n("ySk3"),Vi=n("mmRu"),Hi=n("cpJf"),qi=n("GzyO"),Gi=n("Z2sP"),Wi=n("ygYM"),zi=n("EOIh"),Qi=function(e){function t(t){return e.call(this,t)||this}return Object(a.__extends)(t,e),t.prototype.render=function(){return o.createElement(wn.a,{padding:{bottom:2,x:2}},o.createElement(Cn.a,{padding:{bottom:1,x:2},borderTop:!0}),o.createElement(wn.a,{textAlign:En.l.Center},o.createElement(Jt.a,{color:On.c.Alt,"data-test-selector":"current-user-banned-text",bold:!0},Object(j.d)("You are currently banned from this channel.","ChatInput"))),this.props.renderButtonContainer(!0,null))},t}(o.Component),Yi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.componentDidUpdate=function(){this.props.inputValue.length>=this.props.maxLength&&(!this.props.tray||this.props.tray&&this.props.tray.type&&this.props.tray.type===ct.a.EmoteOnlyBanner)&&this.updateModifierTray(),this.props.inputValue.length<this.props.maxLength&&this.props.tray&&this.props.tray.type===ct.a.CharacterLimitError&&this.props.clearModifierTray()},t.prototype.render=function(){return null},t.prototype.updateModifierTray=function(){var e={title:Object(j.d)("Reached Character Limit of 500","CharacterLimitErrorTray"),inputValue:this.props.inputValue,icon:o.createElement(at.a,null),disableClose:!0,type:ct.a.CharacterLimitError};this.props.setModifierTray(e)},t}(o.Component);var $i,Ki=Object(l.d)(Object(O.b)((function(e){return{setModifierTray:e.setModifierTray,tray:e.tray,clearModifierTray:e.clearModifierTray}})))(Yi),Xi=function(e){function t(t){var n=e.call(this,t)||this;return n.showAutocompleteTray=function(e,t,i){n.props.closeCard(),n.props.closeEmotePicker(),n.props.setModifierTray({body:o.createElement(An.a,{onClickOut:n.clearAutocompleteTray},o.createElement(zn.b,{matches:e,onMatchSelect:t,onDismiss:i,containerElement:n.props.containerElement})),disableClose:!0,floating:!0,type:ct.a.AutocompleteTray})},n.clearAutocompleteTray=function(){n.isAutocompleteTray()&&n.props.clearModifierTray()},n.inChatCommandAutocompleteExperiment="variant1"===j.p.experiments.getAndTrackAssignment(Xe.c.ChatCommandAutocomplete),n}return Object(a.__extends)(t,e),t.prototype.render=function(){return this.inChatCommandAutocompleteExperiment?o.createElement(zn.c,Object(a.__assign)({},this.props,{onMatch:this.showAutocompleteTray,onReset:this.clearAutocompleteTray})):o.createElement(zn.d,Object(a.__assign)({},this.props))},t.prototype.isAutocompleteTray=function(){return this.props.tray&&this.props.tray.type===ct.a.AutocompleteTray},t}(o.Component),Ji=n("A4KW"),Zi=n("kqSx");n("MglV");!function(e){e.Tray="chat-input-tray",e.BodyContainer="chat-input-body-container"}($i||($i={}));var ea=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.componentDidUpdate=function(e){e.tray!==this.props.tray&&(this.closeTrayTimeout&&clearTimeout(this.closeTrayTimeout),this.props.tray&&this.props.tray.timeout&&(this.closeTrayTimeout=setTimeout(this.props.onClose,this.props.tray.timeout)))},t.prototype.componentWillUnmount=function(){this.closeTrayTimeout&&clearTimeout(this.closeTrayTimeout)},t.prototype.render=function(){var e,t,n={"chat-input-tray__open":!!this.props.tray,"chat-input-tray__open--persistent":this.props.tray&&this.props.tray.persistent,"chat-input-tray__floating":this.props.tray&&this.props.tray.floating},i={"chat-input-container__open":!!this.props.tray,"chat-input-container__open--persistent":this.props.tray&&this.props.tray.persistent},a={"chat-input-container__input-wrapper":!!this.props.tray},r=On.b.Large,s=0,l={left:.5,y:.5};this.props.tray&&(e=On.a.Base,r={bottomLeft:On.b.Large,bottomRight:On.b.Large},this.props.tray.floating&&(t=En.j.Absolute),this.props.tray.persistent&&(e=On.a.Alt,s={bottom:.5,x:.5}),this.props.tray.type&&this.props.tray.type===ct.a.AutocompleteTray&&(l=0));var c=null;return this.props.tray&&(c=o.createElement(wn.a,{padding:s,display:En.d.Flex,flexDirection:En.e.Row,alignItems:En.b.Start,"data-test-selector":$i.Tray},this.props.tray.icon&&o.createElement(wn.a,{margin:.5,textAlign:En.l.Center},this.props.tray.icon),o.createElement(wn.a,{padding:l,flexGrow:1},this.props.tray.title&&o.createElement(Jt.a,{bold:!0,fontSize:this.props.tray.persistent?On.d.Size6:On.d.Size5,color:this.props.tray.persistent?On.c.Alt2:On.c.Alt,type:Jt.e.Span,wordBreak:Jt.g.BreakWord},this.props.tray.title),this.props.tray.pointsCost&&Object(ve.c)("copo_enabled")&&o.createElement(wn.a,{display:En.d.InlineFlex,flexDirection:En.e.Row,verticalAlign:En.m.Middle,margin:{left:.5}},o.createElement(wn.a,{display:En.d.InlineBlock},o.createElement(Ji.b,null)),o.createElement(Jt.a,{color:On.c.Alt2},Object(j.f)(this.props.tray.pointsCost))),this.renderBody(),this.props.checkbox&&o.createElement(wn.a,{padding:{top:.5}},o.createElement(Zi.a,{label:this.props.checkbox.label,checked:this.props.checkbox.checked,onChange:this.props.checkbox.onChange}))),!this.props.tray.disableClose&&!this.props.tray.persistent&&o.createElement(Cn.a,{attachRight:!0,attachTop:!0},o.createElement(ai.a,{ariaLabel:Object(j.d)("Close","ChatInputPrompt"),onClick:this.props.onClose,icon:jn.a.Close}))),this.props.tray.onClick&&(c=o.createElement("div",{onClick:this.props.tray.onClick,className:"chat-input-tray__clickable"},c))),o.createElement(wn.a,null,o.createElement(Cn.a,{background:e,border:!!this.props.tray,borderRadius:On.b.Large,display:En.d.Block,elevation:this.props.tray&&!this.props.tray.persistent?1:0,padding:this.props.tray&&!this.props.tray.persistent?.5:0,position:t,attachRight:!0,attachLeft:!0,zIndex:En.o.Below,className:fn(n)},c,this.renderTrayError()),o.createElement(Cn.a,{background:e,borderRadius:r,display:En.d.Block,padding:this.props.tray&&!this.props.tray.persistent?.5:0,className:fn(i)},o.createElement(wn.a,{position:En.j.Relative,className:fn(a)},this.props.children)))},t.prototype.renderTrayError=function(){var e={"chat-input-tray__open":!!this.props.tray};if(this.props.tray&&this.props.tray.error)return o.createElement(Cn.a,{borderTop:!0,borderRadius:On.b.Large,display:En.d.Block,padding:.5,attachRight:!0,attachLeft:!0,className:fn(e)},o.createElement(wn.a,{attachLeft:!0,alignItems:En.b.Center,display:En.d.Flex},o.createElement(wn.a,{margin:{x:1}},o.createElement(Mn.a,{asset:jn.a.Warning,type:Mn.b.Warn})),o.createElement(wn.a,{margin:{bottom:.5}},o.createElement(Jt.a,{color:On.c.Alt2},this.props.tray.error," "))))},t.prototype.renderBody=function(){if(this.props.tray&&this.props.tray.body)return"string"==typeof this.props.tray.body?o.createElement(wn.a,{"data-test-selector":$i.BodyContainer,padding:{top:.5}},o.createElement(Jt.a,{color:On.c.Alt2,wordBreak:Jt.g.BreakWord},this.props.tray.body)):this.props.tray.body},t}(o.Component);var ta,na=n("dIU+"),ia=n("Jsra"),aa=P.a.wrap((function(){return n.e(103).then(n.bind(null,"QjI3"))}),"SubscribeButton");!function(e){e.ChatRestrictedHeader="chat-restricted-header"}(ta||(ta={}));var ra=function(e){function t(t){var n=e.call(this,t)||this;return n.renderBalloon=function(e,t){if(!n.props.showBalloon)return null;var i=null;return t&&(i=o.createElement(wn.a,{display:En.d.Flex,margin:{top:1}},t,o.createElement(wn.a,null))),o.createElement(An.a,{onClickOut:n.handleBalloonClickOut},o.createElement(Wi.a,{direction:Wi.b.TopLeft,offsetY:"-0.5rem",size:Wi.c.Medium,show:n.props.showBalloon,tailOffset:50},o.createElement(Cn.a,{color:On.c.Base,padding:1},e,i)))},n.onRestrictionsUpdate=function(){if(n.props.chatRestrictionsAPI){var e=n.props.chatRestrictionsAPI.getRestrictions();if(e){var t=null;e.includes(L.I.FOLLOWERS_ONLY)&&(t=n.props.chatRestrictionsAPI.getRemainingFollowSeconds()),n.setState({reasons:e,followSecondsRemaining:t})}else n.setState({reasons:[]})}else n.setState({reasons:[]})},n.handleBalloonClickOut=function(e){n.rootRef&&n.rootRef.contains(e.target)&&e.stopPropagation(),n.props.closeBalloon()},n.handleActionClick=function(){null!==n.firstRelevantReason&&function(e){var t;switch(e.restriction){case L.I.SUBSCRIBERS_ONLY:t="subscribe";break;case L.I.VERIFIED_ONLY:t="go_to_settings";break;case L.I.FOLLOWERS_ONLY:t="follow";break;default:return}var n={action_type:t,channel:e.channelLogin,channel_id:e.channelID};j.o.track(et.SpadeEventType.ChatInputRestrictedAction,n)}({channelID:n.props.channelID||"",channelLogin:n.props.channelLogin,restriction:n.firstRelevantReason})},n.setRootRef=function(e){return n.rootRef=e},n.state={reasons:[],followSecondsRemaining:null},n}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.showBalloon&&this.trackImpression(),this.props.chatRestrictionsAPI&&(this.props.chatRestrictionsAPI.addUpdateHandler(this.onRestrictionsUpdate),this.onRestrictionsUpdate())},t.prototype.componentWillUnmount=function(){this.props.chatRestrictionsAPI&&this.props.chatRestrictionsAPI.removeUpdateHandler(this.onRestrictionsUpdate)},t.prototype.componentDidUpdate=function(e){this.props.showBalloon&&!e.showBalloon&&this.trackImpression(),e.chatRestrictionsAPI!==this.props.chatRestrictionsAPI&&(this.props.chatRestrictionsAPI&&this.props.chatRestrictionsAPI.removeUpdateHandler(this.onRestrictionsUpdate),this.props.chatRestrictionsAPI&&(this.props.chatRestrictionsAPI.addUpdateHandler(this.onRestrictionsUpdate),this.onRestrictionsUpdate()))},t.prototype.render=function(){var e="",t=null,n=null;switch(this.firstRelevantReason){case L.I.SUBSCRIBERS_ONLY:e=Object(j.d)("Subscribers-Only Chat","ChatModeHeader"),t=Object(j.d)("Only {streamer}'s subscribers can chat right now. Subscribe and join in!",{streamer:this.props.channelDisplayName||this.props.channelLogin},"ChatModeHeader"),n=o.createElement("div",{onClick:this.handleActionClick},o.createElement(aa,{balloonDirection:Wi.b.TopRight,channelLogin:this.props.channelLogin,subLocation:"channel_page",forceIcon:!0}));break;case L.I.VERIFIED_ONLY:e=Object(j.d)("Verified Accounts Only Chat","ChatModeHeader"),t=Object(j.d)("Verify your account in Settings to chat!","ChatModeHeader"),n=o.createElement(Dn.a,{onClick:this.handleActionClick,linkTo:"/settings/security",targetBlank:!0},Object(j.d)("Go to Settings","ChatModeHeader"));break;case L.I.FOLLOWERS_ONLY:if(e=Object(j.d)("Followers-Only Chat","ChatModeHeader"),this.props.followerDurationSeconds>0&&null!==this.state.followSecondsRemaining){var i=Object(Hn.b)(this.props.followerDurationSeconds),a=Object(Hn.b)(this.state.followSecondsRemaining);t=Object(j.d)("You need to be a follower for {timeRequired} to chat, and you have {timeRemaining} left.",{timeRequired:i,timeRemaining:a},"ChatModeHeader")}else t=Object(j.d)("You need to be a follower of {streamer} to chat.",{streamer:this.props.channelDisplayName||this.props.channelLogin},"ChatModeHeader"),n=o.createElement(na.FollowButton,{channelLogin:this.props.channelLogin,onFollow:this.handleActionClick,onUnfollow:this.handleActionClick,followUIType:na.FollowButtonUIType.IconAndText,unfollowUIType:na.FollowButtonUIType.IconAndText,balloonDirection:Wi.b.TopRight,hideDropdownWhenFollowing:!0});break;case L.I.SLOW_MODE:default:return null}return o.createElement("div",{ref:this.setRootRef},o.createElement(Cn.a,{borderTop:!0,color:On.c.Alt2,display:En.d.Flex,fontSize:On.d.Size6,padding:{y:.5},position:En.j.Relative,"data-test-selector":ta.ChatRestrictedHeader},o.createElement(ia.a,{hoverColorInherit:!0,hoverUnderlineNone:!0,onClick:this.props.openBalloon,type:ia.b.Inherit},o.createElement(Jt.a,{bold:!0},e)),o.createElement(wn.a,{margin:{left:.5}},o.createElement(ai.a,{icon:jn.a.NotificationInfo,onClick:this.props.openBalloon,type:ai.c.Secondary})),this.renderBalloon(t,n)))},Object.defineProperty(t.prototype,"firstRelevantReason",{get:function(){for(var e=0,t=this.state.reasons;e<t.length;e++){var n=t[e];if(!this.props.ignoredRestrictions||!this.props.ignoredRestrictions.has(n))return n}return null},enumerable:!0,configurable:!0}),t.prototype.trackImpression=function(){this.firstRelevantReason&&function(e){var t;switch(e.restriction){case L.I.SUBSCRIBERS_ONLY:t="subscriber_mode";break;case L.I.VERIFIED_ONLY:t="verified_mode";break;case L.I.FOLLOWERS_ONLY:t=e.requiredDuration?"follow_mode_timer":"follow_mode";break;default:return}var n={channel:e.channelLogin,channel_id:e.channelID,impression_type:t};j.o.track(et.SpadeEventType.ChatInputRestrictedImpression,n)}({channelID:this.props.channelID||"",channelLogin:this.props.channelLogin,restriction:this.firstRelevantReason,requiredDuration:this.props.followerDurationSeconds})},t}(o.Component);Object(l.d)(ra);var oa=Object(l.d)(Object(Be.b)((function(e){return{followerDurationSeconds:60*e.followerDuration,followerMode:e.followerMode}})),W)(ra),sa=n("JN5s"),la=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={lastSentMessage:"",lastSentTimestamp:Date.now()},t.key="duplicated-messages",t.isDuplicatedMessage=function(e){return t.condenseWhitespace(e)===t.state.lastSentMessage&&Date.now()-t.state.lastSentTimestamp<3e4&&(t.updateModifierTray(),!0)},t.onMessageSent=function(e){t.setState({lastSentMessage:t.condenseWhitespace(e),lastSentTimestamp:Date.now()})},t.clearDupMessageModifierTray=function(){t.props.tray&&t.props.tray.type===ct.a.DuplicatedMessageError&&t.props.clearModifierTray()},t}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.registerSendMessageErrorCheck({check:this.isDuplicatedMessage,onMessageSent:this.onMessageSent},this.key)},t.prototype.componentWillUnmount=function(){this.props.unregisterSendMessageErrorCheck(this.key)},t.prototype.componentDidUpdate=function(){this.condenseWhitespace(this.props.inputValue)!==this.state.lastSentMessage&&this.clearDupMessageModifierTray()},t.prototype.render=function(){return null},t.prototype.condenseWhitespace=function(e){return e.replace(/\s+/g," ").trim()},t.prototype.updateModifierTray=function(){var e={title:Object(j.d)("Message Not Sent","DuplicatedMessageErrorTray"),body:Object(sa.a)(),icon:o.createElement(at.a,null),type:ct.a.DuplicatedMessageError,timeout:3e4,disableChat:!0};this.props.setModifierTray(e)},t}(o.Component);var ca=Object(l.d)(Object(O.b)((function(e){return{setModifierTray:e.setModifierTray,tray:e.tray,clearModifierTray:e.clearModifierTray}})))(la),da=n("hbnN"),ua=(n("f805"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.key="emote-only-messages",t.trayTitle=Object(j.d)("Emote Only Chat","EmoteOnlyTray"),t.trayDescription=Object(j.d)("This room is in emote only mode. You can find your currently available emoticons using the smiley in the chat text area.","EmoteOnlyTray"),t.buildEmoteLookup=Object(da.a)((function(e){for(var t=[],n=0,i=e;n<i.length;n++){var a=i[n];a&&a.id&&a.emotes&&(t=t.concat(Object(pt.b)(a.emotes).map((function(e){return e.displayName}))))}return new Set(t)})),t.manageEmoteOnlyTrays=function(){if(t.props.emoteOnlyMode&&!t.props.hasChatRestriction&&!t.props.tray){var e={title:t.trayTitle,icon:o.createElement(Mn.a,{asset:jn.a.NotificationInfo,type:Mn.b.Prime}),body:t.trayDescription},n={title:t.trayTitle,icon:o.createElement(Cn.a,{color:On.c.Alt2,className:"emote-only-error-handler__tray-icon"},o.createElement(Mn.a,{asset:jn.a.NotificationInfo,height:18,width:18})),type:ct.a.EmoteOnlyBanner,persistent:!0,onClick:function(){t.props.setModifierTray(e)}};t.props.setModifierTray(n)}t.props.emoteOnlyMode&&!t.props.hasChatRestriction||!t.props.tray||t.props.tray.type!==ct.a.EmoteOnlyBanner&&t.props.tray.type!==ct.a.EmoteOnlyInfo||t.props.clearModifierTray(),!t.props.emoteOnlyMode&&t.props.tray&&t.props.tray.type===ct.a.EmoteOnlyWarning&&t.props.clearModifierTray()},t.isNotEmoteOnly=function(e){if(!t.props.emoteOnlyMode)return!1;var n=!1,i=t.buildEmoteLookup(t.props.emotes);return e.replace(/\n/g," ").trim().split(" ").some((function(e){return e.length>0&&!i.has(e)&&(n=!0,t.updateModifierTray(),!0)})),n},t}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.registerSendMessageErrorCheck({check:this.isNotEmoteOnly,onMessageSent:function(){return null}},this.key),this.manageEmoteOnlyTrays()},t.prototype.componentWillUnmount=function(){this.props.unregisterSendMessageErrorCheck(this.key)},t.prototype.componentDidUpdate=function(){this.manageEmoteOnlyTrays()},t.prototype.render=function(){return null},t.prototype.updateModifierTray=function(){var e={title:this.trayTitle,body:this.trayDescription,icon:o.createElement(at.a,null),type:ct.a.EmoteOnlyWarning,timeout:3e4};this.props.setModifierTray(e)},t}(o.Component));var ma=Object(l.d)(Object(O.b)((function(e){return{setModifierTray:e.setModifierTray,tray:e.tray,clearModifierTray:e.clearModifierTray}})))(ua),pa=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={lastSentTimestamp:null},t.key="message-throughput",t.isSendingMessageTooFast=function(e){if(null===t.state.lastSentTimestamp)return!1;var n=t.state.lastSentTimestamp||0;return Date.now()-n<1e3&&(t.updateModifierTray(),!0)},t.onMessageSent=function(e){t.setState({lastSentTimestamp:Date.now()})},t}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.registerSendMessageErrorCheck({check:this.isSendingMessageTooFast,onMessageSent:this.onMessageSent},this.key)},t.prototype.componentWillUnmount=function(){this.props.unregisterSendMessageErrorCheck(this.key)},t.prototype.render=function(){return null},t.prototype.updateModifierTray=function(){var e={title:Object(j.d)("Message Not Sent","MessageThroughputErrorTray"),body:Object(j.d)("You are sending messages too quickly.","MessageThroughputErrorTray"),icon:o.createElement(at.a,null),type:ct.a.MessageThroughputError,timeout:3e4};this.props.setModifierTray(e)},t}(o.Component);var ha=Object(l.d)(Object(O.b)((function(e){return{setModifierTray:e.setModifierTray,tray:e.tray,clearModifierTray:e.clearModifierTray}})))(pa),fa=function(e){function t(t){var n=e.call(this,t)||this;return n.setTimeRemaining=function(){n.setState((function(e){if(e.remainingTimeSeconds>0)return{remainingTimeSeconds:e.remainingTimeSeconds-1};n.props.onCompletion&&(n.countdownTimer.stop(),n.props.onCompletion())}))},n.state={remainingTimeSeconds:t.timeToCountDownFromSeconds},n}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){this.countdownTimer=new Et.a({onInterval:this.setTimeRemaining,intervalMillis:1e3}),this.countdownTimer.start()},t.prototype.componentWillUnmount=function(){this.countdownTimer.stop()},t.prototype.render=function(){return o.createElement(o.Fragment,null,Object(Hn.b)(this.state.remainingTimeSeconds))},t}(o.Component),ga=function(e){function t(t){return e.call(this,t)||this}return Object(a.__extends)(t,e),t.prototype.render=function(){var e=new Date(this.props.timeoutSecondsRemaining),t=new Date,n=Math.floor(Math.abs(e.getTime()-t.getTime())/1e3),i=o.createElement(fa,{timeToCountDownFromSeconds:n,onCompletion:this.props.refetchTimeoutState});return o.createElement(wn.a,{padding:{bottom:2,x:2}},o.createElement(Cn.a,{padding:{bottom:1,x:2},borderTop:!0}),o.createElement(wn.a,{textAlign:En.l.Center},o.createElement(Jt.a,{color:On.c.Base,"data-test-selector":"current-user-timed-out-text",bold:!0},Object(j.d)("You are currently timed out from Chat.","ChatInput")),o.createElement(Jt.a,{color:On.c.Alt2},Object(j.d)("You can chat again in {countDown}.",{countDown:i},"ChatInput"))),this.props.renderButtonContainer(!0,null))},t}(o.Component),va=n("DwV5"),ba=n("O0eq"),ka=n("1qVK"),ya=n("a0DK"),Sa=n("zJj8"),Ca=[ct.a.AutocompleteTray,ct.a.CharacterLimitError,ct.a.CommandWarning,ct.a.CommandInfo,ct.a.DuplicatedMessageError,ct.a.MessageThroughputError],Ea=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.SEND_MESSAGE_ERROR_CHECK_KEY="watch-party-messages",t.getTrayBody=function(){var e=o.createElement(wn.a,{margin:{top:1,bottom:2}},o.createElement(Jt.a,null,Object(j.d)("Welcome to a Watch Party, where you can watch Prime Video shows and movies together with other Prime viewers.","WatchPartyTrayManager"))),n=o.createElement(Jt.a,null,!t.canChat()&&Object(j.d)("To participate in chat, you must be in the Watch Party with Prime and the title must be available in your region.","WatchPartyTrayManager"),Object(j.d)("Watch Parties currently do not support Subs, Cheers, Clips, VODs, Raiding, and ads due to content licensing restrictions.","WatchPartyTrayManager"));return o.createElement(wn.a,null,e,o.createElement(wn.a,{margin:{top:1,bottom:2}},n))},t.manageWatchPartyTrays=function(e){t.props.isTrayActive?e?t.props.setModifierTray(e):t.props.setModifierTray(t.getPersistentTray()):t.props.tray&&t.isWatchPartyTrayType(t.props.tray)&&t.props.clearModifierTray()},t.getInfoTray=function(){return{icon:t.props.data&&t.props.data.loading||t.props.primeCheck&&t.props.primeCheck.loading?o.createElement(ht.a,null):t.canChat()?o.createElement(Mn.a,{asset:jn.a.NotificationInfo,type:Mn.b.Prime}):o.createElement(Mn.a,{asset:jn.a.Warning,type:Mn.b.Warn}),title:t.getTrayTitle(),body:t.getTrayBody(),callOnClose:function(){return t.props.setModifierTray(t.getPersistentTray())},type:ct.a.WatchPartyInfo,disableBits:!0}},t.getPersistentTray=function(){var e=t.canChat()?jn.a.NotificationInfo:jn.a.Warning;return{icon:o.createElement(Cn.a,{color:On.c.Alt2},o.createElement(Mn.a,{asset:e})),title:t.getTrayTitle(),persistent:!0,onClick:function(){return t.props.setModifierTray(t.getInfoTray())},type:ct.a.WatchPartyBanner,disableBits:!0}},t.suppressNonPrimeMessages=function(){if(!t.props.isTrayActive)return!1;var e=!t.canChat()||t.props.isChatDisabledOnPage;return e&&t.manageWatchPartyTrays(t.getInfoTray()),e},t.canChat=function(){if(!t.props.data||t.props.data.loading||!t.props.primeCheck||t.props.primeCheck.loading||!t.props.data.currentUser||!t.props.primeCheck.primeVideoBenefit)return!1;var e=t.props.data.currentUser.isModerator,n=t.props.data.currentUser.id===t.props.channelID,i=t.props.primeCheck.primeVideoBenefit.isValid;return!t.props.isChatDisabledOnPage&&(e||n||i)},t.shouldOverrideCurrentTray=function(e){return void 0===e.type||!1===Ca.includes(e.type)},t.isWatchPartyTrayType=function(e){return e.type===ct.a.WatchPartyBanner||e.type===ct.a.WatchPartyInfo||e.type===ct.a.WatchPartyError},t.getTrayTitle=function(){return Object(j.d)("Watch Party Chat","WatchPartyTray")},t.didFinishLoadingGQLData=function(e){var n=e.primeCheck&&!0===e.primeCheck.loading&&t.props.primeCheck&&!1===t.props.primeCheck.loading;return e.data&&!0===e.data.loading&&t.props.data&&!1===t.props.data.loading&&n},t}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){Object(ya.g)()&&(this.manageWatchPartyTrays(),this.props.registerSendMessageErrorCheck({check:this.suppressNonPrimeMessages,onMessageSent:function(){return null}},this.SEND_MESSAGE_ERROR_CHECK_KEY))},t.prototype.componentDidUpdate=function(e){if(Object(ya.g)()){var t=this.props.isTrayActive&&this.props.tray&&this.shouldOverrideCurrentTray(this.props.tray)&&!this.isWatchPartyTrayType(this.props.tray);(e.isTrayActive!==this.props.isTrayActive||!this.props.tray||t||this.didFinishLoadingGQLData(e))&&this.manageWatchPartyTrays()}},t.prototype.componentWillUnmount=function(){this.props.unregisterSendMessageErrorCheck(this.SEND_MESSAGE_ERROR_CHECK_KEY)},t.prototype.render=function(){return null},t}(o.Component);var wa=Object(l.d)(Object(O.b)((function(e){return{clearModifierTray:e.clearModifierTray,setModifierTray:e.setModifierTray,tray:e.tray}})),Object(I.withWatchPartyContext)((function(e){return{isTrayActive:e.isWatchPartyActive,isChatDisabledOnPage:!e.canChatOnPageDuringWatchParty}})),Object(c.a)(Sa,{options:function(e){return{variables:{channelID:e.channelID}}},skip:function(e){return!e.isTrayActive||!e.channelID||!Object(ya.g)()}}),Object(ba.a)(ka,{name:"primeCheck",skip:function(e){return!(Object(ya.g)()&&e.isTrayActive&&e.channelID&&Object(va.c)()&&e.data&&e.data.currentUser)}}))(Ea),Oa=n("FS60"),Da=(n("QY5S"),"chat-input-buttons-container"),Na="chat-viewer-list",_a="pending_chat_message",Ia=/\S/,Ma=91,ja="chat_rules_shown",Ta=/version\/([\w\.]+).+?(mobile\s?safari|safari)/i,Pa=P.a.wrap((function(){return Promise.all([n.e(0),n.e(57)]).then(n.bind(null,"tPnS"))}),"ChatPrivateCalloutQueue",{placeholder:null}),La=P.a.wrap((function(){return Promise.all([n.e(0),n.e(75)]).then(n.bind(null,"falg"))}),"RewardCenter",{placeholder:null}),Ra=function(e){function t(t){var n=e.call(this,t)||this;return n.cancelDelayedSend=null,n.confirmDelayedSend=null,n.hasConfirmedInEmbed=!1,n.hasSeenConfirmationPrompt=!1,n.sendMessageErrorChecks={},n.shouldClearModifierTrayTypes=new Set([ct.a.CharacterLimitError,ct.a.DuplicatedMessageError,ct.a.MessageThroughputError,ct.a.CommandWarning]),n.renderButtonContainer=function(e,t){return void 0===e&&(e=!1),o.createElement(wn.a,{className:"chat-input__buttons-container","data-test-selector":Da,display:n.props.hideChatInputButtons?En.d.Hide:En.d.Flex,justifyContent:En.h.Between,margin:{top:1}},o.createElement(wn.a,{display:En.d.Flex,flexDirection:En.e.Row},!n.inChatInputRevampExperiment&&o.createElement(ai.a,{ariaLabel:Object(j.d)("Users in Chat","ChatInput"),"data-a-target":Na,"data-test-selector":Na,icon:jn.a.ViewerList,onClick:n.onShowViewersList}),o.createElement(Bn.a,{name:"copo_enabled"},o.createElement(wn.a,{position:En.j.Relative,zIndex:En.o.Default},n.props.firstPageLoaded&&o.createElement(La,null)))),o.createElement(wn.a,{display:En.d.Flex,alignItems:En.b.Center,alignContent:En.a.Center,flexDirection:En.e.Row},o.createElement(wn.a,{margin:{right:1}},o.createElement(Jt.a,{color:On.c.Alt2},t)),o.createElement(wn.a,{position:En.j.Relative},!n.props.hideChatSettings&&o.createElement(fi.a,{onShowChatRules:n.props.onShowChatRules,channelLogin:n.props.channelLogin,isHostMode:n.props.isHostMode,authToken:n.props.authToken,isCurrentUserModerator:n.props.isCurrentUserModerator,onChatCommand:n.onChatCommand,isPopout:n.props.isPopout,isEmbedded:n.props.isEmbedded,channelID:n.props.channelID,containerElement:n.props.containerElement})),o.createElement(wn.a,{margin:{left:.5}},n.renderSendButton(e))))},n.refetchTimeoutState=function(){return Object(a.__awaiter)(n,void 0,void 0,(function(){return Object(a.__generator)(this,(function(e){switch(e.label){case 0:return this.props&&this.props.data?[4,this.props.data.refetch()]:[3,2];case 1:return[2,e.sent()];case 2:return[2]}}))}))},n.renderSlowModeProgressBar=function(){if(n.state.chatRestrictedReasons[0]===L.I.SLOW_MODE&&!n.ignoreSlowMode){var e=n.state.slowModeSecondsRemaining/n.props.slowModeDuration*100;return o.createElement(wn.a,{position:En.j.Absolute,attachBottom:!0,fullWidth:!0},o.createElement(Gi.a,{borderRadius:On.b.Small,size:Gi.c.Small,value:e,mask:!0}))}return null},n.setLocalChatInputRef=function(e){n.chatInputRef=e,n.props.setChatInputRef(e)},n.setLocalAutocompleteInputRef=function(e){n.autocompleteInputRef=e,n.props.setAutocompleteInputRef(e)},n.onCheerInvalid=function(e){n.state.bitsCardError!==e&&(n.setState({bitsCardError:e}),e&&n.trackBitsCardInteraction(hi.c.UserViewingCheerError,{bitsCardError:e}))},n.onSendCheerWhenSendDisabled=function(){n.trackBitsCardInteraction(hi.c.SendInvalidCheerAttemptButtonDisabled,{bitsCardError:n.state.bitsCardError})},n.onAnonymousCheerToggle=function(e){n.setState({isAnonymousCheer:e})},n.onKeyDown=function(e){var t=e.charCode||e.keyCode;switch(n.props.onKeyDown&&t!==Vn.a.Enter&&n.props.onKeyDown(e),n.props.bitsSendHasError&&n.props.clearBitsSendError(),t){case Vn.a.Enter:return void(e.shiftKey||(e.preventDefault(),n.onMessageSend(Ui.b.Enter)));case Vn.a.Esc:return void(n.state.showBitsCard&&n.setState({showBitsCard:!1}));default:return}},n.onMessageValueUpdate=function(e){n.inChatInputRevampExperiment&&n.resizeInput(),n.setState({value:e})},n.resizeInput=function(){Ta.test(navigator.userAgent)||n.chatInputRef&&(n.chatInputRef.style.height="auto",n.chatInputRef.style.height=n.chatInputRef.scrollHeight+"px",n.chatInputRef.scrollHeight<Ma?n.chatInputRef.style.overflowY="hidden":n.chatInputRef.style.overflowY="auto")},n.onInputFocus=function(){n.props.onInputFocus&&n.props.onInputFocus(),n.setState({hasInteracted:!0})},n.onMouseEnterInput=function(){n.setState({hasInteracted:!0})},n.onChatCommand=function(e){n.props.onChatCommand(e),n.trackChatEvent(n.props.emotePickerSessionID,Ui.b.Click)},n.confirmEmbedAction=function(e,t,i){var a=n,r=a.hasConfirmedInEmbed;if(a.hasSeenConfirmationPrompt)return r;var o=window.confirm(n.confirmationMessage(e,t,i));return n.hasSeenConfirmationPrompt=!0,n.hasConfirmedInEmbed=o,n.setState({hasSeenAndRejectedEmbedPrompt:!o}),o},n.confirmationMessage=function(e,t,n){return Object(j.d)('Hi {displayName}. You are attempting to send "{message}" in {channelLogin}\'s chat via an embedded version of Twitch Chat. Are you sure you want to do this? This setting will persist until you refresh the page',{displayName:e,message:t,channelLogin:n},"ChatInput")},n.onMessageSend=function(e){return Object(a.__awaiter)(n,void 0,void 0,(function(){var t,n,i,r,o,s,l,c=this;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:if(!this.bypassDisable){if(!this.bypassRestrictionDisable&&this.state.chatRestrictedReasons.length)return this.setState({showChatRestrictionCard:!0,showBitsCard:!1}),[2];if(this.inputRevampDisableChatConditions()||this.props.tray&&this.props.tray.disableChat)return[2]}if(!this.props.authToken)return this.handleLogin(),[2];if(!this.props.channelID)return j.k.warn("[ChatInput] Attempt to send a message before channel ID"),[2];if(!this.props.tray||!this.props.tray.sendMessageHandler)return[3,8];switch(this.closeCard(),t=this.props.tray.sendMessageHandler,t.type){case ct.c.Custom:return[3,1];case ct.c.ShareResub:return[3,4]}return[3,7];case 1:return t.handleMessage?[4,t.handleMessage(this.state.value,t.params)]:[3,3];case 2:a.sent()?t.onSuccess&&t.onSuccess(this.state.value,t.params):t.onError&&t.onError(this.state.value,t.params),a.label=3;case 3:return[2];case 4:return t.handleMessage?(t.params=t.params||{},t.params.opt=this.state.shareResubStreak,[4,t.handleMessage(this.state.value,t.params)]):[3,6];case 5:a.sent()?t.onSuccess&&t.onSuccess(this.state.value,t.params):t.onError&&t.onError(this.state.value,t.params),a.label=6;case 6:return this.props.clearTray(),[2];case 7:a.label=8;case 8:return(n=Ia.test(this.state.value))?this.state.isSendingBits?(j.k.debug("[ChatInput] Supressing chat message send. Bits spending is still in progress."),[2]):this.props.isEmbedded&&(this.props.isCurrentUserModerator||this.props.data&&this.props.data.currentUser&&this.props.data.currentUser.isPartner)&&this.props.sessionUser&&!this.confirmEmbedAction(this.props.sessionUser.displayName,this.state.value||"",this.props.channelLogin)?(j.k.debug("[ChatInput] Embed Confirmation check failed. Not sending message"),[2]):(this.resetAndUpdateRenderSentChatMessageEvent(),this.state.value.split(/\s+/).forEach((function(e){c.props.emoteMap&&c.props.emoteMap.hasOwnProperty(e)&&Object(qi.a)(c.props.emoteMap[e])})),this.props.data&&this.props.data.currentUser?this.isTypingCommand()?(this.sendRegularMessage(e),[2]):(i=Object(pi.a)(this.state.messageCheers),r=Object(Ke.b)(),0===i.total?(this.sendRegularMessage(e),this.state.messageCheers.length&&this.trackCheerErrorEvent(this.props.emotePickerSessionID,i.total,this.state.value,r,this.state.isAnonymousCheer,Ui.d.ZeroBits),[2]):this.props.data.channel?this.props.data.channel.cheer?this.props.data.channel.cheer.settings?this.props.tray&&this.props.tray.disableBits?(j.k.warn("[Chat Input] Bits are disabled due to an input tray."),[2]):this.props.bitsConfig?(this.state.bitsCardError&&(this.onSendCheerWhenSendDisabled(),this.trackCheerErrorEvent(this.props.emotePickerSessionID,i.total,this.state.value,r,this.state.isAnonymousCheer,Ui.d.BitsCardDisabled)),(o=Object(pi.g)({messageBits:i,balance:this.props.data.currentUser.bitsBalance||0,cheerMinimumBits:this.props.data.channel.cheer.settings.cheerMinimumBits,emoteMinimumBits:this.props.data.channel.cheer.settings.emoteMinimumBits,inputValue:this.state.value,bitsConfig:this.props.bitsConfig})).canSpend?this.props.sendCheer?(this.setState({isSendingBits:!0}),i.total>=kn.q?[4,new Promise((function(e){var t=setTimeout(e,kn.u.UNDO_PROMPT_DURATION),n=function(n){void 0===n&&(n=!1),clearTimeout(t),c.cancelDelayedSend=null,c.confirmDelayedSend=null,e(n)};c.cancelDelayedSend=function(){return n(!0)},c.confirmDelayedSend=function(){return n(!1)}}))]:[3,10]):(j.k.warn("[Chat Input] No GraphQL mutation for sending cheers attached."),[2]):(j.k.warn("[Chat Input] Spending bits forbidden.",o),o.cheerAboveMaxBitsPerEmote&&this.trackCheerErrorEvent(this.props.emotePickerSessionID,i.total,this.state.value,r,this.state.isAnonymousCheer,Ui.d.AboveMaxEmote),o.totalAboveBalance&&this.trackCheerErrorEvent(this.props.emotePickerSessionID,i.total,this.state.value,r,this.state.isAnonymousCheer,Ui.d.BitsUnavailable),o.totalBelowCheerMinimum&&this.trackCheerErrorEvent(this.props.emotePickerSessionID,i.total,this.state.value,r,this.state.isAnonymousCheer,Ui.d.BelowMin),o.totalBelowEmoteMinimum&&this.trackCheerErrorEvent(this.props.emotePickerSessionID,i.total,this.state.value,r,this.state.isAnonymousCheer,Ui.d.BelowMinEmote),o.inputLongerThanMaxBitsMessage&&this.trackCheerErrorEvent(this.props.emotePickerSessionID,i.total,this.state.value,r,this.state.isAnonymousCheer,Ui.d.InputAboveMaxLength),o.inputStartsWithCommand&&this.trackCheerErrorEvent(this.props.emotePickerSessionID,i.total,this.state.value,r,this.state.isAnonymousCheer,Ui.d.InputCommandStart),o.cheerContainsInvalidDisplayOnlyCheermotes&&this.trackCheerErrorEvent(this.props.emotePickerSessionID,i.total,this.state.value,r,this.state.isAnonymousCheer,Ui.d.InvalidBitsMessage),[2])):(j.k.warn("[Chat Input] Bits Config is undefined"),this.trackCheerErrorEvent(this.props.emotePickerSessionID,i.total,this.state.value,r,this.state.isAnonymousCheer,Ui.d.MissingBitsConfig),[2]):(j.k.warn("[Chat Input] Cheer Settings are undefined."),[2]):(j.k.warn("[Chat Input] Cheer is null."),[2]):(j.k.warn("[Chat Input] User is null."),[2])):(this.sendRegularMessage(e),[2])):(j.k.debug("[ChatInput] Supressing chat message send. Input failed to pass validation.",{hasSendableInput:n,value:this.state.value}),[2]);case 9:if(a.sent())return this.trackCheerErrorEvent(this.props.emotePickerSessionID,i.total,this.state.value,r,this.state.isAnonymousCheer,Ui.d.Canceled),this.setState({isSendingBits:!1}),this.chatInputRef.focus(),[2];a.label=10;case 10:return a.trys.push([10,12,,13]),s={id:r,targetID:this.props.channelID,bits:i.total,content:this.state.value,isAutoModEnabled:!0,shouldCheerAnyway:this.props.forceSendCheer,isAnonymous:this.state.isAnonymousCheer},this.props.clearBitsSendError(),[4,this.props.sendCheer({variables:{input:s}})];case 11:return(l=a.sent()).data.sendCheer&&l.data.sendCheer.validationError?(this.props.onSendCheerError&&this.props.onSendCheerError(this.state.value,l.data.sendCheer.validationError),this.trackCheerErrorEvent(this.props.emotePickerSessionID,i.total,this.state.value,r,this.state.isAnonymousCheer,Object(Ai.a)(l.data.sendCheer.validationError.code)),this.setState({isSendingBits:!1,showBitsCard:!1,showChatRestrictionCard:!1,bitsCardError:l.data.sendCheer.validationError.code}),this.props.closeEmotePicker(),this.chatInputRef&&this.chatInputRef.focus(),[2]):[3,13];case 12:return a.sent(),this.props.onSendCheerError&&this.props.onSendCheerError(this.state.value,{code:L.Gc.UNKNOWN}),this.trackCheerErrorEvent(this.props.emotePickerSessionID,i.total,this.state.value,r,this.state.isAnonymousCheer,Ui.d.Unknown),this.setState({isSendingBits:!1,bitsCardError:L.Gc.UNKNOWN}),this.chatInputRef&&this.chatInputRef.focus(),[2];case 13:return this.props.onSendCheerSuccess(),this.trackCheerEvent(this.props.emotePickerSessionID,i.total,this.state.value,r,this.state.isAnonymousCheer),this.setState({isSendingBits:!1,bitsCardError:void 0,showBitsCard:!1,showChatRestrictionCard:!1,value:""}),this.chatInputRef&&this.chatInputRef.focus(),this.autocompleteInputRef&&this.autocompleteInputRef.setValue(""),[2]}}))}))},n.onEmotePickerToggle=function(){n.setState((function(e){return e.messageCheers.length?e:(n.props.isShowingEmotePicker?n.props.closeEmotePicker():n.props.showEmotePicker(),Object(a.__assign)(Object(a.__assign)({},e),{showBitsCard:!1,showChatRestrictionCard:!1}))}))},n.onClickOut=function(){n.props.isShowingEmotePicker&&n.closeCard()},n.onBitsIconClick=function(){n.state.showBitsCard?n.trackBitsCardInteraction(hi.c.CloseCard):n.trackBitsCardInteraction(hi.c.OpenCard),n.setState((function(e){var t=e.showBitsCard,n=e.showChatRestrictionCard;return t?{showBitsCard:!1,showChatRestrictionCard:n}:{showBitsCard:!0,showChatRestrictionCard:!1}})),n.props.isShowingEmotePicker&&n.props.closeEmotePicker()},n.onShowViewersList=function(){(n.state.showBitsCard||n.state.showChatRestrictionCard||n.props.isShowingEmotePicker)&&n.closeCard(),n.props.showViewersList()},n.onBitsClose=function(){n.state.showBitsCard&&n.closeCard(),n.trackBitsCardInteraction(hi.c.CloseCard)},n.onChatRestrictionBalloonClose=function(){n.state.showChatRestrictionCard&&n.closeCard()},n.onChatRestrictionBalloonOpen=function(){n.setState({showChatRestrictionCard:!0})},n.closeCard=function(){n.setState({showBitsCard:!1,showChatRestrictionCard:!1}),n.props.closeEmotePicker()},n.onClickEmote=function(e){n.autocompleteInputRef&&n.autocompleteInputRef.setValue(Object(xi.a)(n.state.value,e))},n.onEmotePickerDataLoaded=function(e){e&&n.setState({showEmotePickerButton:!0})},n.closeTray=function(){n.props.tray&&n.props.tray.callOnClose&&n.props.tray.callOnClose(),n.isErrorTray()||n.isAutocompleteTray()?n.props.clearModifierTray():n.props.tray&&n.props.clearTray()},n.trackCheerEvent=function(e,t,i,a,r){Object(Ai.d)({channelID:n.props.channelID||"",channelLogin:n.props.channelLogin,emotePickerSessionID:e,isAnonymousCheer:r,isHostMode:n.props.isHostMode,player:n.props.isPopout?Ui.a.Embed:Ui.a.Web,subOnlyMode:n.props.subsOnlyMode,viewerContext:n.props.viewerContext,bitsValue:t,cheermote:i,transactionID:a})},n.trackCheerErrorEvent=function(e,t,i,a,r,o){Object(Ai.c)({channelID:n.props.channelID||"",channelLogin:n.props.channelLogin,emotePickerSessionID:e,isHostMode:n.props.isHostMode,isAnonymousCheer:r,player:n.props.isPopout?Ui.a.Embed:Ui.a.Web,subOnlyMode:n.props.subsOnlyMode,viewerContext:n.props.viewerContext,bitsValue:t,cheermote:i,transactionID:a,errorType:o})},n.setBitsGemNotificationExists=function(e){n.setState({bitsGemNotificationExists:e})},n.trackBitsCardInteraction=function(e,t){n.setState((function(t){return{bitsTrackingId:e===hi.c.OpenCard||e===hi.c.OpenCardViaCheering?Object(Ke.b)():t.bitsTrackingId,bitsCheckoutId:e===hi.c.BuyMain?Object(Ke.b)():t.bitsCheckoutId}}),(function(){var i={actionName:e,actionType:t&&t.actionType,trackingId:n.state.bitsTrackingId,checkoutId:n.state.bitsCheckoutId,emoteType:t&&t.emoteType,emoteLevel:t&&t.emoteLevel,location:t&&t.location,displayedBalance:n.props.data&&n.props.data.currentUser&&n.props.data.currentUser.bitsBalance||0,bitsCardError:t&&t.bitsCardError,channelId:n.props.data&&n.props.data.channel&&n.props.data.channel.id||"",userId:n.props.data&&n.props.data.currentUser&&n.props.data.currentUser.id||"",gemNotification:n.state.bitsGemNotificationExists};Object(hi.n)(i)}))},n.resetAndUpdateRenderSentChatMessageEvent=function(){n.props.latencyTracking.resetCustomEvents(Je.a.Chat);var e=n.props.latencyTracking.registerCustomEvent({benchmark:400,group:Je.a.Chat,key:Je.b.ChatRenderSent,label:Je.c.RenderSent,start:Je.d.Registration});n.props.updateRenderSentChatMessageEvent(e)},n.isCurrentUserBanned=function(){if(n.props.data&&!n.props.data.loading&&!n.props.data.error&&n.props.data.channel){var e=n.props.data.channel.self;if(e&&e.banStatus&&e.banStatus.isPermanent)return!0}return!1},n.isCurrentUserTimedOut=function(){if(n.props.data&&!n.props.data.loading&&!n.props.data.error&&n.props.data.channel){var e=n.props.data.channel.self;if(e&&e.banStatus&&null!==e.banStatus.isPermanent&&!e.banStatus.isPermanent)return!0}return!1},n.getRemainingTimedOutSeconds=function(){if(n.props.data&&!n.props.data.loading&&!n.props.data.error&&n.props.data.channel){var e=n.props.data.channel.self;if(e&&e.banStatus&&void 0!==e.banStatus.isPermanent&&!e.banStatus.isPermanent&&e.banStatus.expiresAt)return e.banStatus.expiresAt}return""},n.onRestrictionsUpdate=function(){var e=[],t=0;if(n.props.chatRestrictionsAPI){var i=n.props.chatRestrictionsAPI.getRestrictions();i&&i.length>0&&(e=i,t=n.props.chatRestrictionsAPI.getRemainingSlowModeSeconds())}n.setState({chatRestrictedReasons:e,slowModeSecondsRemaining:t})},n.isTypingCommand=function(){return"/"===n.state.value.substr(0,1)&&"/me"!==n.state.value.substr(0,3)||"."===n.state.value.substr(0,1)&&".me"!==n.state.value.substr(0,3)},n.toggleShareResubStreak=function(){n.setState((function(e){return{shareResubStreak:!e.shareResubStreak}}))},n.isTypingCheer=function(){return n.state.messageCheers.length>0},n.inputRevampDisableChatConditions=function(){var e=j.m.get(ja,{});return n.inChatInputRevampExperiment&&(n.props.chatConnectionState!==i.CONNECTED||n.props.chatRules&&!e[n.props.channelLogin])},n.inputRevampDisableChatButtonConditions=function(){var e=j.m.get(ja,{});return n.inChatInputRevampExperiment&&(n.props.chatConnectionState!==i.CONNECTED||n.props.chatRules&&!e[n.props.channelLogin]&&n.props.isShowingChatRules)},n.registerSendMessageErrorCheck=function(e,t){n.sendMessageErrorChecks[t]||(n.sendMessageErrorChecks[t]=e)},n.unregisterSendMessageErrorCheck=function(e){n.sendMessageErrorChecks[e]&&delete n.sendMessageErrorChecks[e]},n.storePendingMessage=function(){j.m.set(_a,n.state.value)},n.state={hasInteracted:!1,hasSeenAndRejectedEmbedPrompt:!1,isSendingBits:!1,messageCheers:[],showBuyBits:!1,showBitsCard:!1,showChatRestrictionCard:!1,showEmotePickerButton:!!t.authToken,value:"",chatRestrictedReasons:[],slowModeSecondsRemaining:0,isAnonymousCheer:!1,shareResubStreak:!1,bitsTrackingId:Object(Ke.b)(),bitsGemNotificationExists:!1},n.inChatInputRevampExperiment="variant1"===j.p.experiments.getAndTrackAssignment(Xe.c.ChatInputRevamp),n.inChatCommandAutocompleteExperiment="variant1"===j.p.experiments.getAndTrackAssignment(Xe.c.ChatCommandAutocomplete),n}return Object(a.__extends)(t,e),Object.defineProperty(t.prototype,"bypassDisable",{get:function(){return this.isTypingCommand()||this.isTypingCheer()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bypassRestrictionDisable",{get:function(){var e=this.props.tray;return!(!e||!e.ignoredRestrictions||this.state.chatRestrictedReasons.find((function(t){return!e.ignoredRestrictions.has(t)})))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autocompleteTextareaRows",{get:function(){if(this.inChatInputRevampExperiment)return Ta.test(navigator.userAgent)?2:1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ignoreSlowMode",{get:function(){var e=this.props.tray;return!(!e||!e.ignoredRestrictions)&&e.ignoredRestrictions.has(L.I.SLOW_MODE)},enumerable:!0,configurable:!0}),t.prototype.componentDidMount=function(){this.getPendingMessage()&&this.restorePendingMessage(),this.props.chatRestrictionsAPI&&this.props.chatRestrictionsAPI.addUpdateHandler(this.onRestrictionsUpdate)},t.prototype.componentDidUpdate=function(e,t){var n=this;if(this.props.forceSendCheer&&this.onMessageSend(Ui.b.Click),this.state.value!==t.value&&this.props.bitsEnabled&&(!this.props.tray||!this.props.tray.disableBits)&&!this.isTypingCommand()){var i=[];Object(Ze.g)(this.state.value,this.props.bitsConfig,!1).forEach((function(e){e.type===Mt.a.Emote&&(i.push(e.content),e.content.alt&&Object(Ze.e)(e.content.alt)&&n.setState({isAnonymousCheer:!0}))})),i.length&&this.props.isShowingEmotePicker&&this.props.closeEmotePicker(),!this.isTypingCheer()&&i.length&&i.length>=1&&!this.state.showBitsCard&&!this.state.showChatRestrictionCard&&!this.props.showEmotePicker&&this.trackBitsCardInteraction(hi.c.OpenCardViaCheering),this.setState({messageCheers:Object(Ze.b)(i,this.props.bitsConfig)})}e.chatRestrictionsAPI!==this.props.chatRestrictionsAPI&&(this.props.chatRestrictionsAPI&&this.props.chatRestrictionsAPI.removeUpdateHandler(this.onRestrictionsUpdate),this.props.chatRestrictionsAPI&&this.props.chatRestrictionsAPI.addUpdateHandler(this.onRestrictionsUpdate))},t.prototype.componentWillUnmount=function(){this.props.chatRestrictionsAPI&&this.props.chatRestrictionsAPI.removeUpdateHandler(this.onRestrictionsUpdate)},t.prototype.render=function(){var e=this.isCurrentUserBanned(),t=this.isCurrentUserTimedOut(),n=Object(j.d)("Send a message","ChatInput");if(e)return o.createElement(Qi,{renderButtonContainer:this.renderButtonContainer});if(this.inChatInputRevampExperiment&&t)return o.createElement(ga,{timeoutSecondsRemaining:this.getRemainingTimedOutSeconds(),renderButtonContainer:this.renderButtonContainer,refetchTimeoutState:this.refetchTimeoutState});if(this.state.hasSeenAndRejectedEmbedPrompt)return o.createElement(wn.a,{className:"chat-input",display:this.props.hidden?En.d.Hide:En.d.Block,padding:{x:2,bottom:2}},o.createElement(Jt.a,{"data-test-selector":"chat-embed-denied-text"},Object(j.d)("You rejected the prompt to send messages in this embedded version of Twitch Chat. If this was done in error, please refresh the page.","ChatInput")),this.renderButtonContainer(!0,null));var i=[];!this.props.enableBitsInput||!this.props.bitsEnabled||this.props.tray&&this.props.tray.disableBits||i.push(o.createElement(ci,{key:"bits",onClick:this.onBitsIconClick,channelID:this.props.channelID,onGemNotification:this.setBitsGemNotificationExists})),this.state.showEmotePickerButton&&i.push(o.createElement(Vi.b,{key:"emote-picker",onClick:this.onEmotePickerToggle,isActive:this.props.isShowingEmotePicker}));var a=null;(this.props.firstPageLoaded||this.state.hasInteracted)&&(a=o.createElement(Vi.c,{channelOwnerID:this.props.channelID,emotePickerSource:Hi.a.Chat,onClickClose:this.onEmotePickerToggle,onClickEmote:this.onClickEmote,onLoad:this.onEmotePickerDataLoaded,toggleVisibility:this.onEmotePickerToggle,visible:this.props.isShowingEmotePicker&&(!this.inChatInputRevampExperiment||!this.props.isShowingChatRules),size:Wi.c.Auto,direction:Wi.b.TopRight}));var r=o.createElement(ei,null);!this.props.firstPageLoaded&&!this.state.hasInteracted||!this.props.enableBitsInput||!this.props.bitsEnabled||this.props.tray&&this.props.tray.disableBits||(r=o.createElement(Zn,{channelID:this.props.channelID,channelLogin:this.props.channelLogin,trackingID:this.state.bitsTrackingId,checkoutID:this.state.bitsCheckoutId,currentCheers:this.state.messageCheers,isSending:this.state.isSendingBits,isStaff:this.props.isStaff,isAnonymous:this.state.isAnonymousCheer,onCancelSend:this.cancelDelayedSend,onClickCheermote:this.onClickEmote,onConfirmSend:this.confirmDelayedSend,onUserClose:this.onBitsClose,trackBitsCardInteraction:this.trackBitsCardInteraction,visible:this.state.showBitsCard&&(!this.inChatInputRevampExperiment||!this.props.isShowingChatRules),cheerMessageAutoModded:this.props.isTextInputDisabled,bitsSendErrorCode:this.props.bitsSendErrorCode,bitsSendHasError:this.props.bitsSendHasError,chatMessage:this.state.value,onCheerInvalid:this.onCheerInvalid,onAnonymousToggle:this.onAnonymousCheerToggle}));var s=null;!(this.props.data&&this.props.data.channel&&this.props.data.channel.cheer&&this.props.data.channel.cheer.hashtags&&this.state.messageCheers.length>0)||this.props.tray&&this.props.tray.disableBits||(s=o.createElement(mi,{hashTags:this.props.data.channel.cheer.hashtags}));var l=null;!this.inChatCommandAutocompleteExperiment||this.props.tray&&this.props.tray.disableCommands||(l=o.createElement(Ei,{permissionLevel:this.props.commandPermissionLevel}));var c=null;this.props.moderatedMessageParts&&this.props.moderatedMessageParts.length>0&&(c=o.createElement(_i,{moderatedReason:this.props.moderatedReason,moderatedMessageParts:this.props.moderatedMessageParts}));var d=null;if(this.props.slowMode&&(n=Object(j.d)("Send a message (chat is in slow mode)","ChatInput")),this.state.chatRestrictedReasons[0]===L.I.SLOW_MODE&&!this.ignoreSlowMode){var u=Object(Hn.b)(this.state.slowModeSecondsRemaining,Hn.a.HumanizedShort);d=Object(j.d)("You can chat in {duration}",{duration:u},"ChatInput")}var m=!this.bypassDisable&&(!this.bypassRestrictionDisable&&this.state.chatRestrictedReasons.length>0||this.inputRevampDisableChatButtonConditions()||this.props.tray&&this.props.tray.disableChat),p=fn({"chat-input__textarea":this.inChatInputRevampExperiment,"chat-input__textarea--error":this.inChatInputRevampExperiment&&(this.isErrorTray()||this.trayHasError())}),h=o.createElement(wn.a,{className:p},o.createElement(Xi,{clearModifierTray:this.props.clearModifierTray,closeCard:this.closeCard,closeEmotePicker:this.props.closeEmotePicker,componentRefDelegate:this.setLocalChatInputRef,componentType:zn.a.TextArea,containerElement:this.props.containerElement,"data-a-target":"chat-input","data-test-selector":"chat-input",disabled:this.state.isSendingBits||this.props.isTextInputDisabled||this.props.isShowingChatRules&&this.inChatInputRevampExperiment,htmlAutocomplete:"twitch-chat",maxLength:this.inChatInputRevampExperiment?500:void 0,noResize:!0,onFocus:this.onInputFocus,onKeyDown:this.onKeyDown,onValueUpdate:this.onMessageValueUpdate,paddingRight:this.inChatInputRevampExperiment?30*i.length+5:30*i.length,placeholder:n,refDelegate:this.setLocalAutocompleteInputRef,rows:this.autocompleteTextareaRows,setModifierTray:this.props.setModifierTray,suggestionSource:zn.e.Chat,tray:this.props.tray},o.createElement(zn.f,{emotes:this.props.emotes}),o.createElement(ki,null),s,l),this.inChatInputRevampExperiment?o.createElement(wn.a,{position:En.j.Absolute,attachRight:!0,attachBottom:!0},o.createElement(Cn.a,{padding:{bottom:.5,right:.5}},i)):o.createElement(wn.a,{position:En.j.Absolute,attachRight:!0,attachTop:!0},i),this.renderSlowModeProgressBar());h=o.createElement(ea,{checkbox:this.props.tray&&this.props.tray.checkboxLabel?{label:this.props.tray.checkboxLabel,checked:this.state.shareResubStreak,onChange:this.toggleShareResubStreak}:void 0,tray:this.props.tray,onClose:this.closeTray},h);var f=o.createElement(Pa,{authToken:this.props.authToken,badgeSets:this.props.badgeSets,channelDisplayName:this.props.channelDisplayName,channelLogin:this.props.channelLogin,channelID:this.props.channelID,onPushMessage:this.props.onPushMessage}),g=[];this.inChatInputRevampExperiment&&(g.push(o.createElement(Ki,{key:"char-limit-handler",inputValue:this.state.value,maxLength:500})),this.props.isCurrentUserModerator||this.props.isCurrentUserVIP||(g.push(o.createElement(ca,{key:"dupe-message-handler",inputValue:this.state.value,registerSendMessageErrorCheck:this.registerSendMessageErrorCheck,unregisterSendMessageErrorCheck:this.unregisterSendMessageErrorCheck})),g.push(o.createElement(ha,{key:"throughput-handler",registerSendMessageErrorCheck:this.registerSendMessageErrorCheck,unregisterSendMessageErrorCheck:this.unregisterSendMessageErrorCheck}))));var v={x:2,bottom:2};return this.inChatInputRevampExperiment&&(v={x:1,bottom:1}),o.createElement(wn.a,{className:"chat-input",display:this.props.hidden?En.d.Hide:En.d.Block,padding:v},this.inChatInputRevampExperiment&&this.props.isShowingChatRules&&this.renderChatRules(),c,this.props.firstPageLoaded&&f,g,this.inChatInputRevampExperiment&&o.createElement(o.Fragment,null,o.createElement(wa,{channelID:this.props.channelID,registerSendMessageErrorCheck:this.registerSendMessageErrorCheck,unregisterSendMessageErrorCheck:this.unregisterSendMessageErrorCheck}),o.createElement(ma,{emoteOnlyMode:this.props.emoteOnlyMode,hasChatRestriction:this.state.chatRestrictedReasons.length>0,emotes:this.props.emotes,registerSendMessageErrorCheck:this.registerSendMessageErrorCheck,unregisterSendMessageErrorCheck:this.unregisterSendMessageErrorCheck})),o.createElement(oa,{channelDisplayName:this.props.channelDisplayName,channelID:this.props.channelID,channelLogin:this.props.channelLogin,closeBalloon:this.onChatRestrictionBalloonClose,ignoredRestrictions:this.props.tray&&this.props.tray.ignoredRestrictions,openBalloon:this.onChatRestrictionBalloonOpen,showBalloon:this.state.showChatRestrictionCard}),o.createElement(An.a,{onClickOut:this.onClickOut},o.createElement(On.f,{display:this.props.moderatedMessageParts?En.d.Hide:En.d.Block,position:En.j.Relative,zIndex:En.o.Default},o.createElement("div",{onMouseEnter:this.onMouseEnterInput},a,r,h)),this.renderButtonContainer(m,d)))},t.prototype.renderChatRules=function(){if(this.props.data&&this.props.data.channel)return o.createElement(Oi,{channelDisplayName:this.props.data.channel.displayName,channelProfileImageUrl:this.props.data.channel.profileImageURL,channelLogin:this.props.channelLogin,channelID:this.props.channelID,chatRules:this.props.chatRules,onCloseChatRules:this.props.closeChatRules})},t.prototype.renderSendButton=function(e){var t=this;void 0===e&&(e=!1);var n=Object(j.d)("Chat","ChatInput");if(this.state.value&&null!==Object(yi.u)(this.state.value))n=Object(j.d)("Whisper","ChatInput");else if(this.props.tray)switch(this.props.tray.sendButtonOverride){case ct.b.ShareBitsBadgeTier:case ct.b.ShareResub:n=Object(j.d)("Share","ChatInput");break;case ct.b.ThankSubGifter:n=Object(j.d)("Send Thanks","ChatInput")}return o.createElement(Dn.a,{onClick:function(){return t.onMessageSend(Ui.b.Click)},"data-a-target":"chat-send-button","data-test-selector":"chat-send-button",disabled:this.state.isSendingBits||this.props.isTextInputDisabled||e},n)},t.prototype.sendRegularMessage=function(e){var t=this;if(this.props.onSendMessage){var n=Object(yi.r)(this.state.value);if(n&&!j.m.get(ji,!1)&&!this.props.hideOnboardingPrompts)return this.setState({showBitsCard:!1,showChatRestrictionCard:!1},(function(){t.trackChatEvent(t.props.emotePickerSessionID,e),t.autocompleteInputRef&&t.autocompleteInputRef.setValue(""),t.props.openRaidUpsellFromHost(n.recipientLogin)}));if(this.inChatInputRevampExperiment&&!this.props.isCurrentUserModerator&&!this.props.isCurrentUserVIP&&!this.isTypingCommand()){for(var i=0,a=Object.keys(this.sendMessageErrorChecks);i<a.length;i++){var r=a[i];if(this.sendMessageErrorChecks[r].check(this.state.value))return}for(var o=0,s=Object.keys(this.sendMessageErrorChecks);o<s.length;o++){r=s[o];this.sendMessageErrorChecks[r].onMessageSent(this.state.value)}}this.props.onSendMessage(this.state.value)&&(this.trackChatEvent(this.props.emotePickerSessionID,e),this.trackMentions(),this.props.tray&&this.props.tray.sendMessageHandler&&this.props.tray.sendMessageHandler.type===ct.c.Chat&&this.props.tray.sendMessageHandler.onSuccess&&this.props.tray.sendMessageHandler.onSuccess(this.state.value,this.props.tray.sendMessageHandler.params),this.props.tray?this.props.clearTray():this.autocompleteInputRef&&this.autocompleteInputRef.setValue(""),this.props.isShowingEmotePicker&&this.props.closeEmotePicker(),this.setState({showBitsCard:!1,showChatRestrictionCard:!1}))}},t.prototype.handleLogin=function(){var e={onComplete:this.storePendingMessage,targetChannel:this.props.channelDisplayName,showContext:!0};this.props.login(e)},t.prototype.isErrorTray=function(){return this.props.tray&&this.props.tray.type&&this.shouldClearModifierTrayTypes.has(this.props.tray.type)},t.prototype.trayHasError=function(){return this.props.tray&&!!this.props.tray.error},t.prototype.isAutocompleteTray=function(){return this.props.tray&&this.props.tray.type===ct.a.AutocompleteTray},t.prototype.trackChatEvent=function(e,t){Object(Ai.b)({channelID:this.props.channelID||"",channelLogin:this.props.channelLogin,emotePickerSessionID:e,isHostMode:this.props.isHostMode,player:this.props.isPopout?Ui.a.Embed:Ui.a.Web,subOnlyMode:this.props.subsOnlyMode,viewerContext:this.props.viewerContext,sendAction:t})},t.prototype.trackMentions=function(){if(this.state.value&&this.props.sessionUser)for(var e=0,t=Object(qn.a)(this.state.value,{mentions:{senderLogin:this.props.sessionUser.login,sessionUser:this.props.sessionUser}});e<t.length;e++){var n=t[e];n.type===Mt.a.Mention&&n.content.currentUserMentionRelation!==Fi.a.Recipient&&Object(Bi.a)({channelLogin:this.props.channelLogin,isHostMode:this.props.isHostMode,mentionedUserDisplayName:n.content.recipient,userLogin:this.props.sessionUser.login})}else j.k.warn("[ChatInput] trackMentions was called in a nonsensical state.")},t.prototype.getPendingMessage=function(){return j.m.get(_a,"")},t.prototype.clearPendingMessage=function(){j.m.set(_a,"")},t.prototype.restorePendingMessage=function(){var e=this.getPendingMessage();e&&this.autocompleteInputRef&&(this.autocompleteInputRef.setValue(e),this.clearPendingMessage())},t}(o.Component);var Fa=Object(l.d)(Object(c.a)(Oa,{name:"sendCheer"}),Object(c.a)(zi,{skip:function(e){return!e.firstPageLoaded}}),W,Object(_.withLatencyTracking)("ChatInput",{autoReportInteractive:!0}),Object(s.b)((function(e){return{emotePickerSessionID:e.chat.emotePickerSessionID,sessionUser:Object(h.e)(e)}}),(function(e){return Object(l.b)({login:function(e){return Object(Wn.e)(Gn.a.Chat,e)},updateRenderSentChatMessageEvent:b.Q},e)})),Object(Be.b)((function(e){return{emoteOnlyMode:e.emoteOnlyMode,slowMode:e.slowMode,slowModeDuration:e.slowModeDuration,subsOnlyMode:e.subsOnlyMode}})),Object(k.b)((function(e){return{hideChatSettings:e.hideChatSettings,hideOnboardingPrompts:e.hideOnboardingPrompts,hideChatInputButtons:e.hideChatInputButtons}})),Object(O.b)((function(e){return{tray:e.tray,clearTray:e.clearTray,setModifierTray:e.setModifierTray,clearModifierTray:e.clearModifierTray,setAutocompleteInputRef:e.setAutocompleteInputRef,setChatInputRef:e.setChatInputRef}})),Object(Di.b)((function(e){return e})),E((function(e){return{chatConnectionState:e.chatConnectionState,updateChatConnectionState:e.updateChatConnectionState}})),Object(D.b)((function(e){return{isShowingChatRules:e.isShowingChatRules,showChatRules:e.showChatRules,closeChatRules:e.closeChatRules,isShowingEmotePicker:e.isShowingEmotePicker,showEmotePicker:e.showEmotePicker,closeEmotePicker:e.closeEmotePicker}})),Object(f.b)((function(e){return{bitsConfig:e.bitsConfig,bitsEnabled:e.bitsEnabled}})))(Ra),Ua=n("SceP"),xa=n("fxMP");var Aa,Ba=n("DLhE"),Va=n("imBb"),Ha=(n("VcSt"),n("i8i4")),qa=n("MJbm"),Ga=n("8/mp"),Wa=n("HAa/"),za=n("Y/1R"),Qa=new Set([Ge.b.AutoMod,Ge.b.ChannelPointsReward,Ge.b.Clear,Ge.b.Connected,Ge.b.Disconnected,Ge.b.EmoteOnlyMode,Ge.b.FollowerOnlyMode,Ge.b.Hosted,Ge.b.Hosting,Ge.b.Info,Ge.b.Message,Ge.b.Moderation,Ge.b.ModerationAction,Ge.b.Notice,Ge.b.PrimeCommunityGiftReceivedEvent,Ge.b.R9KMode,Ge.b.Raid,Ge.b.Ritual,Ge.b.RoomMods,Ge.b.SlowMode,Ge.b.TargetedModerationAction,Ge.b.Unhost,Ge.b.Unraid]),Ya=(n("HjUq"),["scroll","wheel","mousewheel","DOMMouseScroll"]),$a=10,Ka=5e3,Xa=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isAutoScrolling:!0,isLoadingMore:!1,isPaused:!1,loadMoreEnabled:!0,hoverResumeTimer:null,keyboardResumeLock:!1},t.shouldUpdateMessages=!1,t.inChatInputRevampExperiment="variant1"===j.p.experiments.getAndTrackAssignment(Xe.c.ChatInputRevamp),t.saveScrollRef=function(e){return t.scroll=e},t.saveLastLineRef=function(e){e&&(t.lastLine=Object(Ha.findDOMNode)(e))},t.handleScrollEvent=function(e){if(t.scroll&&t.scroll.scrollContent&&(e.which>0||"mousewheel"===e.type||"wheel"===e.type)){t.state.isPaused&&(t.clearHoverResumeTimer(),t.setKeyboardResumeLock(!1),t.setLoadMoreEnabled(!0));var n=t.scroll.scrollContent.scrollHeight-t.scroll.scrollContent.scrollTop-t.scroll.scrollContent.offsetHeight;n<=$a&&!t.state.isAutoScrolling&&!t.props.hasNewerLeft?t.resume():t.state.isAutoScrolling&&n>$a&&t.pause()}},t.handleResize=function(){t.state.isAutoScrolling&&t.scrollToBottom()},t.loadNewer=function(){return new Promise((function(e){t.setState({isLoadingMore:!0},(function(){t.props.loadNewer(),t.setState({isLoadingMore:!1},e)}))}))},t.hoverPause=function(){t.props.chatPauseSetting&&[L.H.MOUSEOVER,L.H.MOUSEOVER_ALTKEY].includes(t.props.chatPauseSetting)&&!t.props.isShowingCommunityHighlightList&&(t.state.isPaused||(t.pause(),t.setLoadMoreEnabled(!1),t.setHoverResumeTimer()))},t.hoverResume=function(){t.state.isPaused&&null!==t.state.hoverResumeTimer&&t.resume()},t.keyboardPause=function(){t.props.chatPauseSetting&&[L.H.ALTKEY,L.H.MOUSEOVER_ALTKEY].includes(t.props.chatPauseSetting)&&(t.state.isPaused||(t.pause(),t.setLoadMoreEnabled(!1),t.setKeyboardResumeLock(!0)))},t.keyboardResume=function(e){t.state.isPaused&&t.state.keyboardResumeLock&&(e.preventDefault(),t.resume(),t.setKeyboardResumeLock(!1))},t.pause=function(){t.props.chatPauseSetting&&t.props.setPaused&&t.setState({isPaused:!0},(function(){return t.props.setPaused&&t.props.setPaused(!0)})),t.setState({isAutoScrolling:!1})},t.resume=function(){t.props.loadNewest(),t.clearHoverResumeTimer(),t.setState({isAutoScrolling:!0,isPaused:!1},(function(){t.props.setPaused&&t.props.setPaused(!1),t.scrollToBottom()}))},t.setHoverResumeTimer=function(){null===t.state.hoverResumeTimer&&t.setState({hoverResumeTimer:setTimeout(t.resume,Ka)})},t.clearHoverResumeTimer=function(){t.state.hoverResumeTimer&&(clearTimeout(t.state.hoverResumeTimer),t.setState({hoverResumeTimer:null}))},t.setKeyboardResumeLock=function(e){t.state.keyboardResumeLock!==e&&t.setState({keyboardResumeLock:e})},t.setLoadMoreEnabled=function(e){t.state.loadMoreEnabled!==e&&t.setState({loadMoreEnabled:e})},t.scrollToBottom=function(){t.scroll&&t.scroll.scrollContent&&(t.scroll.scrollContent.scrollTop=t.scroll.scrollContent.scrollHeight)},t.scrollDelta=function(e){t.scroll&&t.scroll.scrollContent&&(t.scroll.scrollContent.scrollTop=t.scroll.scrollContent.scrollTop+e)},t.reportChatRenderSent=function(){t.props.chatRenderSentEvent&&t.props.latencyTracking.reportCustomEvent(t.props.chatRenderSentEvent)},t.mapMessageToChatLine=function(e,n,i){return o.createElement(za.a,{badgeSets:t.props.badgeSets,channelID:t.props.channelID,channelLogin:t.props.channelLogin,isCurrentUserModerator:t.props.isCurrentUserModerator,isCurrentUserStaff:t.props.isCurrentUserStaff,message:e,key:e.id,showAutoModActions:t.props.showAutoModActions,showModerationActions:t.props.showModerationActions,showModerationIcons:t.props.showModerationIcons,showTimestamps:t.props.showTimestamps,useHighContrastColors:t.props.useHighContrastColors,deletedMessageDisplay:t.props.deletedMessageDisplay,currentUserDisplayName:t.props.currentUserDisplayName,currentUserLogin:t.props.currentUserLogin,currentUserID:t.props.userID,confirmModerationAction:t.props.confirmModerationAction,forceUpdateMessage:t.shouldUpdateMessages,theme:t.props.theme,onRenderReportChatSent:t.reportChatRenderSent,messageIndex:n,ref:n===i.length-1?t.saveLastLineRef:void 0})},t.mapWatchPartyMessageToChatLine=function(e,n,i){return Qa.has(e.type)?o.createElement(za.a,{badgeSets:t.props.badgeSets,channelID:t.props.channelID,channelLogin:t.props.channelLogin,isCurrentUserModerator:t.props.isCurrentUserModerator,isCurrentUserStaff:t.props.isCurrentUserStaff,message:e,key:e.id,showAutoModActions:t.props.showAutoModActions,showModerationActions:t.props.showModerationActions,showModerationIcons:t.props.showModerationIcons,showTimestamps:t.props.showTimestamps,useHighContrastColors:t.props.useHighContrastColors,deletedMessageDisplay:t.props.deletedMessageDisplay,currentUserDisplayName:t.props.currentUserDisplayName,currentUserLogin:t.props.currentUserLogin,currentUserID:t.props.userID,confirmModerationAction:t.props.confirmModerationAction,forceUpdateMessage:t.shouldUpdateMessages,theme:t.props.theme,onRenderReportChatSent:t.reportChatRenderSent,messageIndex:n,ref:n===i.length-1?t.saveLastLineRef:void 0,hideBroadcasterTooltip:!0}):null},t}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){var e=this;Va.bindGlobal("alt",this.keyboardPause,"keydown"),Va.bindGlobal("alt",this.keyboardResume,"keyup"),Ya.forEach((function(t){e.scroll&&e.scroll.scrollContent&&e.scroll.scrollContent.addEventListener(t,e.handleScrollEvent,{passive:!0})}))},t.prototype.componentWillUnmount=function(){var e=this;Va.unbind("alt","keydown"),Va.unbind("alt","keyup"),Ya.forEach((function(t){e.scroll&&e.scroll.scrollContent&&e.scroll.scrollContent.removeEventListener(t,e.handleScrollEvent)}))},t.prototype.getSnapshotBeforeUpdate=function(){return!this.state.isAutoScrolling&&this.lastLine&&{lastLine:this.lastLine,offsetTop:this.lastLine.offsetTop}||null},t.prototype.componentDidUpdate=function(e,t,n){this.shouldUpdateMessages=!1,this.props.messages!==e.messages&&(this.state.isAutoScrolling?this.scrollToBottom():n&&this.scrollDelta(n.lastLine.offsetTop-n.offsetTop))},t.prototype.render=function(){var e=this.props.messages,t=this.props.isCommerceDisabled?e.map(this.mapWatchPartyMessageToChatLine).filter((function(e){return null!==e})):e.map(this.mapMessageToChatLine);return o.createElement(En.g,{className:"chat-list",display:En.d.Flex,flexDirection:En.e.Column,flexWrap:En.f.NoWrap,overflow:En.i.Hidden,flexGrow:1},o.createElement("div",{ref:this.props.containerRef,onMouseEnter:this.hoverPause,onMouseLeave:this.hoverResume},o.createElement(qa.a,{onResize:this.handleResize}),o.createElement(En.g,{flexGrow:1},o.createElement(Ga.b,{className:"chat-list__lines",scrollRef:this.saveScrollRef,"data-a-target":"chat-scroller"},o.createElement(En.g,{className:"chat-list__list-container",flexGrow:1,fullHeight:!0,padding:{bottom:1}},o.createElement("div",{role:"log"},t,o.createElement(Ga.a,{forceLoadMoreContent:this.props.hasNewerLeft,loadMore:this.loadNewer,pixelThreshold:400,orientation:Wa.b.Up,enabled:this.props.hasNewerLeft&&this.state.loadMoreEnabled,requestCap:2}))))),o.createElement(wn.a,{className:"chat-list__list-footer-placeholder",position:En.j.Relative,display:En.d.Flex,justifyContent:En.h.Center,margin:{x:2}},this.listFooter())))},t.prototype.listFooter=function(){var e=null;if(this.state.isPaused)e=this.state.hoverResumeTimer?Object(j.d)("Chat paused due to mouseover.","ChatList"):this.state.keyboardResumeLock?Object(j.d)("Chat paused with the alt key.","ChatList"):Object(j.d)("Chat paused due to scroll.","ChatList");else{if(this.state.isAutoScrolling)return null;e=Object(j.d)("More messages below.","ChatList")}return o.createElement(En.g,{display:En.d.Flex,justifyContent:En.h.Center,alignItems:En.b.Center,position:En.j.Absolute,padding:this.inChatInputRevampExperiment?{x:2,y:.5}:.5,margin:this.inChatInputRevampExperiment?{bottom:1}:0,attachBottom:!0,fullWidth:!this.inChatInputRevampExperiment},o.createElement(Cn.a,{className:"chat-list__list-footer",borderRadius:On.b.Medium,"data-a-target":"chat-list-footer"},o.createElement("div",{onClick:this.resume},e)))},t}(o.Component),Ja=Object(_.withLatencyTracking)("ChatListPresentation",{autoReportInteractive:!0})(Xa),Za=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={messages:[]},t.onBufferUpdate=function(){t.syncBufferHandle||(t.syncBufferHandle=setTimeout(t.syncBufferedMessages,0))},t.syncBufferedMessages=function(){t.props.messageBufferAPI&&t.setState({messages:t.props.messageBufferAPI.getMessages()}),t.clearBufferHandle()},t.clearBufferHandle=function(){t.syncBufferHandle&&(clearTimeout(t.syncBufferHandle),t.syncBufferHandle=0)},t.hasNewerLeft=function(){return t.props.messageBufferAPI&&t.props.messageBufferAPI.hasNewerLeft&&t.props.messageBufferAPI.hasNewerLeft()||!1},t.isPaused=function(){return t.props.messageBufferAPI&&t.props.messageBufferAPI.isPaused&&t.props.messageBufferAPI.isPaused()||!1},t.setPaused=function(e){t.props.messageBufferAPI&&t.props.messageBufferAPI.setPaused&&t.props.messageBufferAPI.setPaused(e)},t.loadNewer=function(){t.props.messageBufferAPI&&t.props.messageBufferAPI.loadNewer&&t.props.messageBufferAPI.loadNewer()},t.loadNewest=function(){t.props.messageBufferAPI&&t.props.messageBufferAPI.loadNewest&&t.props.messageBufferAPI.loadNewest()},t}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.messageBufferAPI&&(this.props.messageBufferAPI.addUpdateHandler(this.onBufferUpdate),this.setState({messages:this.props.messageBufferAPI.getMessages()}))},t.prototype.componentDidUpdate=function(e){var t,n,i,a=this.props.pubsub.messages,r=a.chatRichEmbedInfo,o=a.extensionMessage;r&&e.pubsub.messages.chatRichEmbedInfo!==r&&j.p.apollo.client.writeQuery({query:Ua,variables:{slug:r.data.twitch_metadata.clip_metadata.slug},data:(t=r,n=t.data.twitch_metadata.clip_metadata,{clip:n.id?{__typename:"Clip",slug:n.slug,id:n.id,url:t.data.request_url,title:t.data.title,thumbnailURL:t.data.thumbnail_url,curator:n.curator_id?{displayName:t.data.author_name,id:n.curator_id,__typename:"User"}:null,broadcaster:n.channel_display_name?{displayName:n.channel_display_name,id:n.broadcaster_id,__typename:"User"}:null}:null})}),e.messageBufferAPI!==this.props.messageBufferAPI&&(e.messageBufferAPI&&e.messageBufferAPI.removeUpdateHandler(this.onBufferUpdate),this.props.messageBufferAPI&&(this.props.messageBufferAPI.addUpdateHandler(this.onBufferUpdate),this.setState({messages:this.props.messageBufferAPI.getMessages()}))),o&&e.pubsub.messages.extensionMessage!==o&&e.onPushMessage((i=o.data,{type:Ge.b.ExtensionMessage,id:i.id,sentAt:i.sent_at,extension:{clientID:i.sender.extension_client_id,version:i.sender.extension_version,displayName:i.sender.display_name,displayBadges:Object(xa.b)(i.sender.badges),chatColor:i.sender.chat_color},content:{text:i.content.text,fragments:Object(xa.c)(i.content.fragments)}}))},t.prototype.componentWillUnmount=function(){this.props.messageBufferAPI&&this.props.messageBufferAPI.removeUpdateHandler(this.onBufferUpdate),this.clearBufferHandle()},t.prototype.render=function(){return o.createElement(Ja,{badgeSets:this.props.badgeSets,channelID:this.props.channelID,channelLogin:this.props.channelLogin,chatPauseSetting:this.props.chatPauseSetting,chatRenderSentEvent:this.props.chatRenderSentEvent,confirmModerationAction:this.props.confirmModerationAction,containerRef:this.props.containerRef,currentUserDisplayName:this.props.currentUserDisplayName,currentUserLogin:this.props.currentUserLogin,deletedMessageDisplay:this.props.deletedMessageDisplay,hasNewerLeft:this.hasNewerLeft(),isCommerceDisabled:this.props.isCommerceDisabled,isCurrentUserModerator:this.props.isCurrentUserModerator,isCurrentUserStaff:this.props.isCurrentUserStaff,isEmbedded:this.props.isEmbedded,loadNewer:this.loadNewer,loadNewest:this.loadNewest,messages:this.state.messages,onPushMessage:this.props.onPushMessage,paused:this.isPaused(),setChatPauseSetting:this.props.setChatPauseSetting,setPaused:this.props.messageBufferAPI&&this.props.messageBufferAPI.setPaused&&this.setPaused,showAutoModActions:this.props.showAutoModActions,showModerationActions:this.props.showModerationActions,showModerationIcons:this.props.showModerationIcons,showTimestamps:this.props.showTimestamps,theme:this.props.theme,useHighContrastColors:this.props.useHighContrastColors,isShowingCommunityHighlightList:this.props.isShowingCommunityHighlightList,userID:this.props.userID})},t}(o.Component);var er=Object(l.d)(Object(s.b)((function(e){return{chatRenderSentEvent:Object(Ba.a)(e),showAutoModActions:e.chat.showAutoModActions,showModerationActions:e.chat.showModerationActions,showModerationIcons:e.chat.showModIcons,showTimestamps:e.chat.showTimestamps}})),Object(d.a)([{skip:function(e){return!e.channelID},topic:function(e){return e.channelID?Object(p.N)(e.channelID):""},mapMessageTypesToProps:(Aa={},Aa[m.PubsubMessageType.StreamChatRoomChatRichEmbed]="chatRichEmbedInfo",Aa[m.PubsubMessageType.StreamChatRoomExtensionMessage]="extensionMessage",Aa)}]),Y,Object(He.b)((function(e){return{useHighContrastColors:e.value}})),Object(Ve.d)((function(e){return{deletedMessageDisplay:e.value}})),Object(Ae.d)(Ae.c),Object(I.withWatchPartyContext)(I.mapWatchPartyStateToChatProps),Object(Fe.d)((function(e){return{isShowingCommunityHighlightList:e.listAllView}})))(Za),tr=(n("9Rmp"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickConfirm=function(){t.markRoomSeen(),j.o.track(et.SpadeEventType.ChatRulesAccepted,{channel_id:t.props.channelID,channel_login:t.props.channelLogin}),t.props.onCloseChatRules()},t}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){j.o.track(et.SpadeEventType.ChatRulesViewed,{channel_login:this.props.channelLogin,channel_id:this.props.channelID})},t.prototype.render=function(){return o.createElement(wn.a,{className:"chat-rules",position:En.j.Relative},o.createElement(Cn.a,{border:!0,background:On.a.Base,margin:{bottom:1}},o.createElement(wn.a,{padding:1},o.createElement(wn.a,{margin:{bottom:1}},o.createElement(Jt.a,{type:Jt.e.H6},Object(j.d)("Chat Rules:","ChatRules"))),o.createElement(wn.a,null,o.createElement("ul",null,this.props.chatRules.map((function(e,t){return o.createElement("li",{key:t},e)})))),o.createElement(wn.a,{margin:{top:1},display:En.d.Flex,justifyContent:En.h.Center},o.createElement(Dn.a,{size:Dn.b.Small,onClick:this.onClickConfirm},Object(j.d)("Ok, got it!","ChatRules"))))))},t.prototype.markRoomSeen=function(){var e=j.m.get("chat_rules_shown",{});e[this.props.channelLogin]=!0,j.m.set("chat_rules_shown",e)},t}(o.Component)),nr=n("8in3"),ir=n("bjUr"),ar=n("j+2s"),rr=(n("kPCN"),"chat_rules_shown"),or=j.k.withCategory("chat-room"),sr=P.a.wrap((function(){return Promise.all([n.e(0),n.e(62)]).then(n.bind(null,"A39y"))}),"ChatViewers"),lr=P.a.wrap((function(){return n.e(66).then(n.bind(null,"Y9qK"))}),"NewChatterRitual",{failSilently:!0,placeholder:null}),cr=P.a.wrap((function(){return Promise.all([n.e(0),n.e(56)]).then(n.bind(null,"DlC9"))}),"CommunityHighlightStackManager",{placeholder:null}),dr=function(e){function t(t){var n=e.call(this,t)||this;n.hasAcceptedModerationConfirmation=!1,n.inChatInputRevampExperiment=!1,n.closeViewersList=function(){n.props.closeChatViewerList()},n.showViewersList=function(){n.props.closeRoomPicker&&n.props.closeRoomPicker(),n.props.showChatViewerList()},n.confirmModerationAction=function(){return!(n.props.isEmbedded&&!n.hasAcceptedModerationConfirmation)||(n.hasAcceptedModerationConfirmation=window.confirm(Object(j.d)("Do you want to enable the ability to timeout and ban on embedded version of Twitch Chat? This setting will persist until you refresh the page.","ChatRoom")),n.hasAcceptedModerationConfirmation)},n.onChatInputFocus=function(){var e=j.m.get(rr,{});n.props.chatRules&&n.props.chatRules.length>0&&!e[n.props.channelLogin]&&(n.onShowChatRules(),n.inChatInputRevampExperiment&&n.props.showChatRules())},n.onShowChatRules=function(){n.props.authToken&&n.props.onShowChatRules()},n.setChatListElement=function(e){n.setState({chatListElement:e})},n.shouldHideChatInput=function(){return n.props.chatView===ir.a.ViewerList},n.openRaidUpsellFromHost=function(e){return n.closeRaidUpsell((function(){n.setState({raidUpsellTarget:e})}))},n.closeRaidUpsell=function(e){return n.setState({raidUpsellTarget:null},(function(){e&&e()}))},n.onSendCheerError=function(e,t){switch(t.code){case L.Gc.AUTO_MOD_MESSAGE:n.setState({moderatedReason:Ci.AUTOMOD,forceSendCheer:!1,moderatedMessageParts:Object(xa.g)(t.messageContent.fragments,!1)});break;case L.Gc.INVALID_ANONYMOUS_MESSAGE:n.setState({moderatedReason:Ci.ANONYMOUS_CHEERING,forceSendCheer:!1,anonymousCheerMessageParts:Object(xa.g)(t.messageContent.fragments,!1,n.props.currentUserLogin,n.props.bitsConfig),moderatedMessageParts:[Object(vn.a)(e)]});break;default:n.setState({bitsSendErrorCode:t.code,bitsSendHasError:!0}),n.clearCheerErrorPrompts()}},n.clearBitsSendError=function(){n.setState({bitsSendErrorCode:L.Gc.UNKNOWN,bitsSendHasError:!1})},n.clearCheerErrorPrompts=function(){n.setState({forceSendCheer:!1,moderatedReason:null,moderatedMessageParts:null,anonymousCheerMessageParts:null})},n.onBitsAutoModCheerAnyway=function(){n.setState({moderatedReason:null,forceSendCheer:!0})},n.onInvalidAnonymousCheerPromptCheerAnyway=function(){n.setState({moderatedReason:null,forceSendCheer:!0})};var i=new bn.c([],[],n.props.channelLogin);return n.state={raidUpsellTarget:null,badgeSets:i,forceSendCheer:!1,bitsSendErrorCode:L.Gc.UNKNOWN,bitsSendHasError:!1,moderatedMessageParts:null,anonymousCheerMessageParts:null},n.inChatInputRevampExperiment="variant1"===j.p.experiments.getAndTrackAssignment(Xe.c.ChatInputRevamp),n}return Object(a.__extends)(t,e),t.getDerivedStateFromProps=function(e){var t={};if(e.data&&e.data.badges&&e.data.user&&e.data.user.broadcastBadges&&(t.badgeSets=new bn.c(e.data.badges,e.data.user.broadcastBadges,e.channelLogin)),e.data&&e.data.user&&e.data.user.self&&!e.data.user.squadStream&&e.data.user.self.displayBadges){var n={};e.data.user.self.displayBadges.forEach((function(e){e&&(n[e.setID]=e.version)})),j.p.tmi.client.updateChannelBadges(e.channelLogin,n,e.userBadgeDynamicData||{})}return Object.keys(t).length>0?t:null},t.prototype.componentDidUpdate=function(e){this.props.channelLogin!==e.channelLogin&&this.props.onCloseChatRules()},t.prototype.componentWillUnmount=function(){this.props.onCloseChatRules()},t.prototype.render=function(){if(this.props.isBackground)return null;if(this.props.isHidden&&!this.props.isPopout)return o.createElement(Cn.a,{alignItems:En.b.Center,borderLeft:!0,display:En.d.Flex,flexDirection:En.e.Column,fullHeight:!0,fullWidth:!0,justifyContent:En.h.Center,color:On.c.Base,position:En.j.Relative},o.createElement(wn.a,{margin:{bottom:1}},o.createElement(Jt.a,{fontSize:On.d.Size5},Object(j.d)("Chat is hidden.","ChatRoom"))),o.createElement(Dn.a,{onClick:this.props.onChatUnhide,"data-a-target":"show-chat-button","data-test-selector":"show-chat-button"},Object(j.d)("Show Chat","ChatRoom")));var e=this.props.bitsEnabled&&this.props.firstPageLoaded&&this.props.channelID&&o.createElement(Fn,{channelID:this.props.channelID,currentUserDisplayName:this.props.currentUserDisplayName,currentUserLogin:this.props.currentUserLogin,userID:this.props.userID}),t=this.props.chatView===ir.a.ViewerList&&o.createElement(Cn.a,{attachBottom:!0,attachLeft:!0,attachRight:!0,attachTop:!0,background:On.a.Alt2,position:En.j.Absolute,zIndex:En.o.Above},o.createElement(wn.a,{padding:{y:1}},o.createElement(wn.a,{position:En.j.Absolute,attachLeft:!0,margin:{left:1}},o.createElement(ai.a,{icon:jn.a.Close,ariaLabel:Object(j.d)("Close","ChatRoom"),onClick:this.closeViewersList,"data-test-selector":"close-viewer-list"}))),o.createElement(sr,{channelLogin:this.props.channelLogin,channelID:this.props.channelID,closeViewersList:this.closeViewersList,isCurrentUserBanned:this.props.currentUserBannedStatusData&&this.props.currentUserBannedStatusData.channel&&this.props.currentUserBannedStatusData.channel.self&&this.props.currentUserBannedStatusData.channel.self.banStatus&&this.props.currentUserBannedStatusData.channel.self.banStatus.isPermanent||!1,"data-test-selector":"chat-viewers"})),n=!!this.props.authToken&&!this.props.isEmbedded,i=null;this.props.isChatRulesOpen&&this.props.chatRules&&this.props.chatRules.length&&!this.inChatInputRevampExperiment&&(i=o.createElement(wn.a,{padding:{x:2}},o.createElement(tr,{chatRules:this.props.chatRules,channelLogin:this.props.channelLogin,channelID:this.props.channelID,onCloseChatRules:this.props.onCloseChatRules})));var a=fn({"chat-room":!0,"chat-room__base-background":!!this.props.useBaseBackground});return o.createElement(En.g,{"data-test-selector":"chat-room-component-layout","data-a-target":this.props.theme===X.a.Dark?"chat-theme-dark":"chat-theme-light",flexShrink:1,flexGrow:1,display:En.d.Flex,flexDirection:En.e.Column,fullWidth:!0},o.createElement("section",{"data-test-selector":"chat-room-section",className:a,role:"complementary","aria-labelledby":"chat-room-header-label"},this.props.isShowingCommunityHighlightList&&o.createElement(En.g,{position:En.j.Absolute,zIndex:En.o.Above,className:"chat-room__overlay",fullHeight:!0,fullWidth:!0},o.createElement("div",{onClick:this.props.closeCommunityHighlightList})),o.createElement(Cn.a,{display:En.d.Flex,flexDirection:En.e.Column,flexWrap:En.f.NoWrap,position:En.j.Relative,flexGrow:1,fullHeight:!0,color:On.c.Base,className:"chat-room__content"},this.props.chatRoomHeader,e,this.props.channelID&&this.props.firstPageLoaded&&o.createElement(cr,{key:this.props.channelID,channelID:this.props.channelID,channelLogin:this.props.channelLogin}),o.createElement(er,{badgeSets:this.state.badgeSets,channelID:this.props.channelID,channelLogin:this.props.channelLogin,containerRef:this.setChatListElement,confirmModerationAction:this.confirmModerationAction,currentUserDisplayName:this.props.currentUserDisplayName,currentUserLogin:this.props.currentUserLogin,isEmbedded:this.props.isEmbedded,isCurrentUserModerator:this.props.isCurrentUserModerator,isCurrentUserStaff:this.props.isStaff,onPushMessage:this.props.onPushMessage,theme:this.props.theme,userID:this.props.userID}),o.createElement(wn.a,{className:"chat-room__notifications",position:En.j.Absolute,zIndex:En.o.Above,fullWidth:!0},this.props.children),i,t,this.state.raidUpsellTarget&&o.createElement(xe.a,null,o.createElement(Ri,{send:this.props.onSendMessage,targetChannelLogin:this.state.raidUpsellTarget,sourceChannelLogin:this.props.channelLogin,closeRaidUpsell:this.closeRaidUpsell})),this.props.firstPageLoaded&&this.props.channelID&&o.createElement(lr,{channelID:this.props.channelID,channelLogin:this.props.channelLogin,isEmbedded:this.props.isEmbedded,isHostMode:this.props.isHostMode,isPopout:this.props.isPopout,onPushMessage:this.props.onPushMessage,onSendMessage:this.props.onSendMessage}),this.state.moderatedReason===Ci.AUTOMOD&&o.createElement(Tn,{badgeSets:this.state.badgeSets,onEditCheer:this.clearCheerErrorPrompts,onCheerAnyway:this.onBitsAutoModCheerAnyway}),this.state.moderatedReason===Ci.ANONYMOUS_CHEERING&&o.createElement(Nn,{messageParts:this.state.anonymousCheerMessageParts||[],badgeSets:this.state.badgeSets,onEditCheer:this.clearCheerErrorPrompts,onCheerAnyway:this.onInvalidAnonymousCheerPromptCheerAnyway}),o.createElement(Fa,{authToken:this.props.authToken,enableBitsInput:n,channelDisplayName:this.props.channelDisplayName,channelID:this.props.channelID,chatRules:this.props.chatRules,channelLogin:this.props.channelLogin,commandPermissionLevel:this.props.commandPermissionLevel,emotes:this.props.emotes,emoteMap:this.props.emoteMap,firstPageLoaded:this.props.firstPageLoaded,hidden:this.shouldHideChatInput(),isCurrentUserModerator:this.props.isCurrentUserModerator,isCurrentUserVIP:this.props.isCurrentUserVIP,isEmbedded:this.props.isEmbedded,isHostMode:this.props.isHostMode,isPopout:this.props.isPopout,isStaff:this.props.isStaff,onChatCommand:this.props.onSendMessage,onShowChatRules:this.props.authToken&&this.props.chatRules&&this.props.chatRules.length?this.onShowChatRules:void 0,badgeSets:this.state.badgeSets,userBadges:this.props.userBadges,showViewersList:this.showViewersList,onSendMessage:this.props.onSendMessage,onPushMessage:this.props.onPushMessage,onInputFocus:this.onChatInputFocus,containerElement:this.state.chatListElement,openRaidUpsellFromHost:this.openRaidUpsellFromHost,onSendCheerError:this.onSendCheerError,onSendCheerSuccess:this.clearCheerErrorPrompts,isTextInputDisabled:!!this.state.moderatedReason,forceSendCheer:this.state.forceSendCheer,moderatedReason:this.state.moderatedReason,moderatedMessageParts:this.state.moderatedMessageParts,bitsSendErrorCode:this.state.bitsSendErrorCode,bitsSendHasError:this.state.bitsSendHasError,clearBitsSendError:this.clearBitsSendError}),o.createElement(wn.a,{className:"chat-room__viewer-card",fullHeight:!0,fullWidth:!0,position:En.j.Absolute,"data-a-target":"chat-user-card"},o.createElement(nr.a,{isPopout:this.props.isPopout,isEmbedded:this.props.isEmbedded,confirmModerationAction:this.confirmModerationAction,onSendMessage:this.props.onSendMessage,channelID:this.props.channelID,channelLogin:this.props.channelLogin,isModerator:!!this.props.isCurrentUserModerator&&this.props.isCurrentUserModerator,isOwner:this.props.isOwnChannel})))))},t}(o.Component);var ur=Object(l.d)(Object(c.a)(ar,{name:"data",skip:function(e){return!e.firstPageLoaded},options:function(e){return{variables:{channelLogin:e.channelLogin}}}}),Object(D.b)((function(e){return{chatView:e.chatView,showChatViewerList:e.showChatViewerList,closeChatViewerList:e.closeChatViewerList,isShowingChatRules:e.isShowingChatRules,showChatRules:e.showChatRules,closeChatRules:e.closeChatRules}})),Object(c.a)(N,{name:"currentUserBannedStatusData",options:function(e){return{variables:{channelLogin:e.channelLogin}}},skip:function(e){return!e.channelLogin||!e.firstPageLoaded}}),Object(u.a)((function(e){return{query:ar,variables:{channelLogin:e.channelLogin},topic:Object(p.R)(e.userID),type:m.PubsubMessageType.UserBitsBadgeUpdate,skip:!e.firstPageLoaded||!e.userID,mutator:function(t,n){if(or.debug("Received bits-user-update-v1 pubsub update",{data:n,event:t}),!n.badges||t.message_type===Un.b.Balance||null===t.data.newest_version||t.data.channel_id!==e.channelID)return n;var i=n.badges.find((function(e){return!!e&&e.setID===t.data.set_id&&e.version===t.data.newest_version}));return i&&n.user&&n.user.self&&n.user.self.displayBadges?r(n,(function(e){return e.user.self}),(function(e){var t=e.displayBadges.map((function(e){return e&&e.setID===i.setID&&e.version!==i.version?Object(a.__assign)({},i):e})),n=e.selectedBadge;return(!e.selectedBadge||i.setID===Un.a.Bits&&e.selectedBadge.setID===Un.a.Bits)&&(n=Object(a.__assign)({},i)),e.selectedBadge&&(i.setID!==Un.a.Leaderboard||e.selectedBadge.setID!==Un.a.Bits&&e.selectedBadge.setID!==Un.a.Leaderboard)||(n=Object(a.__assign)({},i)),Object(a.__assign)(Object(a.__assign)({},e),{displayBadges:t,selectedBadge:n})})):n}}})),gn.j,Object(f.b)((function(e){return{bitsConfig:e.bitsConfig,bitsEnabled:e.bitsEnabled}})),Object(Fe.d)((function(e){return{isShowingCommunityHighlightList:e.listAllView}})),Object(Fe.e)((function(e){return{closeCommunityHighlightList:function(){return e(Object(xn.b)())}}})))(dr),mr="(?:\\W|^)",pr="(?:$|\\W)",hr="PowerUpL DarkMode PowerUpR",fr={failSilently:!0,placeholder:null},gr=P.a.wrap((function(){return n.e(61).then(n.bind(null,"q7q0"))}),"BountyBoardNotification",fr),vr=P.a.wrap((function(){return n.e(65).then(n.bind(null,"KSjr"))}),"NativeBroadcastNotification",fr),br=P.a.wrap((function(){return n.e(67).then(n.bind(null,"T3fw"))}),"Orbis",fr),kr=P.a.wrap((function(){return n.e(68).then(n.bind(null,"rg60"))}),"RitualsOnboardingSticky",fr),yr=P.a.wrap((function(){return n.e(60).then(n.bind(null,"miqE"))}),"ShareToChat",fr),Sr=function(e){function t(t){var n=e.call(this,t)||this;return n.state={hasReceivedInitialRoomState:!1,hostedChannelLogin:null,prevPropsChannelLogin:n.props.channelLogin,userBadges:null,userBadgeDynamicData:null},n.renderNotifications=function(){var e=[];return n.props.firstPageLoaded&&n.props.channelID&&e.push(o.createElement(gr,{key:"bounty-board-notification",channelID:n.props.channelID})),e},n.sendMessage=function(e){if(!e||0===e.length||!n.props.authToken)return!1;if(!n.props.chatConnectionAPI)return!1;var t=n.props.chatConnectionAPI.sendMessage(e);return(!t||!t.preserveInput)&&(n.parseOutgoingMessage(e),!0)},n.pushMessage=function(e){n.props.messageHandlerAPI&&n.props.messageHandlerAPI.handleMessage(e)},n.onChatEvent=function(e){switch(e.type){case Ge.b.Hosting:n.hostingHandler(e.hostedChannel);break;case Ge.b.Unhost:n.hostingHandler(null);break;case Ge.b.RoomState:n.onRoomStateUpdated(e.state);break;case Ge.b.BadgesUpdated:n.onBadgesUpdated(e)}},n.hostingHandler=function(e){n.setState({hostedChannelLogin:e}),n.props.onHostingChange&&n.props.onHostingChange(e)},n.createOutgoingTokenMatchers=function(e){n.outgoingTokenMatchers=e.map((function(e){return{token:e,regex:new RegExp(""+mr+e+pr)}}))},n.parseOutgoingMessage=function(e){n.outgoingTokenMatchers.forEach((function(t){t.regex.test(e)&&n.onOutgoingTokenMatch(t.token,e)}))},n.onOutgoingTokenMatch=function(e,t){switch(e){case hr:var i=n.props.theme===X.a.Light?X.a.Dark:X.a.Light;n.props.onThemeChange(i);break;default:return}},n.onBadgesUpdated=function(e){n.setState({userBadges:e.badges,userBadgeDynamicData:e.badgeDynamicData||null})},n.onRoomStateUpdated=function(e){n.props.onRoomStateUpdate(e),n.setState({hasReceivedInitialRoomState:!0})},n.determineCommandPermissionLevel=function(){return n.props.userLogin&&n.props.userLogin===n.props.channelLogin?ae.b.Broadcaster:n.props.isCurrentUserModerator?ae.b.Moderator:n.props.isCurrentUserVIP?ae.b.Vip:ae.b.Viewer},n.createOutgoingTokenMatchers([hr]),n}return Object(a.__extends)(t,e),t.getDerivedStateFromProps=function(e,t){return e.channelLogin!==t.prevPropsChannelLogin?{prevPropsChannelLogin:e.channelLogin,hostedChannelLogin:null}:null},t.prototype.componentDidMount=function(){this.props.messageHandlerAPI&&this.props.messageHandlerAPI.addMessageHandler(this.onChatEvent)},t.prototype.componentWillUnmount=function(){this.props.messageHandlerAPI&&this.props.messageHandlerAPI.removeMessageHandler(this.onChatEvent)},t.prototype.componentDidUpdate=function(e){var t,n;this.state.hasReceivedInitialRoomState&&(e.followerModeDuration===this.props.followerModeDuration&&e.followerModeEnabled===this.props.followerModeEnabled||this.pushMessage((t=this.props.followerModeEnabled,n=this.props.followerModeDuration,{type:Ge.b.FollowerOnlyMode,id:Object(We.a)("follower-only"),enabled:t,length:n})),e.slowModeEnabled===this.props.slowModeEnabled&&e.slowModeDuration===this.props.slowModeDuration||this.pushMessage(function(e,t){return{type:Ge.b.SlowMode,id:Object(We.a)("slowmode"),enabled:e,length:t}}(this.props.slowModeEnabled,this.props.slowModeDuration))),e.messageHandlerAPI!==this.props.messageHandlerAPI&&(e.messageHandlerAPI&&e.messageHandlerAPI.removeMessageHandler(this.onChatEvent),this.props.messageHandlerAPI&&this.props.messageHandlerAPI.addMessageHandler(this.onChatEvent))},t.prototype.render=function(){var e,t=this.props.emoteSetsData&&this.props.emoteSetsData.emoteSets||[],n=this.props.isHidden||!this.props.rightColumnExpanded&&!this.props.inlineRightColumnExpanded,i=!(!this.props.isEmbedded&&!this.props.isPopout&&n&&!this.props.shouldConnectChat),a=this.determineCommandPermissionLevel();return this.props.firstPageLoaded&&(e=o.createElement(br,{channelLogin:this.props.channelLogin,sendMessage:this.sendMessage})),o.createElement(o.Fragment,null,o.createElement(ur,{authToken:this.props.authToken,channelDisplayName:this.props.channelDisplayName,channelID:this.props.channelID,channelLogin:this.props.channelLogin,chatRoomHeader:e,chatRules:this.props.chatRules,closeRoomPicker:this.props.closeRoomPicker,commandPermissionLevel:a,currentUserDisplayName:this.props.userDisplayName,currentUserLogin:this.props.userLogin,emotes:t,emoteMap:this.props.emoteSetsData&&this.props.emoteSetsData.emoteMap||{},firstPageLoaded:this.props.firstPageLoaded,hostedChannelLogin:this.state.hostedChannelLogin,isBackground:this.props.isBackground,isChatRulesOpen:this.props.isChatRulesOpen,isCurrentUserModerator:this.props.isCurrentUserModerator,isCurrentUserVIP:this.props.isCurrentUserVIP,isEmbedded:this.props.isEmbedded,isHidden:this.props.isHidden,isHostMode:!!this.state.hostedChannelLogin,isOwnChannel:this.isOwnChannel,isPopout:this.props.isPopout,isStaff:this.props.isStaff,onChatUnhide:this.props.onChatUnhide,onCloseChatRules:this.props.onCloseChatRules,onPushMessage:this.pushMessage,onSendMessage:this.sendMessage,onShowChatRules:this.props.onShowChatRules,theme:this.props.theme,userBadges:this.state.userBadges,userBadgeDynamicData:this.state.userBadgeDynamicData,userID:this.props.userID,useBaseBackground:this.props.useBaseBackground},this.props.firstPageLoaded&&this.props.authToken&&!this.props.isEmbedded&&o.createElement(yr,{authToken:this.props.authToken,channelDisplayName:this.props.channelDisplayName,channelLogin:this.props.channelLogin,channelID:this.props.channelID,"data-test-selector":"share-to-chat"}),this.renderNotifications(),this.props.firstPageLoaded&&!this.props.isEmbedded&&!this.props.isPopout&&o.createElement(vr,{key:this.props.channelLogin.toLowerCase(),channelLogin:this.props.channelLogin}),this.props.firstPageLoaded&&!this.props.isEmbedded&&!this.props.isPopout&&this.props.channelID&&o.createElement(xe.a,null,o.createElement(kr,{channelID:this.props.channelID,channelLogin:this.props.channelLogin}))),this.renderCommandHandlers(),o.createElement($e,{channelDisplayName:this.props.channelDisplayName,channelLogin:this.props.channelLogin}),o.createElement(Dt,{channelLogin:this.props.channelLogin}),o.createElement(gt,{channelID:this.props.channelID,channelLogin:this.props.channelLogin,commandPermissionLevel:a,emoteSets:this.props.emoteSetsData&&this.props.emoteSetsData.emoteSets||[],isCurrentUserModerator:this.props.isCurrentUserModerator,isHostMode:!!this.state.hostedChannelLogin,shouldConnect:i,userID:this.props.userID}),o.createElement(Ft,{channelLogin:this.props.channelLogin,shouldSeeBlockedAndDeletedMessages:this.props.shouldSeeBlockedAndDeletedMessages,isBackground:!!this.props.isBackground,isCurrentUserModerator:this.props.isCurrentUserModerator,unhideIgnoredUsers:this.props.unhideIgnoredUsers}),o.createElement(xt,null),o.createElement(Bt,{channelID:this.props.channelID}))},t.prototype.renderCommandHandlers=function(){if(this.props.isBackground)return null;var e=this.props.emoteSetsData&&this.props.emoteSetsData.emoteMap||{},t=this.props,n=t.channelID,i=t.isPopout,a=t.userLogin;return o.createElement(o.Fragment,null,o.createElement(te.a,{channelLogin:this.props.channelLogin,channelID:this.props.channelID,suppressLocalSuccessMessage:!0}),o.createElement(ne.a,{channelLogin:this.props.channelLogin,isPopout:i}),o.createElement(re,{channelLogin:this.props.channelLogin}),o.createElement(oe.a,{channelLogin:this.props.channelLogin}),o.createElement(se,{channelLogin:this.props.channelLogin,isPartner:this.props.isPartner}),o.createElement(le.a,{channelLogin:this.props.channelLogin}),o.createElement(ce,{channelLogin:this.props.channelLogin}),o.createElement(de.a,{channelLogin:this.props.channelLogin,permissionLevel:this.determineCommandPermissionLevel()}),o.createElement(ue,{channelLogin:this.props.channelLogin}),o.createElement(me.a,{currentUserLogin:a,channelLogin:this.props.channelLogin}),o.createElement(pe.a,{channelLogin:this.props.channelLogin}),o.createElement(he.a,{channelID:n,channelLogin:this.props.channelLogin}),o.createElement(ge,{channelLogin:this.props.channelLogin}),o.createElement(Se,{channelID:n,channelLogin:this.props.channelLogin}),this.props.chatRules&&!!this.props.chatRules.length&&o.createElement(Oe,{channelLogin:this.props.channelLogin}),o.createElement(De.a,{channelLogin:this.props.channelLogin}),o.createElement(Ne,{channelLogin:this.props.channelLogin}),o.createElement(_e,{channelLogin:this.props.channelLogin,sendMessage:this.sendMessage}),o.createElement(Ie.a,{channelLogin:this.props.channelLogin,userLogin:a,userID:this.props.userID,isEmbedded:this.props.isEmbedded,isPopout:i}),o.createElement(Le,{channelID:n,channelLogin:this.props.channelLogin}),o.createElement(Re.a,{channelLogin:this.props.channelLogin,isEmbedded:this.props.isEmbedded,isPopout:i,userLogin:a,userID:this.props.userID,emoteMap:e}),o.createElement(pn.a,{channelLogin:this.props.channelLogin},o.createElement(fe.a,{channelLogin:this.props.channelLogin,channelID:this.props.channelID,userID:this.props.userID})))},Object.defineProperty(t.prototype,"isOwnChannel",{get:function(){return this.props.userID===this.props.channelID},enumerable:!0,configurable:!0}),t}(o.Component);var Cr=Object(Be.b)((function(e){return{followerModeDuration:e.followerDuration,followerModeEnabled:e.followerMode,slowModeDuration:e.slowModeDuration,slowModeEnabled:e.slowMode,onRoomStateUpdate:function(t){return e.updateRoomState(t)}}}))(Sr),Er=Object(l.d)(Object(s.b)((function(e){return{firstPageLoaded:e.session.firstPageLoaded,isChatRulesOpen:e.chat.isChatRulesOpen,isHidden:e.chat.isHidden,isLoggedIn:Object(h.f)(e),rightColumnExpanded:e.ui.rightColumnExpanded,inlineRightColumnExpanded:e.ui.inlineRightColumnExpanded,theme:Object(ee.a)(e),unhideIgnoredUsers:e.chat.unhideIgnoredUsers}}),(function(e){return Object(l.b)({onCloseChatRules:function(){return b.z()},onShowChatRules:function(){return b.O()},onChatUnhide:function(){return b.N()},onThemeChange:function(e){return Object(Z.b)(e,{trackingSource:Z.a.TypedCommand})}},e)})),Object(_.withLatencyTracking)("ChatRoom",{autoReportInteractive:!0}),Object(J.a)(),A,$.a)((function(e){return o.createElement(Be.a,null,o.createElement(qe.a,null,o.createElement(Ue.a,null,o.createElement(He.a,null,o.createElement(Ve.b,{channelID:e.channelID},o.createElement(Ae.a,{channelID:e.channelID||void 0},o.createElement(mn,{channelLogin:e.channelLogin},o.createElement(Fe.a,{key:e.channelLogin},o.createElement(hn.a,{channelLogin:e.channelLogin},o.createElement(Cr,Object(a.__assign)({},e)))))))))))})),wr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.componentDidUpdate=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){var e=this.props.channelData.channel,t=this.props.userData&&this.props.userData.user,n=!1,i=!1,a=!1,r=!1,s=!1;if(t&&e&&e.self){var l=t.login===e.login,c=t.roles&&t.roles.isGlobalMod||!1,d=t.roles&&t.roles.isSiteAdmin||!1;a=t.roles&&t.roles.isPartner||!1,r=t.roles&&t.roles.isStaff||!1,s=e.self.isModerator||l||c,n=e.self.isModerator||l||c||d,i=e.self.isVIP||!1}var u=void 0;return e&&e.chatSettings&&e.chatSettings.rules&&e.chatSettings.rules.filter((function(e){return e.trim().length})).length&&(u=e.chatSettings.rules),o.createElement(Er,{key:this.props.channelLogin,authToken:this.props.sessionUser&&this.props.sessionUser.authToken,channelDisplayName:e&&e.displayName,channelID:e&&e.id,channelLogin:this.props.channelLogin,chatRules:u,clientID:this.props.clientID,isBackground:this.props.isBackground,isCurrentUserModerator:n,isCurrentUserVIP:i,isEmbedded:!!this.props.isEmbedded,isPopout:!!this.props.isPopout,closeRoomPicker:this.props.closeRoomPicker,onHostingChange:this.props.onHostingChange,userDisplayName:this.props.sessionUser&&this.props.sessionUser.displayName,userID:this.props.sessionUser&&this.props.sessionUser.id.toString(),userLogin:this.props.sessionUser&&this.props.sessionUser.login,isPartner:a,isStaff:r,shouldSeeBlockedAndDeletedMessages:s,shouldConnectChat:this.props.shouldConnectChat,useBaseBackground:this.props.useBaseBackground})},t}(o.Component),Or=n("9P+5");var Dr=Object(l.d)(Object(s.b)((function(e){return{sessionUser:Object(h.e)(e)}})),Object(c.a)(K,{name:"channelData",options:function(e){return{variables:{channelLogin:e.channelLogin}}}}),Object(c.a)(Or,{name:"userData",skip:function(e){return!e.sessionUser}}),Object(_.withLatencyTracking)("Chat"))(wr),Nr=Object(l.d)(R.b,x,Q,$.b,G)(Dr),_r=n("YG6c"),Ir=n("b7S+"),Mr=n("wp5a"),jr=(n("eZF0"),"Stream Chat"),Tr=P.a.wrap((function(){return n.e(93).then(n.bind(null,"+k6+"))}),"ActiveRoomButton"),Pr=function(e){function t(t){var n=e.call(this,t)||this;return n.showViewersList=function(){n.props.activeRoomName!==jr?n.props.isShowingRoomMemberList?n.props.closeRoomMemberList():n.props.showRoomMemberList():n.props.chatView===ir.a.ViewerList?n.props.closeChatViewerList():n.props.showChatViewerList()},n.roomsHeaderTitleStreamChatString=function(){return Object(j.d)("Stream Chat","RoomsHeaderTitle")},n.usersInChatString=function(){return Object(j.d)("Users in Chat","ChatRoomsHeader")},n.inChatInputRevampExperiment="variant1"===j.p.experiments.getAndTrackAssignment(Xe.c.ChatInputRevamp),n}return Object(a.__extends)(t,e),t.prototype.render=function(){var e=o.createElement(Cn.a,{className:"rooms-header",background:On.a.Base,borderBottom:!0,display:En.d.Flex,fullWidth:!0,justifyContent:En.h.Between,alignItems:En.b.Center,flexShrink:0,padding:{left:2,right:1}},o.createElement("div",{id:"chat-room-header-label"},this.renderActiveRoomName()),o.createElement(wn.a,{display:En.d.Flex,alignItems:En.b.Center,"data-test-selector":"room-picker"},this.renderRoomsIngress())),t=o.createElement(Cn.a,{className:"rooms-header",background:On.a.Base,borderBottom:!0,display:En.d.Flex,fullWidth:!0,justifyContent:En.h.Center,alignItems:En.b.Center,flexShrink:0,padding:{left:1,right:1}},o.createElement(wn.a,{display:En.d.Flex,alignItems:En.b.Center,"data-test-selector":"room-picker"},this.renderExperimentRoomsIngress()),o.createElement(Cn.a,{position:En.j.Absolute,attachRight:!0,margin:{right:1}},o.createElement(Ir.a,{align:Ir.b.Right,label:this.props.activeRoomName!==jr?Object(j.d)("Member List","RoomsHeader"):this.usersInChatString(),direction:Ir.c.Bottom},o.createElement(ai.a,{ariaLabel:this.usersInChatString(),"data-test-selector":Na,icon:jn.a.Friends,onClick:this.showViewersList}))));return this.props.isRoomPickerOpen&&(e=o.createElement(wn.a,{className:"rooms-header__open-header-wrapper","data-test-selector":"open-header-wrapper"},this.inChatInputRevampExperiment?t:e)),this.inChatInputRevampExperiment?t:e},t.prototype.renderRoomsIngress=function(){if(this.props.isEmbedded)return null;var e=o.createElement(wn.a,{alignItems:En.b.Center,"data-test-selector":"rooms-ingress",display:En.d.Flex},!this.props.isRoomPickerOpen&&Object(j.d)("Rooms","RoomsHeaderClosedLabel"),o.createElement(wn.a,{display:En.d.Flex,alignItems:En.b.Center},this.renderAlertText(),!this.props.isRoomPickerOpen&&o.createElement(wn.a,{padding:{left:.5},display:En.d.Flex},o.createElement(Mn.a,{asset:jn.a.RoomList})),this.props.isRoomPickerOpen&&o.createElement(ai.a,{ariaLabel:"RoomListOpen",icon:jn.a.RoomListOpen,"data-test-selector":"close-room-picker-button",onClick:this.props.onClick,blurAfterClick:!0})));return this.props.isRoomPickerOpen||(e=o.createElement(wn.a,{position:En.j.Relative},o.createElement(Dn.a,{"data-a-target":"room-selector-button","data-test-selector":"open-room-picker-button",onClick:this.props.onClick,type:Dn.d.Text},e))),Object(_r.a)()&&(e=this.renderRoomsIngressAsText()),e},t.prototype.renderExperimentRoomsIngress=function(){if(this.props.isEmbedded)return null;var e="open-room-picker-button";return this.props.isRoomPickerOpen&&(e="close-room-picker-button"),Object(_r.a)()||!this.props.hasRooms&&!this.props.isOwnChannel?this.renderRoomsIngressAsText():o.createElement(wn.a,{position:En.j.Relative},o.createElement(Dn.a,{ariaLabel:"View Rooms","data-test-selector":e,onClick:this.props.onClick,type:Dn.d.Text,dropdown:!0},this.renderAlertText(),this.props.activeRoomName))},t.prototype.renderRoomsIngressAsText=function(){return o.createElement(Jt.a,{fontSize:On.d.Size6,fontWeight:On.e.SemiBold,transform:Jt.d.Uppercase,type:Jt.e.H5},this.renderActiveRoomName())},t.prototype.renderAlertText=function(){return this.props.alertText?o.createElement(wn.a,{display:En.d.InlineBlock,padding:{left:.5},position:En.j.Relative},o.createElement(Mr.a,{label:this.props.alertText,type:Mr.b.Alert})):null},t.prototype.renderActiveRoomName=function(){return this.props.isRoomPickerOpen?o.createElement(Jt.a,{color:On.c.Alt,"data-test-selector":"chat-room-header-label"},this.props.activeRoomName!==jr?this.roomsHeaderTitleStreamChatString():this.props.activeRoomName):this.props.activeRoomName===jr?this.props.channelDisplayName?o.createElement(Jt.a,{color:On.c.Alt,"data-test-selector":"chat-room-header-label"},Object(j.d)("<x:bold>{displayName}</x:bold>'s Chat",{displayName:this.props.channelDisplayName,"x:bold":function(e){return o.createElement(Jt.a,{type:Jt.e.Span,bold:!0},e)}},"RoomsHeaderUserChat")):o.createElement(Jt.a,{color:On.c.Alt,"data-test-selector":"chat-room-header-label"},this.roomsHeaderTitleStreamChatString()):this.props.isActiveRoomDeleted?o.createElement(Jt.a,{color:On.c.Alt,"data-test-selector":"chat-room-header-label"},this.props.activeRoomName):o.createElement(Tr,{roomID:this.props.activeRoomID,roomName:this.props.activeRoomName})},t}(o.PureComponent);var Lr,Rr=Object(l.d)(Object(D.b)((function(e){return{chatView:e.chatView,isShowingRoomMemberList:e.isShowingRoomMemberList,showChatViewerList:e.showChatViewerList,closeChatViewerList:e.closeChatViewerList,showRoomMemberList:e.showRoomMemberList,closeRoomMemberList:e.closeRoomMemberList}})))(Pr),Fr=(n("zWFo"),"Stream Chat"),Ur=P.a.wrap((function(){return Promise.all([n.e(0),n.e(94)]).then(n.bind(null,"Xf1I"))}),"Room"),xr=P.a.wrap((function(){return n.e(95).then(n.bind(null,"cs/o"))}),"RoomPicker"),Ar=function(e){function t(t){var n=e.call(this,t)||this;return n.state={activeRoomID:Fr,activeRoomName:Fr,isActiveRoomDeleted:!1,showRoomPicker:!1},n.componentDidUpdate=function(e){var t=n.props.data&&!1===n.props.data.loading,i=e.canChatOnPageDuringWatchParty!==n.props.canChatOnPageDuringWatchParty,a=Object(ya.d)(e.activeWatchParty&&e.activeWatchParty.user&&e.activeWatchParty.user.watchParty&&e.activeWatchParty.user.watchParty.session||null)!==Object(ya.d)(n.props.activeWatchParty&&n.props.activeWatchParty.user&&n.props.activeWatchParty.user.watchParty&&n.props.activeWatchParty.user.watchParty.session||null);(t||i||a||n.props.pubsub.messages.primeVideoWatchPartyStateUpdate)&&n.updateCommercePermissions()},n.updateShowRoomPicker=function(e){null===n.updateFrame&&(n.setState((function(t){return Object(a.__assign)(Object(a.__assign)({},t),e)})),n.updateFrame=setTimeout((function(){n.updateFrame=null}),0))},n.isChannelLive=function(e){return!(e.error||!e.channel)&&!!(e.channel.stream&&e.channel.stream.id||e.channel.hosting&&e.channel.hosting.id)},n.updateCommercePermissions=function(){var e=n.props.activeWatchParty&&n.props.activeWatchParty.user&&n.props.activeWatchParty.user.watchParty&&n.props.activeWatchParty.user.watchParty.session,t=n.props.pubsub.messages.primeVideoWatchPartyStateUpdate&&n.props.pubsub.messages.primeVideoWatchPartyStateUpdate.data.state;if(t)n.props.disableCommerce(t===L.yd.HYPE_IN||t===L.yd.IN_PROGRESS);else if(e){var i=Object(ya.d)(e);n.props.disableCommerce(i)}else n.props.disableCommerce(!1);n.props.allowChatOnPageDuringWatchParty(n.props.canChatOnPageDuringWatchParty||!1)},n.headerClick=function(){n.updateShowRoomPicker({showRoomPicker:!n.state.showRoomPicker})},n.handleRoomSelect=function(e,t){n.setState({activeRoomID:e,activeRoomName:t,isActiveRoomDeleted:!1,showRoomPicker:!1})},n.onActiveRoomDelete=function(){n.state.activeRoomID!==Fr&&n.setState({isActiveRoomDeleted:!0})},n.goToStreamChat=function(){n.handleRoomSelect(Fr,Fr)},n.closeRoomPicker=function(){n.updateShowRoomPicker({showRoomPicker:!1})},n.updateFrame=null,n}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.updateChatConfigState({hideChatSettings:!!this.props.hideChatSettings,hideOnboardingPrompts:!!this.props.hideOnboardingPrompts,hideChatInputButtons:!!this.props.hideChatInputButtons}),this.updateCommercePermissions()},t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=this;if(this.props.data&&e.data&&this.props.data.channel&&e.data.channel&&this.props.data.channel.self&&e.data.channel.self&&!e.data.channel.self.isChannelMember&&this.props.data.channel.self.isChannelMember!==e.data.channel.self.isChannelMember&&this.goToStreamChat(),e.data&&e.data.channel&&e.data.channel.self){var n=e.data.channel.self;(!n.isChannelMember||n.banStatus&&n.banStatus.isPermanent)&&this.state.activeRoomID!==Fr&&this.goToStreamChat()}if(this.props.sessionUser&&this.props.routedRoomName&&this.props.data&&this.props.data.loading&&!this.props.data.channel&&e.data&&!e.data.loading&&e.data.channel&&e.data.channel.channelRooms&&e.data.channel.self&&e.data.channel.self.isChannelMember){var i=e.data.channel.channelRooms.find((function(e){return null!==e&&e.name===t.props.routedRoomName}));i&&this.setState({activeRoomID:i.id,activeRoomName:i.name})}else this.props.channelLogin!==e.channelLogin&&this.state.activeRoomID!==Fr&&this.goToStreamChat()},t.prototype.render=function(){return o.createElement(wn.a,{className:"room-selector",fullWidth:!0,fullHeight:!0,display:En.d.Flex,flexDirection:En.e.Column,flexGrow:1,flexWrap:En.f.NoWrap,position:En.j.Relative},this.renderHeader(),this.renderRoomPicker(),this.renderHiddenState(),this.renderChat(),this.renderCurrentRoom())},t.prototype.renderChat=function(){if(this.props.isHidden&&!this.props.isPopout)return null;var e=this.props.isBackground||this.state.activeRoomID!==Fr;return o.createElement(Nr,{channelLogin:this.props.channelLogin,clientID:j.a.authSettings.clientID,isBackground:e,isEmbedded:this.props.isEmbedded,isPopout:this.props.isPopout,closeRoomPicker:this.closeRoomPicker,onHostingChange:this.props.onHostingChange,shouldConnectChat:this.props.shouldConnectChat,useBaseBackground:this.props.useBaseBackground})},t.prototype.renderCurrentRoom=function(){return(!this.props.isHidden||this.props.isPopout)&&this.props.data&&this.props.data.channel&&this.props.data.channel.id&&this.state.activeRoomID!==Fr?o.createElement(Ur,{isDeleted:this.state.isActiveRoomDeleted,isPopout:this.props.isPopout,channelLogin:this.props.channelLogin,channelID:this.props.data.channel.id,roomID:this.state.activeRoomID,closeRoomPicker:this.closeRoomPicker,handleStreamChatClick:this.goToStreamChat,onDelete:this.onActiveRoomDelete,isHostMode:!!this.props.hostedChannelDisplayName,useBaseBackground:this.props.useBaseBackground}):null},t.prototype.renderHeader=function(){var e=this;if(!this.props.disableRooms){var t=this.props.data,n=void 0;if(t&&!t.error&&t.channel&&t.channel.self&&t.channel.self.isChannelMember&&t.channel.channelRooms){var i=t.channel.channelRooms.reduce((function(t,n){return n&&n.self&&!n.self.isMuted&&n.id!==e.state.activeRoomID?t+n.self.unreadMentionCount:t}),0);n=i>0?i.toString():void 0}var a=!1;t&&t.channel&&t.channel.channelRooms.length>0&&(a=!0);var r=void 0;return this.props.renderChannelName&&this.props.data&&this.props.data.channel&&this.props.data.channel.displayName&&(r=this.props.data.channel.displayName),o.createElement(Rr,{activeRoomName:this.state.activeRoomName,activeRoomID:this.state.activeRoomID,alertText:n,channelDisplayName:r,onClick:this.headerClick,isActiveRoomDeleted:this.state.isActiveRoomDeleted,isEmbedded:this.props.isEmbedded,isRoomPickerOpen:this.state.showRoomPicker,hasRooms:a,isOwnChannel:this.isOwnChannel})}},Object.defineProperty(t.prototype,"isOwnChannel",{get:function(){return!!this.props.sessionUser&&this.props.sessionUser.id===this.props.channelID},enumerable:!0,configurable:!0}),t.prototype.renderRoomPicker=function(){if(!this.props.disableRooms)return this.state.showRoomPicker&&this.props.data&&this.props.data.channel&&this.props.data.channel.id?o.createElement(T.a,{onClickOut:this.closeRoomPicker},o.createElement(Cn.a,{attachLeft:!0,attachRight:!0,background:On.a.Alt,borderBottom:!0,borderLeft:!0,borderRight:!0,elevation:2,position:En.j.Absolute,zIndex:En.o.Above},o.createElement(xr,{channelID:this.props.data.channel.id,channelLogin:this.props.channelLogin,handleRoomSelect:this.handleRoomSelect,isChannelLive:this.isChannelLive(this.props.data),renderChannelName:this.props.renderChannelName,activeRoomID:this.state.activeRoomID,"data-test-selector":"room-picker"}))):void 0},t.prototype.renderHiddenState=function(){return!this.props.isHidden||this.props.isPopout?null:o.createElement(Cn.a,{alignItems:En.b.Center,borderLeft:!0,"data-test-selector":"room-selector-hidden-state",display:En.d.Flex,flexDirection:En.e.Column,fullHeight:!0,fullWidth:!0,justifyContent:En.h.Center,color:On.c.Base,position:En.j.Relative},o.createElement(wn.a,{margin:{bottom:1}},o.createElement(Jt.a,{fontSize:On.d.Size5},Object(j.d)("Chat is hidden.","RoomSelector"))),o.createElement(Dn.a,{onClick:this.props.onChatUnhide,"data-a-target":"show-chat-button"},Object(j.d)("Show Chat","RoomSelector")))},t}(o.Component),Br=n("Qdho");var Vr=Object(k.b)((function(e){return{updateChatConfigState:function(t){return e.updateChatConfigState(t)}}}))(Ar),Hr=Object(l.d)(Object(s.b)((function(e){return{firstPageLoaded:e.session.firstPageLoaded,isHidden:e.chat.isHidden,sessionUser:Object(h.e)(e)}}),(function(e){return Object(l.b)({onChatUnhide:function(){return b.N()}},e)})),Object(c.a)(Br,{skip:function(e){return!e.firstPageLoaded},props:function(e){return{data:e.data,channelID:e.data&&e.data.channel&&e.data.channel.id}},options:function(e){return{variables:{login:e.channelLogin}}}}),Object(c.a)(M,{options:function(e){return{variables:{channelID:e.channelID}}},skip:function(e){return!e.channelID},name:"activeWatchParty"}),Object(u.a)((function(e){return{query:Br,skip:!e.firstPageLoaded||!e.data||!e.data.channel,variables:{login:e.channelLogin},topic:Object(p.n)(""+(e.data&&e.data.channel&&e.data.channel.id)),types:[m.PubsubMessageType.ChatRoomCreated,m.PubsubMessageType.ChatRoomDeleted],mutator:function(e,t){if(e.type===m.PubsubMessageType.ChatRoomDeleted&&t.channel&&t.channel.channelRooms)return r(t,(function(e){return e.channel.channelRooms}),(function(t){return t.filter((function(t){return null!==t&&t.id!==e.data.room.room_id}))}));if(e.type===m.PubsubMessageType.ChatRoomCreated&&t.channel&&t.channel.channelRooms){var n=function(e){return{id:e.data.room.room_id,minimumAllowedRole:e.data.room.minimum_allowed_role,name:e.data.room.name,topic:e.data.room.topic,isPreviewable:e.data.room.is_previewable,self:{isArchived:!1,isMuted:!1,isUnread:!1,unreadMentionCount:0,__typename:"RoomView"},__typename:"Room"}}(e);return r(t,(function(e){return e.channel.channelRooms}),(function(e){return Object(a.__spreadArrays)(e,[n])}))}return t}}})),Object(u.a)((function(e){return{query:Br,skip:!(e.firstPageLoaded&&e.sessionUser&&e.data&&e.data.channel),variables:{login:e.channelLogin},topic:Object(p.o)(""+(e.sessionUser&&e.sessionUser.id)),types:[m.PubsubMessageType.UserMention,m.PubsubMessageType.ChatRoomsRoomViewUpdated],mutator:function(e,t){switch(e.type){case m.PubsubMessageType.UserMention:if(!t.channel||!t.channel.channelRooms||t.channel.id!==e.data.channel_id)break;var n=e.data.room_id;return r(t,(function(e){return e.channel.channelRooms}),(function(e){return e.filter((function(e){return e&&e.self})).map((function(e){return e.id===n&&e.self?r(e,(function(e){return e.self.unreadMentionCount}),(function(e){return e+1})):e}))}));case m.PubsubMessageType.ChatRoomsRoomViewUpdated:if(!t.channel||t.channel.id!==e.data.room_view.room.owner_id||!t.channel.self)break;return r(t,(function(e){return e.channel.self.isModerator}),(function(){return e.data.room_view.permissions.moderate}))}return t}}})),Object(d.a)([{topic:function(e){return e.channelID?Object(p.H)(e.channelID):""},mapMessageTypesToProps:(Lr={},Lr[m.PubsubMessageType.PrimeVideoWatchPartyStateUpdate]="primeVideoWatchPartyStateUpdate",Lr),skip:function(e){return!e.channelID}}]),Object(u.a)((function(e){return{variables:{channelLogin:e.channelLogin},query:N,skip:!e.sessionUser||!e.channelID||!e.firstPageLoaded,topic:e.sessionUser&&e.channelID?Object(p.o)(""+(e.sessionUser&&e.sessionUser.id)):"",type:m.PubsubMessageType.ChatRoomsUserModAction,mutator:function(t,n){return e.sessionUser&&e.channelID&&n.channel&&n.channel.self&&t.data.target_id===e.sessionUser.id&&t.data.channel_id===e.channelID&&("ban"===t.data.action?n=r(n,(function(e){return e.channel.self.banStatus}),(function(){return{isPermanent:!0,expiresAt:t.data.expires_at||null,__typename:"ChatRoomBanStatus"}})):"unban"===t.data.action?n=r(n,(function(e){return e.channel.self.banStatus}),(function(){return null})):"timeout"===t.data.action&&(n=r(n,(function(e){return e.channel.self.banStatus}),(function(){return{isPermanent:!1,expiresAt:t.data.expires_at||null,__typename:"ChatRoomBanStatus"}})))),n}}})),I.withWatchPartyContextManager,Object(I.withWatchPartyContext)(I.mapWatchPartyContextToProviderProps),Object(_.withLatencyTracking)("RoomSelector",{autoReportInteractive:!0}))((function(e){return o.createElement(D.a,{viewManager:e.viewManager},o.createElement(k.a,null,o.createElement(w,null,o.createElement(g.a,{channelLogin:e.channelLogin},o.createElement(O.a,{channelLogin:e.channelLogin},o.createElement(v.a,{key:e.channelLogin,channelLogin:e.channelLogin},o.createElement(f.a,{channelLogin:e.channelLogin,isCommerceDisabled:e.isCommerceDisabled},o.createElement(Vr,Object(a.__assign)({},e)))))))))}));n.d(t,"a",(function(){return Hr}))},VIQE:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"communityPointsBalanceFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"channel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"communityPoints"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"balance"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"activeMultipliers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reasonCode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"factor"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"canRedeemRewardsForFree"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:167}};n.loc.source={body:"fragment communityPointsBalanceFragment on User {\nchannel {\nid\nself {\ncommunityPoints {\nbalance\nactiveMultipliers {\nreasonCode\nfactor\n}\ncanRedeemRewardsForFree\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},VKOn:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return c}));var i=n("/7QA"),a=n("DMoW"),r="disable_multiview_load";function o(e){if(e&&e.channel&&e.channel.id&&e.channel.chanlets){var t=e.channel,n=t.chanlets,i=t.id;return n.filter((function(e){return i!==e.id}))}return[]}function s(e){return e.every((function(e){var t=e.restriction;if(!t)return!0;var n=new Date(Date.now());return!!t.exemptions&&t.exemptions.filter((function(e){return e.type===a.uc.ALL&&(!e.startsAt||new Date(e.startsAt)<=n)&&(!e.endsAt||new Date(e.endsAt)>=n)})).length>=1}))}function l(e){return e.every((function(e){return!!e.restriction}))}function c(){return i.b.get(r,!1)}},VN3V:function(e,t,n){},VaVM:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e[e.ListRewards=0]="ListRewards",e[e.CustomReward=1]="CustomReward",e[e.UnlockRandomEmote=2]="UnlockRandomEmote",e[e.UnlockChosenSubscriberEmote=3]="UnlockChosenSubscriberEmote",e[e.AlreadySubbed=4]="AlreadySubbed",e[e.ModifyEmote=5]="ModifyEmote",e[e.NotEnoughPoints=6]="NotEnoughPoints",e[e.NotLoggedIn=7]="NotLoggedIn",e[e.NotSubbed=8]="NotSubbed",e[e.NotSubOnlyMode=9]="NotSubOnlyMode",e[e.OutOfStock=10]="OutOfStock",e[e.EarnRates=11]="EarnRates"}(i||(i={}))},"Vl9+":function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"thread"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"WhisperThread"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"messages"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"20"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nonce"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"to"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"deletedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"editedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"unreadMessagesCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userLastMessageRead"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:243}};n.loc.source={body:"fragment thread on WhisperThread {\nmessages(first: 20) {\nedges {\ncursor\nnode {\nid\nnonce\ncontent {\ncontent\nemotes {\nid\nemoteID\nsetID\nfrom\nto\n}\n}\ndeletedAt\neditedAt\nsentAt\nfrom {\nid\n}\n}\n}\n}\nunreadMessagesCount\nuserLastMessageRead {\nid\nsentAt\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},VrOd:function(e,t,n){},VwyG:function(e,t,n){"use strict";var i=n("/MKj"),a=n("kRBY"),r=n("mrSG"),o=n("q1tI"),s=n("fvjX"),l=n("/7QA"),c=n("yR8l"),d=n("GnwI"),u=n("nt5g"),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={error:null},t.logger=l.k.withCategory("role-restricted"),t}return Object(r.__extends)(t,e),t.prototype.componentDidUpdate=function(e){var t=e.data&&e.data.loading,n=this.props.data&&this.props.data.loading;if((!this.props.isLoggedIn||t&&!n)&&this.props.latencyTracking.reportInteractive(),this.props.isLoggedIn&&this.props.data&&(!e.data||e.data.error!==this.props.data.error)){var i=null;this.props.data.error?(i=new Error(this.props.data.error.toString()),this.logger.warn("Unable to retrieve data from GraphQL.",{err:i})):n||this.props.data.user&&this.props.data.currentUser||(i=new Error("Failed to fetch user information"),this.logger.warn("Failed to fetch user information.",{err:i})),this.setState({error:i})}},t.prototype.componentDidMount=function(){(!this.props.isLoggedIn||this.props.data&&!this.props.data.loading)&&this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){var e={loading:this.props.isLoggedIn,permitted:!1,roles:{staff:!1,editor:!1,owner:!1},error:this.state.error};if(this.props.isLoggedIn&&this.props.data){var t=function(e){var t=e.data,n={staff:!1,editor:!1,owner:!1};t&&!t.error&&!t.loading&&t.user&&t.currentUser&&(n.staff=!(!t.currentUser.roles||!t.currentUser.roles.isStaff),n.editor=!(!t.user.self||!t.user.self.isEditor),n.owner=t.user.id===t.currentUser.id);return n}(this.props);e=Object(r.__assign)(Object(r.__assign)({},e),{loading:this.props.data.loading,permitted:p(t,this.props.permittedRoles),roles:t})}return this.props.children(e)},t}(o.Component);function p(e,t){return!!e.owner||(!(!e.staff||!t.staff)||!(!e.editor||!t.editor))}var h=Object(s.d)(Object(c.a)(u,{options:function(e){return{variables:{contentOwnerLogin:e.ownerLogin}}},skip:function(e){return!e.isLoggedIn}}),Object(d.withLatencyTracking)("RoleRestricted"))(m);var f=Object(i.b)((function(e){return{isLoggedIn:Object(a.f)(e)}}))(h);n.d(t,"a",(function(){return f}))},"W/3w":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s}));var i=n("/7QA"),a=30,r=[0,10,30,60,1440,10080,43200,129600];function o(e){switch(e){case 0:return Object(i.d)("0 minutes (Any followers)","FollowersOnlyLabel");case 10:return Object(i.d)("10 minutes (Most used)","FollowersOnlyLabel");case 30:return Object(i.d)("30 minutes","FollowersOnlyLabel");case 60:return Object(i.d)("1 hour","FollowersOnlyLabel");case 1440:return Object(i.d)("1 day","FollowersOnlyLabel");case 10080:return Object(i.d)("1 week","FollowersOnlyLabel");case 43200:return Object(i.d)("1 month","FollowersOnlyLabel");case 129600:return Object(i.d)("3 months","FollowersOnlyLabel");default:return i.k.warn("[FollowersOnlyLabel] Tried to generate a label for a non-preset.",e),""}}function s(e){switch(e){case 0:return Object(i.d)("0 min","FollowersOnlyShorthand");case 10:return Object(i.d)("10 min","FollowersOnlyShorthand");case 30:return Object(i.d)("30 min","FollowersOnlyShorthand");case 60:return Object(i.d)("1 hr","FollowersOnlyShorthand");case 1440:return Object(i.d)("1 day","FollowersOnlyShorthand");case 10080:return Object(i.d)("1 wk","FollowersOnlyShorthand");case 43200:return Object(i.d)("1 mo","FollowersOnlyShorthand");case 129600:return Object(i.d)("3 mo","FollowersOnlyShorthand");default:return Object(i.d)("custom","FollowersOnlyShorthand")}}},W1jp:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return d})),n.d(t,"c",(function(){return u}));var i=n("/7QA"),a=n("DMoW"),r=n("XIEs");function o(e){return"CommunityPointsAutomaticReward"===e.__typename?e.backgroundColor||e.defaultBackgroundColor:e.backgroundColor}function s(e){return"CommunityPointsAutomaticReward"===e.__typename?e.cost||e.defaultCost:e.cost}function l(e){return e.image?{src:e.image.url,srcSet:Object(r.a)(e.image)}:{src:e.defaultImage.url,srcSet:Object(r.a)(e.defaultImage)}}function c(e){if("CommunityPointsCustomReward"===e.__typename)return e.title;switch(e.type){case a.U.SEND_HIGHLIGHTED_MESSAGE:return Object(i.d)("Highlight My Message","CommunityPointsRewards");case a.U.SINGLE_MESSAGE_BYPASS_SUB_MODE:return Object(i.d)("Send a Message in Sub-Only Mode","CommunityPointsRewards");case a.U.CHOSEN_SUB_EMOTE_UNLOCK:return Object(i.d)("Choose an Emote to Unlock","CommunityPointsRewards");case a.U.RANDOM_SUB_EMOTE_UNLOCK:return Object(i.d)("Unlock a Random Sub Emote","CommunityPointsRewards");case a.U.CHOSEN_MODIFIED_SUB_EMOTE_UNLOCK:return Object(i.d)("Modify a Single Emote","CommunityPointsRewards");default:return Object(i.d)("Reward","CommunityPointsRewards")}}function d(e){if("CommunityPointsCustomReward"===e.__typename)return!1;switch(e.type){case a.U.RANDOM_SUB_EMOTE_UNLOCK:case a.U.CHOSEN_SUB_EMOTE_UNLOCK:case a.U.CHOSEN_MODIFIED_SUB_EMOTE_UNLOCK:return!0;default:return!1}}function u(e){if("CommunityPointsCustomReward"===e.__typename)return e.prompt;switch(e.type){case a.U.SEND_HIGHLIGHTED_MESSAGE:return Object(i.d)("Write something special below and give it some glitz in chat!","CommunityPointsRewards");case a.U.SINGLE_MESSAGE_BYPASS_SUB_MODE:return Object(i.d)("Type your message below and sneakily bypass chat restrictions.","CommunityPointsRewards");case a.U.CHOSEN_SUB_EMOTE_UNLOCK:return Object(i.d)("Select an emote to unlock for 24 hours:","CommunityPointsRewards");case a.U.CHOSEN_MODIFIED_SUB_EMOTE_UNLOCK:return Object(i.d)("Select an emote to modify & unlock for 24 hours:","CommunityPointsRewards");case a.U.RANDOM_SUB_EMOTE_UNLOCK:return Object(i.d)("Click below to unlock one random emote to chat with for 24 hours!","CommunityPointsRewards");default:return Object(i.d)("Unlock this reward.","CommunityPointsRewards")}}},W7Hf:function(e,t,n){"use strict";var i=n("9sGC");n.d(t,"a",(function(){return i.a}))},W8Fi:function(e,t,n){"use strict";n.d(t,"h",(function(){return r})),n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return d})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return m}));var i=n("WgyX"),a=n("a5fV");function r(e){return e.some((function(e){return!Object(i.a)(e)&&(e.self?!!e.self.promotion:!!e.promotion)}))}function o(e){return e.some((function(e){return!!e.giftPromotion}))}function s(e){return e.some((function(e){return!!e.self&&!!e.self.paidUpgradePromotion}))}function l(e){return Object(a.a)(Object(a.d)(e.previewPrice.total,e.previewPrice.exponent),e.previewPrice.currency)}function c(e,t){var n;return(n=t&&"giftPromotion"in e?e.giftPromotion:function(e){return Object(i.a)(e)?null:e.self?e.self.promotion:e.promotion}(e))?l(n):e.price}function d(e,t){var n;return t?n=e.giftPromotion:e.self&&(n=e.self.promotion),n?Math.floor((e.priceInfo.price-n.previewPrice.price)/e.priceInfo.price*100):0}function u(e){return e.self&&e.self.paidUpgradePromotion?e.self.paidUpgradePromotion.newPrice:e.price}function m(e){return e.find((function(e){return!!e.self&&!!e.self.paidUpgradePromotion}))||null}},WJ1t:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"subscriptionProductPromotion"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SubscriptionPromotion"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"newPrice"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"oldPrice"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discountType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discountValue"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"previewPrice"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"subscriptionProductPriceInfo"},directives:[]}]}}]}}],loc:{start:0,end:248}};i.loc.source={body:'#import "twilight/features/subscribe-button/models/subscription-product-price-info.gql"\nfragment subscriptionProductPromotion on SubscriptionPromotion {\nnewPrice\noldPrice\ndiscountType\ndiscountValue\npreviewPrice {\n...subscriptionProductPriceInfo\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("35qb").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)}))),e.exports=i},WK0g:function(e,t,n){"use strict";var i=n("cr+I"),a=n("b6Yk"),r=n("mrSG"),o=n("pU2t"),s=n("XeJ1"),l=function(e,t){var n=Object(o.d)(e,t),i=e.comments.reduce((function(e,t){return void 0===t.video?e:e.concat([c(t.video)])}),[]);return Array.isArray(e.parents)&&e.parents.forEach((function(e){n.comments.push(o.a.normalizeRecord(e,t)),n.users.push(s.a.normalizeRecord(e.commenter))})),Object(r.__assign)(Object(r.__assign)({},n),{videos:i})},c=function(e){return{id:e._id,title:e.title,preview:e.preview}},d=n("ahza");n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return g}));var u="channel_id",m="limit",p="video_id",h=50;function f(e){var t;return t=function(e){return"userId"in e}(e)?function(e){var t={};return t[m]=h.toString(),t[u]=e.userId,void 0!==e.cursor&&(t[d.a]=e.cursor),"/v5/videos/comments?"+i.stringify(t)}(e):function(e){var t={};return t[m]=h.toString(),t[p]=e.videoId,void 0!==e.cursor&&(t[d.a]=e.cursor),"/v5/videos/comments?"+i.stringify(t)}(e),a.a.getOrThrow(t).then((function(t){return l(t.body,e.bitsConfig)}))}function g(e){var t=function(e){return"/v5/videos/channels/"+e.targetChannel+"/bans"}(e),n={body:{commenter_id:e.bannedUser}};return a.a.postOrThrow(t,n)}},WWj3:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"pollVoterChoice"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PollVoterChoice"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pollChoice"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"tokens"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"pollTokenBreakdown"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"votes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"pollVoteBreakdown"},directives:[]}]}}]}}],loc:{start:0,end:277}};i.loc.source={body:'#import "twilight/features/polls/models/poll-token-breakdown-fragment.gql"\n#import "twilight/features/polls/models/poll-vote-breakdown-fragment.gql"\nfragment pollVoterChoice on PollVoterChoice {\nid\npollChoice {\nid\n}\ntokens {...pollTokenBreakdown}\nvotes {...pollVoteBreakdown}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)}))}i.definitions=i.definitions.concat(r(n("/x02").definitions)),i.definitions=i.definitions.concat(r(n("wMQt").definitions)),e.exports=i},WgyX:function(e,t,n){"use strict";function i(e){return!("priceInfo"in e)}n.d(t,"a",(function(){return i}))},WytW:function(e,t,n){"use strict";n.d(t,"n",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return c})),n.d(t,"k",(function(){return d})),n.d(t,"l",(function(){return u})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return p})),n.d(t,"i",(function(){return h})),n.d(t,"j",(function(){return f})),n.d(t,"a",(function(){return g})),n.d(t,"h",(function(){return v})),n.d(t,"c",(function(){return b})),n.d(t,"u",(function(){return y})),n.d(t,"r",(function(){return C})),n.d(t,"o",(function(){return w})),n.d(t,"t",(function(){return D})),n.d(t,"s",(function(){return _})),n.d(t,"p",(function(){return j})),n.d(t,"q",(function(){return P})),n.d(t,"m",(function(){return L}));var i=n("mr+n"),a=n("4G6/"),r=n("Ff8q");function o(e){return/^[\/]/.test(e)}function s(){return"/clear"}function l(){return"/emoteonly"}function c(){return"/emoteonlyoff"}function d(){return"/subscribers"}function u(){return"/subscribersoff"}function m(){return"/followersoff"}function p(){return"/slowoff"}function h(e){return"/followers "+e}function f(e){return void 0===e&&(e=i.a),"/slow "+e}function g(e){return"/color "+e}function v(){return"/emoteonly"}function b(){return"/emoteonlyoff"}var k=/^\/w(?:$|\s+)(\S+)?\s*(.+)?/i;function y(e){var t=e.trim().match(k);return t?{recipientLogin:t[1]&&Object(r.a)(t[1])||null,body:t[2]||null}:null}var S=/^\/host\s+(\S+)$/i;function C(e){var t=e.trim().match(S);return t?{recipientLogin:Object(r.a)(t[1])}:null}var E=/^\/ban\s+(\S+)(?:\s+(.+))?$/;function w(e){var t=e.trim().match(E);return t&&t[1]?{banTarget:Object(r.a)(t[1]),reason:t[2]||null}:null}var O=/^\/timeout\s+(\S+)(?:\s+(\S+))?(?:\s+(.+))?$/;function D(e){var t=!0,n=e.trim().match(O);if(!n||!n[1])return null;var i=Object(r.a)(n[1]),o=n[2]||null,s=n[3]||null,l=null;if(null!==o){var c=Number(o);if(Number.isNaN(c)){var d=Object(a.b)(o||"");!d||Number.isNaN(d)?t=!1:l=d}else l=c}return{validArguments:t,banTarget:i,rawDuration:o,durationSeconds:l,reason:s}}var N=/^\/slow(?:\s+(\d+)?)?$/;function _(e){var t=e.trim().match(N);return t?{duration:t[1]&&Number(t[1])||null}:null}var I=["blue","blueviolet","cadetblue","chocolate","coral","dodgerblue","firebrick","goldenrod","green","hotpink","orangered","red","seagreen","springgreen","yellowgreen"],M=/^\/color\s+(#[A-Fa-f0-9]{6}|[A-Za-z]+)$/;function j(e){var t=e.trim().match(M);if(!t)return null;var n=t[1];return n.startsWith("#")||-1!==I.indexOf(n.toLowerCase())?{color:n}:null}var T=/^\/help(?:\s+(\S+)?)?$/i;function P(e){var t=e.trim().match(T);return t?{command:t[1]}:null}function L(e){var t=e.commandArgs;if(t&&t.length>0){var n=t[0];if(n.isRequired)return"["+n.name+"]"}}},X31c:function(e,t,n){"use strict";n.d(t,"a",(function(){return M}));var i,a=n("mrSG"),r=n("TSYQ"),o=n("q1tI"),s=n("/MKj"),l=n("fvjX"),c=n("/7QA"),d=n("8Ad5"),u=n("0Log"),m=n("DMoW"),p=n("uIkQ"),h=n("+pBb"),f=n("ZVTe"),g=n("6wGa"),v=n("cys1"),b=n("EE1E"),k=n("fezU"),y=n("ZtEv"),S=n("oK83"),C=n("Jsra"),E=n("hnjF"),w=n("+80q"),O=n("sUnt"),D=(n("uYvD"),"chat-deleted-message-placeholder"),N="chat-hidden-message-placeholder",_="chat-hidden-username-placeholder";!function(e){e.ChatLineMessage="chat-line-message",e.ChatDeletedMessagePlaceholder="chat-deleted-message-placeholder",e.ChatHiddenMessagePlaceholder="chat-hidden-message-placeholder",e.ChatHiddenUserNameLink="chat-hidden-username-link",e.ChatHiddenUsernamePlaceholder="chat-hidden-username-placeholder",e.ChatDeletedMessageAttribution="chat-deleted-message-attribution"}(i||(i={}));var I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={alwaysShowMessage:!1},t.renderModerationIcons=function(){if(!(t.props.isCurrentUserModerator&&t.props.showModerationIcons&&t.props.message.user.userID&&t.props.channelID))return null;var e=!0;return void 0!==t.props.canDelete&&(e=t.props.canDelete),o.createElement(g.a,{targetUserID:t.props.message.user.userID,canDelete:e,confirmModerationAction:t.props.confirmModerationAction,channelID:t.props.channelID,isMessageDeleted:t.props.message.deleted,isMessageBanned:t.props.message.banned,senderLogin:t.props.message.user.userLogin,messageID:t.props.message.id})},t.renderMessageBody=function(){if(t.props.isHidden&&!t.state.alwaysShowMessage&&t.props.isCurrentUserModerator){var e=Object(c.d)("message hidden from blocked user","ChatLine");return o.createElement("span",{key:"hidden_message",className:"chat-line__message--hidden","data-a-target":N},o.createElement(C.a,{linkTo:"",onClick:t.hiddenMessageClickHandler,"data-test-selector":i.ChatHiddenMessagePlaceholder},"<"+e+">"))}if(t.props.isDeleted)return t.renderDeletedMessage();var n={chatChannelID:t.props.channelID,chatChannelLogin:t.props.channelLogin,messageAuthorID:t.props.message.user.userID,messageSourceID:t.props.message.id,emoteSourceType:S.a.chat,isHighlighted:t.props.isHighlighted},a=Object(v.f)(t.props.message.messageParts,n);return t.props.isHighlighted?o.createElement("span",{className:"chat-line__message-body--highlighted"},a):a},t.renderDeletedMessage=function(){var e=t.props,n=e.isCurrentUserModerator,a=e.isCurrentUserStaff,r=e.deletedMessageDisplay;if(n||a){var s={chatChannelID:t.props.channelID,chatChannelLogin:t.props.channelLogin,messageAuthorID:t.props.message.user.userID,messageSourceID:t.props.message.id,emoteSourceType:S.a.chat,disableChatCard:!0};if(r===m.qb.DETAILED&&n){var l=t.props.message,d=l.modLogin,p=l.modActionType,h=l.duration,f=Object(c.d)("(Deleted)","ChatLine");return p&&p===u.ModerationActions.Ban&&d&&(f=Object(c.d)("(Banned by {modLogin})",{modLogin:d},"ChatLine")),p&&p===u.ModerationActions.Timeout&&(d&&h?f=Object(c.d)("({duration}s Timeout by {modLogin})",{duration:h,modLogin:d},"ChatLine"):d&&(f=Object(c.d)("(Timeout by {modLogin})",{modLogin:d},"ChatLine"))),p&&p===u.ModerationActions.Delete&&d&&(f=Object(c.d)("(Deleted by {modLogin})",{modLogin:d},"ChatLine")),o.createElement("span",{key:"deleted",className:"chat-line__message--deleted","data-a-target":D,"data-test-selector":i.ChatDeletedMessagePlaceholder},o.createElement("span",{className:"chat-line__message--deleted-detailed"},Object(v.f)(t.props.message.messageParts,s)),o.createElement(E.g,{padding:{left:.5}},o.createElement(w.a,{type:w.e.Span,"data-test-selector":i.ChatDeletedMessageAttribution},f)))}return t.state.alwaysShowMessage?Object(v.f)(t.props.message.messageParts,s):o.createElement("span",{key:"deleted",className:"chat-line__message--deleted","data-a-target":D},o.createElement(C.a,{linkTo:"",onClick:t.alwaysShowMessage,"data-test-selector":i.ChatDeletedMessagePlaceholder},"<"+Object(c.d)("message deleted","ChatLine")+">"))}return o.createElement("span",{key:"deleted",className:"chat-line__message--deleted-notice","data-a-target":D,"data-test-selector":i.ChatDeletedMessagePlaceholder},""+Object(c.d)("message deleted by a moderator.","ChatLine"))},t.renderMessageAuthor=function(){var e=t.props,n=e.badgeSets,a=e.message,r=e.theme,s=e.useHighContrastColors;return t.props.isHidden&&!t.state.alwaysShowMessage&&t.props.isCurrentUserModerator?o.createElement("span",{key:"hidden_username",className:"chat-line__username--hidden","data-a-target":_,"data-test-selectors":i.ChatHiddenUsernamePlaceholder},o.createElement(C.a,{linkTo:"",onClick:t.hiddenMessageClickHandler,"data-test-selector":i.ChatHiddenUserNameLink},Object(c.d)("User Hidden","ChatLine"))):o.createElement(o.Fragment,null,t.renderModerationIcons(),o.createElement(p.b,{badgeSets:n,badgesToRender:a.badges,dynamicData:a.badgeDynamicData,hideBroadcasterTooltip:t.props.hideBroadcasterTooltip}),o.createElement("span",{className:"chat-line__username",onClick:t.openViewerCard,onKeyDown:t.openViewerCard,role:"button",tabIndex:0},o.createElement(f.a,{userData:a.user,highContrastUsernameColor:s,theme:r})))},t.alwaysShowMessage=function(e){e&&e.preventDefault(),t.setState({alwaysShowMessage:!0})},t.hiddenMessageClickHandler=function(e){t.alwaysShowMessage(e),t.props.message.user.userID&&t.props.onHiddenMessageClick(t.props.message.user.userID)},t.openViewerCard=function(e){t.isKeyboardEvent(e)&&e.keyCode!==d.a.Space&&e.keyCode!==d.a.Enter||t.props.onUsernameClick(t.props.message.user.userLogin,S.b.chat_message,t.props.message.id,e.currentTarget.getBoundingClientRect().bottom)},t}return Object(a.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.message,a=e.showTimestamps,s=e.theme,l=e.useHighContrastColors,d=e.isDeleted,u=e.isCurrentUserModerator,p=e.deletedMessageDisplay,h=e.deletedCount;if(d&&u&&p===m.qb.BRIEF)return h&&h>0?o.createElement(O.a,{className:"chat-line__status"},o.createElement(w.a,{type:w.e.Span,"data-a-target":D,"data-test-selector":i.ChatDeletedMessagePlaceholder},Object(c.d)("{numDeleted, plural, one {# message was deleted by a moderator.} other {# messages were deleted by a moderator.}}",{numDeleted:h},"ChatLine"))):null;var f={},g=": ";if(n.messageType===y.c.Action){var k=n.user.color;l&&k&&(k="#"+Object(b.a)(k,s)),f={color:k},g=" "}var S=null;return a&&(S=Object(v.l)(n.timestamp)),o.createElement("div",{className:r(t,"chat-line__message"),style:f,"data-a-target":"chat-line-message","data-test-selector":i.ChatLineMessage},S,this.renderMessageAuthor(),o.createElement("span",{key:"separator","aria-hidden":"true"},g),this.renderMessageBody())},t.prototype.isKeyboardEvent=function(e){return void 0!==e.keyCode},t}(o.Component);var M=Object(l.d)(Object(s.b)(void 0,(function(e){return Object(l.b)({onHiddenMessageClick:h.P},e)})),Object(k.b)((function(e){return{onUsernameClick:e.onShowViewerCard,onEmoteClick:e.onShowEmoteCard}})))(I)},XBQy:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"pointCustomizationFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"channel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"communityPointsSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"pointsImageFragment"},directives:[]}]}}]}}]}}]}}],loc:{start:0,end:206}};i.loc.source={body:'#import "twilight/features/community-points/models/points-image-fragment.gql"\nfragment pointCustomizationFragment on User {\nchannel {\nid\ncommunityPointsSettings {\nname\nimage {\n...pointsImageFragment\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("r+cx").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)}))),e.exports=i},XIEs:function(e,t,n){"use strict";function i(e){return{"1x":e.url,"2x":e.url2x,"4x":e.url4x}}n.d(t,"a",(function(){return i}))},XIZb:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("mrSG"),a=n("q1tI"),r=n("4rCz"),o=n("1rIY");function s(e){var t=Object(o.a)(e,{setServiceAPI:function(){r.l.warn("The "+e+" chat service attempted to register its API without a provider.")}}),n=t.context,s=t.withContext;return{context:n,withChatServiceManager:function(e){return function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={},e.setServiceAPI=function(t){e.setState({serviceAPI:t})},e}return Object(i.__extends)(r,t),r.prototype.render=function(){return a.createElement(n.Provider,{value:{serviceAPI:this.state.serviceAPI,setServiceAPI:this.setServiceAPI}},a.createElement(e,Object(i.__assign)({},this.props)))},r}(a.Component)},withContext:s}}},XQnt:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"EmotePicker_SubUpsell_PriceInfo"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionProducts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"emotePickerSubUpsellPriceInfoSubscriptionProduct"},directives:[]}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"emotePickerSubUpsellPriceInfoSubscriptionProduct"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SubscriptionProduct"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"emotePickerUserSubscriptionProduct"},directives:[]},{kind:"Field",name:{kind:"Name",value:"priceInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"subscriptionProductPriceInfo"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"promotion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"emotePickerSubUpsellPromotionInfo"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paidUpgradePromotion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"emotePickerSubUpsellPromotionInfo"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"promotion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"emotePickerSubUpsellPromotionInfo"},directives:[]}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"emotePickerSubUpsellPromotionInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SubscriptionPromotion"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"newPrice"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"oldPrice"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discountType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discountValue"},arguments:[],directives:[]}]}}],loc:{start:0,end:819}};i.loc.source={body:'#import "twilight/features/emote-picker/components/emote-picker-menu/user-subscription-product-fragment.gql"\n#import "twilight/features/subscribe-button/models/subscription-product-price-info.gql"\nquery EmotePicker_SubUpsell_PriceInfo($channelID: ID!) {\nuser(id: $channelID) {\nid\nsubscriptionProducts {\n...emotePickerSubUpsellPriceInfoSubscriptionProduct\n}\n}\n}\nfragment emotePickerSubUpsellPriceInfoSubscriptionProduct on SubscriptionProduct {\n...emotePickerUserSubscriptionProduct\npriceInfo {\n...subscriptionProductPriceInfo\n}\npromotion {\n...emotePickerSubUpsellPromotionInfo\n}\nself {\npaidUpgradePromotion {\n...emotePickerSubUpsellPromotionInfo\n}\npromotion {\n...emotePickerSubUpsellPromotionInfo\n}\n}\n}\nfragment emotePickerSubUpsellPromotionInfo on SubscriptionPromotion {\nnewPrice\noldPrice\ndiscountType\ndiscountValue\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)}))}i.definitions=i.definitions.concat(r(n("ZhU4").definitions)),i.definitions=i.definitions.concat(r(n("35qb").definitions));var o={};function s(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),o[e.name.value]=t}})),e.exports=i,e.exports.EmotePicker_SubUpsell_PriceInfo=function(e,t){var n={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=o[t]||new Set,a=new Set,r=new Set;for(i.forEach((function(e){r.add(e)}));r.size>0;){var l=r;r=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(o[e]||new Set).forEach((function(e){r.add(e)})))}))}return a.forEach((function(t){var i=s(e,t);i&&n.definitions.push(i)})),n}(i,"EmotePicker_SubUpsell_PriceInfo")},XRPh:function(e,t,n){"use strict";var i=n("/MKj"),a=n("fvjX"),r=n("kRBY"),o=n("fezU"),s=n("mrSG"),l=n("q1tI"),c=n("/7QA"),d=n("D7An"),u=n("j0ar"),m="emote_card",p="emote_card_whitelist";var h=n("oK83"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.emoteClickHandler=function(e){t.props.emote.emoteID&&t.props.onEmoteClick({channelID:t.props.channelID||"",channelLogin:t.props.channelLogin||"",emoteID:t.props.emote.emoteID,emoteCode:t.props.emote.alt||"",sourceID:t.props.sourceID||"",emoteSourceType:t.props.sourceType?t.props.sourceType:h.a.unknown,referrerID:t.props.referrerID||"",initialTopOffset:e.currentTarget.getBoundingClientRect().bottom})},t}return Object(s.__extends)(t,e),t.prototype.render=function(){var e,t,n=this.props.emote.alt||"";return this.props.emote.cheerAmount&&(n+=" "+this.props.emote.cheerAmount.toString(),e=l.createElement("strong",{className:"chat-line__message--cheer-amount",style:{color:this.props.emote.cheerColor}},this.props.emote.cheerAmount)),t=l.createElement(u.a,{alt:n,cheerText:e,className:"chat-line__message--emote",srcKey:"1x",srcSet:this.props.emote.images}),this.props.emote.cheerAmount||this.props.disableCard||!function(e){var t=c.b.get(m,"off");if("on"===t)return!0;if("staff"===t&&e&&e.roles&&e.roles.isStaff)return!0;var n=c.b.get(p,[]);return!!("whitelist"===t&&e&&e.id&&n.includes(e.id))}(this.props.user)||"treatment"!==c.p.experiments.getAndTrackAssignment(d.c.EmoteCard)?t:l.createElement("div",{onClick:this.emoteClickHandler,className:"chat-line__message--emote-button","data-test-selector":"emote-button"},t)},t}(l.Component);var g=Object(a.d)(Object(i.b)((function(e){return{user:Object(r.e)(e)}})),Object(o.b)((function(e){return{onEmoteClick:e.onShowEmoteCard}})))(f);g.displayName="Emote",n.d(t,"a",(function(){return g}))},XXm5:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var i="vod-message",a="mod-dashboard",r="mod-comment"},XeJ1:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("nxZp"),a=n("ehEd"),r={normalizeRecord:function(e){return new i.a({id:e._id,name:e.name,logo:new URL(e.logo||a.a),bio:e.bio,createdAt:new Date(e.created_at),displayName:e.display_name,type:e.type,updatedAt:new Date(e.updated_at)})},serializeRecord:function(e){return{_id:e.id,name:e.name,logo:e.logo.toString(),bio:e.bio,created_at:e.createdAt.toISOString(),display_name:e.displayName,type:e.type,updated_at:e.updatedAt.toISOString()}}}},"Y/1R":function(e,t,n){"use strict";var i,a=n("mrSG"),r=n("q1tI"),o=n("/7QA"),s=n("DMoW"),l=n("IArS"),c=n("/MKj"),d=n("fvjX"),u=n("fezU"),m=n("5zC2"),p=n("k8pZ"),h=n("uIkQ"),f=n("cys1"),g=n("fxMP"),v=n("sUnt"),b=n("+80q");!function(e){e.Timestamp="extension-message-timestamp",e.ExtensionName="extension-message-name"}(i||(i={}));var k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onExtensionNameClick=function(e){var n=t.props.message;t.props.onExtensionNameClick(n.extension.clientID,n.extension.version,n.id,e.currentTarget.getBoundingClientRect().bottom)},t}return Object(a.__extends)(t,e),t.prototype.render=function(){if(!this.props.installedExtensions)return null;var e=this.props.message;if(!this.props.installedExtensions.some((function(t){var n=t.extension;return n.clientId===e.extension.clientID&&n.version===e.extension.version})))return null;var t=this.props.message.extension.displayBadges;return r.createElement(v.a,{padding:{x:2,y:.5}},r.createElement("div",{id:this.props.message.id,className:"room-message"},this.renderTimestamp(),r.createElement(h.b,{badgeSets:this.props.badgeSets,badgesToRender:t}),this.renderMessageAuthor(this.props.message.extension),r.createElement("span",null,": "),this.renderMessageBody()))},t.prototype.renderTimestamp=function(){return this.props.showTimestamps?r.createElement("span",{key:"timestamp",className:"room-message__timestamp","data-test-selector":i.Timestamp},Object(f.a)(new Date(this.props.message.sentAt))):null},t.prototype.renderMessageBody=function(){var e=Object(g.f)(this.props.message);return Object(f.f)(e,{forceClipsNetworkRequest:!0})},t.prototype.renderMessageAuthor=function(e){return r.createElement("button",{onClick:this.onExtensionNameClick,"data-test-selector":i.ExtensionName},r.createElement("span",{key:e.clientID+"-"+e.version+"-messageauthor"},r.createElement("span",{key:"username-display",style:{color:e.chatColor}},r.createElement(b.a,{bold:!0},e.displayName))))},t}(r.Component);var y=Object(d.d)(Object(c.b)((function(e,t){return{installedExtensions:t.channelID?Object(p.a)(e,t.channelID):null}})),Object(u.b)((function(e){return{onExtensionNameClick:e.onShowExtensionMessageCard}})),Object(m.c)({name:"extensionsForChannel",skip:function(e){return!e.channelID||!!e.installedExtensions},options:function(e){return{variables:{channelID:e.channelID||""}}}}))(k),S=n("KGti"),C=n("ZtEv"),E=n("0WFu"),w=n("hnjF"),O=n("X2PJ"),D=n("QVaV"),N=n("8SX2"),_=n("oK83"),I=n("Ws8v"),M=n("7uM4"),j=n("C7sF"),T=function(e){var t=e.event,n=t.promoGiftTotal,i=t.promoName,a=t.user,s=r.createElement(N.a,{contentID:a.id,login:a.username,sourceType:_.b.chat_message},Object(D.a)(a.username,a.displayName)),l=i&&n?Object(o.d)("{recipientButton} is continuing the Gift Sub they got from an anonymous gifter!        They're one of {promoGiftTotal} gift subs to continue this {promoName}.",{promoGiftTotal:n,promoName:i,recipientButton:s},"AnonGiftPaidUpgradeNoticeLine"):Object(o.d)("{recipientButton} is continuing the Gift Sub they got from an anonymous gifter!",{recipientButton:s},"AnonGiftPaidUpgradeNoticeLine");return r.createElement(v.a,{alignItems:w.b.Start,display:w.d.Flex},r.createElement(I.a,{color:O.c.Alt2,display:w.d.Flex,flexDirection:w.e.Column,flexShrink:0,margin:{right:.5}},r.createElement(M.a,{asset:j.a.Ghost})),r.createElement(b.a,{color:O.c.Alt2,type:b.e.Span},l))};T.displayName="AnonGiftPaidUpgradeNoticeLine";var P=function(e){var t=e.event,n=r.createElement(N.a,{contentID:t.recipientID,login:t.recipientLogin,sourceType:_.b.chat_message},Object(D.a)(t.recipientLogin,t.recipientDisplayName));return r.createElement(v.a,{alignItems:w.b.Start,display:w.d.Flex},r.createElement(I.a,{color:O.c.Alt2,display:w.d.Flex,flexDirection:w.e.Column,flexShrink:0,margin:{right:.5}},r.createElement(M.a,{asset:j.a.Ghost})),r.createElement(b.a,{color:O.c.Alt2,type:b.e.Span},function(e,t){return"custom"===e.plan?Object(o.d)("An anonymous gifter gave {recipientButton} a Sub!",{recipientButton:t},"AnonSubGiftNoticeLine"):Object(o.d)("An anonymous gifter gave {recipientButton} a Tier {tierNumber} Sub!",{recipientButton:t,tierNumber:Object(E.c)(e.plan)||1},"AnonSubGiftNoticeLine")}(t.methods,n)))};P.displayName="AnonSubGiftNoticeLine";var L=function(e){var t=e.event,n=t.channel,i=t.massGiftCount,a=t.plan,s="custom"===a?Object(o.d)("{massGiftCount, plural,        one {An anonymous gifter is gifting {massGiftCount} Sub to {channel}'s community!}        other {An anonymous gifter is gifting {massGiftCount} Subs to {channel}'s community!}}",{channel:n,massGiftCount:i},"AnonSubMysteryGiftNoticeLine"):Object(o.d)("{massGiftCount, plural,        one {An anonymous gifter is gifting {massGiftCount} Tier {tierNumber} Sub to {channel}'s community!}        other {An anonymous gifter is gifting {massGiftCount} Tier {tierNumber} Subs to {channel}'s community!}}",{channel:n,massGiftCount:i,tierNumber:Object(E.c)(a)||1},"AnonSubMysteryGiftNoticeLine");return r.createElement(v.a,{alignItems:w.b.Start,display:w.d.Flex},r.createElement(I.a,{color:O.c.Alt2,display:w.d.Flex,flexDirection:w.e.Column,flexShrink:0,margin:{right:.5}},r.createElement(M.a,{asset:j.a.Ghost})),r.createElement(b.a,{color:O.c.Alt2,type:b.e.Span},s))};L.displayName="AnonSubMysteryGiftNoticeLine";var R=n("xZ3y"),F=function(e){var t=e.event.threshold,n=e.badgeSets.getBadge(R.a,t.toString()),i=Object(o.d)("{text} Bits badge!",{text:Object(R.b)(n,t)},"BitsBadgeTierNotification");return r.createElement(v.a,{display:w.d.Flex},r.createElement(M.a,{height:20,width:20,asset:j.a.Bits,type:M.b.Alt2}),r.createElement(I.a,{color:O.c.Alt2,padding:{left:.5},display:w.d.Inline},Object(o.d)("{userLogin} just earned a new <x:bold>{boldedBadgeText}</x:bold>",{userLogin:r.createElement(N.a,{contentID:e.event.user.id,login:e.event.user.username,sourceType:_.b.chat_message},Object(D.a)(e.event.user.userID,e.event.user.displayName)),boldedBadgeText:i,"x:bold":function(e){return r.createElement(b.a,{color:O.c.Base,bold:!0,type:b.e.Span},e)}},"BitsBadgeTierNotification")))};F.displayName="BitsBadgeTierNoticeLine";var U,x=n("Jsra"),A="https://www.twitch.tv/settings/connections";!function(e){e.Kickback="msg_blizzard",e.Enabled="blizzard_connect_on",e.Disabled="blizzard_connect_off",e.AlreadyEnabled="already_blizzard_mode_on",e.AlreadyDisabled="already_blizzard_mode_off"}(U||(U={}));var B=function(e){var t=null;switch(e.type){case U.Kickback:var n=r.createElement(x.a,{targetBlank:!0,to:A},A);t=Object(o.d)("You must connect your Blizzard account to send messages in this room. You can connect your Blizzard account in your Twitch settings at {settingsLink}",{settingsLink:n},"BlizzardConnectModeNoticeLine");break;case U.Enabled:t=Object(o.d)("This room now requires a Blizzard account connection to chat.","BlizzardConnectModeNoticeLine");break;case U.Disabled:t=Object(o.d)("This room no longer requires a Blizzard account connection to chat.","BlizzardConnectModeNoticeLine");break;case U.AlreadyEnabled:t=Object(o.d)("This room already requires a Blizzard account connection to chat.","BlizzardConnectModeNoticeLine");break;case U.AlreadyDisabled:t=Object(o.d)("This room does not require a Blizzard account connection to chat.","BlizzardConnectModeNoticeLine");break;default:return null}return r.createElement(v.a,null,t)};B.displayName="BlizzardConnectNoticeLine";var V=n("wUQP"),H=n("4rCz"),q=n("tiJ6"),G=n("A4KW"),W=n("YV90"),z=n("m7Uh"),Q=n("PkcC"),Y=(n("ZhMv"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.render=function(){var e=Object(V.c)("dashboard_settings_color_form");if(!this.props.event.reward||!this.props.isChannelPointsFeatureFlagOn)return this.props.children?r.createElement(r.Fragment,null,this.props.children):null;var t=Object(H.d)("{user} redeemed {reward}",{user:this.props.event.displayName,reward:this.props.event.reward.name},"ChannelPointsRewardLine");this.props.children&&(t=Object(H.d)("Redeemed {reward}",{reward:this.props.event.reward.name},"ChannelPointsRewardLine"));var n=this.props.children;if(this.props.children){var i=r.Children.only(this.props.children);n=r.cloneElement(i,{className:"chat-line--inline",isHighlighted:this.props.event.reward.isHighlighted})}return r.createElement(Q.a,{inputColorHex:e&&this.props.primaryColorHex&&Object(z.b)("#"+this.props.primaryColorHex)?"#"+this.props.primaryColorHex:null},r.createElement(v.a,{className:"channel-points-reward-line",margin:{y:.5},padding:{right:2,y:.5}},r.createElement(I.a,{color:O.c.Alt2,display:w.d.InlineFlex,flexWrap:w.f.Wrap},t,r.createElement(v.a,{display:w.d.InlineBlock,margin:{x:.5}},r.createElement(G.b,null)),Object(H.f)(this.props.event.reward.cost)),n&&r.createElement(v.a,{margin:{top:.5}},n)))},t}(r.Component));var $=Object(d.d)(Object(q.b)((function(e){return{primaryColorHex:e.primaryColorHex}})),Object(W.a)((function(e){return{isChannelPointsFeatureFlagOn:e.isChannelPointsFeatureFlagOn,pointIcon:e.pointIcon,rewardMap:e.rewardMap}})))(Y),K=function(e){var t=r.createElement(I.a,{display:w.d.Block},r.createElement(N.a,{contentID:e.event.user.id,login:e.event.user.username,sourceType:_.b.chat_message},r.createElement(b.a,{color:O.c.Link},Object(D.a)(e.event.user.username,e.event.user.displayName)))),n=new Date;n.setDate(1),n.setMonth(parseInt(e.event.benefitEndMonth,10)-1);var i=Object(o.d)("{userLogin} <x:strong> Extended </x:strong> their Tier 1 subscription through {benefitEndMonth}!",{userLogin:t,benefitEndMonth:Object(o.c)(n,{month:"long"}),"x:strong":function(e){return r.createElement(b.a,{bold:!0,type:b.e.Span},e)}},"ExtendSubscriptionNoticeLine");return r.createElement(v.a,{display:w.d.Flex},r.createElement(I.a,{color:O.c.Alt2},r.createElement(M.a,{asset:j.a.Star})),r.createElement(v.a,{margin:{left:.5}},r.createElement(b.a,null,i)))};K.displayName="ExtendSubscriptionNoticeLine";var X=function(e){return r.createElement(I.a,{color:O.c.Alt2,display:w.d.Inline},Object(o.d)("{userLogin} just made their first cheer!",{userLogin:r.createElement(N.a,{contentID:e.event.message.id,login:e.event.message.user.userLogin,sourceType:_.b.chat_message},Object(D.a)(e.event.message.user.userLogin,e.event.message.user.userDisplayName))},"FirstCheerNoticeLine"))};X.displayName="FirstCheerNoticeLine";var J=function(e){var t=e.event,n=r.createElement(N.a,{contentID:t.user.id,login:t.user.username,sourceType:_.b.chat_message},Object(D.a)(t.user.username,t.user.displayName)),i=r.createElement(N.a,{contentID:t.user.id,login:t.senderLogin,sourceType:_.b.chat_message},Object(D.a)(t.senderLogin,t.senderName));return r.createElement(b.a,{color:O.c.Alt2,type:b.e.Span},t.promoName&&t.promoGiftTotal?Object(o.d)("{recipientButton} is continuing the Gift Sub they got from {gifterButton}!            They're one of {promoGiftTotal} gift subs to continue this {promoName}.",{gifterButton:i,promoGiftTotal:t.promoGiftTotal,promoName:t.promoName,recipientButton:n},"GiftPaidUpgradeNoticeLine"):Object(o.d)("{recipientButton} is continuing the Gift Sub they got from {gifterButton}!",{gifterButton:i,recipientButton:n},"GiftPaidUpgradeNoticeLine"))};J.displayName="GiftPaidUpgradeNoticeLine";var Z;n("OBzG");!function(e){e[e.MOD_ICONS=0]="MOD_ICONS",e[e.MESSAGE=1]="MESSAGE"}(Z||(Z={}));var ee=function(e){var t=e.event,n=e.moderationIcons;return r.createElement(I.a,{className:"gift-pay-forward-line",color:O.c.Alt2,margin:{y:.5},padding:{right:2,y:.5}},n&&r.createElement(v.a,{"data-test-selector":Z.MOD_ICONS},n),r.createElement(v.a,{"data-test-selector":Z.MESSAGE},function(e){var t=e.user.displayName,n=e.priorGifter.displayName;if(e.type===C.b.CommunityPayForward)return e.priorGifter.anonymous?Object(H.d)("{sender} is paying forward the Gift they got from an anonymous gifter to the community!",{sender:t},"GiftPayForwardLine"):Object(H.d)("{sender} is paying forward the Gift they got from {priorGifter} to the community!",{sender:t,priorGifter:n},"GiftPayForwardLine");var i=e.recipient.displayName;return e.priorGifter.anonymous?Object(H.d)("{sender} is paying forward the Gift they got from an anonymous gifter to {recipient}!",{sender:t,recipient:i},"GiftPayForwardLine"):Object(H.d)("{sender} is paying forward the Gift they got from {priorGifter} to {recipient}!",{sender:t,priorGifter:n,recipient:i},"GiftPayForwardLine")}(t)))};ee.displayName="GiftPayForwardLine";var te=n("yR8l"),ne=n("HH5h"),ie=n("OvAg"),ae=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.render=function(){var e=this.props.message.params,t=this.props.data,n=t.channel,i=t.loading,a=t.error;if(i||a||!n||!n.displayName)return null;var s=Object(o.d)("{displayName} is raiding with a party of {viewerCount}.",{displayName:r.createElement("strong",null,n.displayName),viewerCount:r.createElement("strong",null,e.viewerCount)},"RaidIncomingMessage");return r.createElement(v.a,{display:w.d.Flex,alignItems:w.b.Center},r.createElement(ne.a,{alt:n.displayName,src:n.profileImageURL,userLogin:n.login,size:30}),r.createElement(I.a,{color:O.c.Base,margin:{left:1}},s))},t}(r.Component),re=Object(te.a)(ie,{options:function(e){return{variables:{channelLogin:e.message.params.login}}}})(ae),oe=n("u5aL"),se=n("dsMP"),le=n("amaQ"),ce=n("RS58"),de=n("7d/q"),ue=n("k0nM"),me=n("ygYM"),pe=n("dEDE"),he=(n("T84l"),function(e){function t(t){var n=e.call(this,t)||this;return n.state={contextMenuOpen:!1,hideCTA:!1,isHidden:!1},n.toggleContextMenu=function(){var e=n.state.contextMenuOpen;n.setState({contextMenuOpen:!e})},n.onContextMenuClickout=function(){n.setState({contextMenuOpen:!1})},n.hideOnContextMenuAction=function(e){if(void 0!==e)return function(){e(),n.setState({isHidden:!0})}},n.actionClick=n.actionClick.bind(n),n.showCTA=n.showCTA.bind(n),n}return Object(a.__extends)(t,e),t.prototype.render=function(){if(this.state.isHidden)return null;var e=this.props.event.callout,t=void 0===this.props.messageIndex||this.props.messageIndex<6;return r.createElement(I.a,{border:!0,background:O.a.Alt,borderRadius:O.b.Medium,margin:{x:2,y:.5}},r.createElement(v.a,{display:w.d.Flex,flexDirection:w.e.Row,alignItems:w.b.Center,className:"inline-private-callout-line__header"},r.createElement(M.a,{asset:j.a.Lock,width:14,height:14}),r.createElement(v.a,{padding:{left:.5}},r.createElement(b.a,{color:O.c.Alt2}," ",Object(o.d)("Only visible to you","InlineChatPrivateCallout")," "))),r.createElement(I.a,{display:w.d.Flex,alignItems:w.b.Center,padding:1,borderTop:!0},e.icon&&r.createElement(I.a,{className:"inline-private-callout-line__icon",margin:{right:1},padding:e.hideIconBackground?void 0:.5,display:w.d.Flex,flexGrow:0,flexShrink:0,alignItems:w.b.Center,justifyContent:w.h.Center,background:e.hideIconBackground?void 0:O.a.Base,borderRadius:O.b.Rounded,border:!e.hideIconBackground},e.icon),r.createElement(v.a,{flexGrow:1,padding:{right:1}},r.createElement(b.a,{color:O.c.Base,bold:!0,type:b.e.Span},e.title)),e.cta&&this.renderButton(e),e.contextMenuProps&&r.createElement(I.a,{color:O.c.Base,position:w.j.Relative,padding:{top:.5,bottom:1,x:.5}},r.createElement(oe.a,{onClickOut:this.onContextMenuClickout},r.createElement(de.a,{icon:j.a.More,onClick:this.toggleContextMenu,ariaLabel:"more options"}),r.createElement(ue.a,{show:this.state.contextMenuOpen,direction:t?me.b.BottomRight:me.b.TopRight,offsetX:"12px"},r.createElement(se.a,{event:e.contextMenuProps.event,onPin:this.hideOnContextMenuAction(e.contextMenuProps.onPin),onHide:this.hideOnContextMenuAction(e.contextMenuProps.onHide),onSkip:this.hideOnContextMenuAction(e.contextMenuProps.onSkip)}))))),e.withReminderText&&r.createElement(I.a,{borderTop:!0,background:O.a.Base,padding:{left:1}},r.createElement(b.a,{color:O.c.Alt2,type:b.e.Span},Object(o.d)("You will be reminded later","InlinePrivateCallout"))))},t.prototype.renderButton=function(e){var t;return e.action?t=e.action:this.props.event.tray&&(t=this.actionClick),t?r.createElement(I.a,{visibility:this.state.hideCTA?w.n.Hidden:w.n.Visible},r.createElement(pe.a,{onClick:t,size:pe.b.Small,children:e.cta})):null},t.prototype.actionClick=function(){if(this.props.event.tray){var e=this.props.event.tray;e.callOnClose=this.showCTA,e.sendMessageHandler&&e.sendMessageHandler.params&&(e.sendMessageHandler.params.privateCalloutTrackingContext=le.c.Chat),this.props.setTray(e),this.setState({hideCTA:!0}),Object(le.f)({userID:this.props.currentUserID,userLogin:this.props.currentUserLogin,channelID:this.props.channelID,channelLogin:this.props.channelLogin,calloutType:this.props.event.callout.trackingType,privateCalloutSID:this.props.event.callout.privateSID,clickType:this.props.event.callout.trackingClickType,uiContext:le.c.Chat})}},t.prototype.showCTA=function(){this.setState({hideCTA:!1})},t}(r.Component));var fe=Object(d.d)(Object(ce.b)((function(e){return{setTray:function(t){return e.setTray(t)}}})))(he),ge=n("5zf8"),ve=n("x0+1"),be=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.render=function(){var e=this.props.moderationActionEvent,t=e.createdByLogin,n=null;if(e.moderationActionType===C.d.AutoModEnabled)n=Object(o.d)("AutoMod has been enabled for this channel.","ModerationActionLine");else if(e.level===S.a.Channel)switch(e.moderationActionType){case C.d.Clear:n=Object(o.d)("{user} cleared chat for this room.",{user:t},"ModerationActionLine");break;case C.d.EmoteOnly:n=Object(o.d)("{user} enabled emote-only mode for this room.",{user:t},"ModerationActionLine");break;case C.d.EmoteOnlyOff:n=Object(o.d)("{user} disabled emote-only for this room.",{user:t},"ModerationActionLine");break;case C.d.FollowersOnly:var i=(e.args||[""]).join(" ").trim(),a=parseInt(i,10);n=a?Object(o.d)("{user} enabled {length} followers-only mode for this room.",{user:t,length:Object(ge.b)(60*a)},"ModerationActionLine"):Object(o.d)("{user} enabled followers-only mode for this room.",{user:t},"ModerationActionLine");break;case C.d.FollowersOnlyOff:n=Object(o.d)("{user} disabled followers-only mode for this room.",{user:t},"ModerationActionLine");break;case C.d.R9kBeta:n=Object(o.d)("{user} enabled unique-chat mode for this room.",{user:t},"ModerationActionLine");break;case C.d.R9kBetaOff:n=Object(o.d)("{user} disabled unique-chat mode for this room.",{user:t},"ModerationActionLine");break;case C.d.Slow:var s=(e.args||["30"]).join(" ").trim(),l=parseInt(s,10);n=Object(o.d)("{user} enabled {slowTime}-second slow mode for this room.",{user:t,slowTime:l},"ModerationActionLine");break;case C.d.SlowOff:n=Object(o.d)("{user} disabled slow mode for this room.",{user:t},"ModerationActionLine");break;case C.d.SubscribersOnly:n=Object(o.d)("{user} enabled subscribers-only mode for this room.",{user:t},"ModerationActionLine");break;case C.d.SubscribersOnlyOff:n=Object(o.d)("{user} disabled subscribers-only mode for this room.",{user:t},"ModerationActionLine");break;default:var c=e.args&&e.args.join(" ").trim(),d=c&&c.length>0?"/"+e.moderationActionType+" "+c:""+e.moderationActionType;n=Object(o.d)("{user} used: {command}.",{user:e.createdByLogin,command:d},"ModerationActionLine")}else{var u=e.targetUserLogin,m=e.duration,p=e.reason,h=e.messageBody;switch(e.moderationActionType){case C.d.Timeout:n=e.level===S.a.User&&this.props.currentUserLogin&&u===this.props.currentUserLogin?m&&p?Object(o.d)("You were timed out for {duration} seconds. Reason: {reason}.",{duration:m,reason:p},"ModerationActionLine"):m?Object(o.d)("You were timed out for {duration} seconds.",{duration:m},"ModerationActionLine"):p?Object(o.d)("You were timed out. Reason: {reason}.",{reason:p},"ModerationActionLine"):Object(o.d)("You were timed out.","ModerationActionLine"):m&&p?Object(o.d)("{user} timed out {target} for {duration} seconds. Reason: {reason}.",{user:t,target:u,duration:m,reason:p},"ModerationActionLine"):m?Object(o.d)("{user} timed out {target} for {duration} seconds.",{user:t,target:u,duration:m},"ModerationActionLine"):Object(o.d)("{user} timed out {target}.",{user:t,target:u},"ModerationActionLine");break;case C.d.Ban:n=!t&&p?Object(o.d)("You were banned. Reason: {reason}.",{reason:p},"ModerationActionLine"):t?p?Object(o.d)("{user} banned {target}. Reason: {reason}.",{user:t,target:u,reason:p},"ModerationActionLine"):Object(o.d)("{user} banned {target}.",{user:t,target:u},"ModerationActionLine"):Object(o.d)("You were banned.","ModerationActionLine");break;case C.d.Untimeout:n=Object(o.d)("{user} removed time out on {target}.",{user:t,target:u},"ModerationActionLine");break;case C.d.Unban:n=Object(o.d)("{user} removed ban on {target}.",{user:t,target:u},"ModerationActionLine");break;case C.d.Mod:n=Object(o.d)("{user} granted moderator privileges to {target}.",{user:t,target:u},"ModerationActionLine");break;case C.d.Unmod:n=Object(o.d)("{user} removed moderator privileges for {target}.",{user:t,target:u},"ModerationActionLine");break;case C.d.Delete:var f=h||"";n=r.createElement(ve.a,{targetLogin:u,moderatorLogin:t,messageBody:f});break;default:return null}}return n?r.createElement(v.a,{className:"chat-line__status","data-a-target":"moderation-action"},r.createElement(b.a,{type:b.e.Span},n)):null},t}(r.Component),ke=function(e){var t=Object(o.d)("{receiver} received a {giftName} from the Community Gift Chest, courtesy of {sender}!",{receiver:r.createElement(b.a,{bold:!0,type:b.e.Span},e.event.receiver),giftName:e.event.giftName,sender:r.createElement(b.a,{bold:!0,type:b.e.Span},e.event.sender)},"PrimeCommunityGiftReceivedNoticeLine");return r.createElement(v.a,{display:w.d.Flex},r.createElement(v.a,{margin:{left:.5}},r.createElement(b.a,null,t)))};ke.displayName="PrimePaidUpgradeNoticeLine";var ye=n("3Bft"),Se=n("JbWT"),Ce=function(e){var t=r.createElement(I.a,{display:w.d.Block},r.createElement(N.a,{contentID:e.event.user.id,login:e.event.user.username,sourceType:_.b.chat_message},r.createElement(b.a,{color:O.c.Link},Object(D.a)(e.event.user.username,e.event.user.displayName)))),n=null;return n=e.event.plan===ye.a.Custom?Object(o.d)("{userLogin} <x:strong>Converted</x:strong> from a <x:twitch-prime-link>Twitch Prime</x:twitch-prime-link> sub to a Paid sub!",{userLogin:t,"x:strong":function(e){return r.createElement(b.a,{bold:!0,type:b.e.Span},e)},"x:twitch-prime-link":function(t){return Ee(e.event.channel,"primetopaid",t)}},"PrimePaidUpgradeNoticeLine"):Object(o.d)("{userLogin} <x:strong>Converted</x:strong> from a <x:twitch-prime-link>Twitch Prime</x:twitch-prime-link> sub to a Tier {tierNumber} sub!",{tierNumber:Object(E.c)(e.event.plan)||1,userLogin:t,"x:strong":function(e){return r.createElement(b.a,{bold:!0,type:b.e.Span},e)},"x:twitch-prime-link":function(t){return Ee(e.event.channel,"primetopaid",t)}},"PrimePaidUpgradeNoticeLine"),r.createElement(v.a,{display:w.d.Flex},r.createElement(I.a,{color:O.c.Alt2},r.createElement(M.a,{asset:j.a.Star})),r.createElement(v.a,{margin:{left:.5}},r.createElement(b.a,null,n)))},Ee=function(e,t,n){return r.createElement(Se.a,{channel:e,reference:t,text:n})};function we(){return{raid_error_self:Object(o.d)("You cannot raid your own channel.","RaidErrorSelfMessage"),raid_error_forbidden:Object(o.d)("You cannot raid this channel.","RaidErrorAlreadyRaidingMessage"),raid_error_already_raiding:Object(o.d)("You already have a raid in progress.","RaidErrorForbiddenMessage"),raid_error_too_many_viewers_to_raid:Object(o.d)("Sorry, raids can only support up to 20,000 viewers right now.","RaidErrorTooManyViewersMessage"),raid_error_unexpected:Object(o.d)("There was a problem starting the raid. Please try again in a minute.","RaidErrorUnexpectedMessage"),unraid_error_unexpected:Object(o.d)("There was a problem stopping the raid. Please try again in a minute.","UnraidErrorUnexpectedMessage"),unraid_error_no_active_raid:Object(o.d)("You do not have an active raid.","UnraidErrorNoActiveRaidMessage"),raid_notice_restricted_chat:Object(o.d)("This channel has follower or subscriber only chat.","RaidNoticeRestrictedChatMessage"),raid_notice_mature:Object(o.d)("This channel is intended for mature audiences.","RaidNoticeMatureMessage"),raid_notice_owner:Object(o.d)("This channel has started a raid, type {unraidCommand} if you want to cancel.",{unraidCommand:"/unraid"},"RaidNoticeOwnerMessage")}}Ce.displayName="PrimePaidUpgradeNoticeLine";var Oe=function(e){return r.createElement("span",null,we()[e.message.msgid])};Oe.displayName="RaidNoticeLine";var De=function(e){var t=r.createElement(I.a,{display:w.d.Block},r.createElement(N.a,{contentID:e.event.user.id,login:e.event.user.username,sourceType:_.b.chat_message},r.createElement(b.a,{color:O.c.Link},Object(D.a)(e.event.user.username,e.event.user.displayName)))),n=null;return n=e.event.methods.prime?e.event.cumulativeMonths<2?Object(o.d)("{userLogin} <x:strong>Subscribed</x:strong> with <x:twitch-prime-link>Twitch Prime</x:twitch-prime-link>",{userLogin:t,"x:strong":function(e){return r.createElement(b.a,{bold:!0,type:b.e.Span},e)},"x:twitch-prime-link":function(t){return Ne(e.event.channel,"resubscription",t)}},"ResubNoticeV2Line"):e.event.shouldShareStreakTenure&&void 0!==e.event.streakMonths&&e.event.streakMonths>0?Object(o.d)("{userLogin} <x:strong>Subscribed</x:strong> with <x:twitch-prime-link>Twitch Prime</x:twitch-prime-link>. They've subscribed for <x:strong>{cumulative} months</x:strong>, currently on a {streak} month streak!",{cumulative:e.event.cumulativeMonths,streak:e.event.streakMonths||0,userLogin:t,"x:strong":function(e){return r.createElement(b.a,{bold:!0,type:b.e.Span},e)},"x:twitch-prime-link":function(t){return Ne(e.event.channel,"resubscription",t)}},"ResubNoticeV2Line"):Object(o.d)("{userLogin} <x:strong>Subscribed</x:strong> with <x:twitch-prime-link>Twitch Prime</x:twitch-prime-link>. They've subscribed for <x:strong>{cumulative} months</x:strong>!",{cumulative:e.event.cumulativeMonths,userLogin:t,"x:strong":function(e){return r.createElement(b.a,{bold:!0,type:b.e.Span},e)},"x:twitch-prime-link":function(t){return Ne(e.event.channel,"resubscription",t)}},"ResubNoticeV2Line"):e.event.methods.plan!==ye.a.Custom?e.event.cumulativeMonths<2?Object(o.d)("{userLogin} <x:strong>Subscribed</x:strong> at Tier {tierNumber}.",{tierNumber:Object(E.c)(e.event.methods.plan)||1,userLogin:t,"x:strong":function(e){return r.createElement(b.a,{bold:!0,type:b.e.Span},e)}},"ResubNoticeV2Line"):e.event.shouldShareStreakTenure&&void 0!==e.event.streakMonths&&e.event.streakMonths>0?Object(o.d)("{userLogin} <x:strong>Subscribed</x:strong> at Tier {tierNumber}. They've subscribed for <x:strong>{cumulative} months</x:strong>, currently on a {streak} month streak!",{cumulative:e.event.cumulativeMonths,streak:e.event.streakMonths||0,tierNumber:Object(E.c)(e.event.methods.plan)||1,userLogin:t,"x:strong":function(e){return r.createElement(b.a,{bold:!0,type:b.e.Span},e)}},"ResubNoticeV2Line"):Object(o.d)("{userLogin} <x:strong>Subscribed</x:strong> at Tier {tierNumber}. They've subscribed for <x:strong>{cumulative} months</x:strong>!",{cumulative:e.event.cumulativeMonths,tierNumber:Object(E.c)(e.event.methods.plan)||1,userLogin:t,"x:strong":function(e){return r.createElement(b.a,{bold:!0,type:b.e.Span},e)}},"ResubNoticeV2Line"):e.event.cumulativeMonths<2?Object(o.d)("{userLogin} <x:strong>Subscribed</x:strong>.",{userLogin:t,"x:strong":function(e){return r.createElement(b.a,{bold:!0,type:b.e.Span},e)}},"ResubNoticeV2Line"):e.event.shouldShareStreakTenure&&void 0!==e.event.streakMonths&&e.event.streakMonths>0?Object(o.d)("{userLogin} <x:strong>Subscribed</x:strong> for <x:strong>{cumulative} months</x:strong>, currently on a {streak} month streak!",{cumulative:e.event.cumulativeMonths,streak:e.event.streakMonths||0,userLogin:t,"x:strong":function(e){return r.createElement(b.a,{bold:!0,type:b.e.Span},e)}},"ResubNoticeV2Line"):Object(o.d)("{userLogin} <x:strong>Subscribed</x:strong> for <x:strong>{cumulative} months</x:strong>!",{cumulative:e.event.cumulativeMonths,userLogin:t,"x:strong":function(e){return r.createElement(b.a,{bold:!0,type:b.e.Span},e)}},"ResubNoticeV2Line"),r.createElement(v.a,{display:w.d.Flex},r.createElement(I.a,{color:O.c.Alt2},r.createElement(M.a,{asset:e.event.methods.prime?j.a.Crown:j.a.Star})),r.createElement(v.a,{margin:{left:.5}},r.createElement(b.a,null,n)))},Ne=function(e,t,n){return r.createElement(Se.a,{channel:e,reference:t,text:n})};De.displayName="ResubNoticeV2Line";var _e=n("yZCp"),Ie=function(e){var t=e.event.message,n=t.user.isIntl?t.user.userDisplayName+" ("+t.user.userLogin+")":t.user.userDisplayName,i=Object(o.d)("{user} is new here. Say hello!",{user:r.createElement(N.a,{contentID:t.id,login:t.user.userLogin,sourceType:_.b.chat_message},"@",n)},"NewChatterRitual");return r.createElement(I.a,{color:O.c.Alt2},i)};Ie.displayName="RitualNoticeLine";var Me=function(e){var t=e.event,n=r.createElement(N.a,{contentID:t.user.id,login:t.user.username,sourceType:_.b.chat_message},Object(D.a)(t.user.username,t.user.displayName)),i=r.createElement(N.a,{contentID:t.user.id,login:t.recipientLogin,sourceType:_.b.chat_message},Object(D.a)(t.recipientLogin,t.recipientDisplayName)),a=null;return a="custom"===t.methods.plan?function(e,t,n){return 1===n?Object(o.d)("{gifterButton} gifted a Sub to {recipientButton}! It's their first time gifting a Sub in the channel!",{gifterButton:e,recipientButton:t},"SubGiftNoticeLine"):n>1?Object(o.d)("{gifterButton} gifted a Sub to {recipientButton}! They've gifted {senderCount} Subs in the channel!",{gifterButton:e,recipientButton:t,senderCount:n},"SubGiftNoticeLine"):Object(o.d)("{gifterButton} gifted a subscription to {recipientButton}!",{gifterButton:e,recipientButton:t},"SubGiftNoticeLine")}(n,i,t.senderCount):function(e,t,n,i){return 1===n?Object(o.d)("{gifterButton} gifted a Tier {tierNumber} Sub to {recipientButton}! It's their first Gift Sub in the channel!",{gifterButton:e,recipientButton:t,tierNumber:i},"SubGiftNoticeLine"):n>1?Object(o.d)("{gifterButton} gifted a Tier {tierNumber} Sub to {recipientButton}! They've given {senderCount} Gift Subs in the channel!",{gifterButton:e,recipientButton:t,senderCount:n,tierNumber:i},"SubGiftNoticeLine"):Object(o.d)("{gifterButton} gifted a Tier {tierNumber} Sub to {recipientButton}!",{gifterButton:e,recipientButton:t,tierNumber:i},"SubGiftNoticeLine")}(n,i,t.senderCount,Object(E.c)(t.methods.plan)||1),r.createElement(b.a,{color:O.c.Alt2,type:b.e.Span},a)};Me.displayName="SubGiftNoticeLine";var je=function(e){var t=e.event,n=r.createElement(N.a,{contentID:t.user.id,login:t.user.username,sourceType:_.b.chat_message},Object(D.a)(t.user.username,t.user.displayName)),i=null;return i="custom"===t.plan?function(e,t,n,i){return 1===i?Object(o.d)("{massGiftCount, plural, one {{gifterButton} is gifting {massGiftCount} Sub to {channel}'s community. It's their first Gift Sub in the channel!} other {{gifterButton} is gifting {massGiftCount} Subs to {channel}'s community. It's their first Gift Sub in the channel!}}",{channel:t,gifterButton:e,massGiftCount:n},"SubMysteryGiftNoticeLine"):i>1?Object(o.d)("{massGiftCount, plural, one {{gifterButton} is gifting {massGiftCount} Sub to {channel}'s community. They've gifted a total of {senderCount} in the channel!} other {{gifterButton} is gifting {massGiftCount} Subs to {channel}'s community. They've gifted a total of {senderCount} in the channel!}}",{channel:t,gifterButton:e,massGiftCount:n,senderCount:i},"SubMysteryGiftNoticeLine"):Object(o.d)("{massGiftCount, plural, one {{gifterButton} is gifting {massGiftCount} Sub to {channel}'s community!} other {{gifterButton} is gifting {massGiftCount} Subs to {channel}'s community!}}",{channel:t,gifterButton:e,massGiftCount:n},"SubMysteryGiftNoticeLine")}(n,t.channel,t.massGiftCount,t.senderCount):function(e,t,n,i,a){return 1===i?Object(o.d)("{massGiftCount, plural, one {{gifterButton} is gifting {massGiftCount} Tier {tierNumber} Sub to {channel}'s community. It's their first Gift Sub in the channel!} other {{gifterButton} is gifting {massGiftCount} Tier {tierNumber} Subs to {channel}'s community. It's their first Gift Sub in the channel!}}",{channel:t,gifterButton:e,massGiftCount:n,tierNumber:a},"SubMysteryGiftNoticeLine"):i>1?Object(o.d)("{massGiftCount, plural, one {{gifterButton} is gifting {massGiftCount} Tier {tierNumber} Sub to {channel}'s community. They've gifted a total of {senderCount} in the channel!} other {{gifterButton} is gifting {massGiftCount} Tier {tierNumber} Subs to {channel}'s community. They've gifted a total of {senderCount} in the channel!}}",{channel:t,gifterButton:e,massGiftCount:n,senderCount:i,tierNumber:a},"SubMysteryGiftNoticeLine"):Object(o.d)("{massGiftCount, plural, one {{gifterButton} is gifting {massGiftCount} Tier {tierNumber} Sub to {channel}'s community!} other {{gifterButton} is gifting {massGiftCount} Tier {tierNumber} Subs to {channel}'s community!}}",{channel:t,gifterButton:e,massGiftCount:n,tierNumber:a},"SubMysteryGiftNoticeLine")}(n,t.channel,t.massGiftCount,t.senderCount,Object(E.c)(t.plan)||1),r.createElement(b.a,{color:O.c.Alt2,type:b.e.Span},i)};je.displayName="SubMysteryGiftNoticeLine";var Te=function(e){var t=r.createElement(I.a,{display:w.d.Block},r.createElement(N.a,{contentID:e.event.user.id,login:e.event.user.username,sourceType:_.b.chat_message},r.createElement(b.a,{color:O.c.Link},Object(D.a)(e.event.user.username,e.event.user.displayName)))),n=null;return n=e.event.methods.prime?Object(o.d)("{userLogin} <x:strong>Subscribed</x:strong> with <x:twitch-prime-link>Twitch Prime</x:twitch-prime-link>",{userLogin:t,"x:strong":function(e){return r.createElement(b.a,{bold:!0,type:b.e.Span},e)},"x:twitch-prime-link":function(t){return Pe(e.event.channel,"subscription",t)}},"SubNoticeV2Line"):e.event.methods.plan===ye.a.Custom?Object(o.d)("{userLogin} <x:strong>Subscribed</x:strong>",{userLogin:t,"x:strong":function(e){return r.createElement(b.a,{bold:!0,type:b.e.Span},e)}},"SubNoticeV2Line"):Object(o.d)("{userLogin} <x:strong>Subscribed</x:strong> at Tier {tierNumber}",{tierNumber:Object(E.c)(e.event.methods.plan)||1,userLogin:t,"x:strong":function(e){return r.createElement(b.a,{bold:!0,type:b.e.Span},e)}},"SubNoticeV2Line"),r.createElement(v.a,{display:w.d.Flex},r.createElement(I.a,{color:O.c.Alt2},r.createElement(M.a,{asset:e.event.methods.prime?j.a.Crown:j.a.Star})),r.createElement(v.a,{margin:{left:.5}},r.createElement(b.a,null,n)))},Pe=function(e,t,n){return r.createElement(Se.a,{channel:e,reference:t,text:n})};Te.displayName="SubNoticeV2Line";var Le=n("+kC+"),Re=n("cr+I"),Fe=Object(d.d)(Object(te.a)(Le,{options:function(e){return{variables:{login:e.channelLogin}}}}))((function(e){var t=e.data;if(t.loading)return null;var n=null;if(!t.error&&t.user&&t.user.subscriptionProducts&&t.user.subscriptionProducts.length>0){var i=t.user.subscriptionProducts.find((function(e){return!!e&&!!e.url}));i&&(n=i.url)}if(!n)return r.createElement(v.a,null,Object(o.d)("This room is in subscribers only mode.","SubsOnlyUpsellLine"));var a=r.createElement(x.a,{targetBlank:!0,to:n+"?"+Re.stringify({ref:"subscriber_only_mode_chat"})},n);return r.createElement(v.a,null,Object(o.d)("This room is in subscribers only mode. To talk, purchase a channel subscription at {productLink}",{productLink:a},"SubsOnlyUpsellLine"))})),Ue=n("0Log"),xe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.render=function(){var e=this.props.targetedModerationActionEvent,t=null;switch(e.targetedModerationActionType){case Ue.TargetedModerationActions.DeleteNotification:var n=e.messageBody||"";t=r.createElement(ve.a,{messageBody:n,targetIsCurrentUser:!0})}return t?r.createElement(v.a,{className:"chat-line__status"},r.createElement(b.a,{type:b.e.Span},t)):null},t}(r.Component),Ae=n("r7KY"),Be=n("X31c"),Ve=n("6wGa"),He=(n("NWfm"),"timeout_success"),qe="untimeout_success",Ge="ban_success",We="unban_success",ze="delete_message_success",Qe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isPrimeToPaidEnabled=Object(E.d)(E.a.Prime2Paid),t.isExtendSubscriptionEnabled=o.b.get("tokenization",!1),t}return Object(a.__extends)(t,e),t.prototype.shouldComponentUpdate=function(e){if(e.forceUpdateMessage)return!0;if(e.isCurrentUserModerator!==this.props.isCurrentUserModerator)return!0;if(e.showModerationIcons!==this.props.showModerationIcons)return!0;if(e.showTimestamps!==this.props.showTimestamps)return!0;if(e.useHighContrastColors!==this.props.useHighContrastColors)return!0;if(e.theme!==this.props.theme)return!0;switch(e.message.type){case C.b.Message:if(e.message.deleted)return!0;break;case C.b.ChannelPointsReward:case C.b.Resubscription:case C.b.Ritual:if(e.message.message&&e.message.message.deleted)return!0;break;case C.b.AutoMod:if(e.message.autoModType===C.a.MessageRejectedPrompt&&(e.showAutoModActions!==this.props.showAutoModActions||e.message.rejectedMessage.deleted))return!0;break;case C.b.Hosting:case C.b.Unhost:case C.b.SlowMode:case C.b.SubscriberOnlyMode:case C.b.FollowerOnlyMode:case C.b.EmoteOnlyMode:case C.b.R9KMode:case C.b.Clear:case C.b.Unraid:case C.b.Notice:case C.b.ModerationAction:if(e.showModerationActions!==this.props.showModerationActions)return!0;break;case C.b.Moderation:if(e.showModerationActions!==this.props.showModerationActions||e.deletedMessageDisplay!==this.props.deletedMessageDisplay)return!0}return!1},t.prototype.render=function(){var e=this.props.message,t=null;if(this.props.isCurrentUserModerator){if(this.props.showModerationActions)switch(e.type){case C.b.Hosting:case C.b.Unhost:case C.b.SlowMode:case C.b.SubscriberOnlyMode:case C.b.FollowerOnlyMode:case C.b.EmoteOnlyMode:case C.b.R9KMode:case C.b.Clear:case C.b.Unraid:return null}if(this.props.showModerationIcons&&this.props.channelID)switch(e.type){case C.b.Subscription:case C.b.SubGift:case C.b.SubMysteryGift:case C.b.Resubscription:case C.b.GiftPaidUpgrade:case C.b.AnonGiftPaidUpgrade:case C.b.PrimePaidUpgrade:case C.b.CommunityPayForward:case C.b.StandardPayForward:t=r.createElement(Ve.a,{canDelete:!0,channelID:this.props.channelID,renderNewVersion:!0,senderLogin:e.user.username,targetUserID:e.user.userID})}}switch(e.type){case C.b.AutoMod:return e.autoModType!==C.a.MessageRejectedPrompt||this.props.isCurrentUserModerator&&this.props.showAutoModActions?r.createElement(l.d,{channelID:this.props.channelID,channelLogin:this.props.channelLogin,message:e,badgeSets:this.props.badgeSets,currentUserDisplayName:this.props.currentUserDisplayName,isCurrentUserModerator:this.props.isCurrentUserModerator,showModerationIcons:this.props.showModerationIcons,currentUserLogin:this.props.currentUserLogin,confirmModerationAction:this.props.confirmModerationAction}):null;case C.b.ModerationAction:return this.props.isCurrentUserModerator&&this.props.showModerationActions?r.createElement(be,{moderationActionEvent:e,currentUserLogin:this.props.currentUserLogin}):e.level===S.a.User&&e.targetUserLogin&&e.targetUserLogin===this.props.currentUserLogin?r.createElement(be,{moderationActionEvent:e,currentUserLogin:this.props.currentUserLogin}):null;case C.b.TargetedModerationAction:return this.props.isCurrentUserModerator?null:r.createElement(xe,{targetedModerationActionEvent:e});case C.b.Connected:return r.createElement(v.a,{className:"chat-line__status","data-a-target":"chat-welcome-message"},r.createElement(b.a,{type:b.e.Span},Object(o.d)("Welcome to the chat room!","ChatLine")));case C.b.Disconnected:return e.reason?r.createElement(v.a,{className:"chat-line__status"},r.createElement(b.a,{type:b.e.Span},Object(o.d)("You have been disconnected from chat for the following reason: {reason}",{reason:e.reason},"ChatLine"))):r.createElement(v.a,{className:"chat-line__status"},r.createElement(b.a,{type:b.e.Span},Object(o.d)("Sorry, we were unable to connect to chat. Attempting to reconnect...","ChatLine")));case C.b.Hosted:return r.createElement(v.a,{className:"chat-line__status"},r.createElement(b.a,{type:b.e.Span},Object(f.e)(e)));case C.b.Hosting:return r.createElement(v.a,{className:"chat-line__status"},r.createElement(b.a,{type:b.e.Span},Object(o.d)("Now hosting {channel}",{channel:e.hostedChannel},"ChatLine")));case C.b.Unhost:return r.createElement(v.a,{className:"chat-line__status"},r.createElement(b.a,{type:b.e.Span},Object(o.d)("No longer hosting.","ChatLine")));case C.b.Message:return this.props.onRenderReportChatSent&&e.user.userLogin===this.props.currentUserLogin&&this.props.onRenderReportChatSent(),r.createElement(Be.a,{channelID:this.props.channelID,channelLogin:this.props.channelLogin,badgeSets:this.props.badgeSets,message:e,isDeleted:e.deleted,isHidden:e.hidden,showModerationIcons:this.props.showModerationIcons,showTimestamps:this.props.showTimestamps,useHighContrastColors:!!this.props.useHighContrastColors,deletedMessageDisplay:this.props.deletedMessageDisplay,isCurrentUserModerator:this.props.isCurrentUserModerator,isCurrentUserStaff:this.props.isCurrentUserStaff,currentUserDisplayName:this.props.currentUserDisplayName,currentUserLogin:this.props.currentUserLogin,confirmModerationAction:this.props.confirmModerationAction,theme:this.props.theme,deletedCount:e.deletedCount,hideBroadcasterTooltip:this.props.hideBroadcasterTooltip});case C.b.FirstCheerMessage:return r.createElement(Ae.a,null,r.createElement(X,{event:e}),r.createElement(v.a,null,r.createElement(Be.a,{badgeSets:this.props.badgeSets,confirmModerationAction:this.props.confirmModerationAction,channelID:this.props.channelID,channelLogin:this.props.channelLogin,className:"chat-line--inline",currentUserDisplayName:this.props.currentUserDisplayName,currentUserLogin:this.props.currentUserLogin,isCurrentUserModerator:this.props.isCurrentUserModerator,isCurrentUserStaff:this.props.isCurrentUserStaff,isDeleted:e.message.deleted,isHidden:e.message.hidden,message:e.message,showModerationIcons:this.props.showModerationIcons,showTimestamps:this.props.showTimestamps,useHighContrastColors:!!this.props.useHighContrastColors,deletedMessageDisplay:this.props.deletedMessageDisplay})));case C.b.BitsBadgeTierMessage:var n=void 0;return e.message.messageParts&&e.message.messageParts.length>0&&(n=r.createElement(v.a,{padding:{top:.5}},r.createElement(Be.a,{badgeSets:this.props.badgeSets,confirmModerationAction:this.props.confirmModerationAction,channelID:this.props.channelID,channelLogin:this.props.channelLogin,className:"chat-line--inline",currentUserDisplayName:this.props.currentUserDisplayName,currentUserLogin:this.props.currentUserLogin,isCurrentUserModerator:this.props.isCurrentUserModerator,isCurrentUserStaff:this.props.isCurrentUserStaff,isDeleted:e.message.deleted,isHidden:e.message.hidden,message:e.message,showModerationIcons:this.props.showModerationIcons,showTimestamps:this.props.showTimestamps,useHighContrastColors:!!this.props.useHighContrastColors,deletedMessageDisplay:this.props.deletedMessageDisplay}))),r.createElement(Ae.a,null,r.createElement(F,{event:e,badgeSets:this.props.badgeSets}),n);case C.b.Moderation:return this.props.isCurrentUserModerator&&!this.props.showModerationActions?this.props.deletedMessageDisplay===s.qb.BRIEF?null:r.createElement(v.a,{className:"chat-line__moderation"},Object(f.g)(e)):null;case C.b.Subscription:return r.createElement(Ae.a,null,r.createElement(v.a,{display:w.d.Flex,justifyContent:w.h.Between},r.createElement(v.a,{alignItems:w.b.Start},r.createElement(Te,{event:e})),r.createElement(v.a,{alignItems:w.b.End},t)));case C.b.SubGift:if("274598607"===e.user.userID){var i={type:C.b.AnonSubGift,id:e.id,channel:e.channel,methods:e.methods,recipientDisplayName:e.recipientDisplayName,recipientID:e.recipientID,recipientLogin:e.recipientLogin};return r.createElement(Ae.a,null,r.createElement(P,{event:i}))}return r.createElement(Ae.a,null,t,r.createElement(Me,{event:e}));case C.b.AnonSubGift:return r.createElement(Ae.a,null,r.createElement(P,{event:e}));case C.b.SubMysteryGift:if("274598607"===e.user.userID){i={type:C.b.AnonSubMysteryGift,id:e.id,channel:e.channel,plan:e.plan,massGiftCount:e.massGiftCount};return r.createElement(Ae.a,null,r.createElement(L,{event:i}))}return r.createElement(Ae.a,null,t,r.createElement(je,{event:e}));case C.b.AnonSubMysteryGift:return r.createElement(Ae.a,null,r.createElement(L,{event:e}));case C.b.CommunityPayForward:case C.b.StandardPayForward:return r.createElement(ee,{event:e,moderationIcons:t});case C.b.RewardGift:return r.createElement(Ae.a,null,r.createElement(_e.a,{event:e}));case C.b.BitsCharity:return r.createElement(v.a,{className:"chat-line__bits-charity",padding:{right:2,y:.5}},Object(f.b)(e));case C.b.Resubscription:var a=null;return e.message&&(a=r.createElement(Be.a,{badgeSets:this.props.badgeSets,confirmModerationAction:this.props.confirmModerationAction,channelID:this.props.channelID,channelLogin:this.props.channelLogin,className:"chat-line--inline",currentUserDisplayName:this.props.currentUserDisplayName,currentUserLogin:this.props.currentUserLogin,isCurrentUserModerator:this.props.isCurrentUserModerator,isCurrentUserStaff:this.props.isCurrentUserStaff,isDeleted:e.message.deleted,isHidden:e.message.hidden,message:e.message,showModerationIcons:this.props.showModerationIcons,showTimestamps:this.props.showTimestamps,useHighContrastColors:!!this.props.useHighContrastColors,deletedMessageDisplay:this.props.deletedMessageDisplay})),r.createElement(Ae.a,null,r.createElement(v.a,{display:w.d.Flex,justifyContent:w.h.Between},r.createElement(De,{event:e}),!a&&r.createElement(v.a,{alignItems:w.b.End},t)),a&&r.createElement(v.a,{margin:{top:.5}},a));case C.b.GiftPaidUpgrade:return r.createElement(Ae.a,null,t,r.createElement(J,{event:e}));case C.b.AnonGiftPaidUpgrade:return r.createElement(Ae.a,null,t,r.createElement(T,{event:e}));case C.b.PrimeCommunityGiftReceivedEvent:return r.createElement(Ae.a,null,r.createElement(ke,{event:e}));case C.b.PrimePaidUpgrade:return r.createElement(r.Fragment,null,this.isPrimeToPaidEnabled&&r.createElement(Ae.a,null,r.createElement(v.a,{display:w.d.Flex,justifyContent:w.h.Between},r.createElement(v.a,{alignItems:w.b.Start},r.createElement(Ce,{event:e})),r.createElement(v.a,{alignItems:w.b.End},t))));case C.b.ExtendSubscription:return r.createElement(r.Fragment,null,this.isExtendSubscriptionEnabled&&r.createElement(Ae.a,null,r.createElement(v.a,{display:w.d.Flex,justifyContent:w.h.Between},r.createElement(v.a,null,r.createElement(K,{event:e})),r.createElement(v.a,{alignItems:w.b.End},t))));case C.b.RoomMods:return r.createElement(v.a,{className:"chat-line__status"},Object(f.i)(e.moderatorLogins));case C.b.SlowMode:return r.createElement(v.a,{className:"chat-line__status"},Object(f.j)(e));case C.b.SubscriberOnlyMode:return r.createElement(v.a,{className:"chat-line__status"},Object(f.k)(e));case C.b.FollowerOnlyMode:return r.createElement(v.a,{className:"chat-line__status"},Object(f.d)(e));case C.b.EmoteOnlyMode:return r.createElement(v.a,{className:"chat-line__status"},Object(f.c)(e));case C.b.R9KMode:return r.createElement(v.a,{className:"chat-line__status"},Object(f.h)(e));case C.b.Clear:return r.createElement(v.a,{className:"chat-line__status"},Object(o.d)("Chat was cleared by a moderator","ChatLine"));case C.b.Notice:if(function(e){return e.msgid in we()}(e))return r.createElement(v.a,{className:"chat-line__status"},r.createElement(Oe,{message:e}));switch(e.msgid){case"msg_subsonly":return r.createElement(v.a,{className:"chat-line__status"},r.createElement(Fe,{channelLogin:this.props.channelLogin}));case U.Kickback:case U.Enabled:case U.Disabled:case U.AlreadyEnabled:case U.AlreadyDisabled:return r.createElement(v.a,{className:"chat-line__status"},r.createElement(B,{type:e.msgid}))}if(this.props.isCurrentUserModerator)switch(e.msgid){case ze:case He:case Ge:return null;case qe:case We:if(this.props.showModerationActions)return null}return r.createElement(v.a,{className:"chat-line__status"},e.message);case C.b.Info:return r.createElement(v.a,{className:"chat-line__status"},e.message);case C.b.InlinePrivateCallout:return this.props.channelLogin&&this.props.currentUserLogin?r.createElement(fe,{event:e,channelID:this.props.channelID,channelLogin:this.props.channelLogin,currentUserLogin:this.props.currentUserLogin,currentUserID:this.props.currentUserID,messageIndex:this.props.messageIndex}):null;case C.b.Raid:return r.createElement(Ae.a,null,r.createElement(re,{message:e}));case C.b.Unraid:return r.createElement(Ae.a,null,r.createElement(b.a,{color:O.c.Alt2},Object(o.d)("The raid has been cancelled.","RaidCancelMessage")));case C.b.Ritual:return r.createElement(Ae.a,null,r.createElement(Ie,{event:e}),r.createElement(Be.a,{badgeSets:this.props.badgeSets,confirmModerationAction:this.props.confirmModerationAction,channelID:this.props.channelID,channelLogin:this.props.channelLogin,className:"chat-line--inline",currentUserDisplayName:this.props.currentUserDisplayName,currentUserLogin:this.props.currentUserLogin,isCurrentUserModerator:this.props.isCurrentUserModerator,isCurrentUserStaff:this.props.isCurrentUserStaff,isDeleted:e.message.deleted,isHidden:e.message.hidden,message:e.message,showModerationIcons:this.props.showModerationIcons,showTimestamps:this.props.showTimestamps,useHighContrastColors:!!this.props.useHighContrastColors,deletedMessageDisplay:this.props.deletedMessageDisplay}));case C.b.ExtensionMessage:return r.createElement(y,{badgeSets:this.props.badgeSets,channelID:this.props.channelID,currentUserLogin:this.props.currentUserLogin,message:e,showTimestamps:this.props.showTimestamps});case C.b.ChannelPointsReward:var c=void 0;return e.message&&(c=r.createElement(Be.a,{badgeSets:this.props.badgeSets,confirmModerationAction:this.props.confirmModerationAction,channelID:this.props.channelID,channelLogin:this.props.channelLogin,currentUserDisplayName:this.props.currentUserDisplayName,currentUserLogin:this.props.currentUserLogin,isCurrentUserModerator:this.props.isCurrentUserModerator,isCurrentUserStaff:this.props.isCurrentUserStaff,isDeleted:e.message.deleted,isHidden:e.message.hidden,message:e.message,showModerationIcons:this.props.showModerationIcons,showTimestamps:this.props.showTimestamps,useHighContrastColors:!!this.props.useHighContrastColors,deletedMessageDisplay:this.props.deletedMessageDisplay})),r.createElement($,{event:e},c);default:return null}},t}(r.Component);n.d(t,"a",(function(){return Qe}))},Y5lD:function(e,t,n){"use strict";function i(e){return Math.floor((Date.now()-new Date(e).getTime())/1e3)}n.d(t,"a",(function(){return i}))},YG6c:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));var i=n("/7QA"),a=function(){return i.b.get("rooms_deprecation_enabled",!1)},r=function(){return a()&&i.b.get("rooms_deprecation_notice",!1)},o=function(){return a()&&i.b.get("rooms_deprecation_selector_hidden",!1)}},YV90:function(e,t,n){"use strict";var i=n("ZaoE");n.d(t,"a",(function(){return i.b}))},YXxK:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return r}));var i=n("B/KH");n.d(t,"c",(function(){return i.a}));var a,r,o={Embed:"embed",Web:"web"};!function(e){e.Click="click",e.Enter="enter"}(a||(a={})),function(e){e.ZeroBits="zero_bits",e.CheeringDisabled="cheering_disabled",e.BitsUnavailable="bits_unavailable",e.BitsCardDisabled="bits_card_disabled",e.AboveMaxEmote="above_max_emote",e.AboveMaxCheer="above_max_cheer",e.BelowMin="below_min",e.BelowMinEmote="below_min_emote",e.InputAboveMaxLength="input_above_max_length",e.InputCommandStart="input_command_start",e.InvalidBitsMessage="invalid_bits_message",e.Canceled="canceled",e.UserBanned="user_banned",e.AutoModMessage="auto_mod_message",e.AutoModPending="auto_mod_pending",e.ChannelBlockedTerms="channel_blocked_terms",e.ChannelIneligible="channel_ineligible",e.InvalidAnonymousMessage="invalid_anonymous_message",e.InvalidEventId="invalid_event_id",e.RequestThrottled="request_throttled",e.Unknown="unknown",e.UserIneligible="user_ineligible",e.UserSuspended="user_suspended",e.ZalgoMessage="zalgo_message",e.DuplicateEventId="duplicate_event_id",e.MissingBitsConfig="missing_bits_config"}(r||(r={}))},ZEQw:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return s}));var i="subscribe_to_channel",a="turbo",r="get_bits",o="visit_url",s="broadcaster"},ZGDZ:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e[e.SMALL=28]="SMALL",e[e.MEDIUM=56]="MEDIUM",e[e.LARGE=112]="LARGE"}(i||(i={}))},ZGqV:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"channelChanlet"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Channel"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isAuthorized"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"restriction"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"exemptions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"startsAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endsAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:123}};n.loc.source={body:"fragment channelChanlet on Channel {\nid\nself {\nisAuthorized\n}\nrestriction {\nid\ntype\nexemptions {\nstartsAt\nendsAt\ntype\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},ZLqn:function(e,t,n){"use strict";var i=n("q1tI"),a=n("/7QA"),r=n("EuPq"),o=n("X7Ac"),s=n("eJ65"),l=n("EdhP"),c=n("+GjP"),d=n("b7S+"),u=n("7d/q"),m=n("C7sF"),p=n("ygYM"),h=n("sUnt"),f=n("hnjF"),g=n("+80q"),v=function(e){var t=Object(c.g)("https://www.twitch.tv/"+e.login,{tt_medium:"live_embed",tt_content:"text_link"}),n=Object(a.d)("Watch live video from {displayName} on www.twitch.tv",{displayName:e.displayName||e.login},"ChannelShareButton"),v=Object(l.b)({channel:e.login},{textLink:{url:t,text:n},allowScrolling:!1,allowFullscreen:!0}),b="https://www.twitch.tv/embed/"+e.login+"/chat",k=Object(l.a)(b,{height:500,width:350,allowFullscreen:!1,allowScrolling:!1}),y=Object(a.d)("Share","ChannelShareButton"),S={label:y,direction:d.c.Bottom};return i.createElement(s.a,{tooltipProps:S},i.createElement(u.a,{type:u.c.Primary,"data-a-target":"share-button",icon:m.a.Share,title:y,ariaLabel:y}),i.createElement(p.a,{direction:p.b.TopRight,size:p.c.Small,"data-a-target":"share-balloon"},i.createElement(h.a,{padding:1},i.createElement(h.a,{padding:{top:1,bottom:1},display:f.d.Flex,justifyContent:f.h.Between},i.createElement(o.a,{type:o.c.Twitter,text:e.title,"data-a-target":"twitter-share-button"}),i.createElement(o.a,{type:o.c.Facebook,"data-a-target":"facebook-share-button"}),i.createElement(o.a,{type:o.c.VKontakte,"data-a-target":"vkontakte-share-button"}),i.createElement(o.a,{type:o.c.Reddit,text:e.title,"data-a-target":"reddit-share-button"}),i.createElement(o.a,{type:o.c.Copy,"data-a-target":"copy-link-share-button"})),i.createElement(h.a,null,i.createElement(h.a,{padding:{top:1}},i.createElement(g.a,null,Object(a.d)("Embed Channel","ChannelShareButton")),i.createElement(r.a,{value:v})),i.createElement(h.a,{padding:{top:1}},i.createElement(g.a,null,Object(a.d)("Embed Chat","ChannelShareButton")),i.createElement(r.a,{value:k}))))))};n.d(t,"a",(function(){return v}))},ZUUl:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var i=n("4rCz");function a(e,t){return function(n,a){e({dispatch:n,getState:a},t,i.q.apollo.client)}}function r(e,t){return function(n,a){e({dispatch:n,getState:a},t,i.q.apollo.client,i.p)}}},ZVTe:function(e,t,n){"use strict";var i=n("TSYQ"),a=n("q1tI"),r=n("EE1E"),o=(n("2e6W"),function(e){var t,n=e.userData.color;e.highContrastUsernameColor&&n&&(n="#"+Object(r.a)(n,e.theme));var o=[a.createElement("span",{key:"username-display",className:"chat-author__display-name","data-a-target":"chat-message-username","data-a-user":e.userData.userLogin,"data-test-selector":"message-username",style:{color:n}},e.userData.userDisplayName)];if(e.userData.isIntl){var s=i(((t={})["chat-author__intl-login"]=!e.highlighted,t["chat-author__intl-login--highlighted"]=e.highlighted,t));o.push(a.createElement("span",{key:"username-login",style:{color:n},className:s,"data-test-selector":"message-username-canonical"}," ("+e.userData.userLogin+")"))}return a.createElement("span",{key:e.userData.userID+"-authorlabel"},o)});n.d(t,"a",(function(){return o}))},ZaoE:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var i=n("1rIY"),a=Object(i.a)("ChannelPointsContext",{activeMultipliers:[],automaticRewards:[],balance:0,channelID:null,channelLogin:null,customRewards:[],displayName:null,emoteVariants:[],isChannelPointsEnabled:!1,isChannelPointsFeatureFlagOn:!1,isCurrentUserModerator:!1,isLoaded:!1,pointIcon:null,pointName:null,raidPointAmount:0,rewardMap:{},earning:null}),r=a.context,o=a.withContext},ZhMv:function(e,t,n){},ZhU4:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"emotePickerUserSubscriptionProduct"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SubscriptionProduct"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteSetID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"subscriptionProductEmote"},directives:[]}]}}]}}],loc:{start:0,end:226}};i.loc.source={body:'#import "twilight/features/subscribe-button/models/subscription-product-emote.gql"\nfragment emotePickerUserSubscriptionProduct on SubscriptionProduct {\nid\nemoteSetID\nname\nprice\ntier\nurl\nemotes {\n...subscriptionProductEmote\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("dq0Q").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)}))),e.exports=i},Zkco:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("q1tI"),a=n("cys1"),r=n("oK83"),o=function(e){var t=e.message,n={disableLinks:!0,forceClipsNetworkRequest:!0,messageAuthorID:e.author.id,messageSourceID:t.id,emoteSourceType:r.a.vod};return i.createElement("span",{key:t.id,style:{color:e.allowActionTextColors&&t.isAction?t.userColor:""}},Object(a.f)(t.tokens,n,!0))}},ZtEv:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"e",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"f",(function(){return l}));var i,a,r,o,s=n("0Log");n.d(t,"d",(function(){return s.ModerationActions})),function(e){e[e.Message=0]="Message",e[e.ExtensionMessage=1]="ExtensionMessage",e[e.Moderation=2]="Moderation",e[e.ModerationAction=3]="ModerationAction",e[e.TargetedModerationAction=4]="TargetedModerationAction",e[e.AutoMod=5]="AutoMod",e[e.SubscriberOnlyMode=6]="SubscriberOnlyMode",e[e.FollowerOnlyMode=7]="FollowerOnlyMode",e[e.SlowMode=8]="SlowMode",e[e.EmoteOnlyMode=9]="EmoteOnlyMode",e[e.R9KMode=10]="R9KMode",e[e.Connected=11]="Connected",e[e.Disconnected=12]="Disconnected",e[e.Reconnect=13]="Reconnect",e[e.Hosting=14]="Hosting",e[e.Unhost=15]="Unhost",e[e.Hosted=16]="Hosted",e[e.Subscription=17]="Subscription",e[e.Resubscription=18]="Resubscription",e[e.GiftPaidUpgrade=19]="GiftPaidUpgrade",e[e.AnonGiftPaidUpgrade=20]="AnonGiftPaidUpgrade",e[e.PrimePaidUpgrade=21]="PrimePaidUpgrade",e[e.PrimeCommunityGiftReceivedEvent=22]="PrimeCommunityGiftReceivedEvent",e[e.ExtendSubscription=23]="ExtendSubscription",e[e.SubGift=24]="SubGift",e[e.AnonSubGift=25]="AnonSubGift",e[e.Clear=26]="Clear",e[e.RoomMods=27]="RoomMods",e[e.RoomState=28]="RoomState",e[e.Raid=29]="Raid",e[e.Unraid=30]="Unraid",e[e.Ritual=31]="Ritual",e[e.Notice=32]="Notice",e[e.Info=33]="Info",e[e.BadgesUpdated=34]="BadgesUpdated",e[e.Purchase=35]="Purchase",e[e.BitsCharity=36]="BitsCharity",e[e.CrateGift=37]="CrateGift",e[e.RewardGift=38]="RewardGift",e[e.SubMysteryGift=39]="SubMysteryGift",e[e.AnonSubMysteryGift=40]="AnonSubMysteryGift",e[e.StandardPayForward=41]="StandardPayForward",e[e.CommunityPayForward=42]="CommunityPayForward",e[e.FirstCheerMessage=43]="FirstCheerMessage",e[e.BitsBadgeTierMessage=44]="BitsBadgeTierMessage",e[e.InlinePrivateCallout=45]="InlinePrivateCallout",e[e.ChannelPointsReward=46]="ChannelPointsReward"}(i||(i={})),function(e){e[e.Post=0]="Post",e[e.Action=1]="Action",e[e.PostWithMention=2]="PostWithMention"}(a||(a={})),function(e){e[e.Ban=0]="Ban",e[e.Timeout=1]="Timeout",e[e.Delete=2]="Delete"}(r||(r={})),function(e){e[e.MessageRejectedPrompt=0]="MessageRejectedPrompt",e[e.CheerMessageRejectedPrompt=1]="CheerMessageRejectedPrompt",e[e.MessageRejected=2]="MessageRejected",e[e.MessageAllowed=3]="MessageAllowed",e[e.MessageDenied=4]="MessageDenied",e[e.CheerMessageDenied=5]="CheerMessageDenied",e[e.CheerMessageTimeout=6]="CheerMessageTimeout",e[e.MessageModApproved=7]="MessageModApproved",e[e.MessageModDenied=8]="MessageModDenied"}(o||(o={}));var l=new Set(["usage_clear","usage_commercial","usage_host","usage_unhost","usage_raid","usage_unraid","usage_slow_on","usage_slow_off","usage_followers_on","usage_followers_off","usage_emote_only_on","usage_emote_only_off","usage_subs_on","usage_subs_off","usage_r9k_on","usage_r9k_off","unrecognized_cmd"])},ZuCe:function(e,t,n){},ZuiC:function(e,t,n){"use strict";n.d(t,"n",(function(){return r})),n.d(t,"t",(function(){return o})),n.d(t,"l",(function(){return s})),n.d(t,"s",(function(){return l})),n.d(t,"m",(function(){return c})),n.d(t,"r",(function(){return d})),n.d(t,"o",(function(){return u})),n.d(t,"u",(function(){return m})),n.d(t,"p",(function(){return p})),n.d(t,"v",(function(){return h})),n.d(t,"d",(function(){return f})),n.d(t,"z",(function(){return g})),n.d(t,"e",(function(){return v})),n.d(t,"A",(function(){return b})),n.d(t,"f",(function(){return k})),n.d(t,"B",(function(){return y})),n.d(t,"c",(function(){return S})),n.d(t,"y",(function(){return C})),n.d(t,"k",(function(){return E})),n.d(t,"q",(function(){return w})),n.d(t,"i",(function(){return O})),n.d(t,"E",(function(){return D})),n.d(t,"h",(function(){return N})),n.d(t,"D",(function(){return _})),n.d(t,"g",(function(){return I})),n.d(t,"C",(function(){return M})),n.d(t,"a",(function(){return j})),n.d(t,"w",(function(){return T})),n.d(t,"j",(function(){return P})),n.d(t,"F",(function(){return L})),n.d(t,"b",(function(){return R})),n.d(t,"x",(function(){return F}));var i=n("mrSG"),a=n("/7QA"),r="vodChat.comments.DELETED_SUCCESS",o=function(e){return Object(i.__assign)({type:r},e)},s="vodChat.comments.CREATED_SUCCESS",l=function(e){return Object(i.__assign)({type:s},e)},c="vodChat.comments.CREATE_FAILED",d=function(e){return{type:c,createError:e}},u="vodChat.comments.DISPLAY_ERROR",m=function(e){return{type:u,errorMessage:e}},p="vodChat.comments.UPDATED_SUCCESS",h=function(e){return Object(i.__assign)({type:p},e)},f="vodChat.comments.CURSOR_RECEIVED",g=function(e){return Object(i.__assign)({type:f},e)},v="vodChat.comments.OFFSET_RECEIVED",b=function(e){return Object(i.__assign)({type:v},e)},k="vodChat.comments.QUERY_FAILED",y=function(){return{type:k}},S="vodChat.comments.CLEARED",C=function(){return{type:S}},E="vodChat.comments.COOLDOWN_ENDED",w=function(){return{type:E}},O="vodChat.comments.SYNC_ENABLED",D=function(){return{type:O}},N="vodChat.comments.SYNC_DISABLED",_=function(){return{type:N}},I="vodChat.comments.REPLAY_FILTER_CHANGED",M=function(e){return a.m.set("videoChat.is_replay_mode",e),{type:I,isReplayFilterOn:e}},j="vodChat.comments.CHAT_REPLAY_ERROR_HIDE",T=function(){return{type:j}},P="vodChat.comments.TIMESTAMP_MODE_CHANGED",L=function(e){return a.m.set("videoChat.hide_timestamps",e),{type:P,hideTimestamps:e}},R="vodChat.comments.REQUEST_CHAT_SETTINGS",F=function(){return{type:R,isReplayFilterOn:a.m.get("videoChat.is_replay_mode",!1),hideTimestamps:a.m.get("videoChat.hide_timestamps",!1)}}},a1OF:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return m})),n.d(t,"e",(function(){return p})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return f}));var i=n("mrSG"),a=n("/7QA"),r=n("oe5X"),o=n("0FG4"),s=n("kRBY"),l=n("60o1"),c=["#FF0000","#0000FF","#008000","#B22222","#FF7F50","#9ACD32","#FF4500","#2E8B57","#DAA520","#D2691E","#5F9EA0","#1E90FF","#FF69B4","#8A2BE2","#00FF7F"],d={};function u(e,t,n,a,r,o,s){void 0===a&&(a=null),void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===s&&(s=!1);var c=Object(l.a)(t.displayName,t.username);return{badges:t.badges||{},badgeDynamicData:t.badgeDynamicData||{},bits:t.bits,user:Object(i.__assign)(Object(i.__assign)({},c),{userLogin:t.username,userID:t.userID,userType:t.userType,color:t.color||m(t.userID)}),messageParts:p(e,t.emotes||{},t.bits,n,t.username,a||void 0),deleted:r,banned:s,hidden:o,timestamp:Date.now()}}function m(e,t){return void 0===t&&(t=15),"number"!=typeof d[e]&&(d[e]=Math.floor(Math.random()*t)),c[d[e]]}function p(e,t,n,i,l,c){var d=Object(s.e)(a.p.store.getState()),u={cheers:n?i:void 0,emotes:{type:o.a.Position,map:t},links:{parseClips:!0,parseVods:!0},mentions:{senderLogin:l,sessionUser:d},flags:c};return Object(r.a)(e,u)}function h(e){return e.match(/[^\uD800-\uDFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDFFF]/g)}function f(e,t){return"https://static-cdn.jtvnw.net/emoticons/v1/"+e+"/"+Math.min(Math.ceil(t),3)+".0"}},a2Ot:function(e,t,n){},a2UF:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("mrSG"),a=n("yR8l"),r=n("Pub/"),o=n("HzXE"),s=n("1Rv/");function l(e){var t=this;return Object(a.a)(s,{props:function(n){return{unbanUserMutation:function(a){return Object(i.__awaiter)(t,void 0,void 0,(function(){var t;return Object(i.__generator)(this,(function(s){switch(s.label){case 0:if(t=e(n.ownProps).channelID,!n.mutate||!t)return[3,5];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,n.mutate({variables:{input:{channelID:t,bannedUserLogin:a}},update:function(e,n){return function(e,t,n){if(t&&t.data&&t.data.unbanUserFromChatRoom&&t.data.unbanUserFromChatRoom.ban&&t.data.unbanUserFromChatRoom.ban.bannedUser&&t.data.unbanUserFromChatRoom.ban.bannedUser.id){var a=Object(r.a)(e,n,t.data.unbanUserFromChatRoom.ban.bannedUser.id);if(!a)return;e.writeQuery({query:o,variables:{targetUserID:t.data.unbanUserFromChatRoom.ban.bannedUser.id,channelID:n},data:Object(i.__assign)(Object(i.__assign)({},a),{chatRoomBanStatus:null})})}}(e,n,t)}})];case 2:return[2,s.sent().data];case 3:throw s.sent(),new Error("Unable to unban user");case 4:return[3,6];case 5:throw new Error("Unban user mutation is not ready");case 6:return[2]}}))}))}}}})}},a5fV:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"e",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return d}));var i=n("/7QA"),a=n("WgyX"),r=n("W8Fi");function o(e,t){return e/Math.pow(10,t)}function s(e,t){return Object(i.f)(e,{style:"currency",currency:t})}function l(e,t){return void 0===t&&(t=!1),Object(r.h)([e])||Object(r.f)([e])?Object(r.d)(e,t):c(e)}function c(e){return!Object(a.a)(e)&&e.priceInfo?s(o(e.priceInfo.total,e.priceInfo.exponent),e.priceInfo.currency):e.price}function d(e,t){return t?Object(r.a)(t):s(o(e.total,e.exponent),e.currency)}},a6LY:function(e,t,n){"use strict";var i,a,r;n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return r})),function(e){e.DeleteMessage="delete",e.BanUser="ban",e.UnbanUser="unban",e.TimeoutUser="timeout",e.UntimeoutUser="untimeout",e.ModUser="mod",e.UnmodUser="unmod"}(i||(i={})),function(e){e.QuickModButtons="quick_mod_buttons",e.ChatCommand="chat_command",e.ModerationCard="moderation_card",e.DashboardBannedChatters="dashboard_banned_chatters",e.ModViewPage="mod_view_page"}(a||(a={})),function(e){e.Broadcaster="broadcaster",e.Staff="staff",e.Editor="editor",e.Mod="mod"}(r||(r={}))},aF6k:function(e,t,n){"use strict";function i(e){var t=Math.random().toString(36).substring(2,6);return e+"-"+Date.now()+"-"+t}n.d(t,"a",(function(){return i}))},ahza:function(e,t,n){"use strict";var i=n("cr+I"),a=n("b6Yk"),r=n("pU2t");n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return m})),n.d(t,"g",(function(){return p})),n.d(t,"h",(function(){return h})),n.d(t,"c",(function(){return f})),n.d(t,"e",(function(){return g})),n.d(t,"d",(function(){return v})),n.d(t,"f",(function(){return b}));var o="content_offset_seconds",s="cursor",l="comment_id";function c(e){return"/v5/videos/"+e+"/comments"}function d(e){return u(e).toString()+"/replies"}function u(e){return"/v5/videos/comments/"+e}function m(e){var t;t=g(e)?d(e.parentId):c(e.contentId);var n={body:Object(r.g)(e)};return a.a.post(t,n)}function p(e){try{if(function(e){return"commentID"in e}(e))return function(e){var t={};void 0!==e.cursor&&(t[s]=e.cursor);var n=d(e.commentID)+"?"+i.stringify(t);return a.a.getOrThrow(n).then((function(e){return Object(r.e)(e.body)}))}(e);var t={};v(e)?t[s]=e.cursor:b(e)&&(t[o]=""+e.offset,void 0!==e.highlightedMessageID&&(t[l]=e.highlightedMessageID));var n=c(e.videoID)+"?"+i.stringify(t);return a.a.getOrThrow(n).then((function(t){return Object(r.d)(t.body,e.bitsConfig)}))}catch(e){return Promise.reject(e)}}function h(e){var t=u(e.comment.id),n={body:{state:e.state}};return a.a.putOrThrow(t,n).then((function(t){return Object(r.f)(t.body,e.comment)}))}function f(e){var t=u(e.id);return a.a.delete(t)}function g(e){return"parentId"in e}function v(e){return"cursor"in e}function b(e){return"offset"in e}},amaQ:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return m}));var i,a,r,o,s=n("mrSG"),l=n("/7QA"),c=n("2xye");!function(e){e.AppointedModerator="appointed_moderator",e.MegacheerEmoteRecipient="megacheer_emote_recipient",e.Resub="re_sub",e.PinnedResub="pinned_re_sub",e.CheerBadgeGrant="cheer_badge_grant",e.CommunitySubGift="community_sub_gift",e.CommunityPointsReward="community_points_reward",e.PrimeGiftBomb="prime_gift_bomb",e.HypeTrainRewards="hype_train_rewards"}(i||(i={})),function(e){e.Dismiss="dismiss",e.Remind="remind_later",e.Pin="pin_callout",e.SkipMonthlyAlert="skip_monthly_alert",e.Message="chat_message_send"}(a||(a={})),function(e){e.Share="click_share",e.Options="options_menu",e.Thank="click_thank",e.NoAction="no_action",e.ShowReward="click_show_reward",e.Gift="click_gift"}(r||(r={})),function(e){e.PrivateCallout="private_callout",e.Chat="private_callout_chat"}(o||(o={}));var d=function(e){l.o.track(c.SpadeEventType.PrivateCalloutAction,Object(s.__assign)(Object(s.__assign)({},p(e)),{action:e.action,ui_context:e.uiContext,msg_body:e.msgBody,used_prompt:e.usedPrompt}))},u=function(e){l.o.track(c.SpadeEventType.PrivateCalloutClick,Object(s.__assign)(Object(s.__assign)({},p(e)),{click_type:e.clickType,ui_context:e.uiContext}))},m=function(e){l.o.track(c.SpadeEventType.PrivateCalloutImpression,Object(s.__assign)(Object(s.__assign)({},p(e)),{has_cta:e.hasCTA}))};function p(e){return{channel_id:e.channelID,channel_login:e.channelLogin,callout_type:e.calloutType,private_callout_sid:e.privateCalloutSID}}},ati1:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ArchivePoll"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ArchivePollInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"archivePoll"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"poll"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:94}};n.loc.source={body:"mutation ArchivePoll($input: ArchivePollInput!) {\narchivePoll(input: $input) {\npoll {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.ArchivePoll=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"ArchivePoll")},axcf:function(e,t,n){},b5C3:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("q1tI"),a=n("vHGB"),r=function(e){var t=e.badgesToRender,n=e.badgeSets,r=e.hideBroadcasterTooltip;if(!t)return null;var o,s=[];o=t,Array.isArray(o)?s=t.map((function(t){var o=n.getBadge(t.setID,t.version);return null===o?null:e.usesSchemaBadges?i.createElement(a.a,{key:o.setID+"/"+o.version,schemaBadge:o,hideTooltip:"broadcaster"===o.setID&&r}):i.createElement(a.a,{key:o.setID+"/"+o.version,badge:o,hideTooltip:"broadcaster"===o.setID&&r})})):function(e){return!Array.isArray(e)}(t)&&(s=Object.keys(t).map((function(o){var s=t[o],l=n.getBadge(o,s);if(null===l)return null;var c=e.dynamicData&&e.dynamicData[l.setID];return e.usesSchemaBadges?i.createElement(a.a,{key:l.setID+"/"+l.version,schemaBadge:l,dynamicData:c,hideTooltip:"broadcaster"===l.setID&&r}):i.createElement(a.a,{key:l.setID+"/"+l.version,badge:l,dynamicData:c,hideTooltip:"broadcaster"===l.setID&&r})})));var l=s.filter((function(e){return null!==e}));return i.createElement("span",null,l)};r.displayName="BadgeList"},b5vT:function(e,t,n){"use strict";var i=n("TSYQ"),a=n("q1tI"),r=n("/7QA"),o=n("GnwI"),s=n("Ws8v"),l=n("hnjF"),c=n("X2PJ"),d=n("7uM4"),u=n("C7sF"),m=n("b7S+"),p=(n("GOKC"),a.createElement(s.a,{alignItems:l.b.Center,background:c.a.Overlay,borderRadius:c.b.Small,className:"emote-button__lock",color:c.c.Overlay,"data-test-selector":"emote-button-lock",display:l.d.InlineFlex,justifyContent:l.h.Center,position:l.j.Absolute,zIndex:l.o.Above},a.createElement(d.a,{asset:u.a.Lock,height:10,width:10}))),h=function(e){var t=i("emote-button__link",{"emote-button__link--locked":!e.onClick}),n=e.emote,s=n.displayName,c=n.srcSet;if(!c)return null;var d=c.split(" ")[0],u=a.createElement("img",{className:"emote-picker__image",src:d,srcSet:c,alt:s});if(e.isCriticalImage){for(var h={},f=0,g=c.split(",");f<g.length;f++){var v=g[f].trim().split(" "),b=v[1],k=v[0];h[b]=k}u=a.createElement(o.CriticalImage,{className:"emote-picker__emote-image",src:d,srcSet:h,alt:s||""})}return a.createElement("div",{className:"emote-button"},a.createElement(m.a,{label:s||Object(r.d)("Emote","EmoteButton"),direction:m.c.Bottom},a.createElement(l.g,{display:l.d.Flex,alignItems:l.b.Center,justifyContent:l.h.Center},a.createElement("button",{"data-test-selector":"emote-button-clickable",className:t,"aria-label":s,name:s,onClick:e.onClick?e.onClick.bind(null,e.emote):void 0,"data-a-target":s},a.createElement("figure",null,e.locked?p:null,u)))))};n.d(t,"a",(function(){return h}))},b6Pe:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("fvjX"),o=n("/7QA"),s=n("gcd7"),l=n("D7An"),c=n("6C1D"),d=n("RS58"),u=n("Ws8v"),m=n("IbuL"),p=n("C7sF"),h=(n("i/i4"),function(){return a.createElement(u.a,{className:"info-modifier-tray-icon"},a.createElement(m.a,{asset:p.a.NotificationInfo}))}),f=n("pb7T"),g=n("3kHA"),v=n("zwF8"),b=n("WytW"),k=n("sUnt"),y=n("+80q"),S=n("Jsra"),C=function(e){function t(t){var n=e.call(this,t)||this;return n.showHelp=function(e){if(n.props.ignoreArguments)return n.availableCommandsList();var t=Object(b.q)("/help "+e);return t?t.command?n.commandSpecificFeedback(t.command):(n.props.setModifierTray(n.makeGeneralTray()),{}):{deferred:Promise.resolve({notice:n.helpUsage()})}},n.availableCommandsList=function(){var e=n.props.getCommands(n.props.permissionLevel).map((function(e){return"/"+e.name}));return{deferred:Promise.resolve({notice:Object(o.d)("Available commands: {commands}.",{commands:e.join(", ")},"HelpCommandHandler")})}},n.commandSpecificFeedback=function(e){var t=n.props.getCommands(n.props.permissionLevel).find((function(t){return t.name===e}));return t?(n.props.setModifierTray(n.makeUsageTray(e,t.helpText)),{preserveInput:!0}):(n.props.setModifierTray(n.makeInvalidTray(e)),{})},n.inChatCommandAutocompleteExperiment="variant1"===o.p.experiments.getAndTrackAssignment(l.c.ChatCommandAutocomplete),n}return Object(i.__extends)(t,e),t.prototype.render=function(){return a.createElement(s.a,{args:[{name:"command",isRequired:!1}],channelLogin:this.props.channelLogin,command:"help",description:Object(o.d)("Get detailed information on using a chat command","HelpCommandHandler"),handler:this.inChatCommandAutocompleteExperiment||this.props.ignoreArguments?this.showHelp:void 0,helpText:this.helpUsage(),permissionLevel:g.b.Viewer})},t.prototype.makeUsageTray=function(e,t){return{title:Object(o.d)("Usage of /{name}",{name:e},"HelpCommandHandler"),body:a.createElement(k.a,{padding:{top:.5}},a.createElement(y.a,{type:y.e.Span},t)," ",a.createElement(S.a,{linkTo:"https://help.twitch.tv/s/article/chat-commands"},this.learnMoreText())),icon:a.createElement(h,null),inputValue:"/"+e+" ",type:v.a.CommandInfo,timeout:3e4}},t.prototype.makeInvalidTray=function(e){return{title:Object(o.d)("Unrecognized Command","HelpCommandHandler"),body:Object(o.d)('/{name} is not a valid command. To see a list of available commands, just type "/" in the input box.',{name:e},"HelpCommandHandler"),icon:a.createElement(f.a,null),type:v.a.CommandWarning,timeout:3e4}},t.prototype.makeGeneralTray=function(){return{title:Object(o.d)("Learn More About Commands","HelpCommandHandler"),body:a.createElement(k.a,{padding:{top:.5}},a.createElement(y.a,{type:y.e.Span},Object(o.d)('You can type "/" in the input box to see a list of available commands.',"HelpCommandHandler"))," ",a.createElement(S.a,{linkTo:"https://help.twitch.tv/s/article/chat-commands"},this.learnMoreText())),icon:a.createElement(h,null),type:v.a.CommandInfo,timeout:3e4}},t.prototype.helpUsage=function(){return Object(o.d)('Usage: "/help" - Lists the commands available to you in this channel.',"HelpCommandHandler")},t.prototype.learnMoreText=function(){return Object(o.d)("Learn more.","HelpCommandHandler")},t}(a.Component);var E=Object(r.d)(Object(c.b)((function(e){return{getCommands:e.getCommands}})),Object(d.b)((function(e){return{setModifierTray:e.setModifierTray}})))(C);n.d(t,"a",(function(){return E}))},bRMw:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return c}));var i=n("/7QA"),a=n("kRBY"),r="cc_v2_whitelist",o="cc_v2_single_stream",s="cc_v2_pov_selector";function l(e,t){var n=t.toLocaleLowerCase(),r=i.b.get(e,[]).map((function(e){return e.toLocaleLowerCase()})),o=i.p.store.getState();return r.includes(n)||r.includes(n+"-staff")&&Object(a.g)(o)||!!(r.includes(n+"-staff")&&o.session&&o.session.user&&o.session.user.login.toLocaleLowerCase()===n)}function c(e){return l(r,e)}},bdHe:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("q1tI"),a=n("zjIR"),r=n("EJeP"),o=n("sUnt"),s=n("uOxs"),l=function(){for(var e=[],t=0;t<r.REQUEST_LIMIT;t++)e.push(i.createElement(o.a,{className:"channel-follow-listing--card",margin:{bottom:2},key:t},i.createElement(a.a,null)));return i.createElement(o.a,{fullWidth:!0,padding:{x:3,y:2}},i.createElement(s.a,{placeholderItems:r.REQUEST_LIMIT,center:!0,gutterSize:s.c.Small,childWidth:s.b.Large},e))}},bfuM:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("/7QA"),o=n("gcd7"),s=n("fezU"),l=n("3kHA"),c=n("oK83"),d=n("NNSq"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleUserCardCommand=function(e){return t.openUserCard(e)},t.openUserCard=function(e){return{deferred:new Promise((function(n){return Object(i.__awaiter)(t,void 0,void 0,(function(){return Object(i.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Object(d.a)(e)];case 1:if(!t.sent())throw new Error("User ID not found");return this.props.onUserCommand(e,c.b.user_command,""),[3,3];case 2:return t.sent(),[2,n({notice:Object(r.d)("No user matching that login.","UserCardCommandHandler")})];case 3:return[2,n({})]}}))}))}))}},t}return Object(i.__extends)(t,e),t.prototype.render=function(){return a.createElement(o.a,{args:[{name:"username",isRequired:!0}],channelLogin:this.props.channelLogin,command:"user",description:Object(r.d)("Display profile information about a user on this channel","UserCardCommandHandler"),handler:this.handleUserCardCommand,helpText:Object(r.d)('Usage: "/user <username>" - Displays information about a specific user on this channel.',"UserCardCommandHandler"),permissionLevel:l.b.Moderator})},t}(a.Component);var m=Object(s.b)((function(e){return{onUserCommand:e.onShowViewerCard}}))(u);n.d(t,"a",(function(){return m}))},bhOa:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("/7QA"),o=n("gcd7"),s=n("ygQa"),l=n("3kHA"),c=n("WytW"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.updateChatColor=function(e){var n=Object(c.p)("/color "+e);if(n&&n.color){var i=n.color;return{deferred:t.props.updateChatColorMutation(i).then((function(){return{notice:Object(r.d)("Your color has been changed.","ColorCommandHandler")}})).catch((function(){return{notice:Object(r.d)("Unable to change your color.","ColorCommandHandler")}}))}}return{deferred:Promise.resolve({notice:t.colorUsage(),error:l.a.InvalidParameters})}},t}return Object(i.__extends)(t,e),t.prototype.render=function(){return a.createElement(o.a,{args:[{name:"color",isRequired:!0}],channelLogin:this.props.channelLogin,command:"color",description:Object(r.d)("Change your username color, i.e. blue, green, etc.","ColorCommandHandler"),handler:this.updateChatColor,helpText:this.colorUsage(),permissionLevel:l.b.Viewer})},t.prototype.colorUsage=function(){return Object(r.d)('Usage: "/color <color>" - Changes your username color. Color must be in hex (#000000) or one of the following: Blue, BlueViolet, CadetBlue, Chocolate, Coral, DodgerBlue, Firebrick, GoldenRod, Green, HotPink, OrangeRed, Red, SeaGreen, SpringGreen, YellowGreen.',"ColorCommandHandler")},t}(a.Component),u=Object(s.a)()(d);n.d(t,"a",(function(){return u}))},bjUr:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e[e.Chat=0]="Chat",e[e.ViewerList=1]="ViewerList"}(i||(i={}))},buTd:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e.AppointedModerator="appointed-moderator",e.BitsBadgeTier="bits-badge-tier",e.ShareResub="share-resub",e.ThankSubGifter="thank-sub-gifter",e.MegaBenefactorRewards="mega-benefactor-rewards",e.MegaRecipientRewards="mega-recipient-rewards",e.CommunityPointsRewards="community-points-rewards",e.PrimeGiftBombGifter="prime-gift-bomb-gifter",e.HypeTrainRewards="hype-train-rewards"}(i||(i={}))},cERj:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var i,a=n("mrSG"),r=n("q1tI"),o=n("Ty5D"),s=n("/7QA"),l=n("eJ65"),c=n("+GjP"),d=n("vRsq"),u=n("sUnt"),m=n("hnjF"),p=n("+80q"),h=n("EmXd"),f=n("u03v"),g=n("ygYM"),v=n("i4Ys");!function(e){e.ButtonText="button-text",e.FilterText="filter-text"}(i||(i={}));var b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.render=function(){var e=this.getFilters(),t=e.find((function(e){return!!e.selected}));return r.createElement(u.a,{display:m.d.Flex,flexDirection:m.e.Row,alignItems:m.b.Center},r.createElement(u.a,{padding:{right:.5}},r.createElement(p.a,{bold:!0},Object(s.d)("Filter by","VideoFilter"))),r.createElement(l.a,{hideBalloonOnInsideClick:!0},r.createElement(h.a,{dropdown:f.b.ArrowDown,"data-a-target":"video-type-filter-dropdown"},r.createElement(p.a,{bold:!0,"data-test-selector":i.ButtonText},t?t.label:e[0].label)),r.createElement(g.a,{noTail:!0,direction:g.b.Bottom},this.renderFilterList())))},t.prototype.renderFilterList=function(){return this.getFilters().map(this.renderFilter.bind(this))},t.prototype.renderFilter=function(e){var t=!!e.selected;return r.createElement(v.a,{key:e.label,linkTo:t?this.props.location:this.filterLink(e.filter),selected:t,"data-a-target":"video-type-filter-"+e.filter},r.createElement(u.a,{padding:{x:1,y:.5},"data-test-selector":i.FilterText},e.label))},t.prototype.getFilters=function(){var e,t=[{label:Object(s.d)("Featured","CustomShelves"),filter:d.e.Featured},{label:Object(s.d)("Past Broadcasts","VideoFilter2"),filter:d.e.PastBroadcasts},{label:Object(s.d)("Highlights","VideoFilter2"),filter:d.e.Highlights},{label:Object(s.d)("Clips","VideoFilter2"),filter:d.e.Clips},{label:Object(s.d)("Uploads","VideoFilter2"),filter:d.e.Uploads},{label:Object(s.d)("Past Premieres","VideoFilter2"),filter:d.e.PastPremieres},{label:Object(s.d)("Collections","VideoFilter2"),filter:d.e.Collections},{label:Object(s.d)("All Videos","VideoFilter2"),filter:d.e.All}];return e=Object(d.w)(this.props.location.search),t.forEach((function(t){e||t.filter!==d.e.Featured?e&&e===t.filter&&(t.selected=!0):t.selected=!0})),t},t.prototype.filterLink=function(e){var t;return e?Object(d.k)(this.props.channelLogin,this.props,((t={})[d.c]=e,t)):Object(c.c)(this.props.location,d.c)},t}(r.Component),k=Object(o.j)(b)},cJKN:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("/7QA"),o=n("gcd7"),s=n("yR8l"),l=n("3kHA"),c=n("Q8Sx"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setEmoteOnlyMode=function(e){if(t.props.roomID)return e&&e.trim().length>0?{deferred:Promise.resolve({notice:t.emoteOnlyUsage(),error:l.a.InvalidParameters})}:{deferred:t.props.updateRoomModes({variables:{input:{roomID:t.props.roomID,enableEmotesOnlyMode:!0}}}).then((function(){return{notice:Object(r.d)("emote-only mode has been enabled for this room.","EmoteOnlyCommandHandler")}})).catch((function(){return{notice:Object(r.d)("Unable to set emote-only mode.","EmoteOnlyCommandHandler")}}))}},t.unsetEmoteOnlyMode=function(e){if(t.props.roomID)return e&&e.trim().length>0?{deferred:Promise.resolve({notice:t.emoteOnlyOffUsage(),error:l.a.InvalidParameters})}:{deferred:t.props.updateRoomModes({variables:{input:{roomID:t.props.roomID,enableEmotesOnlyMode:!1}}}).then((function(){return{notice:Object(r.d)("emote-only mode has been disabled for this room.","EmoteOnlyCommandHandler")}})).catch((function(){return{notice:Object(r.d)("Unable to unset emote-only mode.","EmoteOnlyCommandHandler")}}))}},t}return Object(i.__extends)(t,e),t.prototype.render=function(){return a.createElement(a.Fragment,null,a.createElement(o.a,{channelLogin:this.props.channelLogin,command:"emoteonly",description:Object(r.d)("Restrict Chat to emote-only messages","EmoteOnlyCommandHandler"),handler:this.props.roomID?this.setEmoteOnlyMode:void 0,helpText:this.emoteOnlyUsage(),permissionLevel:l.b.Moderator}),a.createElement(o.a,{channelLogin:this.props.channelLogin,command:"emoteonlyoff",description:Object(r.d)("Turn off emote-only mode","EmoteOnlyCommandHandler"),handler:this.props.roomID?this.unsetEmoteOnlyMode:void 0,helpText:this.emoteOnlyOffUsage(),permissionLevel:l.b.Moderator}))},t.prototype.emoteOnlyUsage=function(){return Object(r.d)('Usage: "/emoteonly" - Enables emote-only mode (only emoticons may be used in chat). Use "/emoteonlyoff" to disable.',"EmoteOnlyCommandHandler")},t.prototype.emoteOnlyOffUsage=function(){return Object(r.d)('Usage: "/emoteonlyoff" - Disables emote-only mode.',"EmoteOnlyCommandHandler")},t}(a.Component),u=Object(s.a)(c,{name:"updateRoomModes"})(d);n.d(t,"a",(function(){return u}))},cMjZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("K/JX");function a(e){return e&&Object(i.c)(e)||""}},cnlr:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("/MKj"),o=n("ZS2+"),s=n("kRBY"),l=n("TWrO"),c=o.a.wrap((function(){return n.e(96).then(n.bind(null,"8upG"))}),"UpsellCenterComponent",{placeholder:null,failSilently:!0}),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.render=function(){return this.props.isLoggedIn||this.props.collapsed&&!Object(l.a)()||!this.props.firstPageLoaded?null:a.createElement(c,Object(i.__assign)({},this.props))},t}(a.PureComponent);var u=Object(r.b)((function(e){return{collapsed:!e.ui.sideNavExpanded,isLoggedIn:Object(s.f)(e),firstPageLoaded:e.session.firstPageLoaded}}))(d);n.d(t,"a",(function(){return u}))},cpJf:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return r})),function(e){e.Chat="stream_chat",e.Feeds="feeds",e.Room="chatroom",e.Whisper="whisper",e.VodChat="vod-chat"}(i||(i={}));var a={TriHard:{count:196568036},Kappa:{count:192158118},"4Head":{count:155758710},PogChamp:{count:151485090},cmonBruh:{count:146352878},BibleThump:{count:56472964},WutFace:{count:45069031},Kreygasm:{count:41387580},DansGame:{count:38097659},hi5F:{count:34986404},SMOrc:{count:34734484},KappaPride:{count:34262839},VoHiYo:{count:27886434},SwiftRage:{count:24561900},ResidentSleeper:{count:24438298},EleGiggle:{count:19891526},FailFish:{count:19118343},NotLikeThis:{count:18802905},Keepo:{count:18351415},BabyRage:{count:18220906},MingLee:{count:18026207},pbfSSH:{count:16911241},forsenE:{count:14960299},HeyGuys:{count:14851569},ANELE:{count:14648986},PJSalt:{count:14438861}},r=["354","49106","4339","48","25","55338","70433","1902","68856","81103","76171","27509"]},csJo:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelRoot_Collection"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includeChanlets"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channelCurrentUser"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"collection"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"collectionID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channelCollection"},directives:[]}]}}]}}],loc:{start:0,end:310}};i.loc.source={body:'#import "twilight/features/channel/queries/channel-current-user.gql"\n#import "twilight/features/channel/queries/channel-collection.gql"\nquery ChannelRoot_Collection(\n$collectionID: ID!\n$includeChanlets: Boolean!\n) {\ncurrentUser {\n...channelCurrentUser\n}\ncollection(id: $collectionID) {\n...channelCollection\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)}))}i.definitions=i.definitions.concat(r(n("NJiF").definitions)),i.definitions=i.definitions.concat(r(n("vtET").definitions));var o={};function s(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),o[e.name.value]=t}})),e.exports=i,e.exports.ChannelRoot_Collection=function(e,t){var n={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=o[t]||new Set,a=new Set,r=new Set;for(i.forEach((function(e){r.add(e)}));r.size>0;){var l=r;r=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(o[e]||new Set).forEach((function(e){r.add(e)})))}))}return a.forEach((function(t){var i=s(e,t);i&&n.definitions.push(i)})),n}(i,"ChannelRoot_Collection")},cw0r:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("wUQP"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.render=function(){return Object(r.c)(this.props.name)?this.props.children:null},t}(a.Component);n.d(t,"a",(function(){return o}))},cys1:function(e,t,n){"use strict";var i,a=n("q1tI"),r=n("/7QA"),o=n("gvGA"),s=n("5zf8"),l=n("4rCz"),c=n("mrSG"),d=n("yR8l"),u=n("+GjP"),m=n("2xye"),p=n("PL8s"),h=n("+80q"),f=n("X2PJ"),g=n("Ws8v"),v=n("hnjF"),b=n("sUnt"),k=n("i4Ys"),y=n("L/cU"),S=n("fPaz"),C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hasImageLoadingError:!1},t.handleImageError=function(){t.setState({hasImageLoadingError:!0})},t}return Object(c.__extends)(t,e),t.prototype.render=function(){var e=r.a.defaultStreamPreviewURL;return!this.state.hasImageLoadingError&&this.props.imageURL&&(e=this.props.imageURL),a.createElement(y.a,{aspect:S.c.Aspect16x9,alt:this.props.altText,src:e,onError:this.handleImageError})},t}(a.Component),E=(n("Epr8"),"https://static-cdn.jtvnw.net/emoticons/v1/58765/2.0"),w={ERROR:"chat-card-error",TITLE:"chat-card-title",DESCRIPTION:"chat-card-description"},O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderErrorCard=function(){var e=a.createElement("img",{"data-test-selector":w.ERROR,src:E,className:"chat-card__error-img",alt:""});return t.renderCardContent(e,t.props.error)},t.renderCardContent=function(e,t){var n,i;return t?(n=a.createElement(h.a,{bold:!0,"data-test-selector":w.TITLE,title:t.title},t.title),i=a.createElement(h.a,{color:f.c.Alt2,"data-test-selector":w.DESCRIPTION},t.description)):(e=a.createElement(p.a,{overlay:!0}),n=a.createElement(p.a,{width:180}),i=a.createElement(p.a,{width:120})),a.createElement(g.a,{display:v.d.Flex,flexWrap:v.f.NoWrap,padding:.5},a.createElement(g.a,{className:"chat-card__preview-img",background:f.a.Alt2,display:v.d.Flex,alignItems:v.b.Center,justifyContent:v.h.Center,flexShrink:0},e),a.createElement(b.a,{display:v.d.Flex,alignItems:v.b.Center,overflow:v.i.Hidden},a.createElement(b.a,{padding:{left:1},fullWidth:!0},a.createElement(b.a,{className:"chat-card__title",ellipsis:!0},n),a.createElement(b.a,{ellipsis:!0},i))))},t}return Object(c.__extends)(t,e),t.prototype.render=function(){var e;if(this.props.error)e=this.renderErrorCard();else if(this.props.data){var t=Object(u.g)(this.props.data.contentURL,{tt_medium:m.PageviewMedium.Chat,tt_content:m.PageviewContent.ChatCard}),n=a.createElement(C,{altText:this.props.data.title,key:this.props.data.previewImageURL,imageURL:this.props.data.previewImageURL});e=a.createElement(g.a,{background:f.a.Base,borderRadius:f.b.Medium,display:v.d.Flex,fullWidth:!0},a.createElement(k.a,{linkTo:t,targetBlank:!0,type:k.b.Alpha,borderRadius:f.b.Medium},this.renderCardContent(n,{title:this.props.data.title,description:this.props.data.description})))}else e=this.renderCardContent();return a.createElement(g.a,{borderRadius:f.b.Medium,elevation:1},e)},t}(a.Component),D=n("SceP"),N={isTimedOut:!1},_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=N,t.timeoutID=null,t}return Object(c.__extends)(t,e),t.getDerivedStateFromProps=function(e,t){return e.data.clip&&t.isTimedOut?{isTimedOut:!1}:null},t.prototype.componentDidMount=function(){var e=this;this.props.data.clip||(this.timeoutID=setTimeout((function(){e.setState({isTimedOut:!0})}),5e3))},t.prototype.componentDidUpdate=function(e){!e.data.clip&&this.props.data.clip&&this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=null)},t.prototype.render=function(){var e=this.props.data,t=e.clip,n=e.error,i=e.loading;return n||this.state.isTimedOut?a.createElement(O,{error:{title:Object(r.d)("Something went wrong","ClipsChatCard"),description:Object(r.d)("We couldn't find that Clip","ClipsChatCard")}}):i||!t?a.createElement(O,null):a.createElement(O,{data:{title:t.title||(t.broadcaster&&t.broadcaster.displayName?Object(r.d)("Clip of {broadcaster}",{broadcaster:t.broadcaster.displayName},"ClipsChatCard"):""),description:t.curator&&t.curator.displayName?Object(r.d)("Clipped by {curator}",{curator:t.curator.displayName},"ClipsChatCard"):"",previewImageURL:t.thumbnailURL,contentURL:t.url}})},t}(a.Component),I=Object(d.a)(D,{options:function(e){return{variables:{slug:e.slug},notifyOnNetworkStatusChange:!0,fetchPolicy:e.forceNetworkRequest?"cache-first":"cache-only"}}})(_),M=n("TSYQ"),j=n("gTu3"),T=(n("lpj/"),(i={})[j.a.Default]="",i[j.a.Recipient]="mention-fragment--recipient",i[j.a.Sender]="mention-fragment--sender",i),P=function(e){var t=e.isAtMention?"@":"",n=M("mention-fragment",T[e.currentUserMentionRelation]);return a.createElement("span",{className:n,"data-a-target":"chat-message-mention"},""+t+e.recipient)};P.displayName="MentionFragment";var L,R=n("QVaV"),F=n("sU0Q"),U=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c.__extends)(t,e),t.prototype.render=function(){var e=this.props.data,t=e.video,n=e.error;if(e.loading||!t)return a.createElement(O,null);if(n||!t.owner||!t.owner.login||!t.publishedAt||!t.title)return a.createElement(O,{error:{title:Object(r.d)("Something went wrong","VideoChatCard"),description:Object(r.d)("We couldn't find that video","VideoChatCard")}});var i=a.createElement(h.a,null,Object(r.c)(new Date(t.publishedAt),"medium"),a.createElement("span",null," Â· "),Object(R.a)(t.owner.login,t.owner.displayName));return a.createElement(O,{data:{title:t.title,description:i,previewImageURL:t.previewThumbnailURL,contentURL:this.props.url}})},t}(a.Component),x=Object(d.a)(F,{options:function(e){return{variables:{videoID:e.id},notifyOnNetworkStatusChange:!0,fetchPolicy:"cache-first"}}})(U),A=n("ZtEv"),B=n("RcPG"),V=n("Jsra"),H=n("x0+1"),q=n("XRPh"),G=n("u5aL"),W=n("fvjX"),z=n("3sMn"),Q=n("Tznh"),Y=n("VJH5"),$=n("dEDE"),K=n("akKH"),X=n("y0tB");!function(e){e.CancelButton="flagged-fragment-cancel",e.ConfirmButton="flagged-fragment-confirm",e.FeedbackButton="flagged-fragment-feedback",e.FeedbackNo="flagged-fragment-no",e.FeedbackYes="flagged-fragment-yes",e.SettingsLink="flagged-fragment-settings",e.Title="flagged-fragment-title"}(L||(L={}));var J=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={feedbackSelection:null,textShown:!1},t.hasTrackedImpression=!1,t.showSettings=function(){t.props.showChatFilterSettings(Q.c.FilteredMessage),t.props.updateChatConfigState({isSettingsOpen:!0}),t.props.onDismissBalloon()},t.showText=function(){t.props.onShowText(),t.setState({textShown:!0}),r.o.track(m.SpadeEventType.ChatFilterMessageInteraction,t.getCommonTrackingProps())},t.onAffirmativeFeedbackSelected=function(){t.setState({feedbackSelection:!0})},t.onNegativeFeedbackSelected=function(){t.setState({feedbackSelection:!1})},t.onSubmit=function(){t.props.onDismissBalloon(),r.o.track(m.SpadeEventType.ChatFilterFeedbackInteraction,Object(c.__assign)(Object(c.__assign)({},t.getCommonTrackingProps()),{value:t.state.feedbackSelection?t.getAffirmativeText():t.getNegativeText()}))},t}return Object(c.__extends)(t,e),t.prototype.render=function(){var e=this,t=Object(r.d)("Cancel","FlaggedFragmentBalloonContent");return this.state.textShown?a.createElement(b.a,{padding:1},a.createElement(K.a,{label:Object(r.d)("Help improve our filters. Was this message correctly hidden?","FlaggedFragmentBalloonContent")},a.createElement(X.a,{label:this.getAffirmativeText(),name:"flagged-fragment-feedback",onChange:this.onAffirmativeFeedbackSelected,"data-test-selector":L.FeedbackYes}),a.createElement(X.a,{label:this.getNegativeText(),name:"flagged-fragment-feedback",onChange:this.onNegativeFeedbackSelected,"data-test-selector":L.FeedbackNo})),a.createElement(b.a,{display:v.d.Flex,justifyContent:v.h.End},a.createElement(b.a,{margin:{right:1}},a.createElement($.a,{onClick:this.props.onDismissBalloon,type:$.d.Secondary,"data-test-selector":L.CancelButton},t)),a.createElement($.a,{disabled:null===this.state.feedbackSelection,onClick:this.onSubmit,"data-test-selector":L.FeedbackButton},Object(r.d)("Submit","FlaggedFragmentBalloonContent")))):(this.hasTrackedImpression||(r.o.track(m.SpadeEventType.ChatFilterMessageImpression,this.getCommonTrackingProps()),this.hasTrackedImpression=!0),a.createElement(b.a,{padding:1},a.createElement(h.a,{bold:!0,type:h.e.H6,"data-test-selector":L.Title},this.getCategoryTitle()),Object(r.d)("Would you like to see this message? It has been hidden for you based on your <x:link>Chat Filter settings</x:link>.",{"x:link":function(t){return a.createElement(V.a,{onClick:e.showSettings,"data-test-selector":L.SettingsLink},t)}},"FlaggedFragmentBalloonContent"),a.createElement(b.a,{display:v.d.Flex,justifyContent:v.h.End},a.createElement(b.a,{margin:{right:1}},a.createElement($.a,{onClick:this.props.onDismissBalloon,type:$.d.Secondary,"data-test-selector":L.CancelButton},t)),a.createElement($.a,{onClick:this.showText,"data-test-selector":L.ConfirmButton},Object(r.d)("Show Message","FlaggedFragmentBalloonContent")))))},t.prototype.getCategoryTitle=function(){var e=this.props.messagePart.categories;return 1!==Object.values(e).filter((function(e){return!!e})).length?Object(r.d)("Message Blocked","FlaggedFragmentBalloonContent"):e[Y.a.Aggressive]?Object(r.d)("Hostile Message Blocked","FlaggedFragmentBalloonContent"):e[Y.a.Identity]?Object(r.d)("Discriminatory Message Blocked","FlaggedFragmentBalloonContent"):e[Y.a.Sexual]?Object(r.d)("Sexually Explicit Message Blocked","FlaggedFragmentBalloonContent"):Object(r.d)("Profanity Blocked","FlaggedFragmentBalloonContent")},t.prototype.getAffirmativeText=function(){return Object(r.d)("Yes","FlaggedFragmentBalloonContent")},t.prototype.getNegativeText=function(){return Object(r.d)("No","FlaggedFragmentBalloonContent")},t.prototype.getCommonTrackingProps=function(){var e=this.props.messagePart;return{channel_id:this.props.channelID||"",channel:this.props.channelLogin||"",msg_uuid:this.props.messageID||"",word:e.originalText,aggressive_language_detected:!!e.categories[Y.a.Aggressive],explicit_language_detected:!!e.categories[Y.a.Sexual],identity_language_detected:!!e.categories[Y.a.Identity],profane_language_detected:!!e.categories[Y.a.Profanity]}},t}(a.Component);var Z,ee=Object(W.d)(Object(Q.d)((function(e){return e})),Object(z.b)((function(e){return{updateChatConfigState:function(t){return e.updateChatConfigState(t)},isSettingsOpen:e.isSettingsOpen}})))(J),te=(n("VN3V"),function(e){var t,n=e.content,i=e.highlightType,r=M("text-fragment",((t={})["text-fragment--moderated-highlight"]=i===B.a.ModeratedText,t));return a.createElement("span",{className:r,"data-a-target":"chat-message-text"},n)}),ne=n("ygYM");n("UUau");!function(e){e.Balloon="flagged-fragment-balloon",e.Container="flagged-fragment-container",e.Target="flagged-fragment-span"}(Z||(Z={}));var ie=function(e){function t(t){var n=e.call(this,t)||this;return n.state={active:!1,balloonDirection:ne.b.TopCenter,balloonTailOffset:0,balloonXOffset:0,displayed:!1},n.setTopRef=function(e){n.topRef=e},n.setBalloonContentRef=function(e){n.balloonContentRef=e,n.state.active&&n.setState(Object(c.__assign)({},n.getBalloonState()))},n.onClickOut=function(){n.setState({active:!1})},n.onClick=function(){n.setState({active:!0})},n.onShowText=function(){n.setState({displayed:!0},(function(){n.setState(Object(c.__assign)({},n.getBalloonState()))}))},n.onDismissBalloon=function(){n.setState({active:!1})},n.placeholder=new Array(t.messagePart.length+1).join("*"),n}return Object(c.__extends)(t,e),t.prototype.render=function(){return this.state.active?a.createElement("span",{ref:this.setTopRef,"data-test-selector":Z.Container},a.createElement(v.g,{display:v.d.Inline,position:v.j.Relative},a.createElement(G.a,{onClickOut:this.onClickOut},this.renderContent(),a.createElement(ne.a,{direction:this.state.balloonDirection,offsetX:this.state.balloonXOffset+"px",show:!0,size:ne.c.Medium,tailOffset:this.state.balloonTailOffset},a.createElement("span",{ref:this.setBalloonContentRef,"data-test-selector":Z.Balloon}),a.createElement(ee,Object(c.__assign)({},this.props,{onDismissBalloon:this.onDismissBalloon,onShowText:this.onShowText})))))):a.createElement("span",{ref:this.setTopRef,"data-test-selector":Z.Container},this.renderContent())},t.prototype.renderContent=function(){var e={"flagged-fragment":!(this.state.displayed&&!this.state.active),"flagged-fragment--active":this.state.active};return this.state.displayed?a.createElement("span",{className:M(e),"data-test-selector":Z.Target},oe(this.props.messagePart.content)):a.createElement("span",{className:M(e),onClick:this.onClick,"data-test-selector":Z.Target},a.createElement(te,{content:this.placeholder}))},t.prototype.getBalloonState=function(){if(this.balloonContentRef&&this.topRef&&this.topRef.offsetParent){var e=this.topRef.offsetParent.getBoundingClientRect(),t=this.balloonContentRef.getBoundingClientRect(),n=this.state.balloonDirection;t.top<e.top&&(n=ne.b.BottomCenter);var i=e.left+20,a=t.left,r=this.state.balloonXOffset-(a-i);return{balloonDirection:n,balloonTailOffset:e.width/2-r-20,balloonXOffset:r}}return{balloonDirection:ne.b.TopCenter,balloonTailOffset:0,balloonXOffset:0}},t}(a.Component),ae=(n("Ro6I"),function(e){var t=e.displayText,n=e.url,i=e.highlighted;return a.createElement(V.a,{className:M("link-fragment",{"link-fragment--highlighted":i}),linkTo:n,targetBlank:!0,rel:"noreferrer noopener"},t)});function re(e,t,n,i){void 0===n&&(n=!1),void 0===i&&(i=!1);var r=t.content,o=r.displayText,s=r.url;return i?a.createElement(te,{key:"message-span-"+e,content:o}):a.createElement(ae,{key:e+"-link",highlighted:n,displayText:o,url:s})}function oe(e,t,n){void 0===t&&(t={}),void 0===n&&(n=!1);var i=null,r=e.reduce((function(r,s,l){var c=[];switch(l>0&&e[l-1].type!==B.a.Text&&s.type!==B.a.Text&&c.push(" "),s.type){case B.a.Text:case B.a.ModeratedText:var d=s.content,u=s.type;c.push(a.createElement(te,{key:l,content:d,highlightType:u}));break;case B.a.FlaggedSegment:c.push(a.createElement(ie,{key:l,channelID:t.chatChannelID,channelLogin:t.chatChannelLogin,messageID:t.messageSourceID,messagePart:s}));break;case B.a.CurrentUserHighlight:c.push(a.createElement(P,{isAtMention:!1,currentUserMentionRelation:j.a.Recipient,recipient:s.content,key:l}));break;case B.a.Mention:c.push(a.createElement(P,{isAtMention:!0,currentUserMentionRelation:s.content.currentUserMentionRelation,recipient:s.content.recipient,key:l}));break;case B.a.Emote:c.push(a.createElement(q.a,{key:l,emote:s.content,channelID:t.chatChannelID,channelLogin:t.chatChannelLogin,sourceID:t.messageSourceID,sourceType:t.emoteSourceType,referrerID:t.messageAuthorID,disableCard:n}));break;case B.a.Link:c.push(re(l,s,t.isHighlighted,t.disableLinks));break;case B.a.ClipLink:i||t.disableChatCard||(i=a.createElement(o.a,{key:l+"-ErrorBoundary"},a.createElement(I,{slug:s.content.slug,forceNetworkRequest:t.forceClipsNetworkRequest}))),c.push(re(l,s,t.isHighlighted,t.disableLinks));break;case B.a.VideoLink:i||t.disableChatCard||(i=a.createElement(x,{key:l,id:s.content.id,url:s.content.url})),c.push(re(l,s,t.isHighlighted,t.disableLinks))}return r.concat(c)}),[]);return i&&(r=r.concat(i)),r}function se(e){if(e.moderationType===A.e.Delete){var t=e,n=t.userLogin,i=t.body;return a.createElement(H.a,{targetLogin:n,messageBody:i})}if((e=e).moderationType===A.e.Ban)return e.reason?a.createElement("span",{className:"chat-line__moderation--ban-with-reason"},Object(r.d)("{userLogin} has been banned. Reason: {reason}",{userLogin:e.userLogin,reason:e.reason},"ChatLine")):a.createElement("span",{className:"chat-line__moderation--ban"},Object(r.d)("{userLogin} is now banned from this channel.",{userLogin:e.userLogin},"ChatLine"));if(e.reason&&e.duration){var o=Object(r.d)("{userLogin} has been timed out for {duration} seconds. Reason: {reason}",{duration:e.duration,reason:e.reason,userLogin:e.userLogin},"ChatLine");return a.createElement("span",{className:"chat-line__moderation--timeout-with-reason"},o)}return e.duration?a.createElement("span",{className:"chat-line__moderation--timeout"},Object(r.d)("{userLogin} has been timed out for {duration} seconds.",{userLogin:e.userLogin,duration:e.duration},"ChatLine")):void 0}function le(e){var t=e.daysLeft;0===t&&(t=e.hoursLeft);var n,i={bitsTotal:a.createElement("strong",null,Object(l.f)(e.total,{style:"currency",currency:"USD"})),charityName:a.createElement("strong",null,e.charityName),learnMoreURL:a.createElement(V.a,{linkTo:e.learnMore,targetBlank:!0},e.learnMore),hashtag:a.createElement("strong",null,e.hashtag),timeRemaining:Object(l.f)(t)};return a.createElement("span",null,0===e.daysLeft?(n=i,Object(r.d)("{bitsTotal} total raised so far for {charityName}! {timeRemaining} more hours to show support. Cheer and include {hashtag}. Learn More at {learnMoreURL}",{bitsTotal:n.bitsTotal,charityName:n.charityName,timeRemaining:n.timeRemaining,hashtag:n.hashtag,learnMoreURL:n.learnMoreURL},"ChatLine")):function(e){return Object(r.d)("{bitsTotal} total raised so far for {charityName}! {timeRemaining} more days to show support. Cheer and include {hashtag}. Learn More at {learnMoreURL}",{bitsTotal:e.bitsTotal,charityName:e.charityName,timeRemaining:e.timeRemaining,hashtag:e.hashtag,learnMoreURL:e.learnMoreURL},"ChatLine")}(i))}function ce(e){var t=e.enabled?Object(r.d)("This room is now in slow mode. You may send messages every {length} seconds.",{length:e.length},"ChatLine"):Object(r.d)("This room is no longer in slow mode.","ChatLine");return a.createElement("span",null,t)}function de(e){var t;if(e.length>0){var n=e.join(", ");t=Object(r.d)("The moderators of this channel are: {moderatorList}",{moderatorList:n},"ChatLine")}else t=Object(r.d)("There are no moderators of this channel.","ChatLine");return a.createElement("span",null,t)}function ue(e){if(e.enabled){var t=0===e.length?Object(r.d)("This room is in followers-only mode.","ChatLine"):Object(r.d)("This room is now in {length} followers-only mode.",{length:Object(s.b)(60*e.length)},"ChatLine");return a.createElement("span",null,t)}return a.createElement("span",null,Object(r.d)("This room is no longer in followers-only mode.","ChatLine"))}function me(e){return e.enabled?a.createElement("span",null,Object(r.d)("This room is now in emote-only mode.","ChatLine")):a.createElement("span",null,Object(r.d)("This room is no longer in emote-only mode.","ChatLine"))}function pe(e){var t=e.enabled?Object(r.d)("This room is now in subscriber-only mode.","ChatLine"):Object(r.d)("This room is no longer in subscriber-only mode.","ChatLine");return a.createElement("span",null,t)}function he(e){return e.enabled?a.createElement("span",null,Object(r.d)("This room is now in unique-chat mode.","ChatLine")):a.createElement("span",null,Object(r.d)("This room is no longer in unique-chat mode.","ChatLine"))}function fe(e){return e.isAutohost?Object(r.d)("{host} is now auto hosting you for up to {viewerCount, number} viewers.",{host:e.hostingChannel,viewerCount:e.viewerCount},"ChatLine"):e.viewerCount<=2?Object(r.d)("{host} is now hosting you.",{host:e.hostingChannel},"ChatLine"):Object(r.d)("{host} is now hosting you for up to {viewerCount, number} viewers.",{host:e.hostingChannel,viewerCount:e.viewerCount},"ChatLine")}function ge(e,t){void 0===t&&(t=!1);var n=t?e.getHours():e.getHours()%12;t||0!==n||(n=12);var i=n.toString(),a=e.getMinutes(),r=a.toString();return a<10&&(r="0"+r),t&&n<10&&(i="0"+i),i+":"+r}function ve(e,t){return void 0===t&&(t=!1),a.createElement("span",{key:"timestamp",className:"chat-line__timestamp","data-a-target":"chat-timestamp","data-test-selector":"chat-timestamp"},ge(new Date(e),t))}function be(e){return a.createElement("span",{key:"timestamp",className:"chat-line__timestamp","data-a-target":"chat-timestamp","data-test-selector":"chat-timestamp"},function(e,t){void 0===t&&(t={});var n=r.p.intl.getLanguageCode()||"en";return Intl.DateTimeFormat(n,t).format(e)}(new Date(e),{hour:"numeric",minute:"numeric"}))}n.d(t,"f",(function(){return oe})),n.d(t,"g",(function(){return se})),n.d(t,"b",(function(){return le})),n.d(t,"j",(function(){return ce})),n.d(t,"i",(function(){return de})),n.d(t,"d",(function(){return ue})),n.d(t,"c",(function(){return me})),n.d(t,"k",(function(){return pe})),n.d(t,"h",(function(){return he})),n.d(t,"e",(function(){return fe})),n.d(t,"a",(function(){return ge})),n.d(t,"l",(function(){return ve})),n.d(t,"m",(function(){return be}))},dGMd:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return v})),n.d(t,"e",(function(){return b})),n.d(t,"c",(function(){return k})),n.d(t,"d",(function(){return y})),n.d(t,"f",(function(){return S}));var i=n("mrSG"),a=n("w09P"),r=n("q1tI"),o=n("/7QA"),s=n("S4w9"),l=n("geRD"),c=n("g+79"),d=n("W1jp"),u=n("zdrs"),m=n("2zj6"),p=n("8XBm"),h="300238151",f="436872863",g="channel_points";function v(e){return{icon:r.createElement(c.a,{data:e.reward,size:c.b.ExtraSmall}),title:Object(o.d)("Share Your New Emote","EmoteReward"),body:Object(o.d)("That's a fancy emote you've got there. Share it! You can also get some more.","EmoteReward"),inputValue:e.inputValue,disableCommands:!0}}function b(e,t,n){return o.p.apollo.client.mutate(Object(i.__assign)({mutation:p},Object(l.a)({channelID:e,cost:Object(d.b)(t),transactionID:n})))}function k(e,t,n,a){return o.p.apollo.client.mutate(Object(i.__assign)({mutation:u},Object(l.a)({channelID:e,emoteID:n,cost:Object(d.b)(t),transactionID:a})))}function y(e,t,n,a){return o.p.apollo.client.mutate(Object(i.__assign)({mutation:m},Object(l.a)({channelID:e,emoteID:n,cost:Object(d.b)(t),transactionID:a})))}function S(e){Object(l.i)(s,{withOwner:!0},(function(t){return a(t,(function(e){return e.currentUser.emoteSets}),(function(t){var n=t.filter((function(e){return e.id===h})).length>0;return t=n?t.map((function(t){if(t.id===h){var n=Object(i.__assign)(Object(i.__assign)({},e),{setID:h,__typename:"Emote"});return a(t,(function(e){return e.emotes}),(function(t){return t?-1!==t.findIndex((function(t){return t&&t.id===e.id}))?t:Object(i.__spreadArrays)(t,[n]):[n]}))}return t})):Object(i.__spreadArrays)(t,[{id:h,emotes:[Object(i.__assign)(Object(i.__assign)({},e),{setID:h,__typename:"Emote"})],__typename:"EmoteSet",owner:{__typename:"User",id:f,login:g,displayName:null,profileImageURL:null}}])}))}))}},djOf:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelPage_ChannelInfoBar_EditButton"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isStaff"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isGlobalMod"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isSiteAdmin"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:114}};n.loc.source={body:"query ChannelPage_ChannelInfoBar_EditButton {\ncurrentUser {\nid\nlogin\nroles {\nisStaff\nisGlobalMod\nisSiteAdmin\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.ChannelPage_ChannelInfoBar_EditButton=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"ChannelPage_ChannelInfoBar_EditButton")},dq0Q:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"subscriptionProductEmote"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Emote"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}}],loc:{start:0,end:61}};n.loc.source={body:"fragment subscriptionProductEmote on Emote {\nid\nsetID\ntoken\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},dsMP:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("/7QA"),o=n("sUnt"),s=n("+80q"),l=n("hnjF"),c=n("dEDE"),d=n("X2PJ"),u=n("Ws8v"),m=n("4wKg"),p=n("C7sF"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={showSkipConfirmation:!1},t.showSkipConfirmation=function(){t.setState({showSkipConfirmation:!0})},t.hideSkipConfirmation=function(){t.setState({showSkipConfirmation:!1})},t}return Object(i.__extends)(t,e),t.prototype.render=function(){var e=Object(r.d)("We can show your {monthsSubbed} month sub anniversary reminder to you again later, or choose to:",{monthsSubbed:this.props.event.cumulativeTenureMonths},"ShareResubCallout"),t=Object(r.d)("You will not be able to share your {monthsSubbed} month sub anniversary reminder again. Future anniversary reminders will still show.",{monthsSubbed:this.props.event.cumulativeTenureMonths},"ShareResubContextMenu");return this.state.showSkipConfirmation?a.createElement(o.a,null,a.createElement(s.a,null,t),a.createElement(o.a,{padding:{y:2},display:l.d.Flex,justifyContent:l.h.End},a.createElement(o.a,{margin:{right:.5}},a.createElement(c.a,{onClick:this.hideSkipConfirmation,size:c.b.Small,children:Object(r.d)("Go back","ShareResubContextMenu"),type:c.d.Secondary})),a.createElement(c.a,{onClick:this.props.onSkip,size:c.b.Small,children:Object(r.d)("Okay","ShareResubContextMenu")}))):a.createElement(o.a,null,a.createElement(s.a,{bold:!0,color:d.c.Alt2},Object(r.d)("Change when you'll see this","ShareResubCallout")),a.createElement(o.a,{padding:{y:.5}},a.createElement(s.a,{color:d.c.Alt2},e)),a.createElement(u.a,{fullWidth:!0,border:!0,margin:{y:.5}}),this.props.onPin&&a.createElement(m.a,{label:Object(r.d)("Pin this here","ShareResubContextMenu"),onClick:this.props.onPin,figure:{icon:p.a.Pin}}),this.props.onHide&&a.createElement(m.a,{label:Object(r.d)("Show on next visit","ShareResubContextMenu"),onClick:this.props.onHide,figure:{icon:p.a.EventsReminderAdd}}),this.props.onSkip&&a.createElement(m.a,{label:Object(r.d)("Skip this month's alert","ShareResubContextMenu"),onClick:this.showSkipConfirmation,figure:{icon:p.a.VisibilityHidden}}))},t}(a.Component);n.d(t,"a",(function(){return h}))},e7rh:function(e,t,n){},e9QR:function(e,t,n){},eAAt:function(e,t,n){"use strict";var i=n("q1tI"),a=n("kduP"),r=n("hnjF"),o=n("Jsra"),s=n("L/cU"),l=n("fPaz"),c=function(e){return i.createElement(r.g,{overflow:r.i.Hidden,flexShrink:0},i.createElement(o.a,{to:{pathname:Object(a.a)(e.name),state:{content:"current_game",medium:"twitch_channel"}},"data-a-target":"stream-box-art-link"},i.createElement(s.a,{src:e.boxArtURL,alt:e.name,aspect:l.c.Aspect3x4,size:e.size})))};n.d(t,"a",(function(){return c}))},eAdp:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"CreateVideoBookmark"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CreateVideoBookmarkInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createVideoBookmark"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"videoBookmark"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:140}};n.loc.source={body:"mutation CreateVideoBookmark($input: CreateVideoBookmarkInput!) {\ncreateVideoBookmark(input: $input){\nvideoBookmark{\nid\n}\nerror {\ncode\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.CreateVideoBookmark=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"CreateVideoBookmark")},eZF0:function(e,t,n){},efpB:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l}));var i=n("mrSG"),a=n("/7QA"),r=n("2xye"),o=n("rEFn");function s(){return a.p.history.location.state&&a.p.history.location.state.medium===r.PageviewMedium.NavSearch?Object(i.__assign)(Object(i.__assign)({},l()),{medium:a.p.history.location.state.medium,content:a.p.history.location.state.content}):null}function l(){var e;return(e={})[o.a]=a.p.history.location.state&&a.p.history.location.state[o.a],e[o.b]=a.p.history.location.state&&a.p.history.location.state[o.b],e.previous_search_query_id=a.p.history.location.state&&a.p.history.location.state.previous_search_query_id,e}},ehEd:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return r}));var i="https://static-cdn.jtvnw.net/jtv_user_pictures/xarth/404_user_150x150.png",a=function(e){return"https://static-cdn.jtvnw.net/emoticons/v1/"+e+"/1.0"},r=function(e){return"https://static-cdn.jtvnw.net/emoticons/v1/"+e+"/2.0 2x"}},"enD+":function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"WatchParty_UpdateLWAToken"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateLWATokenInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateLWAToken"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"watchPartyError"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accessToken"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"expiresIn"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"refreshToken"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:254}};i.loc.source={body:'#import "twilight/features/watch-party/models/watch-party-error-fragment.gql"\nmutation WatchParty_UpdateLWAToken($input: UpdateLWATokenInput!) {\nupdateLWAToken(input: $input) {\nerror {\n...watchPartyError\n}\ntoken {\naccessToken\nexpiresIn\nrefreshToken\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("JqNv").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})));var r={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),r[e.name.value]=t}})),e.exports=i,e.exports.WatchParty_UpdateLWAToken=function(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=r[t]||new Set,a=new Set,s=new Set;for(i.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(r[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(t){var i=o(e,t);i&&n.definitions.push(i)})),n}(i,"WatchParty_UpdateLWAToken")},esZd:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("2Ygb");function o(e){return function(t){return function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return Object(i.__extends)(o,n),o.prototype.render=function(){return a.createElement(t,Object(i.__assign)({},e(this.props)))},o.displayName=Object(r.a)(o.name,t),o}(a.Component)}}n.d(t,"a",(function(){return o}))},f805:function(e,t,n){},fBrF:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return c}));var i,a=n("mrSG"),r=n("q1tI"),o=n("1rIY"),s=(i=Object(o.a)("WatchPartyContext",{isWatchPartyActive:!1,canChatOnPageDuringWatchParty:!1,updateWatchPartyActive:function(){return null},allowChatOnPageDuringWatchParty:function(){return null}})).context,l=i.withContext,c=function(e){function t(t){var n=e.call(this,t)||this;return n.updateWatchPartyActive=function(e){n.setState({isWatchPartyActive:e})},n.allowChatOnPageDuringWatchParty=function(e){n.setState({canChatOnPageDuringWatchParty:e})},n.state={isWatchPartyActive:!1,canChatOnPageDuringWatchParty:!1,allowChatOnPageDuringWatchParty:n.allowChatOnPageDuringWatchParty,updateWatchPartyActive:n.updateWatchPartyActive},n}return Object(a.__extends)(t,e),t.prototype.render=function(){return r.createElement(s.Provider,{value:this.state},this.props.children)},t}(r.Component)},fCiU:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var i=n("p52R"),a=/^[\x00-\x7F]*$/,r=function(e){return!a.test(e)},o=function(e){return r(e.displayName)?e.displayName+" ("+e.name+")":e.displayName},s=function(e,t){return{userID:e.id,userDisplayName:e.displayName,userType:i.a.User,isIntl:r(e.displayName),userLogin:e.name,color:t}}},fGoN:function(e,t,n){},fI4C:function(e,t,n){"use strict";n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return f})),n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return v})),n.d(t,"m",(function(){return b})),n.d(t,"l",(function(){return k})),n.d(t,"f",(function(){return y})),n.d(t,"g",(function(){return S})),n.d(t,"e",(function(){return C})),n.d(t,"i",(function(){return E})),n.d(t,"h",(function(){return w})),n.d(t,"j",(function(){return O})),n.d(t,"k",(function(){return D}));var i=n("mrSG"),a=n("/7QA"),r=n("vRsq"),o=n("2xye"),s=n("L9xt"),l=n("IZXT"),c=n("I6K6"),d=n("ahza"),u=n("DpwM"),m=n("BQs+"),p=n("CJLt"),h="replay_mode",f="timestamp_mode",g="on",v="off",b=function(e){a.o.track(s.SpadeEventType.VideoChatSettingChanged,e)},k=function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n,d,u,h;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,a.p.apollo.client.query({query:p,variables:{videoCreatorID:e.channelId,videoID:e.contentId}})];case 1:return n=i.sent().data,d={channel:n.video.owner.login,channel_id:Number(e.channelId),game:n.video.game?n.video.game.name:null,location:o.PageviewLocation.VideoWatchPage,share_platform:m.a.Link,share_context:o.ShareItemContext.Chomment,shared_item_id:Object(r.q)(e.contentId),shared_item_type:Object(c.a)(n.video.broadcastType),shared_item_url:t.toString(),partner:n.video.owner.roles.isPartner,source_item_id:e.id,source_item_type:o.SourceItemType.Chomment},u=N(e,n,m.a.Link),a.o.track(s.SpadeEventType.ChommentUIAction,u),a.o.track(s.SpadeEventType.ShareItem,d),[3,3];case 2:return h=i.sent(),Object(l.d)()?a.k.warn(h.toString(),k.name):a.k.errorAndReport(h.toString(),k.name),[3,3];case 3:return[2]}}))}))},y=function(e,t){var n=e.users[0],i=e.comments[0];return{channel:t.user.login,channel_id:Number(i.channelId),comment_id:i.id,comment_state:i.state,event_source:"frontend",game:t.video.game?t.video.game.name:null,login:n.name,play_session_id:a.o.getVideoPlayerTrackingData().playSessionID,reply_to_comment_id:Object(u.h)(i)?i.parentId:null,user_id:Number(n.id),vod_id:Number(i.contentId),vod_title:t.video.title,vod_ts:i.contentOffset,vod_type:Object(c.a)(t.video.broadcastType)}},S=function(e,t,n){return{author_id:Number(e.comment.commenter),author_login:n.users[1].login,channel:n.users[0].login,channel_id:Number(e.comment.channelId),comment_id:e.comment.id,event_source:"frontend",game:n.video.game?n.video.game.name:null,login:t.session.user.login,user_id:Number(t.session.user.id),vod_id:Number(e.comment.contentId),vod_title:n.video.title,vod_type:Object(c.a)(n.video.broadcastType),vod_ts:e.comment.contentOffset}},C=function(e,t,n){return{action:"ban_user",author_id:Number(e.bannedUser),channel_id:Number(e.targetChannel),event_source:"frontend",game:n.video.game?n.video.game.name:null,login:t.session.user.login,target_user_id:Number(e.bannedUser),user_id:Number(t.session.user.id),vod_id:Number(n.video.id),vod_title:n.video.title,vod_type:Object(c.a)(n.video.broadcastType),vod_ts:e.comment.contentOffset}},E=function(e,t,n){return{action:"delete",author_id:Number(e.commenter),author_login:n.users[1].login,channel:n.users[0].login,channel_id:Number(e.channelId),comment_id:e.id,event_source:"frontend",game:n.video.game?n.video.game.name:null,login:t.session.user.login,reply_to_comment_id:e.parentId?e.parentId:null,user_id:Number(t.session.user.id),vod_id:Number(e.contentId),vod_title:n.video.title,vod_type:Object(c.a)(n.video.broadcastType),vod_ts:e.contentOffset}},w=function(e,t,n){var i=null,a=Object.keys(t.vodChat.comments.comments.parentComments);if(a.length>0){var r=a[0];i=t.vodChat.comments.comments.parentComments[r].channelId}return{action:"create",channel_id:i?Number(i):null,comment_body:e.message,event_source:"frontend",game:n.video.game?n.video.game.name:null,login:t.session.user?t.session.user.login:null,reply_to_comment_id:Object(d.e)(e)?e.parentId:null,user_id:t.session.user?Number(t.session.user.id):null,vod_id:Number(n.video.id),vod_title:n.video.title,vod_ts:Object(d.e)(e)?null:Number(e.contentOffsetSeconds),vod_type:Object(c.a)(n.video.broadcastType)}},O=function(e,t,n){var i=e.comment.id,a=e.comment.channelId;return{action:e.state===u.c?"publish":"unpublish",channel_id:Number(a),comment_id:i,event_source:"frontend",game:n.video.game?n.video.game.name:null,login:t.session.user.login,user_id:Number(t.session.user.id),vod_id:Number(n.video.id),vod_title:n.video.title,vod_ts:e.comment.contentOffset,vod_type:Object(c.a)(n.video.broadcastType)}},D=function(e,t,n){return{action:"sync_vod_to_time",author_id:Number(e.commenter),channel:n.user.login,channel_id:Number(e.channelId),comment_id:e.id,event_source:"frontend",game:n.video.game?n.video.game.name:null,login:t.session.user?t.session.user.login:null,user_id:t.session.user?Number(t.session.user.id):null,vod_id:Number(e.contentId),vod_title:n.video.title,vod_ts:e.contentOffset,vod_type:Object(c.a)(n.video.broadcastType)}},N=function(e,t,n){return{action:"share",author_id:Number(e.commenter),channel:t.video.owner.login,channel_id:Number(e.channelId),comment_id:e.id,event_source:"frontend",game:t.video.game?t.video.game.name:null,login:t.currentUser?t.currentUser.login:null,user_id:t.currentUser?Number(t.currentUser.id):null,vod_id:Number(e.contentId),vod_title:t.video.title,vod_ts:e.contentOffset,vod_type:Object(c.a)(t.video.broadcastType),share_platform:n}}},fIj0:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoChatChannelAndVideoTrackingContext"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoCreatorID"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoCreatorID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:186}};n.loc.source={body:"query VideoChatChannelAndVideoTrackingContext($videoCreatorID: ID $videoID: ID) {\nvideo(id: $videoID) {\nid\nbroadcastType\ntitle\ngame {\nid\nname\n}\n}\nuser(id: $videoCreatorID) {\nid\nlogin\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.VideoChatChannelAndVideoTrackingContext=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"VideoChatChannelAndVideoTrackingContext")},fKMw:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("mrSG"),a=n("yR8l"),r=n("sMoq");function o(){var e=this;return Object(a.a)(r,{props:function(t){return{vipUserMutation:function(n){return Object(i.__awaiter)(e,void 0,void 0,(function(){return Object(i.__generator)(this,(function(e){switch(e.label){case 0:return t.mutate&&t.ownProps.channelID?[4,t.mutate({variables:{input:{channelID:t.ownProps.channelID,granteeLogin:n}}})]:[2];case 1:return[2,e.sent().data]}}))}))}}}})}},fQWD:function(e,t,n){"use strict";var i=n("vHGB");n.d(t,"a",(function(){return i.a}))},fezU:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("1rIY"),o=n("1MDS"),s=n("oK83"),l=Object(r.a)("ViewerCardContext",{viewerCardOptions:null,onShowViewerCard:function(){return null},onShowExtensionMessageCard:function(){return null},onShowEmoteCard:function(){return null},hideViewerCard:function(){return null}}),c=l.context,d=l.withContext,u=function(e){function t(t){var n=e.call(this,t)||this;return n.onShowViewerCard=function(e,t,i,a){n.setState((function(n){var r=n.viewerCardOptions;return r&&r.targetID===e?{viewerCardOptions:null}:{viewerCardOptions:{viewerCardType:s.c.Viewer,initialTopOffset:a,sourceID:i,sourceType:t,targetID:e}}}))},n.onShowExtensionMessageCard=function(e,t,i,a){n.setState((function(n){var r=n.viewerCardOptions;return r&&r.viewerCardType===s.c.Extension&&r.targetID===e?{viewerCardOptions:null}:{viewerCardOptions:{viewerCardType:s.c.Extension,initialTopOffset:a,sourceID:i,targetID:e,extensionVersion:t}}}))},n.onShowEmoteCard=function(e){n.setState((function(t){var n=t.viewerCardOptions;return n&&n.viewerCardType===s.c.Emote&&n.emoteID===e.emoteID?{viewerCardOptions:null}:{viewerCardOptions:{viewerCardType:s.c.Emote,initialTopOffset:e.initialTopOffset||0,sourceID:e.sourceID,emoteSourceType:e.emoteSourceType,targetID:e.referrerID,emoteID:e.emoteID,emoteCode:e.emoteCode}}})),Object(o.c)({emoteLocation:Object(o.b)(e.emoteSourceType),emoticonID:e.emoteID,chatChannel:e.channelLogin,chatChannelID:e.channelID?e.channelID:"",referrerUserID:e.referrerID,action:o.a.Open,msgID:e.sourceID})},n.hideViewerCard=function(){n.setState({viewerCardOptions:null})},n.state={viewerCardOptions:null,onShowViewerCard:n.onShowViewerCard,onShowExtensionMessageCard:n.onShowExtensionMessageCard,onShowEmoteCard:n.onShowEmoteCard,hideViewerCard:n.hideViewerCard},n}return Object(i.__extends)(t,e),t.prototype.render=function(){return a.createElement(c.Provider,{value:this.state},this.props.children)},t}(a.Component);n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return u}))},fnDh:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"squadStreamData"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SquadStream"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"members"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"squadStreamMember"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"squadStreamMember"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"150"}}],directives:[]}]}}],loc:{start:0,end:186}};n.loc.source={body:"fragment squadStreamData on SquadStream {\nid\nstatus\nmembers {\n...squadStreamMember\n}\nowner {\nid\n}\n}\nfragment squadStreamMember on User {\nid\nlogin\ndisplayName\nprofileImageURL(width:150)\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},frkH:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Chat_DenyRejectedChatMessage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DenyRejectedChatMessageInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"denyRejectedChatMessage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:138}};n.loc.source={body:"mutation Chat_DenyRejectedChatMessage($input: DenyRejectedChatMessageInput!) {\ndenyRejectedChatMessage(input: $input) {\nmessage {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.Chat_DenyRejectedChatMessage=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"Chat_DenyRejectedChatMessage")},fwSA:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CommunityPointsRewardRedemptionContext"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"community"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"communityPointsUserFragment"},directives:[]}]}}]}}],loc:{start:0,end:215}};i.loc.source={body:'#import "twilight/features/community-points/models/user-fragment.gql"\nquery CommunityPointsRewardRedemptionContext($channelLogin: String!) {\ncommunity: user(login: $channelLogin) {\n...communityPointsUserFragment\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("1mB7").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})));var r={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),r[e.name.value]=t}})),e.exports=i,e.exports.CommunityPointsRewardRedemptionContext=function(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=r[t]||new Set,a=new Set,s=new Set;for(i.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(r[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(t){var i=o(e,t);i&&n.definitions.push(i)})),n}(i,"CommunityPointsRewardRedemptionContext")},fxMP:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return m})),n.d(t,"g",(function(){return p})),n.d(t,"d",(function(){return h})),n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return g}));var i=n("i6WW"),a=n("6j5V"),r=n("XmgI"),o=n("4h+t"),s=n("gTu3"),l=n("RcPG"),c=n("a1OF"),d="/me ";function u(e,t,n){var i=e.content.text.startsWith(d);return p(e.content.fragments,i,n,t||Object(o.a)(),e.sender&&e.sender.login||void 0)}function m(e,t){return p(e.content.fragments,!1,t)}function p(e,t,n,o,u){var m=[];return e.forEach((function(e,p){if(null!==e){var h=e.content||{__typename:"Text"};switch(h.__typename){case"Emote":if(!h.emoteID)return;m.push({type:l.a.Emote,content:{alt:e.text,emoteID:h.emoteID,images:{themed:!1,sources:{"1x":Object(c.d)(h.emoteID,1),"2x":Object(c.d)(h.emoteID,2),"4x":Object(c.d)(h.emoteID,4)}}}});break;case"CheermoteToken":if(!o)return;var f=h.prefix,g=h.bitsAmount,v=h.tier,b=o.indexedActions[f],k=b&&b.indexedTiers.get(v);k?m.push({type:l.a.Emote,content:{alt:f,images:Object(r.d)(k),cheerAmount:g,cheerColor:k.color}}):m.push(Object(a.a)(e.text));break;case"User":var y=s.a.Default;n&&h.login===n?y=s.a.Recipient:n&&u&&u===n&&(y=s.a.Sender),m.push({type:l.a.Mention,content:{recipient:e.text.slice(1),currentUserMentionRelation:y}});break;case"AutoMod":m.push({type:l.a.ModeratedText,content:e.text});break;default:var S=Object(i.a)(e.text,{parseClips:!0,parseVods:!0});if(S)m.push(S);else{var C=e.text;t&&0===p&&C.startsWith(d)&&(C=C.substr(3)),m.push(Object(a.a)(C))}}}})),m}function h(e){var t=e.data,n=t.message,i=t.cursor,a=f(n.content.fragments),r=g(n.sender.badges);return{cursor:""+i,node:{id:n.id,deletedAt:null,sentAt:n.sent_at,content:{text:n.content.text,fragments:a,__typename:"RoomMessageContent"},sender:{id:n.sender.user_id,login:n.sender.login,chatColor:n.sender.chat_color,displayName:n.sender.display_name,displayBadges:r,__typename:"User"},__typename:"RoomMessage"},__typename:"RoomMessageEdge"}}function f(e){return e.map((function(e){var t={text:e.text,content:null,__typename:"RoomMessageFragment"},n=e.cheermote,i=e.emoticon,a=e.mention,r=e.text;return n?t.content={bitsAmount:n.bits_amount,prefix:n.prefix,tier:n.tier,__typename:"CheermoteToken"}:i?t.content={emoteID:i.id,setID:i.set_id,token:r,__typename:"Emote"}:a&&(t.content={id:a.user_id,login:a.login,displayName:a.display_name,__typename:"User"}),t}))}function g(e){return e.map((function(e){return{setID:e.id,version:e.version,__typename:"Badge"}}))}},"g+79":function(e,t,n){"use strict";var i,a,r=n("mrSG"),o=n("TSYQ"),s=n("q1tI"),l=n("4rCz"),c=n("A4KW"),d=n("W1jp"),u=n("X2PJ"),m=n("hnjF"),p=n("uG/k"),h=n("Ws8v"),f=n("sUnt"),g=n("+80q");n("rCSd");!function(e){e.Cost="cost"}(i||(i={})),function(e){e.ExtraSmall="reward-icon--extra-small",e.Small="reward-icon--small",e.Medium="reward-icon--medium",e.Large="reward-icon--large"}(a||(a={}));var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.render=function(){var e,t=o(((e={"reward-icon":!0})[this.props.size||a.Medium]=!0,e));return s.createElement(u.f,{alignItems:m.b.Center,className:t,borderRadius:u.b.Medium,display:m.d.Flex,flexDirection:m.e.Column,justifyContent:m.h.Center,position:m.j.Relative},s.createElement("div",{style:this.customStyles},this.icon,this.cost))},Object.defineProperty(t.prototype,"customStyles",{get:function(){var e=Object(d.a)(this.props.data);return e?{backgroundColor:e}:{}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){var e=Object(d.d)(this.props.data),t=o({"reward-icon__image":!0,"reward-icon__image--raised":!!this.props.showCost&&this.props.size===a.Large,"reward-icon__image--extra-small":this.props.size===a.ExtraSmall});return s.createElement(p.a,Object(r.__assign)({alt:Object(d.e)(this.props.data),className:t},e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cost",{get:function(){return this.props.showCost&&this.props.size===a.Large?s.createElement(h.a,{attachBottom:!0,alignItems:m.b.Center,borderRadius:u.b.Small,className:"reward-icon__cost",margin:{y:1},padding:{x:.5},position:m.j.Absolute,"data-test-selector":i.Cost,justifyContent:m.h.Center,display:m.d.Flex,color:u.c.Overlay},s.createElement(f.a,{margin:{right:.5}},s.createElement(c.b,{channelLogin:this.props.channelLogin,iconSize:c.a.Small})),s.createElement(g.a,{fontSize:u.d.Size7},Object(l.f)(Object(d.b)(this.props.data)))):null},enumerable:!0,configurable:!0}),t}(s.Component);n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return v}))},g17B:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Chat_ChannelCheermotes"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"cheer"},directives:[]}]}}]}}],loc:{start:0,end:157}};i.loc.source={body:'#import "twilight/features/chat/models/cheer-fragment.gql"\nquery Chat_ChannelCheermotes($channelLogin: String) {\nuser(login: $channelLogin) {\nid\n...cheer\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("F9eG").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})));var r={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),r[e.name.value]=t}})),e.exports=i,e.exports.Chat_ChannelCheermotes=function(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=r[t]||new Set,a=new Set,s=new Set;for(i.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(r[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(t){var i=o(e,t);i&&n.definitions.push(i)})),n}(i,"Chat_ChannelCheermotes")},g807:function(e,t,n){"use strict";var i=n("RNNG"),a=function(){function e(e){this.videoComments=e,this.currentOffset=e.minOffset}return e.prototype[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.videoComments.offsets[e.currentOffset]||[],n={done:e.currentOffset>e.videoComments.maxOffset,value:{offset:e.currentOffset,comments:t}};return e.currentOffset++,n}}},e}();n.d(t,"b",(function(){return i.b})),n.d(t,"c",(function(){return i.c})),n.d(t,"d",(function(){return i.f})),n.d(t,"a",(function(){return a}))},gDzh:function(e,t,n){},gFHd:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ShareVideo_Content"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"hasVideo"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"hasCollection"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}},{kind:"Argument",name:{kind:"Name",value:"options"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"includePrivate"},value:{kind:"BooleanValue",value:!0}}]}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"hasVideo"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"shareVideoContent"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"collection"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"collectionID"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"hasCollection"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"shareCollectionContent"},directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"shareVideoContent"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Video"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"shareCollectionContent"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}],loc:{start:0,end:588}};n.loc.source={body:"query ShareVideo_Content($videoID: ID! $collectionID: ID! $hasVideo: Boolean! $hasCollection: Boolean!) {\n# If the page specifies a video ID query it directly.\nvideo(id: $videoID options: { includePrivate: true }) @include(if: $hasVideo) {\n...shareVideoContent\n}\n# If the page is a collection page grab the first video from the collection.\ncollection(id: $collectionID) @include(if: $hasCollection) {\n...shareCollectionContent\n}\n}\nfragment shareVideoContent on Video {\nid\nowner {\nid\ndisplayName\n}\ntitle\n}\nfragment shareCollectionContent on Collection {\nid\nowner {\nid\ndisplayName\n}\ntitle\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.ShareVideo_Content=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"ShareVideo_Content")},gHOn:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelPage_ChannelFollowerCount"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"followers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:111}};n.loc.source={body:"query ChannelPage_ChannelFollowerCount($login: String!) {\nuser(login: $login) {\nid\nfollowers {\ntotalCount\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.ChannelPage_ChannelFollowerCount=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"ChannelPage_ChannelFollowerCount")},gMwc:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoMarkersChatCommand"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:115}};n.loc.source={body:"query VideoMarkersChatCommand($channelLogin: String!) {\nuser(login: $channelLogin) {\nid\nstream {\nid\ncreatedAt\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.VideoMarkersChatCommand=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"VideoMarkersChatCommand")},gO1k:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Chat_DeleteChatMessage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DeleteChatMessageInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deleteChatMessage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"responseCode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sender"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:182}};n.loc.source={body:"mutation Chat_DeleteChatMessage($input: DeleteChatMessageInput!) {\ndeleteChatMessage(input: $input) {\nresponseCode\nmessage {\nid\nsender {\nid\nlogin\ndisplayName\n}\ncontent {\ntext\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.Chat_DeleteChatMessage=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"Chat_DeleteChatMessage")},gPTj:function(e,t,n){},gTu3:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e[e.Default=0]="Default",e[e.Recipient=1]="Recipient",e[e.Sender=2]="Sender"}(i||(i={}))},gb2O:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SendSubsOnlyMessage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"SendChatMessageThroughSubscriberModeInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sendChatMessageThroughSubscriberMode"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"balance"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:163}};n.loc.source={body:"mutation SendSubsOnlyMessage($input: SendChatMessageThroughSubscriberModeInput!) {\nsendChatMessageThroughSubscriberMode(input: $input) {\nbalance\nerror {\ncode\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.SendSubsOnlyMessage=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"SendSubsOnlyMessage")},gcd7:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("6C1D"),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.makeCommandObjectFromProps=function(e){return{name:e.command,description:e.description,helpText:e.helpText,permissionLevel:e.permissionLevel,commandArgs:e.args,handler:e.handler,hidden:e.hidden}},t}return Object(i.__extends)(t,e),t.prototype.componentDidMount=function(){var e=this.makeCommandObjectFromProps(this.props);this.props.addCommand(e)},t.prototype.componentDidUpdate=function(e){if(e.command!==this.props.command||e.handler!==this.props.handler||e.channelLogin!==this.props.channelLogin){var t=this.makeCommandObjectFromProps(e);this.props.removeCommand(t);var n=this.makeCommandObjectFromProps(this.props);this.props.addCommand(n)}},t.prototype.componentWillUnmount=function(){var e=this.makeCommandObjectFromProps(this.props);this.props.removeCommand(e)},t.prototype.render=function(){return null},t}(a.PureComponent);var s=Object(r.b)((function(e){return{addCommand:e.addCommand,removeCommand:e.removeCommand}}))(o);n.d(t,"a",(function(){return s}))},gdtZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("q1tI"),a=n("4rCz"),r=n("sUnt"),o=n("hnjF"),s=n("b7S+"),l=n("C8Nf"),c=(n("S+L1"),function(e){var t=e.isActive;return i.createElement(r.a,{className:"live-indicator",margin:{left:.5},breakpointSmall:{margin:{left:1}},visibility:t?o.n.Visible:o.n.Hidden},i.createElement(s.a,{label:Object(a.d)("Live Now","ChannelHeader"),direction:s.c.Right},i.createElement(l.a,{label:Object(a.d)("Live","ChannelHeaderStatusIndicator")})))})},ghdf:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelFollowers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"Cursor"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"order"}},type:{kind:"NamedType",name:{kind:"Name",value:"SortOrder"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"followers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}},{kind:"Argument",name:{kind:"Name",value:"order"},value:{kind:"Variable",name:{kind:"Name",value:"order"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"userCardFragment"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:316}};i.loc.source={body:'#import "twilight/features/user-card/queries/user-card-fragment.gql"\nquery ChannelFollowers($login: String $limit: Int $cursor: Cursor $order: SortOrder) {\nuser(login: $login) {\nid\nfollowers(first: $limit after: $cursor order: $order) {\nedges {\ncursor\nnode {\nid\n...userCardFragment\n}\n}\npageInfo {\nhasNextPage\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("xXGc").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})));var r={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),r[e.name.value]=t}})),e.exports=i,e.exports.ChannelFollowers=function(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=r[t]||new Set,a=new Set,s=new Set;for(i.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(r[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(t){var i=o(e,t);i&&n.definitions.push(i)})),n}(i,"ChannelFollowers")},hAD8:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("/7QA"),o=n("gcd7"),s=n("3kHA"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sendMessage=function(e){return t.props.sendMessage&&t.props.sendMessage("/me "+e),{}},t}return Object(i.__extends)(t,e),t.prototype.render=function(){return a.createElement(o.a,{args:[{name:"message",isRequired:!0}],channelLogin:this.props.channelLogin,command:"me",description:Object(r.d)("Color your text based on your username color","MeCommandHandler"),handler:this.props.sendMessage?this.sendMessage:void 0,helpText:Object(r.d)('Usage: "/me <message>" - Colors your text based on your username color.',"MeCommandHandler"),permissionLevel:s.b.Vip})},t}(a.Component);n.d(t,"a",(function(){return l}))},hO8c:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("1rIY"),o=Object(r.a)("PrivateCalloutQueueContext",{callouts:[],pinnedCallout:null,pinCallout:function(e){return null},pushCallout:function(e){return null},popCallout:function(){return null},unpinCallout:function(){return null}}),s=o.context,l=o.withContext,c=function(e){function t(t){var n=e.call(this,t)||this;return n.popCallout=function(){n.setState((function(e){return{callouts:Object(i.__spreadArrays)(e.callouts.slice(1))}}))},n.pushCallout=function(e,t){if(void 0===t&&(t=!1),t)for(var a=0,r=n.state.callouts;a<r.length;a++){if(r[a].event.type===e.event.type)return}n.setState((function(t){return{callouts:Object(i.__spreadArrays)(t.callouts,[e])}}))},n.pinCallout=function(e){n.setState({pinnedCallout:e})},n.unpinCallout=function(){n.setState({pinnedCallout:null})},n.state={callouts:[],pinnedCallout:null,pinCallout:n.pinCallout,pushCallout:n.pushCallout,popCallout:n.popCallout,unpinCallout:n.unpinCallout},n}return Object(i.__extends)(t,e),t.prototype.render=function(){return a.createElement(s.Provider,{value:this.state},this.props.children)},t}(a.Component);n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return c}))},hgww:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"availableClaimFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"channel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"communityPoints"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"availableClaim"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:109}};n.loc.source={body:"fragment availableClaimFragment on User {\nchannel {\nid\nself {\ncommunityPoints {\navailableClaim {\nid\n}\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"i/i4":function(e,t,n){},"i5+p":function(e,t,n){"use strict";n.d(t,"j",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"f",(function(){return c})),n.d(t,"e",(function(){return d})),n.d(t,"g",(function(){return u})),n.d(t,"d",(function(){return p})),n.d(t,"i",(function(){return h})),n.d(t,"c",(function(){return g})),n.d(t,"h",(function(){return v}));var i=n("DMoW"),a=n("4rCz"),r=n("tLDJ");function o(e){return e.sort((function(e,t){return e.votes.total>t.votes.total?-1:e.votes.total<t.votes.total?1:0}))}function s(e){return Object(r.kb)("/popout/"+e+"/poll")}function l(e){return document.location.origin+"/popout/"+e+"/poll"}function c(e){return e===i.jc.ACTIVE||e===i.jc.COMPLETED||e===i.jc.TERMINATED}function d(e){return e===i.jc.COMPLETED||e===i.jc.TERMINATED||e===i.jc.ARCHIVED||e===i.jc.MODERATED}function u(e){var t,n=null;return e.top_contributor&&(n=function(e){return{__typename:"PollTopContributor",bitsAmount:e.bits_contributed,user:{__typename:"User",id:e.user_id,displayName:e.display_name}}}(e.top_contributor)),{__typename:"Poll",id:e.poll_id,choices:(t=e.choices,void 0===t?[]:t.map((function(e){return{__typename:"PollChoice",id:e.choice_id,title:e.title,tokens:{__typename:"PollTokenBreakdown",bits:void 0!==e.tokens.bits?e.tokens.bits:0,id:e.choice_id},totalVoters:void 0!==e.total_voters?e.total_voters:0,votes:{__typename:"PollVoteBreakdown",total:void 0!==e.votes.total?e.votes.total:0,base:void 0!==e.votes.base?e.votes.base:0,bits:void 0!==e.votes.bits?e.votes.bits:0,id:e.choice_id}}}))),durationSeconds:e.duration_seconds,remainingDurationMilliseconds:e.remaining_duration_milliseconds,ownedBy:{__typename:"User",id:e.owned_by},createdBy:{__typename:"User",id:e.created_by},startedAt:e.started_at,endedAt:e.ended_at,status:e.status,title:e.title,tokens:{__typename:"PollTokenBreakdown",id:e.poll_id,bits:e.tokens.bits},votes:{__typename:"PollVoteBreakdown",id:e.poll_id,total:e.votes.total,base:e.votes.base,bits:e.votes.bits},totalVoters:e.total_voters,settings:{__typename:"PollSettings",id:e.poll_id,multichoice:{__typename:"PollSettingsMultichoice",isEnabled:e.settings.multi_choice.is_enabled},subscriberOnly:{__typename:"PollSettingsSubscriberOnly",isEnabled:e.settings.subscriber_only.is_enabled},subscriberMultiplier:{__typename:"PollSettingsSubscriberMultiplier",isEnabled:e.settings.subscriber_multiplier.is_enabled},bitsVotes:{__typename:"PollSettingsBitsVotes",isEnabled:e.settings.bits_votes.is_enabled,cost:e.settings.bits_votes.cost}},topContributor:n}}function m(e,t){return"pollsVoteAgainDialog_"+e+"_"+(t||"anonymous")}function p(e,t){return a.n.get(m(e,t),!0)}function h(e,t,n){return a.n.set(m(e,t),n)}function f(e,t){return"isPollDismissed_"+e+"_"+(t||"anonymous")}function g(e,t){return a.n.get(f(e,t),!1)}function v(e,t,n){a.n.set(f(e,t),n)}},i6WW:function(e,t,n){"use strict";var i=n("RcPG"),a=new RegExp("(?:^|\\s)(?:https?://)?clips.twitch.tv/(\\w+)(?:/)?(\\w+)?(?:/edit)?(?:$|\\s)?"),r=new RegExp("(?:^|\\s)(?:https?:\\/\\/)?(?:www\\.)?twitch\\.tv\\/(\\w+)\\/clip\\/(\\w+)(?:$|\\s)?");var o=new RegExp("(?:^|\\s)(?:https?://)?(?:(?:www|go).)?twitch.tv/videos/(\\d+)(?:$|\\s)?");n.d(t,"a",(function(){return l}));var s=/^(?:(https?:\/\/)?((?:[\w#%\-+=:~]+\.)+[a-z]{2,8}(?:\/[\w./#%&@()\-+=:?~]*)?))$/;function l(e,t){void 0===t&&(t={});var n=e.match(s);if(!n)return null;var l=""+(n[1]||"https://")+n[2];if(t.parseClips&&function(e){void 0===e&&(e="");var t=a.test(e)&&!e.includes("clips.twitch.tv/2017/"),n=r.test(e);return t||n}(l)){var c=function(e){void 0===e&&(e="");var t=e.match(a);if(t&&t.length>0&&void 0!==t.index)return t[1];var n=e.match(r);return n&&n.length>0&&void 0!==n.index?n[2]:""}(l);if("create"!==c)return{type:i.a.ClipLink,content:{slug:c,url:l,displayText:e}}}if(t.parseVods&&function(e){return void 0===e&&(e=""),o.test(e)}(l)){var d=function(e){void 0===e&&(e="");var t=e.match(o);return null===t?"":t&&t.length>0&&void 0!==t.index?t[1]:""}(l);return{type:i.a.VideoLink,content:{id:d,url:l,displayText:e}}}return{type:i.a.Link,content:{displayText:e,url:l}}}},iS14:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("mrSG"),a=n("yR8l"),r=n("8jSG"),o=n("cMjZ"),s=n("zixI");function l(){var e=this;return Object(a.a)(s,{props:function(t){return{unblockUserMutation:function(n,a){return Object(i.__awaiter)(e,void 0,Promise,(function(){var e;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return t.mutate?[4,t.mutate({variables:{input:{targetUserID:n}},optimisticResponse:{unblockUser:{__typename:"UnblockUserPayload",targetUser:{__typename:"User",id:n}}},update:function(e){var t=e.readFragment({id:Object(o.a)(a),fragment:r});t&&(t.blockedUsers=t.blockedUsers.filter((function(e){return null!==e&&e.id!==n})),e.writeFragment({id:Object(o.a)(a),fragment:r,data:t}))}})]:[3,2];case 1:if(!(e=i.sent()))throw new Error("unblockUserMutation did not resolve with data");return[2,e];case 2:throw new Error("unblockUserMutation is not ready")}}))}))}}}})}},ia6S:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"autoModCaughtMessage"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AutoModCaughtMessage"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"category"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modLogsMessage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fragments"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Emote"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"emoteID"},name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"sender"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatColor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayBadges"},arguments:[{kind:"Argument",name:{kind:"Name",value:"channelLogin"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"version"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"resolvedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolver"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatColor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayBadges"},arguments:[{kind:"Argument",name:{kind:"Name",value:"channelLogin"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"version"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}],loc:{start:0,end:621}};i.loc.source={body:'#import "twilight/features/chat/components/viewer-card/viewer-card-mod-logs/fragments/mod-logs-message-fragment.gql"\nfragment autoModCaughtMessage on AutoModCaughtMessage {\nid\ncategory\nmodLogsMessage {\nid\nsentAt\ncontent {\ntext\nfragments {\ntext\ncontent {\n... on Emote {\nemoteID: id\nsetID\ntoken\n}\n... on User {\nid\n}\n__typename\n}\n}\n__typename\n}\nsender {\nid\nlogin\nchatColor\ndisplayName\ndisplayBadges(channelLogin: $channelLogin) {\nid\nsetID\nversion\n}\n__typename\n}\n__typename\n}\nresolvedAt\nresolver {\nid\nchatColor\ndisplayBadges(channelLogin: $channelLogin) {\nid\nsetID\nversion\n}\ndisplayName\nlogin\n__typename\n}\nstatus\n__typename\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("MfJU").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)}))),e.exports=i},ilCE:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"RaidUpsell_Channel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetChannelLogin"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sourceChannelLogin"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"targetChannel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"targetChannelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"sourceChannel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"sourceChannelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewersCount"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:240}};n.loc.source={body:"query RaidUpsell_Channel($targetChannelLogin: String $sourceChannelLogin: String) {\ntargetChannel: user(login: $targetChannelLogin) {\nid\nlogin\ndisplayName\n}\nsourceChannel: user(login: $sourceChannelLogin) {\nid\nstream {\nid\nviewersCount\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.RaidUpsell_Channel=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"RaidUpsell_Channel")},ilvU:function(e,t,n){"use strict";var i=n("q1tI"),a=n("f00E"),r=n("1rIY"),o=n("mrSG"),s=n("uGUt"),l=function(e,t){var n=e.highlights[e.currentIndex];switch(t.type){case s.a.PushHighlight:var i=e.highlights.findIndex((function(e){return e.id===t.id}));if(i>=0){var r={event:t.event,expanded:e.highlights[i].expanded,id:t.id};return Object(o.__assign)(Object(o.__assign)({},e),{highlights:c(e.highlights,r,i)})}var l={event:t.event,expanded:!1,id:t.id},u=e.currentIndex;n&&n.expanded&&(u+=1);var m=n&&n.expanded||e.listAllView;return Object(o.__assign)(Object(o.__assign)({},e),{highlights:d(e.highlights,l,u),notifications:m?Object(o.__spreadArrays)([t.id],e.notifications):e.notifications});case s.a.RemoveHighlight:var p=e.highlights.filter((function(e){return e.id!==t.id})),h=e.notifications.filter((function(e){return e!==t.id})),f=e.currentIndex;f>p.length-1&&(f=Math.max(p.length-1,0));var g=e.listAllView,v=e.uuid;return 0===p.length&&(g=!1,v=Object(a.c)()),{highlights:p,currentIndex:f,notifications:h,listAllView:g,uuid:v};case s.a.MoveToHighlight:var b=e.highlights.findIndex((function(e){return e.id===t.id}));if(b>=0){var k=e.highlights[b],y=t.shouldExpand?c(e.highlights,Object(o.__assign)(Object(o.__assign)({},k),{expanded:!0}),b):e.highlights;return Object(o.__assign)(Object(o.__assign)({},e),{highlights:y,currentIndex:b,notifications:[],listAllView:!1})}return e;case s.a.ToggleExpanded:var S=e.highlights.findIndex((function(e){return e.id===t.id}));if(S>=0){var C=e.highlights[S];return C.expanded=!C.expanded,Object(o.__assign)(Object(o.__assign)({},e),{highlights:c(e.highlights,C,S)})}return e;case s.a.OpenListAllView:return Object(o.__assign)(Object(o.__assign)({},e),{listAllView:!0});case s.a.CloseListAllView:return Object(o.__assign)(Object(o.__assign)({},e),{notifications:[],listAllView:!1});default:return e}},c=function(e,t,n){return e.map((function(e,i){return i===n?t:e}))},d=function(e,t,n){return Object(o.__spreadArrays)(e.slice(0,n),[t],e.slice(n))},u=Object(r.a)("HighlightStackDispatchContext",(function(){return null})),m=u.context,p=u.withContext,h={highlights:[],notifications:[],currentIndex:0,listAllView:!1,uuid:Object(a.c)()},f=Object(r.a)("HighlightStackContext",h),g=f.context,v=f.withContext,b=function(e){var t=i.useReducer(l,h),n=t[0],a=t[1];return i.createElement(m.Provider,{value:a},i.createElement(g.Provider,{value:n},e.children))};n.d(t,"c",(function(){return m})),n.d(t,"e",(function(){return p})),n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return v})),n.d(t,"a",(function(){return b}))},imSJ:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"f",(function(){return l})),n.d(t,"e",(function(){return c})),n.d(t,"d",(function(){return d}));var i=n("/7QA"),a=n("5ezV");function r(){return Object(i.d)("Category","GameSearch")}function o(){return Object(i.d)("Categories","BrowseHeader")}function s(){return Object(i.d)("Category:","GameLinkLabel")}function l(e){return Object(i.d)("{viewerCount, plural, one {{viewerCountFormatted} viewer} other {{viewerCountFormatted} viewers}}",{viewerCount:e,viewerCountFormatted:Object(i.g)(e,{maximumFractionDigits:Object(a.b)(e)})},"VideoPreviewCard")}function c(e){return Object(i.d)("{viewerCount, plural, one {{viewerCountFormatted} view} other {{viewerCountFormatted} views}}",{viewerCount:e,viewerCountFormatted:Object(i.g)(e,{maximumFractionDigits:Object(a.b)(e)})},"VideoPreviewCard")}function d(e){return Object(i.d)("{followerCount, plural, one {{followerCountFormatted} follower} other {{followerCountFormatted} followers}}",{followerCount:e,followerCountFormatted:Object(i.g)(e,{maximumFractionDigits:Object(a.b)(e)})},"CommonTranslations")}},iyGE:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("mrSG"),a=n("yR8l"),r=n("Pub/"),o=n("HzXE"),s=n("4G6/"),l=n("4w0E");function c(e){var t=this;return Object(a.b)(l,{props:function(n){return{banUserMutation:function(a,l,c){return void 0===l&&(l=null),void 0===c&&(c=null),Object(i.__awaiter)(t,void 0,void 0,(function(){var t,d;return Object(i.__generator)(this,(function(u){switch(u.label){case 0:if(t=e(n.ownProps).channelID,!n.mutate||!t)return[3,5];u.label=1;case 1:return u.trys.push([1,3,,4]),d=null,"number"==typeof l?d=Object(s.a)(l):"string"==typeof l&&(d=l),[4,n.mutate({variables:{input:{channelID:t,bannedUserLogin:a,expiresIn:d,reason:c}},update:function(e,n){return function(e,t,n){if(t&&t.data&&t.data.banUserFromChatRoom&&t.data.banUserFromChatRoom.ban&&t.data.banUserFromChatRoom.ban.bannedUser&&t.data.banUserFromChatRoom.ban.bannedUser.id){var a=Object(r.a)(e,n,t.data.banUserFromChatRoom.ban.bannedUser.id);if(!a)return;e.writeQuery({query:o,variables:{targetUserID:t.data.banUserFromChatRoom.ban.bannedUser.id,channelID:n},data:Object(i.__assign)(Object(i.__assign)({},a),{chatRoomBanStatus:{isPermanent:t.data.banUserFromChatRoom.ban.isPermanent,__typename:"ChatRoomBanStatus"}})})}}(e,n,t)}})];case 2:return[2,u.sent().data];case 3:throw u.sent(),new Error("Unable to ban user");case 4:return[3,6];case 5:throw new Error("Ban user mutation is not ready");case 6:return[2]}}))}))}}}})}},"j+2s":function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChatList_Badges"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"badges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastBadges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"selectedBadge"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"displayBadges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"squadStream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"squadStreamData"},directives:[]}]}}]}}]}}],loc:{start:0,end:365}};i.loc.source={body:'#import "twilight/features/badges/models/badge-fragment.gql"\n#import "twilight/features/squad-stream/models/squad-stream-fragment.gql"\nquery ChatList_Badges($channelLogin: String!) {\nbadges {\n...badge\n}\nuser(login: $channelLogin) {\nid\nbroadcastBadges {\n...badge\n}\nself {\nselectedBadge {\n...badge\n}\ndisplayBadges {\n...badge\n}\n}\nsquadStream {\n...squadStreamData\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)}))}i.definitions=i.definitions.concat(r(n("IKE4").definitions)),i.definitions=i.definitions.concat(r(n("fnDh").definitions));var o={};function s(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),o[e.name.value]=t}})),e.exports=i,e.exports.ChatList_Badges=function(e,t){var n={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=o[t]||new Set,a=new Set,r=new Set;for(i.forEach((function(e){r.add(e)}));r.size>0;){var l=r;r=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(o[e]||new Set).forEach((function(e){r.add(e)})))}))}return a.forEach((function(t){var i=s(e,t);i&&n.definitions.push(i)})),n}(i,"ChatList_Badges")},j0ar:function(e,t,n){"use strict";var i=n("mrSG"),a=n("TSYQ"),r=n("q1tI"),o=n("x1M1"),s=n("hnjF"),l=n("+80q"),c=n("PL8s"),d=n("b7S+"),u=(n("9KaG"),function(e){function t(t){var n=e.call(this,t)||this;return n.onImageLoad=function(){n.setState({imageLoaded:!0})},n.onMouseOver=function(){n.setState({isHovering:!0})},n.onMouseOut=function(){n.setState({isHovering:!1})},n.renderImage=function(){var e=null,t=a("chat-image",{"chat-image__animated":!!n.props.cheerText&&n.state.imageLoaded},n.props.className);if(n.props.srcSet.themed)e=r.createElement(s.g,{display:n.state.imageLoaded?s.d.InlineBlock:s.d.Hide},r.createElement(o.a,{alt:n.props.alt,className:t,defaultRes:n.props.srcKey,onLoad:n.onImageLoad,onMouseOver:n.onMouseOver,onMouseOut:n.onMouseOut,sources:n.props.srcSet}));else{for(var i=[],l=0,c=Object.keys(n.props.srcSet.sources);l<c.length;l++){var d=c[l];i.push(n.props.srcSet.sources[d]+" "+d)}e=r.createElement(s.g,{display:n.state.imageLoaded?s.d.InlineBlock:s.d.Hide},r.createElement("img",{className:t,onLoad:n.onImageLoad,onMouseOver:n.onMouseOver,onMouseOut:n.onMouseOut,src:n.props.srcSet.sources[n.props.srcKey],srcSet:i.join(","),alt:n.props.alt}))}return e},n.renderPlaceholder=function(){return n.state.imageLoaded?null:r.createElement(s.g,{display:s.d.InlineBlock},r.createElement(l.a,{type:l.e.Span,className:"chat-image__placeholder",align:s.m.Top},r.createElement(c.a,{height:28,width:28})))},n.state={imageLoaded:!1,isHovering:!1},n}return Object(i.__extends)(t,e),t.prototype.render=function(){var e;return e=this.state.isHovering&&this.state.imageLoaded?r.createElement(d.a,{direction:this.props.tooltipDirection||d.c.Top,label:this.props.alt,display:s.d.Inline,offsetY:"0.9rem","data-a-target":"emote-name"},this.renderPlaceholder(),this.renderImage(),this.props.cheerText):r.createElement("span",{"data-a-target":"emote-name"},this.renderPlaceholder(),this.renderImage(),this.props.cheerText),this.props.cheerText?r.createElement(l.a,{type:l.e.Span,noWrap:!0},e):e},t}(r.Component));n.d(t,"a",(function(){return u}))},j426:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ClipsDescription_User"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isStaff"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isSiteAdmin"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isEditor"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:98}};n.loc.source={body:"query ClipsDescription_User {\ncurrentUser {\nid\nroles {\nisStaff\nisSiteAdmin\n}\nself {\nisEditor\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.ClipsDescription_User=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"ClipsDescription_User")},jBwP:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("1rIY"),o=n("W/3w"),s=n("mr+n"),l=Object(r.a)("ChatRoomStateContext",{emoteOnlyMode:!1,followerDuration:o.a,followerMode:!1,slowMode:!1,slowModeDuration:s.a,subsOnlyMode:!1,updateRoomState:function(e){return null}}),c=l.context,d=l.withContext,u=function(e){function t(t){var n=e.call(this,t)||this;return n.updateRoomState=function(e){n.setState((function(t){return{emoteOnlyMode:void 0!==e.emoteOnly?e.emoteOnly:t.emoteOnlyMode,followerMode:void 0!==e.followersOnly?e.followersOnly:t.followerMode,followerDuration:void 0!==e.followersOnlyRequirement?e.followersOnlyRequirement:t.followerDuration,slowMode:void 0!==e.slowMode?e.slowMode:t.slowMode,slowModeDuration:e.slowModeDuration||t.slowModeDuration,subsOnlyMode:void 0!==e.subsOnly?e.subsOnly:t.subsOnlyMode}}))},n.state={emoteOnlyMode:!1,followerDuration:o.a,followerMode:!1,slowMode:!1,slowModeDuration:s.a,subsOnlyMode:!1,updateRoomState:n.updateRoomState},n}return Object(i.__extends)(t,e),t.prototype.render=function(){return a.createElement(c.Provider,{value:this.state},this.props.children)},t}(a.Component);n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return u}))},jCkG:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"targetedModAction"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ModLogsTargetedModActionsEntry"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"action"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timestamp"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"channel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"target"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"details"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"targetedModActionDetails"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"targetedModActionDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"TargetedModActionDetails"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bannedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"durationSeconds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"expiresAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reason"},arguments:[],directives:[]}]}}],loc:{start:0,end:361}};n.loc.source={body:"# fragments for targeted mod actions on the mod logs query\nfragment targetedModAction on ModLogsTargetedModActionsEntry {\nid\naction\ntimestamp\nchannel {\nid\nlogin\n}\ntarget {\nid\nlogin\n}\nuser {\nid\nlogin\n}\ndetails {\n...targetedModActionDetails\n}\n__typename\n}\nfragment targetedModActionDetails on TargetedModActionDetails {\nbannedAt\ndurationSeconds\nexpiresAt\nreason\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},jPLR:function(e,t,n){},jqPd:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("VbXa"),a=n.n(i),r=n("q1tI"),o=n("hnjF"),s=n("sUnt"),l=function(e){function t(){return e.apply(this,arguments)||this}return a()(t,e),t.prototype.render=function(){return r.createElement(s.a,{overflow:o.i.Auto},this.props.children)},t}(r.Component);l.displayName="ModalBody"},jy35:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"message"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Message"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deletedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"messageContent"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"sender"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"messageSender"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"messageContent"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MessageContent"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fragments"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"messageParticle"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"messageSender"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatColor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayBadges"},arguments:[{kind:"Argument",name:{kind:"Name",value:"channelID"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"version"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"messageParticle"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MessageFragment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CheermoteToken"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"cheermoteFragment"},directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Emote"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"emoteFragment"},directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"mentionFragment"},directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AutoMod"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"automodFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"cheermoteFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CheermoteToken"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bitsAmount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"prefix"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"emoteFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Emote"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"emoteID"},name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"mentionFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"automodFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AutoMod"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"topics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"weight"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}],loc:{start:0,end:910}};n.loc.source={body:"fragment message on Message {\nid\ndeletedAt\nsentAt\ncontent {\n...messageContent\n}\nsender {\n...messageSender\n}\n__typename\n}\nfragment messageContent on MessageContent {\ntext\nfragments {\n...messageParticle\n}\n__typename\n}\nfragment messageSender on User {\nid\nlogin\nchatColor\ndisplayName\ndisplayBadges(channelID: $channelID) {\nid\nsetID\nversion\n__typename\n}\n__typename\n}\nfragment messageParticle on MessageFragment {\ntext\ncontent {\n... on CheermoteToken {\n...cheermoteFragment\n}\n... on Emote {\n...emoteFragment\n}\n... on User {\n...mentionFragment\n}\n... on AutoMod {\n...automodFragment\n}\n__typename\n}\n__typename\n}\nfragment cheermoteFragment on CheermoteToken {\nbitsAmount\nprefix\ntier\n__typename\n}\nfragment emoteFragment on Emote {\nemoteID: id\nsetID\ntoken\n__typename\n}\nfragment mentionFragment on User {\nid\nlogin\ndisplayName\n__typename\n}\nfragment automodFragment on AutoMod {\ntopics {\ntype\nweight\n__typename\n}\n__typename\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"k/I/":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VIPs"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"vips"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:107}};n.loc.source={body:"query VIPs($login: String!) {\nuser(login: $login) {\nid\nvips(first: 100) {\nedges {\nnode {\nid\nlogin\n}\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.VIPs=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"VIPs")},k7qK:function(e,t,n){},kPBf:function(e,t){},kPCN:function(e,t,n){},kSkr:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"BlockUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"BlockUserInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"blockUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"targetUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:94}};n.loc.source={body:"mutation BlockUser($input: BlockUserInput!) {\nblockUser(input: $input) {\ntargetUser {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.BlockUser=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"BlockUser")},kVrx:function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return h}));var i=n("/7QA"),a=n("f00E"),r=n("4rCz"),o=n("BKFw"),s=n("NZDK"),l=n("9kXc"),c=n("BZOq"),d=n("V3Pk"),u=n("WK0g"),m=function(e,t){return Object(u.b)(t).then((function(n){e.dispatch(Object(d.h)(n,t.bitsConfig))}),(function(){e.dispatch(Object(d.g)(Object(r.d)("Unable to retrieve messages, please try again.","routines-moderation")))}))},p=function(e,t){return Object(u.a)(t).then((function(){e.dispatch(Object(d.f)(t.bannedUser))})).catch((function(t){return e.dispatch(Object(d.e)(t))}))},h=function(e,t){var n=new s.a({appId:i.a.algoliaApplicationID,apiKey:i.a.algoliaAPIKey,apolloClient:i.p.apollo.client,logger:i.k,config:i.a,stats:i.p.stats}),r=a.b(),u=Object(c.b)({broadcastType:o.c,broadcasterId:t.creatorId}),m=u.typeID,p=u.params;return n.queryForType(m,t.searchTerm,r,p).then((function(t){var n=Object(l.a)({searchResults:t});n.currentVideoResults&&e.dispatch(Object(d.i)(n.currentVideoResults))})).catch((function(){}))}},"kY/a":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ViewerCardModComments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"Cursor"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"channelUser"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modLogs"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetID"},value:{kind:"Variable",name:{kind:"Name",value:"targetID"}}},{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"moderatorComments"},directives:[]}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"moderatorComments"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ModLogsCommentConnection"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"moderatorComment"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasPreviousPage"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"moderatorComment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ModLogsComment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timestamp"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"channel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatColor"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"details"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:494}};n.loc.source={body:"query ViewerCardModComments($channelID: ID! $targetID: ID! $cursor: Cursor) {\nchannelUser: user(id: $channelID) {\nid\nmodLogs {\ncomments(targetID: $targetID first: 100 after: $cursor) {\n...moderatorComments\n}\n}\n}\n}\nfragment moderatorComments on ModLogsCommentConnection {\nedges {\ncursor\nnode {\n...moderatorComment\n}\n}\npageInfo {\nhasNextPage\nhasPreviousPage\n}\n}\nfragment moderatorComment on ModLogsComment {\nid\ntimestamp\nchannel {\nid\n}\nauthor {\nid\nlogin\ndisplayName\nchatColor\n}\ndetails {\ntext\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.ViewerCardModComments=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"ViewerCardModComments")},kmJV:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelRoot_Channel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"currentChannelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includeChanlets"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channelCurrentUser"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"currentChannelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channel"},directives:[]}]}}]}}],loc:{start:0,end:301}};i.loc.source={body:'#import "twilight/features/channel/queries/channel.gql"\n#import "twilight/features/channel/queries/channel-current-user.gql"\nquery ChannelRoot_Channel(\n$currentChannelLogin: String!\n$includeChanlets: Boolean!\n) {\ncurrentUser {\n...channelCurrentUser\n}\nuser(login: $currentChannelLogin) {\n...channel\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)}))}i.definitions=i.definitions.concat(r(n("BbLt").definitions)),i.definitions=i.definitions.concat(r(n("NJiF").definitions));var o={};function s(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),o[e.name.value]=t}})),e.exports=i,e.exports.ChannelRoot_Channel=function(e,t){var n={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=o[t]||new Set,a=new Set,r=new Set;for(i.forEach((function(e){r.add(e)}));r.size>0;){var l=r;r=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(o[e]||new Set).forEach((function(e){r.add(e)})))}))}return a.forEach((function(t){var i=s(e,t);i&&n.definitions.push(i)})),n}(i,"ChannelRoot_Channel")},kxrW:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e.PlayerInit="init",e.ContentShowing="contentShowing",e.PlaybackStatistics="playbackStatistics",e.ChansubRequired="chansubRequired",e.VideoFailure="videoFailure",e.Formats="videoFormats",e.ABSStreamFormatChange="abs_stream_format_change",e.FormatChanged="videoFormatChanged",e.TimeChange="timeChange",e.BufferChange="bufferChange",e.SegmentChange="segmentchange",e.UsherFailError="usherFail",e.CaptionUpdate="captions",e.SeekFailed="seekfailed",e.VariantSwitchRequest="variantSwitchRequested",e.ViewersChange="viewerschange",e.StreamLoaded="streamLoaded",e.VideoLoaded="videoLoaded",e.VideoPaused="videoPaused",e.QualityChange="qualitychange",e.Online="online",e.Offline="offline",e.Restricted="restricted",e.CastingChange="castingchange",e.TheatreChange="theatrechange",e.MidrollRequested="midrollrequested",e.ManifestExtraInfo="manifestExtraInfo",e.TransitionToCollectionVOD="transitionToCollectionVod",e.TransitionToRecommendedVOD="transitionToRecommendedVod",e.StitchedAdStart="stitchedadstart",e.StitchedAdEnd="stitchedadend",e.PersistenPlayerToggle="persistentPlayerEnableToggle",e.StatsUpdate="statsupdate",e.PromptLoginModal="prompt login modal",e.OpenStream="openStream",e.PlayerReady="ready",e.FullscreenChange="fullscreenchange",e.ExternalFullscreenChange="externalfullscreenchange",e.ClipsModerationOpen="clips-moderation-open",e.FocusPlayer="focusPlayer",e.FollowChannel="followChannel",e.UnfollowChannel="unfollowChannel",e.ContentRestricted="contentRestricted",e.SubscribeToChannel="subscribeChannel",e.OpenSubscriptionCheckout="subscriptionCheckout",e.PrimeSubscribeToChannel="primeSubscribeChannel",e.RemoveStream="removeStream",e.EnterMultiview="enterMultiview",e.PlaybackError="playbackerror"}(i||(i={}))},kyTI:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("mrSG"),a=n("q1tI"),r=n("/7QA"),o=n("VwyG"),s=n("vRsq"),l=n("GnwI"),c=n("sUnt"),d=n("hnjF"),u=n("dEDE"),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.render=function(){var e=this;return a.createElement(o.a,{ownerLogin:this.props.channelLogin,permittedRoles:{owner:!0,editor:!0,staff:!1}},(function(t){return t.permitted?a.createElement(c.a,{display:d.d.InlineFlex},a.createElement(u.a,{blurAfterClick:!0,linkTo:{pathname:Object(s.m)(e.props.channelLogin),state:{content:e.props.trackingContext&&e.props.trackingContext.content,medium:e.props.trackingContext&&e.props.trackingContext.medium}}},Object(r.d)("Customize Layout","CustomShelvesButton"))):null}))},t}(a.Component),p=Object(l.withLatencyTracking)("RoleRestrictedCustomizeButton",{autoReportInteractive:!0})(m)},l41m:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return p})),n.d(t,"b",(function(){return k}));var i=n("mrSG"),a=n("DMoW"),r=n("DpwM"),o=n("g807"),s=n("RNNG"),l=n("pU2t"),c=n("KD05"),d={beginSec:Number.MIN_VALUE,endSec:Number.MAX_VALUE},u=function(e,t){return t.commenter in e},m=function(e,t,n,i){var a=e.vodChat.comments,r=a.currentVideoTime,c=a.comments;return 0===c.commentCount?[]:Array.from(new o.a(c)).reduce((function(a,o){return o.offset>r?a:(o.comments.forEach((function(r){var o=Object(s.b)(c,r);if(void 0!==o&&(n||!u(i,o)))return o.source===l.b&&y(e.vodChat.comments.isReplayFilterOn,t)?a:a.push(g(o,e,n,i,t||void 0))})),a)}),[]).sort(h)},p=function(e){var t=function(e){return e.vodChat.comments.comments}(e);return Object.keys(t.parentComments).map((function(n){return b(t.parentComments[n],e)})).filter((function(e){return void 0!==e.video})).sort(f)},h=function(e,t){return e.comment.contentOffset===t.comment.contentOffset?e.comment.createdAt.getTime()-t.comment.createdAt.getTime():e.comment.contentOffset-t.comment.contentOffset},f=function(e,t){return e.comment.createdAt.getTime()===t.comment.createdAt.getTime()?t.comment.contentOffset-e.comment.contentOffset:t.lastUpdated.getTime()-e.lastUpdated.getTime()},g=function(e,t,n,i,a){var o=new Array,s=new Array,l=t.vodChat.comments.comments.replies[e.id],c=e.createdAt;return Array.isArray(l)&&l.forEach((function(e){!n&&u(i,e)||(e.source===r.f&&y(t.vodChat.comments.isReplayFilterOn,a)?(s.push(g(e,t,n,i)),c=S(c,e.createdAt)):(o.push(g(e,t,n,i)),c=S(c,e.createdAt)))})),y(t.vodChat.comments.isReplayFilterOn,a)?{author:t.vodChat.users.users[e.commenter],comment:e,lastUpdated:c,replies:s.sort(h)}:{author:t.vodChat.users.users[e.commenter],comment:e,lastUpdated:c,replies:o.sort(h)}},v=function(e,t){var n=new Array,i=t.vodChat.comments.comments.replies[e.id],a=e.createdAt;return Array.isArray(i)&&i.forEach((function(e){n.push(v(e,t)),a=S(a,e.createdAt)})),{author:t.vodChat.users.users[e.commenter],comment:e,lastUpdated:a,replies:n.sort(h)}},b=function(e,t){var n=v(e,t);return Object(i.__assign)(Object(i.__assign)({},n),{video:t.vodChat.moderation.videos[Object(c.a)(e.contentId)]})},k=function(e){return 0===e.commentCount?d:{beginSec:e.minOffset,endSec:e.maxOffset}},y=function(e,t){return!!t&&(e&&(t===a.B.ARCHIVE||t===a.B.HIGHLIGHT))},S=function(e,t){return e.getTime()>t.getTime()?e:t}},lNGo:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return p})),n.d(t,"a",(function(){return h}));var i=n("mrSG"),a=n("/7QA"),r=n("DMoW"),o=n("2xye"),s=n("IZXT"),l=n("YXxK"),c=n("04j6"),d=n("oi4T"),u=function(e){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var t,n,r,l;return Object(i.__generator)(this,(function(u){switch(u.label){case 0:t=null,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,a.p.apollo.client.query({query:c,variables:{id:e.channelID}})];case 2:return t=u.sent(),[3,4];case 3:return n=u.sent(),Object(s.d)()?a.k.warn("ChatEvent query failed."):a.k.errorAndReport(n,"ChatEvent query failed."),[3,4];case 4:return t&&t.data||a.k.warn("ChatEvent query failed; Chat tracking data sent may be incomplete."),r=t&&t.data&&t.data.user||null,l=Object(i.__assign)(Object(i.__assign)({},Object(d.b)(e)),{viewer_context:e.viewerContext,broadcast_id:a.o.getVideoPlayerTrackingData().broadcastID,channel_id:e.channelID,emote_picker_sid:e.emotePickerSessionID,game:r&&r.stream&&r.stream.game&&r.stream.game.name,live:!!(r&&r.stream&&r.stream.id.length>0),partner:r&&r.isPartner||!1,play_session_id:a.o.getVideoPlayerTrackingData().playSessionID,player:e.player,ritual_nca:e.fromNewChatterRitual||!1,sub_only_mode:e.subOnlyMode,send_action:e.sendAction}),a.o.track(o.SpadeEventType.Chat,l),[2]}}))}))},m=function(e){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var t,n,r,l;return Object(i.__generator)(this,(function(u){switch(u.label){case 0:t=null,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,a.p.apollo.client.query({query:c,variables:{id:e.channelID}})];case 2:return t=u.sent(),[3,4];case 3:return n=u.sent(),Object(s.d)()?a.k.warn("ChatEvent query failed for CheerEvent."):a.k.errorAndReport(n,"ChatEvent query failed for CheerEvent."),[3,4];case 4:return t&&t.data||a.k.warn("ChatEvent query failed; Cheer tracking data sent may be incomplete."),r=t&&t.data&&t.data.user||null,l=Object(i.__assign)(Object(i.__assign)({},Object(d.a)(e)),{broadcast_id:a.o.getVideoPlayerTrackingData().broadcastID,bits_value:e.bitsValue,cheermote:e.cheermote,channel_id:e.channelID,emote_picker_sid:e.emotePickerSessionID,game:r&&r.stream&&r.stream.game&&r.stream.game.name,is_anonymous_cheer:e.isAnonymousCheer,live:!!(r&&r.stream&&r.stream.id.length>0),partner:r&&r.isPartner||!1,play_session_id:a.o.getVideoPlayerTrackingData().playSessionID,player:e.player,ritual_nca:e.fromNewChatterRitual||!1,sub_only_mode:e.subOnlyMode,transaction_id:e.transactionID,viewer_context:e.viewerContext}),a.o.track(o.SpadeEventType.ChatClientCheer,l),[2]}}))}))},p=function(e){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var t,n,r,l;return Object(i.__generator)(this,(function(u){switch(u.label){case 0:t=null,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,a.p.apollo.client.query({query:c,variables:{id:e.channelID}})];case 2:return t=u.sent(),[3,4];case 3:return n=u.sent(),Object(s.d)()?a.k.warn("ChatEvent query failed for CheerEvent."):a.k.errorAndReport(n,"ChatEvent query failed for CheerEvent."),[3,4];case 4:return t&&t.data||a.k.warn("ChatEvent query failed; Cheer tracking data sent may be incomplete."),r=t&&t.data&&t.data.user||null,l=Object(i.__assign)(Object(i.__assign)({},Object(d.a)(e)),{broadcast_id:a.o.getVideoPlayerTrackingData().broadcastID,bits_value:e.bitsValue,cheermote:e.cheermote,channel_id:e.channelID,emote_picker_sid:e.emotePickerSessionID,error_type:e.errorType,game:r&&r.stream&&r.stream.game&&r.stream.game.name,is_anonymous_cheer:e.isAnonymousCheer,live:!!(r&&r.stream&&r.stream.id.length>0),partner:r&&r.isPartner||!1,play_session_id:a.o.getVideoPlayerTrackingData().playSessionID,player:e.player,ritual_nca:e.fromNewChatterRitual||!1,sub_only_mode:e.subOnlyMode,viewer_context:e.viewerContext}),a.o.track(o.SpadeEventType.ChatClientCheerError,l),[2]}}))}))},h=function(e){switch(e){case r.Gc.AMOUNT_BELOW_MIN_BITS:return l.d.BelowMin;case r.Gc.AUTO_MOD_MESSAGE:return l.d.AutoModMessage;case r.Gc.AUTO_MOD_PENDING:return l.d.AutoModPending;case r.Gc.CHANNEL_BLOCKED_TERMS:return l.d.ChannelBlockedTerms;case r.Gc.CHANNEL_INELIGIBLE:return l.d.ChannelIneligible;case r.Gc.EMOTE_AMOUNT_BELOW_MIN_BITS:return l.d.BelowMinEmote;case r.Gc.INSUFFICIENT_BALANCE:return l.d.BitsUnavailable;case r.Gc.INVALID_ANONYMOUS_MESSAGE:return l.d.InvalidAnonymousMessage;case r.Gc.INVALID_BITS_AMOUNT:case r.Gc.INVALID_BITS_MESSAGE:return l.d.InvalidBitsMessage;case r.Gc.INVALID_EVENT_ID:return l.d.InvalidEventId;case r.Gc.MESSAGE_LENGTH_EXCEEDED:return l.d.InputAboveMaxLength;case r.Gc.REQUEST_THROTTLED:return l.d.RequestThrottled;case r.Gc.TOO_LARGE_BITS_EMOTE:return l.d.AboveMaxEmote;case r.Gc.TOO_LARGE_CHEER:return l.d.AboveMaxCheer;case r.Gc.USER_BANNED:return l.d.UserBanned;case r.Gc.USER_INELIGIBLE:return l.d.UserIneligible;case r.Gc.USER_SUSPENDED:return l.d.UserSuspended;case r.Gc.ZALGO_MESSAGE:return l.d.ZalgoMessage;default:return l.d.Unknown}}},lRNp:function(e,t,n){},lXDb:function(e,t,n){},lZdE:function(e,t,n){"use strict";function i(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}n.d(t,"a",(function(){return i}))},"ll/k":function(e,t,n){"use strict";function i(e,t){if(void 0===t&&(t=0),t>e){var n=t;t=e,e=n}return t+Math.floor(Math.random()*(e-t+1))}function a(e){return e[i(e.length-1)]}function r(e,t){for(var n=0,i=[];n<e;)i.push(t(n)),n+=1;return i}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return r}))},"lpj/":function(e,t,n){},lw3P:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("yR8l"),a=n("ru7j");function r(){return Object(i.a)(a,{props:function(e){return e.data&&!e.data.loading&&!e.data.error&&e.data.currentUser&&e.data.currentUser.blockedUsers?{blockedUsers:e.data.currentUser.blockedUsers.reduce((function(e,t){return t&&t.id&&e.push(t.id),e}),[])}:{blockedUsers:[]}},skip:function(e){return!(e.isLoggedIn||e.authToken)}})}},m66z:function(e,t,n){},m7Uh:function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return m}));var i=n("G7cy"),a=n("DtRd"),r=n("R4sh"),o=[250,249,250],s=[15,14,17],l=3,c=/^#[A-Fa-f0-9]{3,6}$/;function d(e){var t=a(e);return 4===t.length&&(t=[t[0],t[1],t[2]]),i(t)}function u(e){var t=a(e);return Object(r.a)(o,t)>=l&&Object(r.a)(t,s)>=l}function m(e){return c.test(e.trim())}},mBWp:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Whispers_Tracking_CurrentUser"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasTurbo"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"availability"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:86}};n.loc.source={body:"query Whispers_Tracking_CurrentUser {\ncurrentUser {\nid\nhasTurbo\navailability\nlogin\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.Whispers_Tracking_CurrentUser=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"Whispers_Tracking_CurrentUser")},mGiD:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelRoot_Video"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includeCollection"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includeChanlets"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channelCurrentUser"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}},{kind:"Argument",name:{kind:"Name",value:"options"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"includePrivate"},value:{kind:"BooleanValue",value:!0}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channelVideo"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"collection"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"collectionID"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"includeCollection"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channelCollection"},directives:[]}]}}]}}],loc:{start:0,end:517}};i.loc.source={body:'#import "twilight/features/channel/queries/channel-current-user.gql"\n#import "twilight/features/channel/queries/channel-video.gql"\n#import "twilight/features/channel/queries/channel-collection.gql"\nquery ChannelRoot_Video(\n$videoID: ID!\n$collectionID: ID!\n$includeCollection: Boolean!\n$includeChanlets: Boolean!\n) {\ncurrentUser {\n...channelCurrentUser\n}\nvideo(id: $videoID options: { includePrivate: true }) {\n...channelVideo\n}\ncollection(id: $collectionID) @include(if: $includeCollection) {\n...channelCollection\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)}))}i.definitions=i.definitions.concat(r(n("NJiF").definitions)),i.definitions=i.definitions.concat(r(n("RTtf").definitions)),i.definitions=i.definitions.concat(r(n("vtET").definitions));var o={};function s(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),o[e.name.value]=t}})),e.exports=i,e.exports.ChannelRoot_Video=function(e,t){var n={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=o[t]||new Set,a=new Set,r=new Set;for(i.forEach((function(e){r.add(e)}));r.size>0;){var l=r;r=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(o[e]||new Set).forEach((function(e){r.add(e)})))}))}return a.forEach((function(t){var i=s(e,t);i&&n.definitions.push(i)})),n}(i,"ChannelRoot_Video")},mjSZ:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("/7QA"),o=n("E/0f"),s=n("7qXh"),l=n("/MKj"),c=n("fvjX"),d=n("8/mp"),u=n("HAa/"),m=n("DMoW"),p=n("XDQu"),h=n("3tQW"),f=n("uIkQ"),g=n("IArS"),v=n("cys1"),b=n("wFyP"),k=n("W7Hf"),y=n("sUnt"),S=(n("KIkj"),{id:g.c.id,login:g.c.username,chatColor:g.b,displayName:g.c.displayName,displayBadges:[],__typename:"User"}),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.channelID,n=e.badgeSets,o=e.currentUserLogin,s=this.props.caughtMessage,l=s.category,c=s.modLogsMessage,d=s.resolver,u=s.status,m=c.sender,p=c.id;if(!m||!p)return a.createElement(y.a,{padding:{x:2,y:1}},Object(r.d)("unable to properly render message","AutoModCaughtMessage"));var h=Object(i.__assign)(Object(i.__assign)({},c),{deletedAt:null,__typename:"Message"});return a.createElement(y.a,{padding:{x:1,y:.5},key:p+"-automod-caught-message"},a.createElement(y.a,{className:"automod-message"},a.createElement(f.b,{badgeSets:n,badgesToRender:g.a}),a.createElement(b.a,{messageID:p,sender:S,onUsernameClick:null}),a.createElement("span",{key:"separator"},": "),this.autoModExplanationGenerator(l,d)),a.createElement(y.a,{padding:{y:0},className:"flagged-message "+this.leftBorderClassName(u)},a.createElement(k.a,{channelID:t,showModerationIcons:!1,showTimestamps:!0,badgeSets:n,currentUserLogin:o,hasModPermissions:!0,message:h,onUsernameClick:null,surfaceError:void 0,padding:{x:1,y:.5},highContrastUsernameColor:this.props.highContrastUsernameColor,theme:this.props.theme})))},t.prototype.leftBorderClassName=function(e){return e===m.g.APPROVED?"approved":"rejected"},t.prototype.autoModExplanationGenerator=function(e,t){var n,i,o=this.props.isPendingReview,s=this.props.caughtMessage,l=s.resolvedAt,c=s.status,d=this.props.caughtMessage.modLogsMessage.id;switch(e){case"AGGRESSIVE":n=Object(r.d)("aggressive","AutoModExplanation");break;case"SEXUAL":n=Object(r.d)("sexual","AutoModExplanation");break;case"PROFANITY":n=Object(r.d)("profanity","AutoModExplanation");break;case"IDENTITY":n=Object(r.d)("identity","AutoModExplanation");break;default:return Object(r.d)("Held a message for a new/unknown category.","AutoModExplanation")}switch(c){case"APPROVED":i=Object(r.d)("Approved","AutoModExplanation");break;case"DENIED":i=Object(r.d)("Denied","AutoModExplanation");break;default:i=Object(r.d)("Pending","AutoModExplanation")}return t?l?Object(r.d)("Held a message for reason: {category}. ({status} by {resolver} at {resolvedAt})",{category:n,status:i,resolver:a.createElement(b.a,{messageID:d,sender:t,onUsernameClick:null}),resolvedAt:Object(v.a)(new Date(l))},"AutoModExplanation"):Object(r.d)("Held a message for reason: {category}. ({status} by {resolver})",{category:n,status:i,resolver:a.createElement(b.a,{messageID:d,sender:t,onUsernameClick:null})},"AutoModExplanation"):o?Object(r.d)("Held a message for reason: {category}. (Pending review by moderators)",{category:n},"AutoModExplanation"):Object(r.d)("Held a message for reason: {category}. (Expired and not posted to Chat)",{category:n},"AutoModExplanation")},t}(a.Component),E=n("Dufr"),w=n("na98"),O=n("1VX3"),D=n("hnjF"),N=n("Ws8v"),_=n("X2PJ"),I=n("dEDE"),M=(n("lXDb"),["scroll","wheel","mousewheel","DOMMouseScroll","keyup","mousedown"]),j=10,T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={disableInfiniteTrigger:!0,isAutoScrolling:!0},t.saveScrollRef=function(e){return t.scroll=e},t.handleScrollEvent=function(e){if(t.scroll&&t.scroll.scrollContent&&(e.which>0||"mousedown"===e.type||"mousewheel"===e.type||"wheel"===e.type)){var n=t.scroll.scrollContent.scrollHeight-t.scroll.scrollContent.scrollTop-t.scroll.scrollContent.offsetHeight;n<=j&&!t.state.isAutoScrolling?t.setState({isAutoScrolling:!0}):n>j&&t.state.isAutoScrolling&&t.setState({isAutoScrolling:!1})}},t.handleClickMoreMessages=function(){t.setState({isAutoScrolling:!0},t.scrollToBottom)},t.loadMore=function(){return t.isLoadingMore=!0,t.props.loadMore()},t}return Object(i.__extends)(t,e),t.prototype.componentDidMount=function(){var e=this;this.setState({disableInfiniteTrigger:!1}),this.scroll&&this.scroll.scrollContent&&(this.scrollToBottom(),M.forEach((function(t){e.scroll.scrollContent&&e.scroll.scrollContent.addEventListener(t,e.handleScrollEvent)})))},t.prototype.componentWillUnmount=function(){var e=this;M.forEach((function(t){e.scroll&&e.scroll.scrollContent&&e.scroll.scrollContent.removeEventListener(t,e.handleScrollEvent)}))},t.prototype.getSnapshotBeforeUpdate=function(e){var t=this.scroll&&this.scroll.scrollContent;if(!this.props.isBulkLoad||!t)return null;var n=e.messages[e.messages.length-1]&&e.messages[e.messages.length-1].id,i=null;return n&&(i=document.getElementById(n)),this.isLoadingMore||!i?t.scrollTop:t.scrollTop-i.scrollTop},t.prototype.componentDidUpdate=function(e,t,n){var i=e.messages[e.messages.length-1]&&e.messages[e.messages.length-1].id,a=null;i&&(a=document.getElementById(i));var r=this.scroll&&this.scroll.scrollContent;if(e.messages!==this.props.messages&&(this.state.isAutoScrolling&&this.scrollToBottom(),this.props.isBulkLoad&&e.messages&&this.props.messages))if(this.isLoadingMore){var o=e.messages[0]&&e.messages[0].id,s=this.props.messages[0]&&this.props.messages[0].id;if(o&&s&&o!==s){var l=document.getElementById(o);if(l&&r&&n){var c=l.offsetTop;r.scrollTop=n+c}}}else{var d=this.props.messages[this.props.messages.length-1]&&this.props.messages[this.props.messages.length-1].id;if(i&&d&&i!==d&&a&&r&&n){c=a.offsetTop;r.scrollTop=n+c}}},t.prototype.render=function(){var e=this.renderLines();return a.createElement(y.a,{className:"message-list mod-logs-entry-list",display:D.d.Flex,flexDirection:D.e.Column,flexWrap:D.f.NoWrap,overflow:D.i.Hidden,flexGrow:1},a.createElement(d.b,{className:"message-list__lines",scrollRef:this.saveScrollRef},a.createElement(y.a,{flexGrow:1,fullHeight:!0,overflow:D.i.Hidden},a.createElement(d.a,{"data-test-selector":"backward-infinite-scroll",enabled:!this.state.disableInfiniteTrigger,loadMore:this.loadMore,pixelThreshold:400,orientation:u.b.Down,contentLength:e.length,forceLoadMoreContent:this.props.hasMoreLeft,requestCap:2}),a.createElement(y.a,{key:"message-list-start",padding:.5}),e,a.createElement(y.a,{key:"message-list-end",padding:.5}))),a.createElement(y.a,{position:D.j.Relative,margin:{x:2}},this.moreMessages()))},t.prototype.moreMessages=function(){return this.state.isAutoScrolling?null:a.createElement(N.a,{alignItems:D.b.Center,attachBottom:!0,display:D.d.Flex,fullWidth:!0,background:_.a.Overlay,justifyContent:D.h.Center,position:D.j.Absolute,margin:{bottom:1}},a.createElement(I.a,{onClick:this.handleClickMoreMessages,overlay:!0,type:I.d.Text,fullWidth:!0},Object(r.d)("More messages below.","ViewerCardModLogsFeature")))},t.prototype.scrollToBottom=function(){this.scroll.scrollToBottom()},t.prototype.renderLines=function(){var e=this;return this.props.messages.slice().reduce((function(t,n,i){var r=!1;if("AutoModCaughtMessage"===n.__typename&&n.status===m.g.PENDING){(new Date).getTime()*(.001/60)-new Date(n.modLogsMessage.sentAt).getTime()*(.001/60)<5&&(r=!0)}var o=i>0&&e.props.messages[i-1],s="Message"===n.__typename&&new Date(n.sentAt).toLocaleDateString()||"AutoModCaughtMessage"===n.__typename&&new Date(n.modLogsMessage.sentAt).toLocaleDateString()||"ModLogsTargetedModActionsEntry"===n.__typename&&new Date(n.timestamp).toLocaleDateString(),l=o&&"Message"===o.__typename&&new Date(o.sentAt).toLocaleDateString()||o&&"AutoModCaughtMessage"===o.__typename&&new Date(o.modLogsMessage.sentAt).toLocaleDateString()||o&&"ModLogsTargetedModActionsEntry"===o.__typename&&new Date(o.timestamp).toLocaleDateString();return 0===i&&s&&t.push(a.createElement(E.a,{key:i+"-"+s,dateString:s})),l&&s&&l!==s&&t.push(a.createElement(E.a,{key:i+"-"+s,dateString:s})),"Message"===n.__typename?t.push(a.createElement(O.a,{channelID:null,key:n.id,badgeSets:e.props.badgeSets,hasModPermissions:!1,message:n,showTimestamps:!0,showModerationIcons:!1,onUsernameClick:null,padding:{x:1,y:.5},highContrastUsernameColor:e.props.useHighContrastColors,theme:e.props.theme})):"ModLogsTargetedModActionsEntry"===n.__typename?t.push(a.createElement(w.a,{key:n.id,entry:n})):"AutoModCaughtMessage"===n.__typename&&t.push(a.createElement(C,{channelID:null,key:n.id,badgeSets:e.props.badgeSets,caughtMessage:n,isPendingReview:r,highContrastUsernameColor:e.props.useHighContrastColors,theme:e.props.theme})),t}),[])},t}(a.Component);var P=Object(c.d)(Object(h.b)((function(e){return{useHighContrastColors:e.value}})),Object(l.b)((function(e){return{theme:Object(p.a)(e)}})))(T),L=n("a1OF"),R=n("XQbB"),F=n("uG/k"),U=n("+80q");n.d(t,"b",(function(){return A})),n.d(t,"a",(function(){return B}));var x,A=r.b.get("automod_should_show_in_mod_logs",!1);!function(e){e.NoMessages="no-messages",e.Loading="loading",e.Error="error",e.MessageList="message-list"}(x||(x={}));var B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={cursor:null,messages:[],loading:!1,hasMoreLeft:!0,error:!1},t.initialLoad=null,t.loadMore=function(){return!t.state.loading&&t.state.hasMoreLeft?new Promise((function(e){t.setState({loading:!0},e)})).then((function(){return t.props.loadMore({senderID:t.props.senderID,channelLogin:t.props.channelLogin,cursor:t.state.cursor,includeAutoModCaughtMessages:A})})).then((function(e){return new Promise((function(n){t.setState({messages:Object(i.__spreadArrays)(e.messages,t.state.messages),cursor:e.cursor,error:e.error,loading:!1,hasMoreLeft:!(!e.cursor||e.cursor===t.state.cursor)},n)}))})).catch((function(){return new Promise((function(e){t.setState({error:!0},e)}))})).then((function(){return Promise.resolve()})):Promise.resolve()},t}return Object(i.__extends)(t,e),t.prototype.componentDidMount=function(){this.initialLoad||(this.initialLoad=this.loadMore())},t.prototype.componentDidUpdate=function(e){this.initialLoad||(this.initialLoad=this.loadMore())},t.prototype.render=function(){return this.state.error?a.createElement(y.a,{fullHeight:!0,fullWidth:!0,"data-test-selector":x.Error},a.createElement(s.a,null)):!this.initialLoad||this.state.loading&&0===this.state.messages.length?a.createElement(y.a,{padding:{x:1,y:2}},a.createElement(R.a,{delay:0,fillContent:!0,size:R.b.Large,"data-test-selector":x.Loading})):0===this.state.messages.length?a.createElement(y.a,{display:D.d.Flex,flexDirection:D.e.Column,flexGrow:1,flexShrink:1,padding:{x:1,y:2},"data-test-selector":x.NoMessages},a.createElement(y.a,{display:D.d.Flex,alignItems:D.b.Center,justifyContent:D.h.Center,textAlign:D.l.Center,flexDirection:D.e.Column},a.createElement(y.a,null,a.createElement(F.a,{src:Object(L.d)(o.a.id,2),alt:o.a.alt})),a.createElement(y.a,{padding:{x:4,y:0},margin:{x:4,y:0}},a.createElement(U.a,{color:_.c.Alt2,fontSize:_.d.Size5},Object(r.d)("This user hasn't chatted in the channel.","ViewerCardModLogsFeature"))))):a.createElement(N.a,{background:_.a.Base,className:"mod-logs-entry-list",fullWidth:!0,"data-test-selector":x.MessageList,display:D.d.Flex,flexDirection:D.e.Column,flexGrow:1,flexShrink:1},a.createElement(P,{badgeSets:this.props.badgeSets,isBulkLoad:!0,hasMoreLeft:this.state.hasMoreLeft,messages:this.state.messages,loadMore:this.loadMore}))},t}(a.Component)},mlJd:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var i={skipHtml:!0,softBreak:"br",allowedTypes:["Emph","Strong","Paragraph","Heading","Item","List","Text","Link","Softbreak","Hardbreak"]};function a(e){return e?e.split(/ {2}\n|\n(?!\d+\.)(?!\*|- )|^\n/gm):[]}},mmRu:function(e,t,n){"use strict";var i=n("/MKj"),a=n("mrSG"),r=n("q1tI"),o=n("u5aL"),s=n("/7QA"),l=n("7d/q"),c=n("C7sF"),d=function(e){return r.createElement(l.a,{icon:c.a.Emoticons,ariaLabel:Object(s.d)("Emote picker","EmotePickerButton"),type:e.isActive?l.c.Primary:l.c.Secondary,onClick:e.onClick,"data-a-target":"emote-picker-button"})},u=n("fvjX"),m=n("hbnN"),p=n("yR8l"),h=n("x7UT"),f=n("Mj6i"),g=n("OMdY"),v=n("1/iK"),b=n("kRBY"),k=n("+pBb"),y=n("P6kH"),S=n("w1PT"),C=n("8EUQ"),E=n("KriR"),w=n("GzyO"),O=n("OpME"),D=function(e){var t={};e.forEach((function(e){var n;e.owner&&e.owner.id&&(t[e.owner.id]?(n=t[e.owner.id].emotes).push.apply(n,e.emotes):t[e.owner.id]=Object(a.__assign)(Object(a.__assign)({},e),{emotes:e.emotes.slice()}))}));var n=Object.keys(t),i=[];return n.forEach((function(e){i.push(t[e])})),i},N=function(e,t){return t.reduce((function(t,n){if(null===n.emotes||null===n.emoteSetID)return t;var i=Object(O.b)(n.emotes);return t.concat(i.map((function(t){return Object(a.__assign)(Object(a.__assign)({},t),{isLocked:!e.has(parseInt(n.emoteSetID,10))})})))}),[])},_=function(e){return e.tier&&!isNaN(parseInt(e.tier,10))?parseInt(e.tier,10)/1e3:1},I=n("GnwI"),M=n("br9A"),j=n("MkkA"),T=n("8/mp"),P=n("wUQP"),L=n("2xye"),R=n("dGMd"),F=n("7SjK"),U=n("sUnt"),x=n("hnjF"),A=n("Ws8v"),B=n("+80q"),V=n("X2PJ"),H=function(e){var t=null;return e.img&&(t=r.createElement(r.Fragment,null,e.img,r.createElement(U.a,{padding:{right:.5}}))),r.createElement(U.a,{position:x.j.Relative,padding:{x:1,top:.5,bottom:1}},r.createElement(A.a,{alignItems:x.b.Center,display:x.d.Flex,padding:{x:1,y:.5},className:"emote-grid-section__header-title"},t,r.createElement(B.a,{align:x.m.Middle,bold:!0,color:V.c.Alt},e.label)),r.createElement(F.a,{context:e.context,emotes:e.emotes,onClickEmote:e.onClickEmote,spaced:!0}))},q=n("4VQm"),G=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.checkVisible=function(e,n){t.props.checkVisible(e,n)},t}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){this.unregister=this.props.registerReceiver(this)},t.prototype.componentWillUnmount=function(){this.unregister&&this.unregister()},t.prototype.render=function(){return r.createElement(r.Fragment,null,this.props.children)},t}(r.Component),W=Object(q.d)((function(e){return{registerReceiver:e.registerReceiver}}))(G),z=n("i4Ys"),Q=n("7uM4"),Y=function(e){return r.createElement(U.a,{position:x.j.Relative},r.createElement(z.a,{"data-a-target":e.label,onClick:e.onClick,blurAfterClick:!0,selected:e.isActive},r.createElement(U.a,{padding:1,display:x.d.InlineFlex},r.createElement(Q.a,{asset:e.icon}))))},$=n("DnOo"),K=n("a5fV"),X=n("dEDE"),J=n("uG/k"),Z=n("CGUg"),ee=(n("GLn2"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.channelSubEmotes,n=e.channelSubscriptionProducts,i=e.subUpsellClickedEmote,o=n.find((function(e){return e.emoteSetID===i.setID}));if(o||(o=n.find((function(e){var t;return!!(null===(t=e.emotes)||void 0===t?void 0:t.some((function(e){return e&&e.id===i.id})))}))),!o)return null;var l={};t.forEach((function(e){if(e.isLocked&&null!==e.setID&&void 0!==e.setID){var t=n.find((function(t){return t.emoteSetID===e.setID}));t&&(l[t.emoteSetID]=t)}}));var d=_(o),u=Object(s.d)("Subscribe at Tier {tierNumber}",{tierNumber:d},"EmotePickerCard"),m=[],p=[];t.forEach((function(e){var t=l[e.setID];t&&(_(t)<=d?p.push(Object(a.__assign)(Object(a.__assign)({},e),{isLocked:!1})):m.push(e))})),m.sort((function(e,t){var n=l[e.setID],i=l[t.setID],a=_(n);return _(i)-a}));var h=m.concat(p),f=o.price.toString()||"";"productInfo"in o&&(o.priceInfo||o.promotion)&&(f=Object(K.e)(o));var g=p.length>1?Object(s.d)("{numUnlocked} Emotes Included",{numUnlocked:p.length},"EmotePickerCard"):Object(s.d)("1 Emote Included","EmotePickerCard");return r.createElement(U.a,{className:"emote-sub-upsell"},r.createElement(A.a,{padding:{top:.5}},r.createElement(X.a,{type:X.d.Text,icon:c.a.AngleLeft,onClick:this.props.onBackClick,size:X.b.Small},Object(s.d)("Back","EmotePickerCard"))),r.createElement(A.a,{display:x.d.Flex,padding:{x:2,bottom:1}},r.createElement(U.a,{flexGrow:0,flexShrink:0,padding:{top:.5}},r.createElement(J.a,{src:this.getBigImageSrc(i.srcSet),alt:i.displayName||""})),r.createElement(U.a,{flexGrow:1,flexShrink:1,padding:{left:1}},r.createElement(B.a,{bold:!0},this.renderCopyHeader(d.toString())),r.createElement(B.a,null,this.renderCopyBody(d.toString(),p.length)))),r.createElement(U.a,{display:x.d.Flex,alignItems:x.b.Center,justifyContent:x.h.Center,padding:{x:2}},r.createElement($.a,{customSubscribeNowMessage:u,isSubbedToTier:!1,fullWidth:!0,tierPrice:f,handleSubAction:this.props.handleSubAction,productName:o.name,url:o.url})),r.createElement(Z.a,null,r.createElement("hr",{className:"emote-sub-upsell__divider"})),r.createElement(T.b,{className:"emote-sub-upsell__content"},r.createElement(U.a,null,r.createElement(U.a,{padding:{x:2}},r.createElement(B.a,{bold:!0},g)),r.createElement(U.a,{padding:{x:1,top:.5,bottom:3}},r.createElement(F.a,{emotes:h,spaced:!0,onClickEmote:this.props.onClickEmote})))))},t.prototype.renderCopyHeader=function(e){return Object(s.d)("{channelDisplayName} - Tier {tierNumber} Subscription",{tierNumber:e,channelDisplayName:this.props.channelDisplayName},"EmotePickerCard")},t.prototype.renderCopyBody=function(e,t){return 1===t?Object(s.d)("To unlock 1 emote and more subscriber benefits, subscribe at Tier {tierNumber}",{tierNumber:e},"EmotePickerCard"):Object(s.d)("To unlock {numEmotes} emotes and more subscriber benefits, subscribe at Tier {tierNumber}.",{tierNumber:e,numEmotes:t},"EmotePickercard")},t.prototype.getBigImageSrc=function(e){var t=e.split(" ");return 6===t.length?t[2]:t[0]},t}(r.Component));var te,ne=n("XQnt"),ie=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.componentDidUpdate=function(e){this.props.data&&(!this.props.data.loading||this.props.data.error)&&e.data&&e.data.loading&&this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){return r.createElement(ee,{channelDisplayName:this.props.channelDisplayName,channelSubEmotes:this.props.channelSubEmotes,channelSubscriptionProducts:this.subscriptionProducts,handleSubAction:this.props.handleSubAction,onBackClick:this.props.onBackClick,onClickEmote:this.props.onClickEmote,subUpsellClickedEmote:this.props.subUpsellClickedEmote})},Object.defineProperty(t.prototype,"subscriptionProducts",{get:function(){return this.props.data&&this.props.data.user&&this.props.data.user.subscriptionProducts?Object(g.b)(this.props.data.user.subscriptionProducts):this.props.channelSubscriptionProducts},enumerable:!0,configurable:!0}),t}(r.Component),ae=Object(u.d)(Object(p.a)(ne,{options:function(e){return{variables:{channelID:e.channelID}}}}),Object(I.withLatencyTracking)("EmoteSubUpsell"))(ie);!function(e){e.FrequentlyUsed="frequently_used",e.CurrentChannel="current_channel",e.OtherChannel="other_subbed_channel",e.Unlocked="unlocked",e.Global="global"}(te||(te={}));var re,oe=n("ygYM"),se=n("3Law"),le=n("XQbB"),ce=n("HH5h");n("JGCS");!function(e){e.FrequentlyUsedEmotes="FREQUENTLY_USED_EMOTES",e.ChannelEmotes="CHANNEL_EMOTES",e.AllEmotes="ALL_EMOTES"}(re||(re={}));var de=function(e){function t(t){var n=e.call(this,t)||this;return n.isChannelPointsEnabled=Object(P.c)("copo_enabled"),n.onTabNavClick=function(e){if(n.scroll&&n.scroll.scrollContent&&e.currentTarget.getAttribute("data-a-target")){var t=e.currentTarget.getAttribute("data-a-target"),i=re.FrequentlyUsedEmotes;switch(t){case re.FrequentlyUsedEmotes:n.frequentlyUsedEmotesRef&&(n.scroll.scrollContent.scrollTop=n.frequentlyUsedEmotesRef.offsetTop,i=re.FrequentlyUsedEmotes);break;case re.ChannelEmotes:n.channelEmotesRef&&(n.scroll.scrollContent.scrollTop=n.channelEmotesRef.offsetTop,i=re.ChannelEmotes);break;case re.AllEmotes:n.allEmotesRef&&(n.scroll.scrollContent.scrollTop=n.allEmotesRef.offsetTop,i=re.AllEmotes)}n.setState({selectedNavTab:i})}},n.onClickEmote=function(e,t){if(n.props.onClickEmote&&!e.isLocked){n.props.onClickEmote(e.displayName||e.token,e.id);var i={channel_id:n.props.channelID||void 0,chatroom_id:n.props.roomID,context:t,emote_picker_sid:n.props.emotePickerSessionID,emote_id:e.id,emoticon_set_id:e.setID,generated_by:n.props.emotePickerSource};s.o.track(L.SpadeEventType.EmotePickerClickthrough,i)}else e.isLocked&&!n.props.isCommerceDisabled&&n.onClickLockedEmote(e)},n.saveScrollRef=function(e){return n.scroll=e},n.saveAllEmotesRef=function(e){return n.allEmotesRef=e},n.saveChannelEmotesRef=function(e){return n.channelEmotesRef=e},n.saveFrequentlyUsedEmotesRef=function(e){return n.frequentlyUsedEmotesRef=e},n.checkVisible=function(e,t){if(t){n.state.hasUserInteracted||n.setState({hasUserInteracted:!0});var i=n.state.selectedNavTab,a=n.allEmotesRef&&t.offset>=n.allEmotesRef.offsetTop;i=n.channelEmotesRef&&t.offset>=n.channelEmotesRef.offsetTop&&!a?re.ChannelEmotes:a?re.AllEmotes:re.FrequentlyUsedEmotes,n.state.selectedNavTab!==i&&n.setState({selectedNavTab:i})}},n.onClickLockedEmote=function(e){n.setState({subUpsellClickedEmote:e})},n.onBackClick=function(){n.setState({subUpsellClickedEmote:null,selectedNavTab:re.FrequentlyUsedEmotes})},n.handleFilterChange=function(e){var t=e.target.value,i=t.toLowerCase();n.setState({filter:i,inputValue:t,filteredEmotes:n.filterEmoteSets(n.props.allEmoteSets,i),selectedNavTab:re.FrequentlyUsedEmotes})},n.filterEmoteSets=function(e,t){var n=[];e.forEach((function(e){e.emotes.filter((function(e){return!(!e.displayName||!e.displayName.toLowerCase().includes(t))||e.token.toLowerCase().includes(t)})).forEach((function(t){t.setID=e.id,n.push(t)}))}));var i=Object(w.e)(),a=0===Object.keys(i).length?void 0:i,r=Object(O.e)(n,t,a);return Object(O.d)(r)},n.state={filter:"",filteredEmotes:[],hasUserInteracted:!1,inputValue:"",selectedNavTab:re.FrequentlyUsedEmotes,subUpsellClickedEmote:null},n}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){if(this.props.emotePickerSessionID&&this.props.channelID){var e={channel_id:this.props.channelID,emote_picker_sid:this.props.emotePickerSessionID,generated_by:this.props.emotePickerSource,chatroom_id:this.props.roomID};s.o.track(L.SpadeEventType.ViewedEmotePicker,e)}},t.prototype.componentDidUpdate=function(e){if(this.props.channelID&&this.props.emotePickerSessionID&&!e.emotePickerSessionID){var t={channel_id:this.props.channelID,emote_picker_sid:this.props.emotePickerSessionID,generated_by:this.props.emotePickerSource,chatroom_id:this.props.roomID};s.o.track(L.SpadeEventType.ViewedEmotePicker,t)}},t.prototype.render=function(){return r.createElement(oe.a,{"data-a-target":"emote-picker",direction:this.props.direction?this.props.direction:oe.b.TopRight,size:this.props.size?this.props.size:oe.c.Medium,noTail:!0,show:!0,offsetX:this.props.offsetX},r.createElement(U.a,{className:"emote-picker"},this.renderView()))},t.prototype.renderView=function(){var e=null;null===this.state.subUpsellClickedEmote&&(e=r.createElement(r.Fragment,null,this.renderTopContent(),this.renderTabContent()));var t=null;return null!==this.props.channelDisplayName&&null!==this.props.channelID&&null!==this.state.subUpsellClickedEmote&&(t=r.createElement(ae,{channelDisplayName:this.props.channelDisplayName,channelSubEmotes:this.props.channelSubEmotes,channelID:this.props.channelID,channelSubscriptionProducts:this.props.channelSubscriptionProducts,handleSubAction:this.props.handleSubAction,onBackClick:this.onBackClick,onClickEmote:this.onClickLockedEmote,ownedSetIDs:this.props.ownedSetIDs,subUpsellClickedEmote:this.state.subUpsellClickedEmote})),r.createElement(r.Fragment,null,t,e)},t.prototype.renderTopContent=function(){return r.createElement(U.a,{padding:{top:3,x:2}},r.createElement(U.a,{position:x.j.Absolute,padding:{top:.5,right:.5},attachRight:!0,attachTop:!0},r.createElement(l.a,{ariaLabel:Object(s.d)("Close emote picker","EmotePickerClose"),blurAfterClick:!0,"data-test-selector":"emote-picker-close",icon:c.a.Close,onClick:this.props.onClickClose,size:l.b.Small,type:l.c.Secondary})),r.createElement(se.a,{autoFocus:!0,onChange:this.handleFilterChange,placeholder:Object(s.d)("Search for Emotes","EmotePickerCard"),value:this.state.inputValue}))},t.prototype.renderTabContent=function(){return this.props.gqlError?r.createElement(U.a,null,r.createElement(B.a,{"data-test-selector":"emote-picker-menu-error-text",color:V.c.Error},Object(s.d)("Unable to load available emotes.","EmotePickerCard"))):this.props.loading?r.createElement(U.a,{alignItems:x.b.Center,display:x.d.Flex,fullHeight:!0,fullWidth:!0,justifyContent:x.h.Center,padding:1},r.createElement(le.a,null)):""!==this.state.filter?this.renderSearchContent():r.createElement(r.Fragment,null,r.createElement(T.b,{scrollRef:this.saveScrollRef,className:"emote-picker__tab-content",contentClassName:"emote-picker__scroll-container"},r.createElement(U.a,{padding:{bottom:5}},r.createElement(W,{checkVisible:this.checkVisible},this.getFrequentlyUsedEmoteGrid(),this.isChannelPointsEnabled&&this.getCurrentChannelUnlockedEmoteGrid(),this.getCurrentChannelEmoteGrid(),this.getOtherSubEmoteGrids(),this.getResidualEmoteGrids()))),this.renderTabNav())},t.prototype.getFrequentlyUsedEmoteGrid=function(){return 0===this.props.frequentlyUsedEmotes.length?null:r.createElement(U.a,{className:"emote-picker__content-block",refDelegate:this.saveFrequentlyUsedEmotesRef},r.createElement(H,{context:te.FrequentlyUsed,emotes:this.props.frequentlyUsedEmotes,label:Object(s.d)("Frequently Used","EmotePickerCard"),onClickEmote:this.onClickEmote}))},t.prototype.getCurrentChannelEmoteGrid=function(){return 0===this.props.sortedChannelEmotes.length||null===this.props.channelDisplayName?null:r.createElement(U.a,{className:this.props.isLoggedIn?"emote-picker__content-block":void 0,refDelegate:this.saveChannelEmotesRef},r.createElement(H,{context:te.CurrentChannel,emotes:this.props.sortedChannelEmotes,img:r.createElement(ce.a,{src:this.props.channelProfileImageURL,size:30,alt:this.props.channelDisplayName,userLogin:this.props.channelLogin}),label:this.props.channelDisplayName,onClickEmote:this.onClickEmote}))},t.prototype.getCurrentChannelUnlockedEmoteGrid=function(){var e=this.props.allEmoteSets.find((function(e){return e.id===R.a}));return e&&null!==this.props.channelDisplayName?r.createElement(U.a,{className:this.props.isLoggedIn?"emote-picker__content-block":void 0,refDelegate:this.saveChannelEmotesRef},r.createElement(H,{context:te.CurrentChannel,emotes:e.emotes,label:Object(s.d)("Unlocked with Channel Points","EmotePickerCard"),onClickEmote:this.onClickEmote})):null},t.prototype.getOtherSubEmoteGrids=function(){var e=this;if(!this.props.isLoggedIn)return null;var t=[];return this.props.otherChannelEmoteSets.forEach((function(n){n.owner&&n.owner.displayName&&n.emotes.length>0&&t.push(r.createElement(U.a,{key:"emote-grid--"+n.id+"-emotes",className:"emote-picker__content-block"},r.createElement(H,{context:te.OtherChannel,emotes:n.emotes,img:r.createElement(ce.a,{src:n.owner.profileImageURL,size:30,alt:n.owner.displayName,userLogin:n.owner.login}),label:n.owner.displayName,onClickEmote:e.onClickEmote})))})),this.state.hasUserInteracted||(t=t.slice(0,4)),r.createElement(r.Fragment,null,t)},t.prototype.getResidualEmoteGrids=function(){if(!this.props.isLoggedIn)return null;var e=[];return this.props.unlockedEmotes.length>0&&this.props.isLoggedIn&&e.push(r.createElement(U.a,{key:"emote-grid--unlocked-emotes",className:"emote-picker__content-block"},r.createElement(H,{context:te.Unlocked,emotes:this.props.unlockedEmotes,label:Object(s.d)("Unlocked","EmotePickerCard"),onClickEmote:this.onClickEmote}))),this.props.globalEmotes.length>0&&e.push(r.createElement(U.a,{key:"emote-grid--global-emotes",className:"emote-picker__content-block"},r.createElement(H,{context:te.Global,emotes:this.props.globalEmotes,label:Object(s.d)("Global","EmotePickerCard"),onClickEmote:this.onClickEmote}))),r.createElement(U.a,{refDelegate:this.saveAllEmotesRef},e)},t.prototype.renderSearchContent=function(){var e=Object(s.d)('No Search Results for "{inputValue}"',{inputValue:this.state.inputValue},"EmotePickerCard");return this.state.filteredEmotes.length>0&&(e=Object(s.d)('Search Results for "{inputValue}"',{inputValue:this.state.inputValue},"EmotePickerCard")),r.createElement(T.b,{className:"emote-picker__tab-content"},r.createElement(U.a,{position:x.j.Relative,padding:{x:1,top:1,bottom:3},className:"emote-picker__content-block"},r.createElement(A.a,{padding:{x:1}},r.createElement(B.a,{bold:!0,ellipsis:!0},e)),r.createElement(F.a,{emotes:this.state.filteredEmotes,onClickEmote:this.onClickEmote,spaced:!0})))},t.prototype.renderTabNav=function(){var e=null;this.props.sortedChannelEmotes.length>0&&(e=r.createElement(Y,{isActive:this.state.selectedNavTab===re.ChannelEmotes,label:re.ChannelEmotes,icon:c.a.NavChannels,onClick:this.onTabNavClick}));var t=null;return this.props.isLoggedIn&&(t=r.createElement(Y,{isActive:this.state.selectedNavTab===re.AllEmotes,label:re.AllEmotes,icon:c.a.EmoticonsAll,onClick:this.onTabNavClick})),e||t?r.createElement(A.a,{display:x.d.Flex,background:V.a.Alt,borderRadius:{bottomLeft:V.b.Medium,bottomRight:V.b.Medium},fullWidth:!0},r.createElement(Y,{isActive:this.state.selectedNavTab===re.FrequentlyUsedEmotes,label:re.FrequentlyUsedEmotes,icon:c.a.GlyphLength,onClick:this.onTabNavClick}),e,t):null},t}(r.PureComponent),ue=n("DB+C"),me=function(e){function t(t){var n=e.call(this,t)||this;return n.getOwnedSetIDs=Object(m.a)((function(e){var t=new Set;if(e&&e.emoteSets&&e.emoteSets.length>0)for(var n=0,i=e.emoteSets;n<i.length;n++){var a=i[n];a&&a.id&&t.add(parseInt(a.id,10))}return t})),n.getSubProductSetIDs=Object(m.a)((function(e){var t=new Set;if(e&&e.user&&e.user.subscriptionProducts)for(var n=0,i=e.user.subscriptionProducts;n<i.length;n++){var a=i[n];a&&void 0!==a.emoteSetID&&null!==a.emoteSetID&&t.add(a.emoteSetID)}return t})),n.getAllEmoteSets=Object(m.a)((function(e){return e&&e.emoteSets?Object(O.a)(e.emoteSets):[]})),n.getMappedEmotes=Object(m.a)((function(e,t,n){var i=[],a=[],r=[],o=[],s=[];return t.forEach((function(t){t.owner||"0"!==t.id?t.owner&&""!==t.owner.id?e&&e.user&&e.user.id===t.owner.id?Object(y.e)(t.id)?s.push.apply(s,t.emotes):e.user.id!==t.owner.id||n.has(t.id)||i.push.apply(i,t.emotes):r.push(t):o.push.apply(o,t.emotes):a.push.apply(a,t.emotes)})),{channelCampaignEmotes:i,globalEmotes:a,otherChannelEmoteSets:D(r),unlockedEmotes:o,channelBitsTierEmotes:s}})),n.getSubProducts=Object(m.a)((function(e){return e&&e.user&&e.user.subscriptionProducts?Object(g.b)(e.user.subscriptionProducts):[]})),n.getChannelSubEmotes=Object(m.a)((function(e,t){return N(e,t)})),n.getSortedChannelEmotes=Object(m.a)((function(e,t,n){var i=[],a=[];return e.forEach((function(e){e.isLocked?i.push(e):a.push(e)})),Object(O.d)(t.concat(a,i,n))})),n.handleSubEvent=function(e){e.action===M.a.ClickCheckout&&n.checkAndDisplaySubscriptionCheckout();var t=n.props.channelData,i=null;if(t){var r=t.user;r&&r.self&&r.self.cumulativeTenure&&(i=r.self.cumulativeTenure.months)}Object(M.c)(Object(a.__assign)(Object(a.__assign)({},e),{action:M.a.ClickCheckout,channelID:t&&t.user&&t.user.id||"",channelLogin:t&&t.user&&t.user.displayName||"",cumulativeTenureMonths:i,isMenuOpen:null,hasSubCredit:null,sub_location:"emote_picker",modal:!1,showPrimeContent:!0,giftRecipient:null}))},n.state={frequentlyUsedEmotes:t.isLoggedIn?[]:Object(w.b)()},n}return Object(a.__extends)(t,e),Object.defineProperty(t.prototype,"gqlError",{get:function(){var e=this.props,t=e.emoteSetsData,n=e.channelData;return t&&!!t.error||n&&!!n.error||!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gqlLoading",{get:function(){return!this.checkDataLoaded(this.props)},enumerable:!0,configurable:!0}),t.prototype.componentDidMount=function(){Object(w.c)(),this.checkDataLoaded(this.props)&&(this.props.onLoad&&this.props.onLoad(this.checkForContent(this.props)),this.props.latencyTracking.reportInteractive())},t.prototype.componentDidUpdate=function(e){if(this.gqlError||(e.pubsub.messages.subscriptionInfo!==this.props.pubsub.messages.subscriptionInfo&&(this.props.channelData&&this.props.channelData.refetch(),this.props.emoteSetsData&&this.props.emoteSetsData.refetch()),this.checkDataLoaded(this.props)&&(this.props.latencyTracking.reportInteractive(),this.props.onLoad&&this.props.onLoad(this.checkForContent(this.props)))),e.visible!==this.props.visible){if(this.props.openEmotePicker(),this.props.emoteSetsData&&this.props.emoteSetsData.emoteMap){var t=Object(w.d)(this.props.emoteSetsData.emoteMap);this.setState({frequentlyUsedEmotes:t})}}else e.visible&&!this.props.visible&&this.props.closeEmotePicker()},t.prototype.componentWillUnmount=function(){this.props.closeEmotePicker()},t.prototype.render=function(){var e=this.props,t=e.channelData,n=e.emoteSetsData;if(!this.props.visible)return null;var i=t&&t.user?t.user.displayName:null,a=t&&t.user?t.user.profileImageURL:null,o=t&&t.user?t.user.login:null,s=this.getAllEmoteSets(n),l=this.getOwnedSetIDs(n),c=this.getSubProducts(t),d=this.getMappedEmotes(t,s,this.getSubProductSetIDs(t)),u=d.channelCampaignEmotes,m=d.globalEmotes,p=d.otherChannelEmoteSets,h=d.unlockedEmotes,f=d.channelBitsTierEmotes,g=this.getChannelSubEmotes(l,c);return r.createElement(de,{allEmoteSets:s,channelDisplayName:i,channelID:this.props.channelOwnerID,channelLogin:o,channelProfileImageURL:a,channelSubEmotes:g,channelSubscriptionProducts:c,direction:this.props.direction,emotePickerSessionID:this.props.emotePickerSessionID,emotePickerSource:this.props.emotePickerSource,frequentlyUsedEmotes:this.state.frequentlyUsedEmotes,globalEmotes:m,gqlError:this.gqlError,handleSubAction:this.handleSubEvent,isCommerceDisabled:this.props.isCommerceDisabled,isLoggedIn:this.props.isLoggedIn,loading:this.gqlLoading,offsetX:this.props.offsetX,onClickClose:this.props.onClickClose,onClickEmote:this.props.onClickEmote,ownedSetIDs:l,otherChannelEmoteSets:p,roomID:this.props.roomID,size:this.props.size,sortedChannelEmotes:this.getSortedChannelEmotes(g,u,f),toggleVisibility:this.props.toggleVisibility,unlockedEmotes:h})},t.prototype.checkDataLoaded=function(e){var t=!e.channelOwnerID||e.channelData&&!e.channelData.loading,n=!e.isLoggedIn||e.emoteSetsData&&!e.emoteSetsData.loading;return t&&n},t.prototype.checkForContent=function(e){var t=e.emoteSetsData,n=e.channelData;return!!(t&&t.emoteSets&&t.emoteSets.length>0)||!!(n&&n.user&&n.user.subscriptionProducts)&&Object(g.b)(n.user.subscriptionProducts).filter(this.subscriptionProductHasEmotes).length>0},t.prototype.subscriptionProductHasEmotes=function(e){return null!==e.emoteSetID&&!!e.emotes&&e.emotes.length>0},t.prototype.checkAndDisplaySubscriptionCheckout=function(){var e=s.n.get(C.a.SUB_CHECKOUT__PRODUCT_KEY,""),t=s.n.get(C.a.SUB_CHECKOUT__RECIPIENT_KEY,""),n=s.n.get(C.a.SUB_CHECKOUT__MYSTERY_GIFT_COUNT,""),i=Number(n);e&&(this.props.channelData&&this.props.channelData.user&&this.props.channelData.user.subscriptionProducts&&this.props.channelData.user.subscriptionProducts.map((function(e){return e?e.name:null})).includes(e)?this.props.sessionUser?this.props.showSubscriptionCheckout({recipientLogin:t,productName:e,mysteryGiftCount:i,trackingContext:{source:E.c.EmotePicker}}):this.props.showLoginModal():C.a.clearSubscriptionCheckoutKeys())},t}(r.PureComponent);var pe=Object(u.d)(Object(i.b)((function(e){return{currentUserID:e.session.user&&e.session.user.id,emotePickerSessionID:e.chat&&e.chat.emotePickerSessionID||null,sessionUser:e.session.user,isLoggedIn:Object(b.f)(e)}}),(function(e){return Object(u.b)({closeEmotePicker:k.A,openEmotePicker:k.M,showLoginModal:C.a.showLoginModalWithCheckoutDispatch(v.a.EmotePickerSubscriptionButton),showSubscriptionCheckout:S.a},e)})),Object(p.a)(ue,{name:"channelData",skip:function(e){return!e.channelOwnerID},options:function(e){return{variables:{channelOwnerID:e.channelOwnerID}}}}),Object(h.a)([{topic:function(e){return"user-subscribe-events-v1."+e.currentUserID},mapMessageTypesToProps:{"*":"subscriptionInfo"},skip:function(e){return!e.currentUserID}}]),Object(I.withLatencyTracking)("EmotePicker"),Object(f.a)(),Object(j.withWatchPartyContext)(j.mapWatchPartyStateToChatProps))(me),he=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hasInteracted:!1,isEmotePickerMenuVisible:!1,isEmotePickerButtonVisible:!1},t.onClickOut=function(){t.setState({isEmotePickerMenuVisible:!1})},t.onClickEmote=function(e,n){t.props.onClickEmote&&t.props.onClickEmote(e,n)},t.toggleEmotePicker=function(){t.setState((function(e){return{isEmotePickerMenuVisible:!e.isEmotePickerMenuVisible}}))},t.onEmotePickerDataLoaded=function(e){e&&t.setState({isEmotePickerButtonVisible:!0})},t.onInteraction=function(){return t.setState({hasInteracted:!0})},t}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive(),this.props.inputRef&&(this.props.inputRef.addEventListener("mouseenter",this.onInteraction),this.props.inputRef.addEventListener("focus",this.onInteraction))},t.prototype.componentWillUnmount=function(){this.props.inputRef&&(this.props.inputRef.removeEventListener("mouseenter",this.onInteraction),this.props.inputRef.removeEventListener("focus",this.onInteraction))},t.prototype.render=function(){var e=null;this.state.isEmotePickerButtonVisible&&(e=r.createElement(d,{onClick:this.toggleEmotePicker,isActive:this.state.isEmotePickerMenuVisible}));var t=null;this.hasInteractedOrPageload&&(t=r.createElement(pe,{channelOwnerID:this.props.channelOwnerID,emotePickerSource:this.props.emotePickerSource,onClickClose:this.toggleEmotePicker,onClickEmote:this.onClickEmote,onLoad:this.onEmotePickerDataLoaded,offsetX:this.props.offsetX,toggleVisibility:this.toggleEmotePicker,visible:this.state.isEmotePickerMenuVisible,direction:this.props.direction}));var n=r.createElement(U.a,Object(a.__assign)({className:"emote-picker-and-button"},this.layoutProps),e,t);return this.props.shouldCloseOnClickOut?r.createElement(o.a,{onClickOut:this.onClickOut},n):n},Object.defineProperty(t.prototype,"hasInteractedOrPageload",{get:function(){return!(!this.props.firstPageLoaded&&!this.state.hasInteracted)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layoutProps",{get:function(){var e={attachTop:!!this.props.attachTop,attachRight:!!this.props.attachRight,attachBottom:!!this.props.attachBottom,attachLeft:!!this.props.attachLeft,padding:this.props.padding};return this.props.position&&(e.position=this.props.position),e},enumerable:!0,configurable:!0}),t}(r.Component),fe=Object(I.withLatencyTracking)("EmotePicker")(he);var ge=Object(i.b)((function(e){return{firstPageLoaded:e.session.firstPageLoaded}}))(fe);n("cpJf");n.d(t,"a",(function(){return ge})),n.d(t,"c",(function(){return pe})),n.d(t,"b",(function(){return d}))},"mr+n":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s}));var i=n("/7QA"),a=30,r=[1,3,5,10,20,30,60,120];function o(e){switch(e){case 1:return Object(i.d)("1 second","SlowModeLabel");case 3:return Object(i.d)("3 seconds","SlowModeLabel");case 5:return Object(i.d)("5 seconds","SlowModeLabel");case 10:return Object(i.d)("10 seconds","SlowModeLabel");case 20:return Object(i.d)("20 seconds","SlowModeLabel");case 30:return Object(i.d)("30 seconds (default)","SlowModeLabel");case 60:return Object(i.d)("60 seconds","SlowModeLabel");case 120:return Object(i.d)("120 seconds","SlowModeLabel");default:return i.k.warn("[SlowModeLabel] Tried to generate a label for a non-preset.",e),""}}function s(e){switch(e){case 1:return Object(i.d)("1s","SlowModeShorthand");case 3:return Object(i.d)("3s","SlowModeShorthand");case 5:return Object(i.d)("5s","SlowModeShorthand");case 10:return Object(i.d)("10s","SlowModeShorthand");case 20:return Object(i.d)("20s","SlowModeShorthand");case 30:return Object(i.d)("30s","SlowModeShorthand");case 60:return Object(i.d)("60s","SlowModeShorthand");case 120:return Object(i.d)("120s","SlowModeShorthand");default:return Object(i.d)("custom","SlowModeShorthand")}}},mziE:function(e,t,n){},"n+IG":function(e,t,n){},nAiT:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"e",(function(){return d})),n.d(t,"d",(function(){return u})),n.d(t,"g",(function(){return m})),n.d(t,"f",(function(){return p}));var i=n("q1tI"),a=n("4rCz"),r=n("+80q"),o=n("Jsra");function s(){return Object(a.d)("Channel Points","ChannelPoints")}function l(){return Object(a.d)("This reward is temporarily out of stock.","ChannelPoints")}function c(e){return Object(a.d)("<x:strong>Oops!</x:strong> This reward went out of stock. <x:link>Please try again later.</x:link>",{"x:strong":function(e){return i.createElement(r.a,{bold:!0,type:r.e.Span},e)},"x:link":function(t){return i.createElement(o.a,{onClick:e},t)}},"ChannelPoints")}function d(e,t){return e?Object(a.d)("{streamerName} has changed the reward requirements. <x:link>Please try again.</x:link>",{streamerName:e,"x:link":function(e){return i.createElement(o.a,{onClick:t},e)}},"ChannelPoints"):Object(a.d)("The broadcaster has changed the reward requirements. <x:link>Please try again.</x:link>",{"x:link":function(e){return i.createElement(o.a,{onClick:t},e)}},"ChannelPoints")}function u(e,t){return e?Object(a.d)("<x:strong>Oops!</x:strong> {streamerName} has changed this reward's requirements. <x:link>Please try again.</x:link>",{streamerName:e,"x:strong":function(e){return i.createElement(r.a,{bold:!0,type:r.e.Span},e)},"x:link":function(e){return i.createElement(o.a,{onClick:t},e)}},"ChannelPoints"):Object(a.d)("<x:strong>Oops!</x:strong> The broadcaster has changed this reward's requirements. <x:link>Please try again.</x:link>",{"x:strong":function(e){return i.createElement(r.a,{bold:!0,type:r.e.Span},e)},"x:link":function(e){return i.createElement(o.a,{onClick:t},e)}},"ChannelPoints")}function m(){return Object(a.d)("Channel Points early access","ChannelPointsSignupPage")}function p(){return Object(a.d)("Review Requests Queue","CustomRewardsList")}},nHtq:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PollCommandHandler_ChannelData"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"channel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isAffiliate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isPartner"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:139}};n.loc.source={body:"query PollCommandHandler_ChannelData($channelLogin: String!) {\nchannel: user(login: $channelLogin) {\nid\nroles {\nisAffiliate\nisPartner\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.PollCommandHandler_ChannelData=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"PollCommandHandler_ChannelData")},nIRf:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){var t=this;this.timerId=null,this.start=function(){t.timerId&&t.stop(),t.timerId=setInterval(t.onInterval,t.intervalMillis)},this.stop=function(){t.timerId&&(clearInterval(t.timerId),t.timerId=null)},this.restart=function(e){void 0===e&&(e=0),t.stop(),t.timerId=setTimeout((function(){t.onInterval(),t.start()}),e)},this.onInterval=e.onInterval,this.intervalMillis=e.intervalMillis}},nJ3O:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"customRewardFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CommunityPointsCustomReward"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"backgroundColor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"defaultImage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"pointsImageFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"pointsImageFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"isEnabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isInStock"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isPaused"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isSubOnly"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isUserInputRequired"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"shouldRedemptionsSkipRequestQueue"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"prompt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}],loc:{start:0,end:345}};i.loc.source={body:'#import "twilight/features/community-points/models/points-image-fragment.gql"\nfragment customRewardFragment on CommunityPointsCustomReward {\nid\nbackgroundColor\ncost\ndefaultImage {\n...pointsImageFragment\n}\nimage {\n...pointsImageFragment\n}\nisEnabled\nisInStock\nisPaused\nisSubOnly\nisUserInputRequired\nshouldRedemptionsSkipRequestQueue\nprompt\ntitle\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("r+cx").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)}))),e.exports=i},nR4f:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"EmoteCard"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"emoteID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"emote"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"emoteID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"subscriptionProduct"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"subProduct"},directives:[]}]}}]}}]}}],loc:{start:0,end:248}};i.loc.source={body:'#import "twilight/features/chat/components/emote-card/emote-subscription-product.gql"\nquery EmoteCard ($emoteID: ID!) {\nemote(id: $emoteID) {\nid\ntoken\nsetID\nowner {\nid\nlogin\ndisplayName\nstream {\nid\ntype\n}\n}\nsubscriptionProduct {\n...subProduct\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("HfAM").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})));var r={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),r[e.name.value]=t}})),e.exports=i,e.exports.EmoteCard=function(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=r[t]||new Set,a=new Set,s=new Set;for(i.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(r[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(t){var i=o(e,t);i&&n.definitions.push(i)})),n}(i,"EmoteCard")},na98:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("/7QA"),o=n("DMoW"),s=n("cys1"),l=n("9sGC"),c=n("+80q"),d=n("sUnt"),u=function(e){return e.entryDetails&&e.entryDetails.reason?a.createElement(d.a,{className:"targeted-mod-action__reason",padding:{x:1,y:0}},a.createElement(c.a,{italic:!0,type:c.e.Span},e.entryDetails.reason)):null},m=(n("k7qK"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.render=function(){var e,t=this.props.entry,n=new Date(t.timestamp).valueOf(),i=this.renderTimestamp(n),s=t.user&&t.user.login||"unknown",l=t.target&&t.target.login||"unknown",m=t.details&&t.details.durationSeconds||"unknown";switch(t.action){case o.Rb.BAN_USER:e=Object(r.d)("{modLogin} banned {target}.",{modLogin:a.createElement(c.a,{bold:!0,type:c.e.Span},s),target:l},"ViewerCardModLogsFeature");break;case o.Rb.TIMEOUT_USER:e=Object(r.d)("{modLogin} timed out {target} for {duration} seconds.",{modLogin:a.createElement(c.a,{bold:!0,type:c.e.Span},s),target:l,duration:m},"ViewerCardModLogsFeature");break;case o.Rb.UNBAN_USER:e=Object(r.d)("{modLogin} unbanned {target}.",{modLogin:a.createElement(c.a,{bold:!0,type:c.e.Span},s),target:l},"ViewerCardModLogsFeature");break;case o.Rb.UNTIMEOUT_USER:e=Object(r.d)("{modLogin} removed timeout on {target}.",{modLogin:a.createElement(c.a,{bold:!0,type:c.e.Span},s),target:l},"ViewerCardModLogsFeature");break;default:return null}return a.createElement(d.a,{className:"targeted-mod-action",padding:{x:1,y:.5}},i,a.createElement(c.a,{type:c.e.Span},e),a.createElement(u,{entryDetails:t.details}))},t.prototype.renderTimestamp=function(e){return a.createElement("span",{key:"timestamp",className:"message__timestamp","data-test-selector":l.b},Object(s.a)(new Date(e),!0))},t}(a.Component));n.d(t,"a",(function(){return m}))},"nc/C":function(e,t,n){},ngVu:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("znm4"),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onPlayerSeekRequest=function(e){t.props.onPlayerSeekRequestHandler(e-t.getSourceVideoClipStartOffset())},t}return Object(i.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.clipVideoID,n=e.durationSeconds,i=e.videoOffsetSeconds,o=null!==i&&null!==n?{offset:i,duration:n}:void 0,s=this.getSourceVideoClipStartOffset();return a.createElement(r.a,{onPlayerSeekRequest:this.onPlayerSeekRequest,onShowLogin:this.props.onShowLogin,videoID:t,startInReplayMode:!0,isClipChatDisabled:!t,messageWindow:o,highlightTimestamp:s})},t.prototype.getSourceVideoClipStartOffset=function(){return this.props.videoOffsetSeconds?this.props.videoOffsetSeconds:0},t}(a.Component);n.d(t,"a",(function(){return o}))},nkgB:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"MessageBuffer_Channel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"chatDelayMs"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:118}};n.loc.source={body:"query MessageBuffer_Channel($channelLogin: String!) {\nuser(login: $channelLogin) {\nid\nchatSettings {\nchatDelayMs\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.MessageBuffer_Channel=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"MessageBuffer_Channel")},nt5g:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"RoleRestricted"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentOwnerLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isStaff"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"contentOwnerLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isEditor"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:147}};n.loc.source={body:"query RoleRestricted($contentOwnerLogin: String!) {\ncurrentUser {\nid\nroles {\nisStaff\n}\n}\nuser(login: $contentOwnerLogin) {\nid\nself {\nisEditor\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.RoleRestricted=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"RoleRestricted")},nxZp:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){this.bio=e.bio,this.createdAt=e.createdAt,this.displayName=e.displayName,this.id=e.id,this.logo=e.logo,this.name=e.name,this.type=e.type,this.updatedAt=e.updatedAt}},o8Ti:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("/7QA"),a="viewer_card_mod_logs",r="viewer_card_mod_logs_user_whitelist";function o(e){var t=i.b.get(a,!1),n=i.b.get(r,[]);return t||!(!e||!n.includes(e))}},oK83:function(e,t,n){"use strict";var i,a,r;n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return r})),function(e){e[e.unknown=0]="unknown",e[e.chat=1]="chat",e[e.room=2]="room",e[e.whisper=3]="whisper",e[e.vod=4]="vod"}(i||(i={})),function(e){e[e.chat_message=0]="chat_message",e[e.extension_message=1]="extension_message",e[e.member_list=2]="member_list",e[e.recent_raids=3]="recent_raids",e[e.room_message=4]="room_message",e[e.test=5]="test",e[e.user_command=6]="user_command",e[e.viewer_list=7]="viewer_list",e[e.viewer_list_mod_section=8]="viewer_list_mod_section",e[e.mega_cheer_notification=9]="mega_cheer_notification",e[e.bits_leaderboard=10]="bits_leaderboard",e[e.popout_button=11]="popout_button",e[e.hype_train=12]="hype_train"}(a||(a={})),function(e){e[e.Viewer=0]="Viewer",e[e.Extension=1]="Extension",e[e.Emote=2]="Emote"}(r||(r={}))},"oc+d":function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"channelClip"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Clip"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcaster"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channel"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"boxArtURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"138"}},{kind:"Argument",name:{kind:"Name",value:"height"},value:{kind:"IntValue",value:"190"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"language"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"curator"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channel"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"creationState"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"videoOffsetSeconds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"video"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"durationSeconds"},arguments:[],directives:[]}]}}],loc:{start:0,end:330}};i.loc.source={body:'#import "twilight/features/channel/queries/channel.gql"\nfragment channelClip on Clip {\nid\nbroadcaster {\n...channel\n}\ngame {\nid\nboxArtURL(width: 138 height: 190)\nname\ndisplayName\n}\nlanguage\ntitle\nslug\nviewCount\ncurator {\n...channel\n}\ncreatedAt\ncreationState\nurl\nvideoOffsetSeconds\nvideo {\nid\nbroadcastType\ntitle\n}\ndurationSeconds\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("BbLt").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)}))),e.exports=i},oe5X:function(e,t,n){"use strict";var i=n("XmgI"),a=n("RcPG"),r=n("0FG4"),o=n("mrSG"),s=n("VJH5");var l=n("i6WW"),c=n("gTu3"),d=n("6j5V"),u=/^(['"*([{</]*)(@?)((?:[^\u0000-\u007F]|[\w-])+)/;function m(e,t){if(!t)return!1;var n=t.displayName,i=t.login;return e===n||e.toLowerCase()===i}function p(e,t){void 0===t&&(t={});for(var n=e.match(/[^\uD800-\uDFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDFFF]/g)||[],i=function(e){if(!e)return[];var t=e.list.filter((function(t){return t.categories[s.a.Aggressive]&&e.preferences[s.a.Aggressive]||t.categories[s.a.Identity]&&e.preferences[s.a.Identity]||t.categories[s.a.Profanity]&&e.preferences[s.a.Profanity]||t.categories[s.a.Sexual]&&e.preferences[s.a.Sexual]}));return 0===t.length?t:(t.sort((function(e,t){return e.startIndex-t.startIndex})),t.reduce((function(e,t,n){if(0===n)return e.push(t),e;var i=e[e.length-1];return t.startIndex<=i.endIndex+1?(i.endIndex=Math.max(t.endIndex,i.endIndex),i.categories=Object(o.__assign)(Object(o.__assign)({},i.categories),t.categories)):e.push(t),e}),[]))}(t.flags),r=0,l=[];r<n.length;){var c=i&&i.shift();c?(l.push.apply(l,h(n.slice(r,c.startIndex),r,t)),l.push({type:a.a.FlaggedSegment,categories:c.categories,content:f(h(n.slice(c.startIndex,c.endIndex+1),c.startIndex,t)),length:c.endIndex-c.startIndex+1,originalText:n.slice(c.startIndex,c.endIndex+1).join("")}),r=c.endIndex+1):(l.push.apply(l,h(n.slice(r),r,t)),r=n.length)}return f(l)}function h(e,t,n){void 0===n&&(n={});var o=n.cheers,s=n.emotes,p=n.links,h=n.mentions,f="",v=0;return e.reduce((function(n,b,k){if(g(b))return f="",n;if(0===f.length&&(v=t+k),f+=b,k!==e.length-1&&!g(e[k+1]))return n;var y=s&&Object(r.c)(f,v,s);if(y)return n.concat(y);var S=o&&Object(i.f)(f,o);if(S)return n.concat(S);var C=p&&Object(l.a)(f,p);if(C)return n.concat(C);var E=h&&function(e,t){var n=e.match(u);if(!n)return null;var i=[],r=n[1],o=Boolean(n[2].length),s=n[3],l=e.slice(n[0].length);if(r.length&&i.push(Object(d.a)(r)),o){var p=c.a.Default;m(s,t.sessionUser)?p=c.a.Recipient:t.sessionUser&&t.sessionUser.login===t.senderLogin&&(p=c.a.Sender),i.push({type:a.a.Mention,content:{recipient:s,currentUserMentionRelation:p}})}else{if(!m(s,t.sessionUser))return null;i.push({type:a.a.CurrentUserHighlight,content:s})}return l.length&&i.push(Object(d.a)(l)),i}(f,h);return E?n.concat([E]):n.concat(Object(d.a)(f))}),[])}function f(e){return e.reduce((function(e,t,n){return 0===n?[].concat.call(e,t):[].concat.call(e,Object(d.a)(" "),t)}),[]).reduce((function(e,t,n){if(0===n)return e.concat(t);var i=e[e.length-1];return t.type===a.a.Text&&i.type===a.a.Text?(i.content=""+i.content+t.content,e):e.concat(t)}),[])}function g(e){return/\s/.test(e)}n.d(t,"a",(function(){return p}))},oi4T:function(e,t,n){"use strict";var i,a=n("mrSG"),r=n("/7QA"),o=n("DMoW"),s=n("2xye");!function(e){e.Everyone="everyone",e.ModsOnly="mod",e.StreamChat="twitch_chat",e.SubsOnly="sub"}(i||(i={})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return u}));var l=function(e){var t;switch(e.roomMinimumRole){case o.Cc.EVERYONE:t=i.Everyone;break;case o.Cc.MODERATOR:t=i.ModsOnly;break;case o.Cc.SUBSCRIBER:t=i.SubsOnly;break;default:t=i.StreamChat}var n={channel:e.channelLogin,chatroom_type:t,is_host_mode:e.isHostMode,is_using_web_sockets:!0};return e.channelID&&(n.channel_id=e.channelID),e.roomID&&(n.chatroom_id=e.roomID),n},c=function(e){var t;switch(e.roomMinimumRole){case o.Cc.EVERYONE:t=i.Everyone;break;case o.Cc.MODERATOR:t=i.ModsOnly;break;case o.Cc.SUBSCRIBER:t=i.SubsOnly;break;default:t=i.StreamChat}var n={channel:e.channelLogin,room_type:t,is_host_mode:e.isHostMode,is_using_web_sockets:!0};return e.roomID&&(n.room_id=e.roomID),e.room&&(n.room=e.room),n},d=function(e){r.o.track(s.SpadeEventType.ChatRoomJoined,l(e))},u=function(e){r.o.track(s.SpadeEventType.ChatRoomWatched,Object(a.__assign)(Object(a.__assign)({},l(e)),{channel_id:e.channelID}))}},okS7:function(e,t,n){"use strict";n("kPBf");var i,a=n("mrSG"),r=n("q1tI"),o=n("8Ad5"),s=n("1rIY"),l=n("uu1w"),c=n("/7QA"),d=n("2xye"),u={Chat:"chat",Feed:"feed",Whisper:"whisper"},m="/",p=":",h="#",f="@",g=function(e){switch(e){case l.a.Command:return m;case l.a.Emote:return p;case l.a.Hashtag:return h;case l.a.Mention:return f;default:return void c.k.warn("Chat Suggestions tracking was passed an unknown autocomplete type.")}},v=function(e){var t=g(e.autocompleteType);if(t){var n={channel:e.channelLogin,completed_text:e.completedText,source:e.source,start_character:t};c.o.track(d.SpadeEventType.ChatSuggestionComplete,n)}},b=n("3aAs"),k=n("Kae6");!function(e){e.Input="input",e.TextArea="textarea"}(i||(i={}));var y=Object(s.a)("Autocomplete",{registerAutocompleteProvider:function(){return function(){return null}}}),S=y.withContext,C=y.context,E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={autocompleteType:l.a.None,matchedCursorPosition:0,matches:null,value:""},t.providers=[],t.contextForChildren={registerAutocompleteProvider:t.registerAutocompleteProvider.bind(t)},t.onChange=function(e){t.setState({value:e.target.value},(function(){t.getMatches()})),t.props.onChange&&t.props.onChange(e)},t.onKeyDown=function(e){var n=function(){t.props.onKeyDown&&t.props.onKeyDown(e)},i=function(){e.preventDefault(),e.stopPropagation()},a=e.charCode||e.keyCode;if(a!==o.a.Enter){switch(a){case o.a.Tab:if(!t.state.matches)t.getMatches(!0)&&i();break;case o.a.Esc:t.state.matches&&(i(),t.resetDisplayState())}n()}else n()},t.setComponentRefDelegate=function(e){t.componentRef=e,t.props.componentRefDelegate&&t.props.componentRefDelegate(e)},t.getMatches=function(e){var n=t.state.value;if(0===t.providers.length||0===n.length)return t.resetDisplayState(),!1;var i=t.getCurrentCursorPosition();if(i>n.length);else for(;i<n.length&&!/\s/.test(n.charAt(i));)i++;var a=n.substring(0,i);if(0===a.length||/\s/.test(a.substring(a.length-1)))return t.resetDisplayState(),!1;for(var r=a.split(/\s/),o=r.length-1,s=r[o],l=0,c=t.providers;l<c.length;l++){var d=c[l];if(!e||d.canBeTriggeredByTab){var u=d.getMatches(s,e,o);if(u)return t.props.onMatch&&t.props.onMatch(u,t.insertReplacement,t.resetDisplayState),t.setState({autocompleteType:d.autocompleteType,matchedCursorPosition:i,matches:u}),!0}}return t.resetDisplayState(),!1},t.resetDisplayState=function(e,n){t.props.onReset&&t.props.onReset();var i=Object(a.__assign)(Object(a.__assign)(Object(a.__assign)({},t.state),{autocompleteType:l.a.None,matches:null}),e||{});t.setState(i,n)},t.insertReplacement=function(e){var n,i=t.state.value,r=t.state.matchedCursorPosition,o=i.substring(0,r),s=o.lastIndexOf(e.current);if(-1===s)o=o.concat(e.replacement+" "),r=o.length;else{var l=o.substring(0,s),c=i.length>s+e.current.length?i.substring(s+e.current.length):"",d=c.startsWith(" ")?e.replacement:e.replacement+" ";o=""+l+d+c;var u=t.getNextCursorSelection(l,d,c,e);r=u.start,n=u.end}v(Object(a.__assign)(Object(a.__assign)({},t.props.trackingParams||{}),{autocompleteType:t.state.autocompleteType,completedText:e.replacement,source:t.props.suggestionSource})),t.resetDisplayState({value:o},(function(){t.setCursorSelection(r,n)}))},t.getCurrentCursorPosition=function(){return t.componentRef.selectionStart||0},t.getNextCursorSelection=function(e,t,n,i){var a=e.length+t.length;if(i.selection){var r=t.indexOf(i.selection);return{start:e.length+r,end:n.startsWith(" ")?a:a-1}}return{start:a,end:a}},t.setCursorSelection=function(e,n){t.componentRef&&(t.componentRef.setSelectionRange(e,n||e),t.componentRef.focus())},t}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.refDelegate&&this.props.refDelegate(this)},t.prototype.componentDidUpdate=function(e,t){t.value!==this.state.value&&this.props.onValueUpdate&&this.props.onValueUpdate(this.state.value),!t.matches&&this.state.matches&&function(e){var t=g(e.autocompleteType);if(t){var n={source:e.source,start_character:t};c.o.track(d.SpadeEventType.ChatSuggestion,n)}}({autocompleteType:this.state.autocompleteType,source:this.props.suggestionSource})},t.prototype.render=function(){var e=Object(a.__assign)(Object(a.__assign)({},this.props),{onChange:this.onChange,onKeyDown:this.onKeyDown,refDelegate:this.setComponentRefDelegate,value:this.state.value});return r.createElement(C.Provider,{value:this.contextForChildren},this.props.componentType===i.Input?r.createElement(b.a,Object(a.__assign)({},e,{type:e.type||b.c.Text})):r.createElement(k.a,Object(a.__assign)({},e,{autoComplete:e.htmlAutocomplete})),this.props.children)},t.prototype.getValue=function(){return this.state.value},t.prototype.setValue=function(e){this.resetDisplayState({value:e})},t.prototype.registerAutocompleteProvider=function(e){var t=this;return this.providers.push(e),function(){var n=t.providers.indexOf(e);t.providers.splice(n,1)}},t}(r.Component),w=n("u5aL"),O=n("sUnt"),D=n("hnjF"),N=n("ygYM"),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={matches:null},t.onMatchSelect=function(e){t.insertReplacement&&t.insertReplacement(e)},t.onDismiss=function(){t.resetDisplayState&&t.resetDisplayState()},t.setMatches=function(e,n,i){t.insertReplacement||(t.insertReplacement=n),t.resetDisplayState||(t.resetDisplayState=i),t.setState({matches:e})},t.reset=function(){t.setState({matches:null})},t}return Object(a.__extends)(t,e),t.prototype.render=function(){return r.createElement(r.Fragment,null,this.state.matches&&r.createElement(O.a,{position:D.j.Relative},r.createElement(w.a,{onClickOut:this.onDismiss},r.createElement(N.a,{direction:N.b.TopLeft,"data-test-selector":"autocomplete-balloon",show:!0},r.createElement(O.a,{padding:{bottom:.5}},r.createElement(F,{matches:this.state.matches,onMatchSelect:this.onMatchSelect,onDismiss:this.onDismiss,containerElement:this.props.containerElement}))))),r.createElement(E,Object(a.__assign)({},this.props,{onMatch:this.setMatches,onReset:this.reset})))},t}(r.Component),I=n("8/mp"),M=n("G9mL"),j=n("3Czn"),T=n("i4Ys"),P=n("X2PJ"),L=n("+80q"),R="autocomplete-match-list-matches",F=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.resizeAnimationFrame=0,t.messages={noMatches:Object(c.d)("No matches.","AutocompleteBalloon")},t.logger=c.k.withCategory("AutocompleteMatchList"),t.renderMatches=function(){var e=new Set,n=[];return t.groupMatches().forEach((function(i,a){var o=i.group;o&&!e.has(o)&&(0!==a&&n.push(r.createElement(M.a,{key:"autocomplete-separator-"+a})),n.push(r.createElement(O.a,{key:"autocomplete-heading-"+a,padding:{x:.5}},r.createElement(j.a,null,o))),e.add(o)),n.push(t.renderMatchListItem(i,a))})),n},t.renderMatchListItem=function(e,n){var i=t.state.selectedMatch,a=i&&i.replacement===e.replacement;return r.createElement(O.a,{"data-test-selector":R,key:"autocomplete-match-"+n,refDelegate:a?t.focusOnOption:void 0},r.createElement(T.a,{borderRadius:P.b.Small,"data-a-target":e.replacement,"data-click-index":n,hover:a,onClick:t.onMatchClick,onMouseEnter:t.handleMatchMouseEnter,selected:a,type:T.b.Alpha},r.createElement(O.a,{alignItems:D.b.Center,display:D.d.Flex,padding:{x:.5}},e.element)))},t.handleMatchMouseEnter=function(e){var n=t.getMatchFromEvent(e);n&&t.setState({selectedMatch:n})},t.onMatchClick=function(e){var n=t.getMatchFromEvent(e);n&&t.props.onMatchSelect(n)},t.getMatchFromEvent=function(e){var n=t.groupMatches(),i=e.currentTarget.getAttribute("data-click-index");return!i||+i>=n.length?(t.logger.errorAndReport(new Error,"The index received from the UI element was not found in props.matches."),null):n[+i]},t.handleKeydown=function(e){var n=e.charCode||e.keyCode,i=function(){e.preventDefault(),e.stopPropagation()};switch(n){case o.a.Tab:case o.a.Enter:i(),t.props.matches.length&&t.state.selectedMatch?t.props.onMatchSelect(t.state.selectedMatch):t.props.onDismiss();break;case o.a.Up:case o.a.Down:if(!t.state.selectedMatch||!t.props.matches.length)return;var a=t.groupMatches(),r=a.indexOf(t.state.selectedMatch);if(-1===r)return void t.logger.errorAndReport(new Error,"The selected match was not found in props.matches.");i();var s=n===o.a.Up?-1:1,l=a[t.getIndexWithinLength(r+s,t.props.matches.length)];t.setState({selectedMatch:l})}},t.groupMatches=function(){for(var e={},n=0,i=t.props.matches;n<i.length;n++){var a=i[n];(c=e[l=a.group||"undefined"]||[]).push(a),e[l]=c}for(var r=[],o=0,s=Object.keys(e).sort(t.sortGroups);o<s.length;o++){var l,c;(c=e[l=s[o]])&&r.push.apply(r,c)}return r},t.sortGroups=function(e,t){return"undefined"===e?1:"undefined"===t?-1:e>t?1:e<t?-1:0},t.getIndexWithinLength=function(e,t){var n=e%t;return n<0?n+t:n},t.onResize=function(){t.resizeAnimationFrame||(t.resizeAnimationFrame=requestAnimationFrame(t.setContainerHeight))},t.setContainerHeight=function(){var e=t.props.containerElement&&t.props.containerElement.clientHeight||1080;t.scrollableArea&&t.scrollableArea.root&&(t.scrollableArea.root.style.maxHeight=e+"px"),t.resizeAnimationFrame=0},t.focusOnOption=function(e){if(e&&t.AutocompleteMatchListElement){var n=e.getBoundingClientRect(),i=t.AutocompleteMatchListElement.getBoundingClientRect();(n.bottom>i.bottom||n.top<i.top)&&e.scrollIntoView()}},t.setAutocompleteMatchListElement=function(e){t.AutocompleteMatchListElement=e},t.setScrollableAreaRef=function(e){return t.scrollableArea=e},t}return Object(a.__extends)(t,e),t.getDerivedStateFromProps=function(e,t){var n=e.matches.reduce((function(e,n,i){return t.selectedMatch?n.replacement===t.selectedMatch.replacement?i:e:0}),0);return{selectedMatch:e.matches[n]}},t.prototype.componentDidMount=function(){window.addEventListener("keydown",this.handleKeydown,!0),window.addEventListener("resize",this.onResize,!0),this.setContainerHeight(),this.props.matches.length>0&&this.setState({selectedMatch:this.props.matches[0]})},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.onResize,!0),window.removeEventListener("keydown",this.handleKeydown,!0),this.resizeAnimationFrame&&cancelAnimationFrame(this.resizeAnimationFrame)},t.prototype.render=function(){var e;return e=0===this.props.matches.length?r.createElement(O.a,{padding:{x:.5},"data-test-selector":"autocomplete-match-list-no-matches"},r.createElement(L.a,{type:L.e.Span,color:P.c.Alt2},this.messages.noMatches)):this.renderMatches(),r.createElement(O.a,{position:D.j.Relative,padding:{top:.5,x:.5}},r.createElement(D.g,{"data-test-selector":"autocomplete-matches-container",className:"autocomplete-match-list",overflow:D.i.Hidden,display:D.d.Flex,flexDirection:D.e.Column},r.createElement("div",{ref:this.setAutocompleteMatchListElement},r.createElement(I.b,{suppressScrollX:!0,scrollRef:this.setScrollableAreaRef},r.createElement(O.a,null,e)))))},t}(r.Component),U=n("hbnN"),x=n("lZdE"),A=n("OpME"),B=(n("gDzh"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.autocompleteType=l.a.Emote,t.canBeTriggeredByTab=!1,t.hydrateEmotes=Object(U.a)((function(e){for(var t=[],n=0,i=e;n<i.length;n++){var a=i[n];a&&a.id&&a.emotes&&t.push({id:a.id,emotes:Object(A.b)(a.emotes)})}return t})),t.getMatches=function(e){return e.startsWith(":")?e.length<3?null:t.getMatchedEmotes(e):null},t.getMatchedEmotes=function(e){var n=t.hydrateEmotes(t.props.emotes);if(!n||0===n.length)return null;var i=e.substring(1),a=n.reduce((function(e,n){var a=n.emotes.filter((function(e){return t.doesEmoteMatchTerm(e,i)}));return e.concat(a)}),[]);return a=Object(A.d)(a),(a=Object(A.e)(a,i)).map((function(e){return{current:":"+i,replacement:e.token,element:t.renderEmoteSuggestion(e)}}))},t.doesEmoteMatchTerm=function(e,t){var n=new RegExp("^"+Object(x.a)(t),"i");if(e.token.match(n))return!0;var i=new RegExp(""+Object(x.a)(t.charAt(0)).toUpperCase()),a=new RegExp("^"+Object(x.a)(t.slice(1)),"i"),r=e.token.match(i);return!!(r&&r.index&&e.token.slice(r.index+1).match(a))},t.renderEmoteSuggestion=function(e){return[r.createElement(O.a,{padding:.5,flexShrink:0,key:"emote-img-"+e.id},r.createElement("img",{alt:e.token+"-emote",className:"emote-autocomplete-provider__image",srcSet:e.srcSet})),r.createElement(L.a,{type:L.e.Span,key:"emote-text-"+e.id,ellipsis:!0},e.token)]},t}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){this.unregister=this.props.registerAutocompleteProvider(this)},t.prototype.componentWillUnmount=function(){this.unregister()},t.prototype.render=function(){return null},t}(r.Component)),V=S((function(e){return e}))(B);n.d(t,"c",(function(){return E})),n.d(t,"a",(function(){return i})),n.d(t,"g",(function(){return S})),n.d(t,"d",(function(){return _})),n.d(t,"b",(function(){return F})),n.d(t,"f",(function(){return V})),n.d(t,"e",(function(){return u}))},olXY:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChatRestrictions"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"channel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"chatRestrictedReasons"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lastRecentChatMessageAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"follower"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"followedAt"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"chatSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"requireVerifiedAccount"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isEmailVerified"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:247}};n.loc.source={body:"query ChatRestrictions($channelLogin: String!) {\nchannel: user(login: $channelLogin) {\nid\nself {\nchatRestrictedReasons\nlastRecentChatMessageAt\nfollower {\nfollowedAt\n}\n}\nchatSettings {\nrequireVerifiedAccount\n}\n}\ncurrentUser {\nid\nisEmailVerified\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.ChatRestrictions=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"ChatRestrictions")},p52R:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e.Admin="admin",e.GlobalMod="global_mod",e.Moderator="mod",e.Owner="owner",e.Staff="staff",e.Subscriber="subscriber",e.User=""}(i||(i={}))},pMvt:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"SyncedSettingsChatPauseSetting"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatUISettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"chatPauseSetting"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:95}};n.loc.source={body:"query SyncedSettingsChatPauseSetting {\ncurrentUser {\nid\nchatUISettings {\nchatPauseSetting\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.SyncedSettingsChatPauseSetting=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"SyncedSettingsChatPauseSetting")},pU2t:function(e,t,n){"use strict";var i=n("mrSG"),a=n("XmgI"),r=n("ahza"),o=n("DpwM"),s=n("a1OF"),l=function(e,t,n){var i=e.bits_spent,a=e.body,r=e.emoticons,o=e.is_action,l=e.user_color,c=e.user_notice_params,d=function(e){void 0===e&&(e=[]);return e.reduce((function(e,t){return e[t.begin]={id:t._id,startIndex:t.begin},e}),{})}(r);return{id:"1",isAction:o,tokens:Object(s.e)(a,d,i||0,n,t),userColor:l||Object(s.b)(t),userNoticeParams:c||void 0}};var c=n("XeJ1");n.d(t,"b",(function(){return d})),n.d(t,"g",(function(){return u})),n.d(t,"c",(function(){return m})),n.d(t,"f",(function(){return p})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return f})),n.d(t,"a",(function(){return v}));var d="comment";function u(e){return Object(r.e)(e)?{message:e.message,parent_id:e.parentId}:{content_id:e.contentId,content_offset_seconds:e.contentOffsetSeconds,content_type:e.contentType,message:e.message}}var m=function(e){return{comments:[v.normalizeRecord(e,a.a)],users:[c.a.normalizeRecord(e.commenter)]}},p=function(e,t){var n=Object(i.__assign)(Object(i.__assign)({},e),{more_replies:t.moreReplies});return{comments:[v.normalizeRecord(n,a.a)],users:[c.a.normalizeRecord(e.commenter)]}},h=function(e,t){var n=e.comments.map((function(e){return c.a.normalizeRecord(e.commenter)})),i={past:o.g,future:o.g};return void 0!==e._next&&(i.future=e._next),void 0!==e._prev&&(i.past=e._prev),{comments:e.comments.reduce((function(e,i){return i.replies&&i.replies.map((function(e){n.push(c.a.normalizeRecord(e.commenter))})),e.concat(v.normalizeRecords(i,t))}),[]),cursor:i,users:n}},f=function(e){var t=e.comments.map((function(e){return c.a.normalizeRecord(e.commenter)}));return{comments:e.comments.map((function(e){return v.normalizeRecord(e,a.a)})),cursor:{future:e._next||o.g},users:t}};function g(e){return e.reduce((function(e,t){return e[t._id]=t.version,e}),{})}var v={normalizeRecords:function(e,t){var n=[v.normalizeRecord(e,t)];return Array.isArray(e.replies)&&e.replies.forEach((function(e){n.push(b.normalizeRecord(e,t))})),n},normalizeRecord:function(e,t){return{channelId:e.channel_id,commenter:e.commenter._id,contentId:e.content_id,contentOffset:Math.floor(e.content_offset_seconds),contentType:e.content_type,createdAt:new Date(e.created_at),id:e._id,message:l(e.message,e.commenter._id,t),moreReplies:e.more_replies||!1,parentId:void 0!==e.parent_id?e.parent_id:"",state:e.state,source:e.source,userBadges:g(e.message.user_badges||[])}}},b={normalizeRecord:function(e,t){return{channelId:e.channel_id,commenter:e.commenter._id,contentId:e.content_id,contentOffset:Math.floor(e.content_offset_seconds),contentType:e.content_type,createdAt:new Date(e.created_at),id:e._id,message:l(e.message,e.commenter._id,t),moreReplies:!1,parentId:void 0!==e.parent_id?e.parent_id:"",state:e.state,source:e.source,userBadges:g(e.message.user_badges||[])}}}},pb7T:function(e,t,n){"use strict";var i=n("q1tI"),a=n("Ws8v"),r=n("IbuL"),o=n("C7sF"),s=(n("wpfL"),function(){return i.createElement(a.a,{className:"warning-modifier-tray-icon"},i.createElement(r.a,{asset:o.a.NotificationWarning}))});n.d(t,"a",(function(){return s}))},"pq/L":function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoComments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"hasVideoID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"badges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isStaff"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isSiteAdmin"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isGlobalMod"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"blockedUsers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"emoteSets"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}},{kind:"Argument",name:{kind:"Name",value:"options"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"includePrivate"},value:{kind:"BooleanValue",value:!0}}]}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"hasVideoID"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastBadges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"cheer"},directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isModerator"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:497}};i.loc.source={body:'#import "twilight/features/badges/models/badge-fragment.gql"\n#import "twilight/features/chat/models/cheer-fragment.gql"\nquery VideoComments($videoID: ID! $hasVideoID: Boolean!) {\nbadges {\n...badge\n}\ncurrentUser {\nid\nroles {\nisStaff\nisSiteAdmin\nisGlobalMod\n}\nblockedUsers {\nid\n}\nemoteSets {\nid\nemotes {\nid\ntoken\n}\n}\n}\nvideo(id: $videoID options: { includePrivate: true }) @include(if: $hasVideoID) {\nid\nbroadcastType\nowner {\nid\nlogin\nbroadcastBadges {\n...badge\n}\n...cheer\nself {\nisModerator\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)}))}i.definitions=i.definitions.concat(r(n("IKE4").definitions)),i.definitions=i.definitions.concat(r(n("F9eG").definitions));var o={};function s(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),o[e.name.value]=t}})),e.exports=i,e.exports.VideoComments=function(e,t){var n={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=o[t]||new Set,a=new Set,r=new Set;for(i.forEach((function(e){r.add(e)}));r.size>0;){var l=r;r=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(o[e]||new Set).forEach((function(e){r.add(e)})))}))}return a.forEach((function(t){var i=s(e,t);i&&n.definitions.push(i)})),n}(i,"VideoComments")},ptRJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("mrSG"),a=n("ZtEv"),r=n("a1OF"),o=n("aF6k");function s(e,t,n,s,l,c,d){return void 0===c&&(c=!1),void 0===d&&(d=!1),Object(i.__assign)(Object(i.__assign)({},Object(r.a)(t,n,s,l,c,d)),{type:a.b.Message,messageType:e,id:n.id||Object(o.a)(n.username)})}},pwkZ:function(e,t,n){"use strict";var i=n("mrSG"),a=n("TSYQ"),r=n("q1tI"),o=n("DMoW"),s=n("4rCz"),l=n("uIkQ"),c=n("0Lz3"),d=n("GnwI"),u=n("Sfdh"),m=n("+80q"),p=n("Jsra"),h=n("Ws8v"),f=n("hnjF"),g=n("X2PJ"),v=n("sUnt"),b=n("7d/q"),k=n("C7sF"),y=15e3,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.autoDismissErrorTimeoutId=0,t.clearDismissTimeout=function(){window.clearTimeout(t.autoDismissErrorTimeoutId)},t.onManualErrorDismissClickHandler=function(){t.props.onErrorDismissed(!0)},t.setAutoDismissTimeout=function(){t.autoDismissErrorTimeoutId=window.setTimeout((function(){t.props.onErrorDismissed()}),y)},t}return Object(i.__extends)(t,e),t.prototype.componentDidMount=function(){this.setAutoDismissTimeout()},t.prototype.componentDidUpdate=function(e){e.message!==this.props.message&&(this.clearDismissTimeout(),this.setAutoDismissTimeout())},t.prototype.componentWillUnmount=function(){this.clearDismissTimeout()},t.prototype.render=function(){var e=null;return this.props.message===Object(u.a)().chatReplayFilterError&&(e=r.createElement(m.a,{type:m.e.Span},"Â ",r.createElement(m.a,{type:m.e.Span,decoration:m.c.Underline},r.createElement(p.a,{onClick:this.props.onMessageClick},Object(s.d)("Click here to show all messages.","CommentError"))))),r.createElement(h.a,{alignItems:f.b.Center,background:g.a.Base,className:"anim-swoop",color:g.c.Error,"data-test-selector":"vod-chat-error",display:f.d.Flex,flexWrap:f.f.NoWrap,fullWidth:!0,padding:{y:1,x:2},position:f.j.Absolute,zIndex:f.o.Above},r.createElement(m.a,{type:m.e.Span},this.props.message,e),r.createElement(v.a,{alignSelf:f.c.Start},r.createElement(b.a,{ariaLabel:Object(s.d)("Close","CommentErrorComponent"),icon:k.a.Close,onClick:this.onManualErrorDismissClickHandler})))},t}(r.Component),C=n("/7QA"),E=n("hyVY"),w=n("0FG4"),O=n("okS7"),D=n("tFCv"),N=n("mmRu"),_=n("cpJf"),I=n("OpME"),M=n("/MKj"),j=n("ZuiC"),T=n("fI4C"),P=n("K/KT"),L=(n("UZgS"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buildModerationDashboardURL=function(){return"/"+t.props.videoOwnerLogin+"/dashboard/moderation"},t.buildModerationPrefsURL=function(){return"/"+t.props.videoOwnerLogin+"/dashboard/settings/moderation"},t.onReplayModeChange=function(e){t.props.onReplayModeChange(e.currentTarget.checked)},t.onTimestampModeChange=function(e){t.props.onTimestampModeChange(e.currentTarget.checked)},t}return Object(i.__extends)(t,e),t.prototype.render=function(){var e=null;this.props.isUpload||(e=r.createElement(v.a,{display:f.d.Flex,flexWrap:f.f.NoWrap,justifyContent:f.h.Between,key:"viewerReplayOption",padding:{bottom:1}},r.createElement(v.a,null,Object(C.d)("Show me only messages posted during the live broadcast","VideoChatSettings")),r.createElement(v.a,{flexShrink:0},r.createElement(P.a,{checked:this.props.isReplayFilterOn,"data-test-selector":"reply-mode",onChange:this.onReplayModeChange}))));var t=[r.createElement(m.a,{key:"moderationHeader",bold:!0},Object(C.d)("Mod Tools","VideoChatSettings"))];return this.props.canSessionEditModerationSettings&&t.push(r.createElement(f.g,{key:"moderationPrefs",display:f.d.InlineBlock},r.createElement(p.a,{to:this.buildModerationPrefsURL(),"data-test-selector":"video_chat_settings_mod_prefs"},Object(C.d)("Change moderation preferences","VideoChatSettings")))),this.props.canSessionModerateMessages&&t.push(r.createElement(f.g,{key:"moderationDashboard",display:f.d.InlineBlock},r.createElement(p.a,{to:this.buildModerationDashboardURL(),"data-test-selector":"video_chat_settings_mod_dashboard"},Object(C.d)("Moderate messages","VideoChatSettings")))),r.createElement(v.a,{className:"video-chat__settings",padding:{x:2,y:2}},r.createElement(m.a,{bold:!0},Object(C.d)("Viewer Settings","VideoChatSettings")),e,r.createElement(v.a,{display:f.d.Flex,justifyContent:f.h.Between,padding:{bottom:1}},r.createElement(v.a,null,Object(C.d)("Hide timestamps","VideoChatSettings")),r.createElement(v.a,{flexShrink:0},r.createElement(P.a,{"data-test-selector":"timestamp-mode",checked:this.props.hideTimestamps,onChange:this.onTimestampModeChange}))),t.length>1?t:null)},t}(r.Component)),R=Object(d.withLatencyTracking)("ChatSettings")(L);var F,U=Object(M.b)((function(e){return{isReplayFilterOn:e.vodChat.comments.isReplayFilterOn,hideTimestamps:e.vodChat.comments.hideTimestamps}}),(function(e){return{onReplayModeChange:function(t){Object(T.m)({setting:T.c,value:t?T.b:T.a}),e(Object(j.C)(t))},onTimestampModeChange:function(t){Object(T.m)({setting:T.d,value:t?T.b:T.a}),e(Object(j.F)(t))}}}))(R),x=n("wp5a"),A=n("dEDE"),B=(n("tMaJ"),"videoChat.notice_dismissed"),V=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onDismissChatNotice=function(){C.m.set(B,!0),t.props.onCloseChatNotice()},t}return Object(i.__extends)(t,e),t.prototype.render=function(){return C.m.get(B,!1)||!this.props.show?null:r.createElement(h.a,{fullWidth:!0,position:f.j.Absolute,zIndex:f.o.Above,attachBottom:!0,attachLeft:!0},r.createElement(h.a,{background:g.a.Base,attachBottom:!0,border:!0,borderRadius:g.b.Large,display:f.d.Block,elevation:3,className:"video-chat-sunset-notice"},r.createElement(v.a,{position:f.j.Relative,display:f.d.Flex,flexDirection:f.e.Column,alignItems:f.b.Start,margin:1},r.createElement(v.a,{padding:{right:1},margin:{top:.5}},r.createElement(x.a,{label:Object(C.d)("UPDATE","VideoChatSunsetNotice"),type:x.b.Alert})),r.createElement(v.a,{display:f.d.Flex,flexDirection:f.e.Column,margin:{y:.5}},r.createElement(m.a,{bold:!0,type:m.e.H4},Object(C.d)("Commenting on VODs is going away","VideoChatSunsetNotice"))),r.createElement(v.a,{margin:{top:.5,bottom:1}},Object(C.d)("You will no longer be able to comment on VODs as of November 12, 2019. Donât worry, this wonât impact Chat Replay.","VideoChatSunsetNotice")),r.createElement(A.a,{fullWidth:!0,size:A.b.Large,onClick:this.onDismissChatNotice},r.createElement(m.a,{fontSize:g.d.Size5},Object(C.d)("Okay, Got It!","VideoChatSunsetNotice"))),r.createElement(v.a,{position:f.j.Absolute,attachTop:!0,attachRight:!0},r.createElement(b.a,{type:b.c.Secondary,icon:k.a.Close,onClick:this.onDismissChatNotice})))))},t}(r.Component),H=n("Tqc9"),q=n("7uM4");!function(e){e.CurrentTime="current-time"}(F||(F={}));var G=function(e){function t(t){var n=e.call(this,t)||this;n.onKeyDown=function(e){switch(e.key){case H.b:e.preventDefault(),n.createComment();break;case H.d:n.maybeUnpauseScrolling();break;case H.a:n.setState({isMentionPaused:!n.state.isMentionPaused&&n.props.isScrollingSynced||n.state.isMentionPaused}),n.props.onScrollPause()}},n.createComment=function(){if(""!==n.state.newMessageText){if(n.props.isPostCooldownActive)return n.setState({showCoolDownState:!0}),void n.props.onError(Object(u.a)().messageCreatedTooQuickError);n.props.onCreateComment(n.state.newMessageText),n.setState({newMessageText:""}),n.autocompleteInputRef.setValue(""),n.maybeUnpauseScrolling()}},n.setTextareaRef=function(e){n.textArea=e},n.setAutocompleteInputRef=function(e){n.autocompleteInputRef=e},n.maybeUnpauseScrolling=function(){n.state.isMentionPaused&&(n.setState({isMentionPaused:!1}),n.props.onScrollResume())},n.onChange=function(e){n.setState({newMessageText:e})},n.onEmoticonClick=function(e){n.autocompleteInputRef.setValue(n.state.newMessageText+" "+e),n.setState({newMessageText:n.state.newMessageText+" "+e}),n.maybeUnpauseScrolling()},n.getSessionSpecificEmotes=function(){if(!n.props.currentUser||!n.props.currentUser.emoteSets)return[];var e=Object(w.b)(n.props.currentUser.emoteSets);return Object.keys(e).map((function(t){return{id:t,emotes:Object(I.b)([e[t]])}}))},n.onShowSunsetNotice=function(){n.setState({showSunsetNotice:!0})},n.onHideSunsetNotice=function(){n.setState({showSunsetNotice:!1})};var i=null!==n.props.currentUser&&(n.props.currentUser.id===n.props.videoOwnerID||!!n.props.currentUser.roles&&!!n.props.currentUser.roles.isStaff),a=null!==n.props.currentUser&&(n.props.isModerator||n.props.currentUser.roles&&n.props.currentUser.roles.isSiteAdmin||i);return n.state={isMentionPaused:!1,canSessionModerateMessages:a,canSessionEditModerationSettings:i,newMessageText:"",showCoolDownState:!1,showSunsetNotice:!1},n}return Object(i.__extends)(t,e),t.getDerivedStateFromProps=function(e){return e.isPostCooldownActive?null:{showCoolDownState:!1}},t.prototype.render=function(){var e=null;(!this.props.isUpload||this.state.canSessionModerateMessages||this.state.canSessionEditModerationSettings)&&(e=r.createElement(D.b,null,r.createElement(U,{canSessionEditModerationSettings:this.state.canSessionEditModerationSettings,canSessionModerateMessages:this.state.canSessionModerateMessages,videoOwnerLogin:this.props.videoOwnerLogin,isUpload:this.props.isUpload})));var t=null;return this.props.currentUser&&(t=r.createElement(O.f,{emotes:this.getSessionSpecificEmotes()})),r.createElement("div",null,r.createElement(V,{onCloseChatNotice:this.onHideSunsetNotice,show:this.state.showSunsetNotice}),r.createElement(v.a,{position:f.j.Relative},r.createElement(O.d,{componentRefDelegate:this.setTextareaRef,componentType:O.a.TextArea,"data-a-target":"video-chat-input",disabled:this.state.showCoolDownState,htmlAutocomplete:"twitch-chat",noResize:!0,onKeyDown:this.onKeyDown,onValueUpdate:this.onChange,paddingRight:30,placeholder:Object(C.d)("Post a message","VideoChatInput"),refDelegate:this.setAutocompleteInputRef,suggestionSource:O.e.Chat,onFocus:this.onShowSunsetNotice},t),r.createElement(N.a,{channelOwnerID:this.props.videoOwnerID,emotePickerSource:_.a.VodChat,inputRef:this.textArea,onClickEmote:this.onEmoticonClick,attachTop:!0,attachRight:!0,position:f.j.Absolute})),r.createElement(v.a,{margin:{top:1},justifyContent:f.h.Between,display:f.d.Flex},e,r.createElement("span",null)," ",r.createElement(A.a,{onClick:this.createComment,disabled:this.state.showCoolDownState,"data-a-target":"video-chat-submit-button"},r.createElement(v.a,{display:f.d.Flex},r.createElement("span",null,Object(C.d)("Post at ","CommentInput")),r.createElement(v.a,{margin:{x:.5},display:f.d.Flex},r.createElement(q.a,{asset:k.a.GlyphLength})),r.createElement("span",{"data-test-selector":F.CurrentTime},Object(E.b)(this.props.currentVideoTime))))))},t}(r.Component);var W=Object(d.withLatencyTracking)("MessageInput",{autoReportInteractive:!0})(G),z=n("b7S+"),Q=n("i4Ys"),Y=function(e){var t=e.offset,n=e.onClick;return r.createElement(v.a,{margin:{right:.5}},r.createElement(z.a,{align:z.b.Left,direction:z.c.Top,label:Object(C.d)("Jump to video","TimeStamp")},r.createElement(Q.a,{onClick:n,blurAfterClick:!0},r.createElement(v.a,{padding:{x:.5}},r.createElement(m.a,{fontSize:g.d.Size7},Object(E.b)(t))))))},$=n("ZEQw"),K=n("r7KY"),X=n("ZVTe"),J=n("Zkco"),Z=n("u5aL"),ee=n("Jxh/"),te=n("GCGb"),ne=n("fCiU"),ie=n("OXoN"),ae=n("cr+I"),re=function(e,t){var n=new URL("https://www.twitch.tv/videos/"+e);if(t){var i=ae.stringify(t);n.search=i}return n},oe=n("6zXJ"),se=n("ygYM"),le="ban-user",ce="delete-comment-button",de="reply-button",ue="relative-time-title",me="share-button",pe="share-button-clicked",he=3e3,fe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={confirmationAction:null,isMenuOpen:!1,isLinkCopied:!1},t.dismissTimeoutID=0,t.videoChatSunset=C.b.get(ie.a,!1),t.onToggleMenu=function(){t.state.isMenuOpen?t.closeMenu():(t.setState({isMenuOpen:!0}),t.props.onOpen())},t.getContent=function(){if("function"==typeof t.state.confirmationAction)return r.createElement(v.a,{padding:{y:1}},r.createElement(h.a,{display:f.d.Flex,margin:{x:1},padding:{bottom:.5}},r.createElement(m.a,{type:m.e.Span},Object(C.d)("Are you sure you want to perform this action?","chomments.moderation.confirmAction"))),r.createElement(v.a,{display:f.d.Flex,justifyContent:f.h.Center,alignItems:f.b.Center},r.createElement(v.a,{display:f.d.Inline,padding:{right:1}},r.createElement(A.a,{type:A.d.Alert,onClick:t.onContinueClickHandler,"data-test-selector":te.a},Object(C.d)("Yes","MessageOptionsMenu"))),r.createElement(A.a,{type:A.d.Secondary,onClick:t.onCancelClickHandler,"data-test-selector":te.c},Object(C.d)("No","MessageOptionsMenu"))));var e=[];t.videoChatSunset||t.props.isExpandedLayout||e.push(r.createElement(h.a,{key:t.props.context.comment.id,color:g.c.Alt2,display:f.d.Flex,"data-test-selector":ue},r.createElement(h.a,{margin:{x:1},padding:{bottom:.5},fullWidth:!0,borderBottom:!0},r.createElement(m.a,{type:m.e.Span},Object(C.d)("Posted ","MessageOptionsMenu"),Object(C.i)(t.props.context.comment.createdAt)))),r.createElement(h.a,{key:t.props.context.comment.id+"2",display:f.d.Flex,color:g.c.Link},r.createElement(Q.a,{onClick:t.onReplyClickHandler,"data-test-selector":de},r.createElement(v.a,{padding:{y:.5,x:1}},Object(C.d)("Reply to {userName}",{userName:Object(ne.b)(t.props.context.author)},"MessageOptionsMenu")))));var n=[];t.props.isCurrentUserModerator&&n.push(r.createElement(v.a,{key:t.props.context.comment.id,display:f.d.Flex},r.createElement(Q.a,{type:Q.b.Alert,onClick:t.onDeleteButtonClickHandler,"data-test-selector":ce},r.createElement(h.a,{margin:{x:1},padding:{y:.5},borderBottom:!0},Object(C.d)("Delete","MessageOptionsMenu")))),r.createElement(v.a,{key:t.props.context.comment.id+"2",display:f.d.Flex},r.createElement(Q.a,{type:Q.b.Alert,onClick:t.onBanUserClickHandler,"data-test-selector":le},r.createElement(v.a,{padding:{y:.5,x:1}},Object(C.d)("Ban User","MessageOptionsMenu")))));var i=r.createElement(Q.a,{onClick:t.onShareClick,"data-test-selector":me},r.createElement(v.a,{padding:{y:.5,x:1}},Object(C.d)("Copy Link","MessageOptionsMenu")));t.state.isLinkCopied&&(i=r.createElement(A.a,{fullWidth:!0,icon:k.a.Check,type:A.d.Success,"data-test-selector":pe},r.createElement(v.a,{display:f.d.Flex,alignItems:f.b.Center,justifyContent:f.h.Start},Object(C.d)("Copied to clipboard","MessageOptionsMenu"))));var a=r.createElement(h.a,{display:f.d.Flex,fullWidth:!0,key:t.props.context.comment.id+"-share",color:g.c.Link},!t.videoChatSunset&&i);return r.createElement(v.a,{padding:{y:1}},e,a,n)},t.closeMenu=function(){t.setState({isMenuOpen:!1,confirmationAction:null,isLinkCopied:!1}),t.props.onClose()},t.onShareClick=function(){var e=t.props.context.comment,n=e.contentId,i=re(n,{tt_medium:"video_chat",tt_content:"message_share_link",t:Object(oe.a)(e.contentOffset),comment:e.id});return Object(ee.a)(i.toString()),t.setState({isLinkCopied:!0},(function(){return t.dismissTimeoutID=setTimeout((function(){t.setState({isLinkCopied:!1})}),he)})),Object(T.l)(e,i)},t.onReplyClickHandler=function(){t.props.onReplyClick(Object(ne.b)(t.props.context.author)),t.closeMenu()},t.onBanUserClickHandler=function(){t.setState((function(e){return Object(i.__assign)(Object(i.__assign)({},e),{confirmationAction:t.props.onBanUserClick})}))},t.onDeleteButtonClickHandler=function(){t.setState((function(e){return Object(i.__assign)(Object(i.__assign)({},e),{confirmationAction:t.props.onDeleteCommentClick})}))},t.onContinueClickHandler=function(){t.state.confirmationAction&&t.state.confirmationAction(),t.closeMenu()},t.onCancelClickHandler=function(){t.setState((function(e){return Object(i.__assign)(Object(i.__assign)({},e),{confirmationAction:null})}))},t}return Object(i.__extends)(t,e),t.prototype.componentWillUnmount=function(){clearTimeout(this.dismissTimeoutID)},t.prototype.render=function(){return this.videoChatSunset&&!this.props.isCurrentUserModerator?r.createElement(v.a,{margin:.5}):r.createElement(v.a,{position:f.j.Relative},r.createElement(b.a,{ariaLabel:Object(C.d)("Message Actions Menu","VideoCommentsMenu"),size:b.b.Small,type:b.c.Secondary,"data-test-selector":"menu-button",icon:k.a.More,onClick:this.onToggleMenu}),this.state.isMenuOpen&&r.createElement(Z.a,{onClickOut:this.closeMenu},r.createElement(se.a,{direction:se.b.BottomRight,show:!0,size:se.c.Small,offsetX:"0.5rem"},this.getContent())))},t}(r.Component);function ge(e){var t=e.message.userNoticeParams;return!!t&&!!t["msg-id"]}n("Nimz");var ve,be=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={forceMenuVisibility:!1},t.onBanUserClickHandler=function(){t.props.onBanUserClick({bannedUser:t.props.context.comment.commenter,targetChannel:t.props.context.comment.channelId,comment:t.props.context.comment})},t.onDeleteCommentClickHandler=function(){t.props.onDeleteCommentClick(t.props.context.comment)},t.onMenuOpenHandler=function(){t.props.onDisableSync(),t.setState({forceMenuVisibility:!0})},t.onMenuCloseHandler=function(){t.setState({forceMenuVisibility:!1})},t}return Object(i.__extends)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.context,i=t.badgeSets,o=t.currentUser,s=!!o&&n.comment.commenter===o.id,c=void 0!==n.comment.userBadges[$.a],d=ge(n.comment),u=a("video-chat__message-menu",{"video-chat__message-menu--force-visible":this.state.forceMenuVisibility}),m=r.createElement(v.a,{className:u,"data-test-selector":"menu-options-wrapper",flexShrink:0},r.createElement(fe,{context:n,isCurrentUserModerator:this.props.isCurrentUserModerator,isExpandedLayout:this.props.isExpandedLayout,onBanUserClick:this.onBanUserClickHandler,onClose:this.onMenuCloseHandler,onDeleteCommentClick:this.onDeleteCommentClickHandler,onOpen:this.onMenuOpenHandler,onReplyClick:this.props.onReplyClick})),h=a("video-chat__message-author",((e={})["video-chat__message-author--me"]=s,e["video-chat__message-author--creator"]=c,e)),g=s||c?"":n.comment.message.userColor,b=r.createElement(f.g,{padding:{right:.5}},r.createElement("span",null,":"));n.comment.message.isAction&&(b=r.createElement(f.g,{padding:{right:.5}},r.createElement("span",null)));var k=r.createElement(v.a,{alignItems:f.b.Start,display:f.d.Flex,flexWrap:f.f.NoWrap},r.createElement(v.a,{flexGrow:1},!d&&r.createElement(r.Fragment,null,r.createElement(l.b,{badgesToRender:n.comment.userBadges,badgeSets:i,usesSchemaBadges:!0}),r.createElement(p.a,{className:h,"data-test-selector":"comment-author-selector","data-tt_content":"tab_videos","data-tt_medium":"video-message-author",linkTo:"/"+n.author.name,targetBlank:!0},r.createElement(X.a,{userData:Object(ne.a)(n.author,g),highlighted:s||c}))),r.createElement(v.a,{display:f.d.Inline,className:"video-chat__message","data-test-selector":"comment-message-selector"},!d&&b,r.createElement(J.a,{message:n.comment.message,allowActionTextColors:!0,author:n.author}))),m);return d?r.createElement(K.a,null,k):k},t}(r.Component),ke=n("GEnX"),ye=n("4OCo"),Se=function(e){return r.createElement(v.a,{padding:{y:.5,left:1}},r.createElement(v.a,{className:"vod-message__content"},r.createElement(be,{badgeSets:e.badgeSets,context:e.context,currentUser:e.currentUser,isCurrentUserModerator:e.isCurrentUserModerator,isExpandedLayout:e.isExpandedLayout,onBanUserClick:e.onBanUserClick,onDeleteCommentClick:e.onDeleteCommentClick,onDisableSync:e.onDisableSync,onReplyClick:e.onReplyClick})))},Ce="vod-message-reply",Ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.makeReplyButtonAndRelativeTime=function(e){return r.createElement(v.a,{display:f.d.Flex,alignItems:f.b.Center},r.createElement(ke.a,{context:Ce,onReplyClick:t.props.onReplyClick,replyCommentContext:e}),r.createElement(f.g,{margin:{left:.5}},r.createElement(m.a,{color:g.c.Alt2,fontSize:g.d.Size7,type:m.e.Span}," â¢ "+Object(C.i)(e.comment.createdAt))))},t.makeReply=function(e){var n=null;return t.props.isExpandedLayout&&(n=t.makeReplyButtonAndRelativeTime(e)),r.createElement("li",{key:e.comment.id},r.createElement(Se,{badgeSets:t.props.badgeSets,context:e,currentUser:t.props.currentUser,isCurrentUserModerator:t.props.isCurrentUserModerator,isExpandedLayout:t.props.isExpandedLayout,onBanUserClick:t.props.onBanUserClick,onDeleteCommentClick:t.props.onDeleteCommentClick,onDisableSync:t.props.onDisableSync,onReplyClick:t.props.onReplyClick}),n)},t}return Object(i.__extends)(t,e),t.prototype.render=function(){var e=this.props.replies.map(this.makeReply.bind(this));return r.createElement("ul",null,e)},t}(r.Component),we=n("82xK"),Oe=(n("lRNp"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.render=function(){var e=null;!this.props.parentMessage.comment.moreReplies||this.props.isReplayFilterOn&&!this.props.isExpandedLayout||(e=r.createElement(v.a,{display:f.d.InlineBlock,className:"vod-message__show-more-replies"},r.createElement(we.a,{onClick:this.props.onLoadMoreRepliesClick})));var t=null;this.props.showReplyForm&&(t=r.createElement(v.a,{margin:{top:.5,bottom:1,x:1}},r.createElement(ye.a,{isCreationCoolDownActive:this.props.isCreationCoolDownActive||!1,onError:this.props.onError,onReplyFormClose:this.props.onReplyFormClose,onReplySubmit:this.props.onReplySubmit,replyToUserDisplayName:this.props.replyToUserDisplayName,videoOwnerID:this.props.parentMessage.comment.channelId})));var n=null;return this.props.isExpandedLayout&&(n=r.createElement(v.a,{alignItems:f.b.Center,display:f.d.Flex},r.createElement(ke.a,{context:"vod-message",onReplyClick:this.props.onReplyClick,replyCommentContext:this.props.parentMessage}),r.createElement(f.g,{margin:{left:.5}},r.createElement(m.a,{color:g.c.Alt2,fontSize:g.d.Size7,type:m.e.Span}," â¢ "+Object(C.i)(this.props.parentMessage.comment.createdAt))))),r.createElement(v.a,null,n,r.createElement(v.a,{margin:{y:.5,left:.5},className:a("vod-message__reply","qa-vod-chat-reply")},e,r.createElement(Ee,{badgeSets:this.props.badgeSets,currentUser:this.props.currentUser,isCurrentUserModerator:this.props.isCurrentUserModerator,isExpandedLayout:this.props.isExpandedLayout,onBanUserClick:this.props.onBanUserClick,onDeleteCommentClick:this.props.onDeleteCommentClick,onDisableSync:this.props.onDisableSync,onReplyClick:this.props.onReplyClick,replies:this.props.parentMessage.replies}),t))},t}(r.Component)),De=(n("ya7N"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={showReplyForm:!1,replyToUserDisplayName:""},t.onReplyClickHandler=function(e){t.setState({showReplyForm:!0,replyToUserDisplayName:e},t.props.onDisableSync)},t.onReplyFormCloseHandler=function(){t.setState({showReplyForm:!1,replyToUserDisplayName:""})},t.onReplySubmitHandler=function(e){t.props.onCreateReply(e,t.props.messageContext.comment.id),t.setState({showReplyForm:!1,replyToUserDisplayName:""})},t.onTimestampClickHandler=function(){t.props.onTimeStampClick(t.props.messageContext.comment.contentOffset,t.props.messageContext.comment)},t.onLoadMoreRepliesClickHandler=function(){t.props.onLoadMoreRepliesClick(t.props.messageContext.comment.id,t.props.messageContext.comment.contentId)},t.refHandler=function(e){t.shouldFocusMessage()&&t.props.onFocus(e)},t}return Object(i.__extends)(t,e),t.prototype.render=function(){var e,t=null;(this.props.isExpandedLayout||this.props.messageContext.replies.length>0||this.state.showReplyForm)&&(t=r.createElement(Oe,{badgeSets:this.props.badgeSets,currentUser:this.props.currentUser,isCreationCoolDownActive:this.props.isCreationCoolDownActive,isCurrentUserModerator:this.props.isCurrentUserModerator,isExpandedLayout:this.props.isExpandedLayout,isReplayFilterOn:this.props.isReplayFilterOn,onBanUserClick:this.props.onBanUserClick,onDeleteCommentClick:this.props.onDeleteCommentClick,onDisableSync:this.props.onDisableSync,onError:this.props.onError,onLoadMoreRepliesClick:this.onLoadMoreRepliesClickHandler,onReplyClick:this.onReplyClickHandler,onReplyFormClose:this.onReplyFormCloseHandler,onReplySubmit:this.onReplySubmitHandler,parentMessage:this.props.messageContext,replyToUserDisplayName:this.state.replyToUserDisplayName,showReplyForm:this.state.showReplyForm}));var n=null;this.props.hideTimestamp||(n=r.createElement(v.a,{className:"vod-message__header","data-test-selector":"message-timestamp",display:f.d.Flex,flexShrink:0,textAlign:f.l.Right},r.createElement(Y,{offset:this.props.timeStampOffset,onClick:this.onTimestampClickHandler})));var i=a("vod-message",((e={})["vod-message--focused"]=this.shouldFocusMessage(),e["vod-message--user-notice"]=ge(this.props.messageContext.comment),e["vod-message--timestamp"]=!this.props.hideTimestamp,e));return r.createElement(v.a,{alignItems:f.b.Start,className:i,"data-test-selector":"message-layout",display:f.d.Flex,flexWrap:f.f.NoWrap,fullWidth:!0,refDelegate:this.refHandler},n,r.createElement(v.a,{fullWidth:!0},r.createElement(be,{badgeSets:this.props.badgeSets,context:this.props.messageContext,currentUser:this.props.currentUser,isCurrentUserModerator:this.props.isCurrentUserModerator,isExpandedLayout:this.props.isExpandedLayout,onBanUserClick:this.props.onBanUserClick,onDeleteCommentClick:this.props.onDeleteCommentClick,onDisableSync:this.props.onDisableSync,onReplyClick:this.onReplyClickHandler}),t))},t.prototype.shouldComponentUpdate=function(e,t){return e.focus!==this.props.focus||e.isReplayFilterOn!==this.props.isReplayFilterOn||e.hideTimestamp!==this.props.hideTimestamp||t.showReplyForm!==this.state.showReplyForm||e.messageContext.replies.length!==this.props.messageContext.replies.length||t.replyToUserDisplayName!==this.state.replyToUserDisplayName},t.prototype.shouldFocusMessage=function(){return this.props.focus},t}(r.Component)),Ne=(n("52dQ"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={firstScroll:!0},t.componentInitiatedScroll=!1,t.mouseDragging=!1,t.preventScrolling=!1,t.allowScrolling=function(){t.preventScrolling=!1},t.atBottom=function(){var e=t.commentListRef.scrollTop,n=t.commentListRef.scrollHeight;return e+t.commentListRef.clientHeight===n},t.bindCommentListRef=function(e){t.commentListRef=e},t.onMouseDown=function(){t.preventScrolling=!1,t.mouseDragging=!0},t.onMouseUp=function(){t.mouseDragging=!1},t.onScroll=function(){t.shouldFireOnScroll()&&(t.componentInitiatedScroll||(t.atBottom()?t.props.onScrollBottom():t.props.onScrollOffBottom()),t.componentInitiatedScroll=!1,t.preventScrolling=!0)},t.syncButtonClick=function(){t.preventScrolling=!1,t.props.onSyncScrollClick()},t}return Object(i.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.onMount()},t.prototype.componentDidUpdate=function(){this.preventScrolling=!0,this.props.isScrollingSynced&&(this.preventScrolling=!1,this.componentInitiatedScroll=!0,this.commentListRef.scrollTop=this.commentListRef.scrollHeight)},t.prototype.render=function(){var e,t=a("video-chat__message-list-wrapper",((e={})["video-chat__message-list-wrapper--unsynced"]=!this.props.isScrollingSynced,e)),n=null;return!1===this.props.isScrollingSynced&&(n=r.createElement(f.g,{className:"video-chat__sync-button",padding:{x:1},position:f.j.Absolute,attachBottom:!0},r.createElement("button",{onClick:this.syncButtonClick},Object(s.d)("Resume auto scroll","MessageScrollArea")))),r.createElement(h.a,{fullHeight:!0,overflow:f.i.Hidden,position:f.j.Relative},r.createElement("div",{className:t,onKeyDown:this.allowScrolling,onMouseMove:this.allowScrolling,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onScroll:this.onScroll,onWheel:this.allowScrolling,ref:this.bindCommentListRef,tabIndex:-1,"data-test-selector":"video-chat-message-list-wrapper"},this.props.children),n)},t.prototype.shouldFireOnScroll=function(){return!this.mouseDragging&&this.preventScrolling?(this.componentInitiatedScroll=!1,!1):!(this.state.firstScroll&&!this.props.startSynced)||(this.setState({firstScroll:!1}),!1)},t}(r.Component)),_e=n("DpwM"),Ie=n("l41m"),Me=n("ehEd"),je=function(e,t){return!!e&&(t>=e.offset&&e.offset+e.duration>=t)},Te=n("XQbB"),Pe=n("PL8s");n("n+IG");n.d(t,"a",(function(){return Fe})),function(e){e.MessageInputPlaceholder="video-chat-message-input-placeholder",e.VideoChatError="video-chat-error",e.NoCommentCTA="video-chat-no-comments-cta",e.UnavailableReason="video-chat-unavailable"}(ve||(ve={}));var Le=5e3,Re=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={commentAlreadyFocused:!1},t.videoData=null,t.badgesData=null,t.badgeSets=new l.c([],[],""),t.videoChatSunset=s.b.get(ie.a,!1),t.createComment=function(e){if(t.props.videoID){var n={contentId:t.props.videoID,contentOffsetSeconds:t.props.currentVideoTime,contentType:_e.e,message:e};t.onCreate(n)}},t.createReply=function(e,n){var i={message:e,parentId:n};t.onCreate(i)},t.onErrorDismissedHandler=function(e){t.props.onError("");var n=t.props.errorMessage===Object(u.a)().chatReplayFilterError;e&&t.props.shouldSendReplayFilterError&&n&&t.props.onErrorDismissClick()},t.onErrorMessageClickHandler=function(){t.props.onError(""),t.props.onTurnOffReplayFilter()},t.onMessageScrollAreaMount=function(){t.props.highlightedMessageID&&""!==t.props.highlightedMessageID&&t.props.onDisableSync()},t.onError=function(e){t.props.onError(e)},t.onLoadMoreRepliesHandler=function(e,n){var i=t.props.data.video,a=i&&i.owner&&i.owner.cheer&&i.owner.cheer.emotes||[];t.props.onLoadMoreReplies(e,t.props.replyCursorMap,n,Object(c.a)(a))},t.focusedCommentCallback=function(e){t.setState({commentToFocus:e})},t.startUnfocusTimeout=function(){t.focusTimer=setTimeout((function(){t.setState({commentAlreadyFocused:!0})}),Le)},t}return Object(i.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.onWillMount(),this.props.startInReplayMode&&this.props.onDidMount(this.props.startInReplayMode)},t.prototype.componentDidUpdate=function(e){(void 0!==this.props.highlightedMessageID&&this.props.highlightedMessageID!==e.highlightedMessageID&&(this.props.onPlayerSeekRequest(this.props.highlightTimestamp),this.props.onDisableSync(),this.setState({commentAlreadyFocused:!1})),this.props.onUpdateBegan(this.props,e),this.props.data.loading||this.props.data.error||!this.props.isPlaybackBlocked||this.props.latencyTracking.reportInteractive(),this.props.data.loading||this.props.data.error||!this.props.hasFetchedComments||this.props.latencyTracking.reportInteractive(),this.props.data.loading||this.props.data.error||!this.props.isClipChatDisabled||this.props.latencyTracking.reportInteractive(),this.state.commentToFocus)&&((this.state.commentToFocus.nextElementSibling||this.state.commentToFocus).scrollIntoView(!0),this.setState({commentToFocus:void 0}),this.startUnfocusTimeout())},t.prototype.componentWillUnmount=function(){clearTimeout(this.focusTimer),this.props.latencyTracking.reportInteractive(),this.props.onUnmount()},t.prototype.render=function(){var e=this;this.maybeUpdateBadgeSets();var t,n=this.props,i=n.comments,l=n.highlightedMessageID,c=n.data,d=c.video,u=d&&d.broadcastType===o.B.UPLOAD;if(this.props.isClipChatDisabled||this.videoChatSunset&&u){var p=null;p=u?r.createElement(m.a,{"data-test-selector":ve.UnavailableReason},Object(s.d)("Chat replay is not available for uploads.","VideoChat")):r.createElement(r.Fragment,null,r.createElement(v.a,{margin:{bottom:.5},"data-test-selector":ve.UnavailableReason},r.createElement(q.a,{asset:k.a.Clip})),r.createElement(m.a,null,Object(s.d)("This clip's past broadcast has expired and chat replay is no longer available.","VideoChat"))),t=r.createElement(h.a,{fullHeight:!0,background:g.a.Alt2,alignItems:f.b.Center,justifyContent:f.h.Center},r.createElement(v.a,{padding:1,display:f.d.Flex,flexDirection:f.e.Column,alignItems:f.b.Center,justifyContent:f.h.Center,textAlign:f.l.Center},p))}else if(!d||c.loading)t=r.createElement(Te.a,{fillContent:!0});else if(c.error)t=r.createElement(v.a,{alignItems:f.b.Center,"data-test-selector":ve.VideoChatError,fullHeight:!0,justifyContent:f.h.Center},r.createElement(m.a,{italic:!0},Object(s.d)("Video Chat is currently unavailable.","VideoChat")));else{var b=void 0;if(!this.videoChatSunset&&this.props.hasFetchedComments&&this.props.offsetRange===Ie.a)b=r.createElement(f.g,{display:f.d.Flex,margin:{x:1,top:2,bottom:1},alignItems:f.b.Center},r.createElement("li",{"data-test-selector":ve.NoCommentCTA},r.createElement(f.g,{margin:{right:1}},r.createElement("img",{src:Object(Me.b)(65),srcSet:Object(Me.c)(65)})),Object(s.d)("Join the chat while watching the video!","VideoChatComponent")));else{b=(this.props.messageWindow?i.filter((function(t){return je(e.props.messageWindow,t.comment.contentOffset)})):i).map((function(t,n){var i=!e.state.commentAlreadyFocused&&t.comment.id===l,a=n+1===e.props.comments.length,s=!e.props.isScrollingSynced&&a,u=t.comment.contentOffset;return e.props.messageWindow&&je(e.props.messageWindow,t.comment.contentOffset)&&(u=t.comment.contentOffset-e.props.messageWindow.offset),r.createElement(f.g,{padding:s?{bottom:4}:{},key:t.comment.id,fullWidth:!0},r.createElement("li",null,r.createElement(De,{badgeSets:e.badgeSets,currentUser:c.currentUser,focus:i,isCreationCoolDownActive:e.props.isCreationCoolDownActive,isCurrentUserModerator:e.props.isCurrentUserModerator,isExpandedLayout:d.broadcastType===o.B.UPLOAD,isReplayFilterOn:e.props.isReplayFilterOn,messageContext:t,onBanUserClick:e.props.onBanUser,onCreateReply:e.createReply,onDeleteCommentClick:e.props.onDeleteComment,onDisableSync:e.props.onDisableSync,onError:e.onError,onFocus:e.focusedCommentCallback,onLoadMoreRepliesClick:e.onLoadMoreRepliesHandler,onTimeStampClick:e.props.onPlayerSeekRequest,hideTimestamp:e.props.hideTimestamps,timeStampOffset:u})))}))}t=r.createElement("ul",{style:{minHeight:0}},b)}var y,C=void 0===this.props.highlightedMessageID,E=null;if(""!==this.props.errorMessage&&(E=r.createElement(S,{message:this.props.errorMessage,onErrorDismissed:this.onErrorDismissedHandler,onMessageClick:this.onErrorMessageClickHandler})),!d||!d.owner||c.loading||c.error)y=r.createElement(Pe.a,{"data-test-selector":ve.MessageInputPlaceholder,height:90,width:340});else{var w=this.props.currentVideoTime;this.props.messageWindow&&je(this.props.messageWindow,this.props.currentVideoTime)&&(w=this.props.currentVideoTime-this.props.messageWindow.offset),y=r.createElement(W,{currentUser:c.currentUser,currentVideoTime:w,onError:this.onError,isModerator:!(!d.owner.self||null===d.owner.self.isModerator)&&d.owner.self.isModerator,isReplayMode:this.props.isReplayFilterOn,isScrollingSynced:this.props.isScrollingSynced,isPostCooldownActive:this.props.isCreationCoolDownActive,isUpload:d.broadcastType===o.B.UPLOAD,onCreateComment:this.createComment,onScrollPause:this.props.onDisableSync,onScrollResume:this.props.onEnableSync,videoOwnerID:d.owner.id||"",videoOwnerLogin:d.owner.login||""})}return r.createElement(h.a,{className:a("video-chat","qa-vod-chat"),display:f.d.Flex,color:g.c.Alt,flexDirection:f.e.Column,flexShrink:0,flexWrap:f.f.NoWrap,fullHeight:!0,fullWidth:!0,position:f.j.Relative},r.createElement(h.a,{alignItems:f.b.Center,background:g.a.Alt,className:"video-chat__header",display:f.d.Flex,flexShrink:0,justifyContent:f.h.Center},r.createElement(m.a,{type:m.e.Span},Object(s.d)("Chat on Videos","VideoChatPresentation"))),E,r.createElement(Ne,{startSynced:C,isScrollingSynced:this.props.isScrollingSynced,onScrollOffBottom:this.props.onDisableSync,onScrollBottom:this.props.onEnableSync,onMount:this.onMessageScrollAreaMount,onSyncScrollClick:this.props.onEnableSync},r.createElement(v.a,{display:f.d.Flex,flexDirection:f.e.Column,fullHeight:!0,justifyContent:f.h.End},r.createElement(f.g,{display:f.d.Flex,flexWrap:f.f.Wrap,alignItems:f.b.End,fullWidth:!0},t))),!this.props.isClipChatDisabled&&!this.videoChatSunset&&r.createElement(v.a,{className:"video-chat__input",padding:{top:1,bottom:2,x:2},flexShrink:0,fullWidth:!0},y))},t.prototype.onCreate=function(e){this.props.isLoggedIn?this.props.onCreate(e):this.props.onShowLogin()},t.prototype.maybeUpdateBadgeSets=function(){this.props.data.loading||this.props.data.error||this.props.data.video===this.videoData&&this.props.data.badges===this.badgesData||(this.videoData=this.props.data.video,this.badgesData=this.props.data.badges,this.videoData&&this.videoData.owner&&this.badgesData?this.badgeSets=new l.c(this.badgesData,this.videoData.owner.broadcastBadges||void 0,this.videoData.owner.login||void 0):this.badgeSets=new l.c([],[],""))},t}(r.Component),Fe=Object(d.withLatencyTracking)("VideoChat")(Re)},qMs1:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"SelfModStatus"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isModerator"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:89}};n.loc.source={body:"query SelfModStatus($channelID: ID!) {\nuser(id: $channelID) {\nid\nself {\nisModerator\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.SelfModStatus=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"SelfModStatus")},quxh:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"pollChoice"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PollChoice"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tokens"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"pollTokenBreakdown"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"totalVoters"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"votes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"pollVoteBreakdown"},directives:[]}]}}]}}],loc:{start:0,end:271}};i.loc.source={body:'#import "twilight/features/polls/models/poll-token-breakdown-fragment.gql"\n#import "twilight/features/polls/models/poll-vote-breakdown-fragment.gql"\nfragment pollChoice on PollChoice {\nid\ntitle\ntokens { ...pollTokenBreakdown }\ntotalVoters\nvotes { ...pollVoteBreakdown }\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)}))}i.definitions=i.definitions.concat(r(n("/x02").definitions)),i.definitions=i.definitions.concat(r(n("wMQt").definitions)),e.exports=i},"r+cx":function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"pointsImageFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CommunityPointsImage"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url2x"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url4x"},arguments:[],directives:[]}]}}],loc:{start:0,end:72}};n.loc.source={body:"fragment pointsImageFragment on CommunityPointsImage {\nurl\nurl2x\nurl4x\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},r2Xj:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i={DarkMode:"darkMode",FollowerDuration:"followerDuration",FollowerMode:"followerMode",HideChat:"hideChat",ShowMessageFlags:"showMessageFlags",ShowAutoModActions:"showAutoModActions",ShowModActions:"showModerationActions",ShowModIcons:"showModIcons",ShowTimestamps:"showTimestamps",SlowModeDuration:"slowModeDuration",UseHighContrastColors:"useHighContrastColors",SlowMode:"slowMode",DeletedMessageDisplaySetting:"deletedMessageDisplaySetting",ChatPauseSetting:"chatPauseSetting"}},r7KY:function(e,t,n){"use strict";var i=n("q1tI"),a=n("wUQP"),r=n("tiJ6"),o=n("m7Uh"),s=n("PkcC"),l=n("sUnt"),c=(n("xDdc"),function(e){var t=Object(a.c)("dashboard_settings_color_form");return i.createElement(s.a,{inputColorHex:t&&e.primaryColorHex&&Object(o.b)("#"+e.primaryColorHex)?"#"+e.primaryColorHex:null},i.createElement(l.a,{className:"user-notice-line",margin:{y:.5},padding:{right:2,y:.5}},e.children))});c.displayName="UserNoticeLine";var d=Object(r.b)((function(e){return{primaryColorHex:e.primaryColorHex}}))(c);n.d(t,"a",(function(){return d}))},rCSd:function(e,t,n){},rVcM:function(e,t,n){},rYEI:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var i,a=n("/7QA");function r(e){switch(e){case 0:return Object(a.d)("Base","LoyaltyBadgesPageComponent");case 3:return Object(a.d)("3-Month","LoyaltyBadgesPageComponent");case 6:return Object(a.d)("6-Month","LoyaltyBadgesPageComponent");case 9:return Object(a.d)("9-Month","LoyaltyBadgesPageComponent");case 12:return Object(a.d)("1-Year","LoyaltyBadgesPageComponent");case 18:return Object(a.d)("1.5-Year","LoyaltyBadgesPageComponent");case 24:return Object(a.d)("2-Year","LoyaltyBadgesPageComponent");case 30:return Object(a.d)("2.5-Year","LoyaltyBadgesPageComponent");case 36:return Object(a.d)("3-Year","LoyaltyBadgesPageComponent");case 42:return Object(a.d)("3.5-Year","LoyaltyBadgesPageComponent");case 48:return Object(a.d)("4-Year","LoyaltyBadgesPageComponent");case 54:return Object(a.d)("4.5-Year","LoyaltyBadgesPageComponent");case 60:return Object(a.d)("5-Year","LoyaltyBadgesPageComponent");case 66:return Object(a.d)("5.5-Year","LoyaltyBadgesPageComponent");case 72:return Object(a.d)("6-Year","LoyaltyBadgesPageComponent");case 78:return Object(a.d)("6.5-Year","LoyaltyBadgesPageComponent");case 84:return Object(a.d)("7-Year","LoyaltyBadgesPageComponent");case 90:return Object(a.d)("7.5-Year","LoyaltyBadgesPageComponent");case 96:return Object(a.d)("8-Year","LoyaltyBadgesPageComponent");default:return""}}!function(e){e.Base="Base",e.Month3="3-Month",e.Month6="6-Month",e.Month9="9-Month",e.Year1="1-Year",e.Year1Half="1.5-Year",e.Year2="2-Year",e.Year2Half="2.5-Year",e.Year3="3-Year",e.Year3Half="3.5-Year",e.Year4="4-Year",e.Year4Half="4.5-Year",e.Year5="5-Year",e.Year5Half="5.5-Year",e.Year6="6-Year",e.Year6Half="6.5-Year",e.Year7="7-Year",e.Year7Half="7.5-Year",e.Year8="8-Year"}(i||(i={}));var o=[{availableToAffiliate:!0,name:i.Base,requiredTenureMonths:0},{availableToAffiliate:!0,name:i.Month3,requiredTenureMonths:3},{availableToAffiliate:!0,name:i.Month6,requiredTenureMonths:6},{availableToAffiliate:!0,name:i.Month9,requiredTenureMonths:9},{availableToAffiliate:!0,name:i.Year1,requiredTenureMonths:12},{availableToAffiliate:!1,name:i.Year1Half,requiredTenureMonths:18},{availableToAffiliate:!1,name:i.Year2,requiredTenureMonths:24},{availableToAffiliate:!1,name:i.Year2Half,requiredTenureMonths:30},{availableToAffiliate:!1,name:i.Year3,requiredTenureMonths:36},{availableToAffiliate:!1,name:i.Year3Half,requiredTenureMonths:42},{availableToAffiliate:!1,name:i.Year4,requiredTenureMonths:48},{availableToAffiliate:!1,name:i.Year4Half,requiredTenureMonths:54},{availableToAffiliate:!1,name:i.Year5,requiredTenureMonths:60},{availableToAffiliate:!1,name:i.Year5Half,requiredTenureMonths:66},{availableToAffiliate:!1,name:i.Year6,requiredTenureMonths:72},{availableToAffiliate:!1,name:i.Year6Half,requiredTenureMonths:78},{availableToAffiliate:!1,name:i.Year7,requiredTenureMonths:84},{availableToAffiliate:!1,name:i.Year7Half,requiredTenureMonths:90},{availableToAffiliate:!1,name:i.Year8,requiredTenureMonths:96}]},rhXE:function(e,t,n){},ru7j:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"BlockedUsers"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"blockedUsers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:61}};n.loc.source={body:"query BlockedUsers {\ncurrentUser {\nid\nblockedUsers {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.BlockedUsers=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"BlockedUsers")},rwoo:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e.ChannelNotLive="channel_not_live",e.UserBanned="user_banned",e.UserTimedOut="user_timed_out",e.ChannelBanned="channel_banned",e.ChannelNotClippable="channel_not_clippable",e.NotLoggedIn="not_logged_in",e.VideoNotAvailable="video_not_available",e.SubOnlyVod="video_subonly",e.ClipMissing="clip_missing",e.ClipMaintenance="maintenance",e.Default="500"}(i||(i={}))},sAMt:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChatUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}},{kind:"Argument",name:{kind:"Name",value:"lookupType"},value:{kind:"EnumValue",value:"ALL"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:78}};n.loc.source={body:"query ChatUser($login: String!) {\nuser(login: $login lookupType: ALL) {\nid\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.ChatUser=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"ChatUser")},sLlB:function(e,t,n){"use strict";var i,a=n("/MKj"),r=n("fvjX"),o=n("5xw2"),s=n("OhOW"),l=n("mrSG"),c=n("q1tI"),d=n("Ty5D"),u=n("/7QA"),m=n("vSJR"),p=n("8/mp"),h=n("eJ65"),f=n("HSqT"),g=n("2xye"),v=n("GnwI"),b=n("sUnt"),k=n("Ws8v"),y=n("X2PJ"),S=n("dEDE"),C=n("kqSx"),E=n("hnjF"),w=n("wp5a"),O=n("ygYM");n("S58p");!function(e){e.ClearAllButton="language-select-menu__clear-all-button",e.ToggleButton="language-select-menu__toggle-button"}(i||(i={}));var D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleLanguageChange=function(e){var n=e.currentTarget,i=n.parentElement&&n.parentElement.getAttribute("data-language-code");i&&(t.props.updateLanguagePreferences(i,n.checked),t.trackLanguageChange(i,n.checked))},t.renderDropdownContent=function(){return c.createElement(c.Fragment,null,c.createElement("div",{className:"language-select-menu__balloon"},c.createElement(p.b,null,c.createElement(b.a,{padding:.5},Object(f.e)().map(t.renderLanguageOption)))),c.createElement(k.a,{background:y.a.Alt,borderTop:!0,className:"language-select-menu__footer"},c.createElement(S.a,{type:S.d.Text,onClick:t.props.clearLanguagePreferences,"data-a-target":"language-clear-all","data-test-selector":i.ClearAllButton},Object(u.d)("Clear all","LanguageSelectMenu"))))},t.renderLanguageOption=function(e){return c.createElement(b.a,{padding:{x:1,y:.5},key:e.code},c.createElement(C.a,{label:e.label,checked:t.props.languagePreferences.includes(e.code),"data-language-code":e.code,"data-a-target":"language-filter-"+e.code+"-checkbox",onChange:t.handleLanguageChange}))},t.renderButtonContent=function(){var e=t.props.languagePreferences.length,n=Object(u.d)("Language","LanguageSelectMenu");return c.createElement(b.a,{display:E.d.Flex},n,c.createElement(b.a,{margin:{left:.5}},0!==e&&c.createElement(w.a,{type:w.b.Brand,label:e.toString()})))},t.trackLanguageChange=function(e,n){var i="";t.props.match&&t.props.match.params&&(i=decodeURIComponent(t.props.match.params.encodedCommunityName).toLowerCase()),u.p.tracking.track(g.SpadeEventType.LanguageFilterChange,{item_name:"language",item_value:e,item_action:n?"select":"deselect",game:i||null,open_click:!0})},t}return Object(l.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){return this.props.useBalloon?c.createElement(h.a,{hideBalloonOnInsideClick:!0,"data-a-target":"language-filter-dropdown"},c.createElement(S.a,{dropdown:!0,type:S.d.Secondary,"data-test-selector":i.ToggleButton},this.renderButtonContent()),c.createElement(O.a,{direction:O.b.BottomLeft,noTail:!0},this.renderDropdownContent())):c.createElement(b.a,{className:"language-select-menu"},c.createElement(m.a,{"data-a-target":"language-filter-dropdown",buttonLabel:this.renderButtonContent()},this.renderDropdownContent()))},t}(c.Component),N=Object(r.d)(d.j,Object(v.withLatencyTracking)("LanguageSelectMenu"))(D);var _=Object(a.b)((function(e){return{languagePreferences:Object(s.a)(e)}}),(function(e){return Object(r.b)({updateLanguagePreferences:o.c,clearLanguagePreferences:o.a},e)}))(N);n.d(t,"a",(function(){return _}))},sLmD:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return l}));var i=n("/7QA"),a="en-us",r={bg:"bg-bg",cs:"cs-cz",da:"da-dk",de:"de-de",el:"el-gr",en:a,"en-gb":a,es:"es-es","es-mx":"es-mx",fi:"fi-fi",fr:"fr-fr",hu:"hu-hu",it:"it-it",ja:"ja-jp",ko:"ko-kr",nl:"nl-nl",no:"no-no",pl:"pl-pl","pt-br":"pt-br",pt:"pt-pt",ro:"ro-ro",ru:"ru-ru",sk:"sk-sk",sv:"sv-se",th:"th-th",tr:"tr-tr",vi:"vi-vn","zh-cn":"zh-cn","zh-tw":"zh-tw"},o=function(e,t){var n,i=l();return n=t?{id:s(e)?e.tag_id:e.objectID,tagName:e.tag_name,isAutomated:e.automated||!1,localizedDescription:s(e)?"":e.description_localizations&&e.description_localizations[i]||"",localizedName:""}:{id:s(e)?e.tag_id:e.objectID,isLanguageTag:e.tag_name.includes("auto___lang"),localizedName:"",tagName:e.tag_name},e.localizations&&e.localizations[i]?n.localizedName=e.localizations[i]:e.localizations&&e.localizations[a]?n.localizedName=e.localizations[a]:n.localizedName=n.tagName,n};function s(e){return void 0!==e.tag_id}function l(){return r[i.p.intl.getLanguageCode()||""]||a}},sMoq:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"VIPUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"GrantVIPInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"grantVIP"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"channel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"grantee"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:122}};n.loc.source={body:"mutation VIPUser($input: GrantVIPInput!){\ngrantVIP(input: $input) {\nchannel {\nid\n}\ngrantee {\nid\nlogin\n}\nerror {\ncode\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.VIPUser=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"VIPUser")},sPFP:function(e,t,n){},sQmm:function(e,t,n){"use strict";var i=n("q1tI"),a=n("Ws8v"),r=n("hnjF"),o=n("X2PJ"),s=n("sUnt"),l=n("PL8s"),c=function(){return i.createElement(a.a,{display:r.d.Flex,flexDirection:r.e.Row,border:!0,elevation:2,borderRadius:o.b.Medium,overflow:r.i.Hidden},i.createElement(s.a,{flexGrow:0,flexShrink:0},i.createElement(l.a,{height:300,width:20})),i.createElement(s.a,{flexGrow:1,flexShrink:1,display:r.d.Flex,flexDirection:r.e.Column,padding:{left:1}},i.createElement(s.a,{flexGrow:0,flexShrink:0,padding:{top:1}},i.createElement(l.a,{height:20,width:500})),i.createElement(s.a,{flexGrow:1,flexShrink:1,display:r.d.Flex,flexDirection:r.e.Row},i.createElement(s.a,{padding:{top:1,right:1,bottom:1}},i.createElement(l.a,{height:200,width:300})),i.createElement(s.a,{padding:1},i.createElement(l.a,{height:200,width:300})),i.createElement(s.a,{padding:1},i.createElement(l.a,{height:200,width:300})),i.createElement(s.a,{padding:1},i.createElement(l.a,{height:200,width:300})),i.createElement(s.a,{padding:1},i.createElement(l.a,{height:200,width:300})),i.createElement(s.a,{padding:1},i.createElement(l.a,{height:200,width:300})))))};n.d(t,"a",(function(){return d}));var d=function(){return i.createElement(s.a,{margin:{top:1}},i.createElement(s.a,{padding:{bottom:1}},i.createElement(c,{key:1})),i.createElement(s.a,{padding:{bottom:1}},i.createElement(c,{key:2})),i.createElement(s.a,{padding:{bottom:1}},i.createElement(c,{key:3})),i.createElement(s.a,{padding:{bottom:1}},i.createElement(c,{key:4})))}},sU0Q:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoChatCard_Video"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"previewThumbnailURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"90"}},{kind:"Argument",name:{kind:"Name",value:"height"},value:{kind:"IntValue",value:"51"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"publishedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:162}};n.loc.source={body:"query VideoChatCard_Video($videoID: ID!) {\nvideo(id: $videoID) {\nid\ntitle\npreviewThumbnailURL(width: 90 height: 51)\npublishedAt\nowner {\nid\nlogin\ndisplayName\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.VideoChatCard_Video=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"VideoChatCard_Video")},sbEw:function(e,t,n){},"sf7/":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"d",(function(){return o})),n.d(t,"f",(function(){return s})),n.d(t,"e",(function(){return l}));var i="vodChat.video.CURRENT_VIDEO_CHANGED",a="vodChat.video.CURRENT_VIDEO_TIME_CHANGED",r="vodChat.video.CURRENT_VIDEO_PLAYBACK_BLOCKED",o=function(e){return{type:i,id:e}},s=function(e){return{type:a,updatedTime:e}},l=function(){return{type:r}}},sj0o:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"emoteModificationFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CommunityPointsEmoteModification"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emote"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"communityPointsEmoteFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"modifierIconDark"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"pointsImageFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"modifierIconLight"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"pointsImageFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}],loc:{start:0,end:380}};i.loc.source={body:'#import "twilight/features/community-points/models/community-points-emote-fragment.gql"\n#import "twilight/features/community-points/models/points-image-fragment.gql"\nfragment emoteModificationFragment on CommunityPointsEmoteModification {\nid\nemote {\n...communityPointsEmoteFragment\n}\nmodifierIconDark {\n...pointsImageFragment\n}\nmodifierIconLight {\n...pointsImageFragment\n}\ntitle\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)}))}i.definitions=i.definitions.concat(r(n("KrPZ").definitions)),i.definitions=i.definitions.concat(r(n("r+cx").definitions)),e.exports=i},smCe:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"TerminatePoll"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"TerminatePollInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"terminatePoll"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"poll"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:100}};n.loc.source={body:"mutation TerminatePoll($input: TerminatePollInput!) {\nterminatePoll(input: $input) {\npoll {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.TerminatePoll=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"TerminatePoll")},t4UF:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("mrSG"),a=n("q1tI"),r=n("fBrF");function o(e){return function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(i.__extends)(n,t),n.prototype.render=function(){return a.createElement(r.a,Object(i.__assign)({},this.props),a.createElement(e,Object(i.__assign)({},this.props)))},n}(a.Component)}},tFCv:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("/MKj"),o=n("Ty5D"),s=n("fvjX"),l=n("/7QA"),c=n("u5aL"),d=n("ZS2+"),u=n("/0dD"),m=n("SDEh"),p=n("edgk"),h=n("1/iK"),f=n("y5D0"),g=n("jZLd"),v=n("D7An"),b=n("kRBY"),k=n("XDQu"),y=n("+pBb"),S=n("3sMn"),C=n("Tznh"),E=n("+l4d"),w=n("jBwP"),O=n("xzy9"),D=n("3tQW"),N=n("fezU"),_=n("r2Xj"),I=n("WytW"),M=n("F6GT"),j=n("x0gr"),T=n("tLDJ"),P=n("b7S+"),L=n("sUnt"),R=n("hnjF"),F=n("7d/q"),U=n("C7sF"),x=d.a.wrap((function(){return n.e(59).then(n.bind(null,"8MX0"))}),"ChatSettingsComponent"),A=d.a.wrap((function(){return n.e(58).then(n.bind(null,"WYxz"))}),"ChatPauseNotificationTooltip",{placeholder:null}),B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={editAppearance:!1},t.inChatInputRevampExperiment="variant1"===l.p.experiments.getAndTrackAssignment(v.c.ChatInputRevamp),t.chatSettingsTooltipString=function(){return Object(l.d)("Chat Settings","ChatInputTooltip")},t.onEdit=function(){t.setState({editAppearance:!0})},t.onLeaveEdit=function(){t.setState({editAppearance:!1})},t.onDarkModeToggle=function(){var e=t.props.darkModeEnabled?u.a.Light:u.a.Dark;t.props.onThemeChanged(e,!t.props.isPopout),Object(j.b)({channelLogin:t.props.channelLogin,isHostMode:t.props.isHostMode,newValue:!t.props.darkModeEnabled,settingName:_.a.DarkMode})},t.onTimestampToggle=function(){Object(M.c)("showTimestamps",!t.props.showTimestamps),t.props.showTimestamps?t.props.onTimestampsDisable():t.props.onTimestampsEnable(),Object(j.b)({channelLogin:t.props.channelLogin,isHostMode:t.props.isHostMode,newValue:!t.props.showTimestamps,settingName:_.a.ShowTimestamps})},t.onHighContrastColorsToggle=function(){t.props.setHighContrastColors(!t.props.useHighContrastColors),Object(j.b)({channelLogin:t.props.channelLogin,isHostMode:t.props.isHostMode,newValue:!t.props.useHighContrastColors,settingName:_.a.UseHighContrastColors})},t.onDeletedMessageDisplaySettingChange=function(e){t.props.setDeletedMessageDisplaySetting(e)},t.onChatHide=function(){t.props.onChatHide(),t.onCloseSettings(),Object(j.b)({channelLogin:t.props.channelLogin,isHostMode:t.props.isHostMode,newValue:!0,settingName:_.a.HideChat})},t.onChatPopout=function(){t.props.isPopout||t.props.onChatHide();var e="/popout/"+t.props.channelLogin+"/chat?popout=";Object(T.x)()&&(e="https://twitch.tv"+e);var n=window.open(e,"_blank","right=50,top=50,width=400,height=600,resizable=yes,scrollbars=no,toolbar=no,location=no,directories=no,status=no,menubar=no,copyhistory=no");n&&!Object(m.a)()&&(n.focus(),Object(p.a)(n,(function(){t.props.onChatUnhide()})))},t.onShowChatRules=function(){t.inChatInputRevampExperiment?(t.props.showChatRules(),t.onCloseSettings()):t.props.onShowChatRules&&(t.props.onShowChatRules(),t.onCloseSettings())},t.onColorSelected=function(e){t.props.isLoggedIn?t.props.onChatCommand(Object(I.a)(e)):t.props.login()},t.onToggleChatSettings=function(){t.props.isSettingsOpen?t.onCloseSettings():(Object(j.c)({channelID:t.props.channelID||void 0,channelLogin:t.props.channelLogin,isHostMode:t.props.isHostMode}),t.props.updateChatConfigState({isSettingsOpen:!0}))},t.onCloseSettings=function(){t.props.isSettingsOpen&&(t.props.hideChatFilterSettings(),t.props.hideDeletedMessageDisplaySettings(),t.props.updateChatConfigState({isSettingsOpen:!1}))},t}return Object(i.__extends)(t,e),t.prototype.componentDidUpdate=function(e){e.isSettingsOpen&&!this.props.isSettingsOpen&&(this.props.hideChatFilterSettings(),this.props.hideDeletedMessageDisplaySettings(),this.onLeaveEdit())},t.prototype.render=function(){return a.createElement(a.Fragment,null,a.createElement(x.Preload,null),a.createElement(c.a,{onClickOut:this.onCloseSettings},a.createElement(P.a,{direction:P.c.Left,label:this.chatSettingsTooltipString()},a.createElement(L.a,{zIndex:R.o.Default},a.createElement(F.a,{"data-a-target":"chat-settings",icon:U.a.Gear,ariaLabel:Object(l.d)("Chat settings","ChatSettingsIconButton"),onClick:this.onToggleChatSettings}))),this.props.isSettingsOpen&&a.createElement(x,{authToken:this.props.authToken,darkModeEnabled:this.props.darkModeEnabled,editAppearance:this.state.editAppearance,isShowingChatFilterSettings:this.props.isShowingChatFilterSettings,showChatFilterSettings:this.props.showChatFilterSettings,hideChatFilterSettings:this.props.hideChatFilterSettings,isCurrentUserModerator:this.props.isCurrentUserModerator,isHostMode:this.props.isHostMode,isVisible:this.props.isSettingsOpen,isPopout:this.props.isPopout,isEmbedded:this.props.isEmbedded,onChatCommand:this.props.onChatCommand,onChatHide:this.onChatHide,onChatPopout:this.onChatPopout,onShowChatRules:this.props.onShowChatRules&&this.onShowChatRules,onDarkModeToggle:this.onDarkModeToggle,onTimestampToggle:this.onTimestampToggle,onHighContrastColorsToggle:this.onHighContrastColorsToggle,showTimestamps:this.props.showTimestamps,useHighContrastColors:this.props.useHighContrastColors,theatreModeEnabled:this.props.theatreModeEnabled,onColorSelected:this.onColorSelected,channelLogin:this.props.channelLogin,channelID:this.props.channelID,isLoggedIn:this.props.isLoggedIn,onClickEditAppearance:this.onEdit,onLeaveEditAppearance:this.onLeaveEdit,onShowViewerCard:this.props.onShowViewerCard,containerElement:this.props.containerElement,"data-test-selector":"chat-settings-component",onCloseSettings:this.onCloseSettings,emoteOnlyModeEnabled:this.props.emoteOnlyMode,followerModeEnabled:this.props.followerMode,followerDuration:this.props.followerDuration,slowModeEnabled:this.props.slowMode,slowModeDuration:this.props.slowModeDuration,isShowingDeletedMessageDisplaySettings:this.props.isShowingDeletedMessageDisplaySettings,hideDeletedMessageDisplaySettings:this.props.hideDeletedMessageDisplaySettings,showDeletedMessageDisplaySettings:this.props.showDeletedMessageDisplaySettings,onDeletedMessageDisplaySettingChange:this.onDeletedMessageDisplaySettingChange,deletedMessageDisplaySetting:this.props.deletedMessageDisplaySetting,hasSetDeletedMessageDisplaySetting:this.props.hasSetDeletedMessageDisplaySetting})),this.props.isCurrentUserModerator&&this.props.firstPageLoaded&&a.createElement(A,{channelID:this.props.channelID||void 0}))},t}(a.Component);var V=Object(r.b)((function(e){return{firstPageLoaded:e.session.firstPageLoaded,isChatRulesOpen:e.chat.isChatRulesOpen,isLoggedIn:Object(b.f)(e),darkModeEnabled:Object(k.a)(e)===u.a.Dark,showTimestamps:e.chat.showTimestamps,theatreModeEnabled:e.ui.theatreModeEnabled}}),(function(e){return Object(s.b)({login:function(){return Object(f.e)(h.a.ChatSettings)},onChatHide:function(){return y.L()},onChatUnhide:function(){return y.N()},onThemeChanged:function(e){return Object(g.b)(e,{saveToStorage:!1})},onTimestampsDisable:function(){return y.E()},onTimestampsEnable:function(){return y.J()}},e)}))(B),H=Object(s.d)(o.j,Object(w.b)((function(e){return{emoteOnlyMode:e.emoteOnlyMode,followerDuration:e.followerDuration,followerMode:e.followerMode,slowMode:e.slowMode,slowModeDuration:e.slowModeDuration}})),Object(S.b)((function(e){return{isSettingsOpen:e.isSettingsOpen,updateChatConfigState:function(t){return e.updateChatConfigState(t)}}})),Object(D.b)((function(e){return{setHighContrastColors:e.setValue,useHighContrastColors:e.value}})),Object(O.d)((function(e){return{setDeletedMessageDisplaySetting:e.setValue,deletedMessageDisplaySetting:e.value,isShowingDeletedMessageDisplaySettings:e.isShowingDeletedMessageDisplaySettings,hideDeletedMessageDisplaySettings:e.hideDeletedMessageDisplaySettings,showDeletedMessageDisplaySettings:e.showDeletedMessageDisplaySettings,hasSetDeletedMessageDisplaySetting:e.hasSetSetting}})),Object(N.b)((function(e){return{onShowViewerCard:e.onShowViewerCard}})),Object(C.d)((function(e){return e})),Object(E.b)((function(e){return{showChatRules:e.showChatRules}})))(V),q=n("eJ65"),G=n("ygYM"),W=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setToggleBalloonRef=function(e){return t.toggleBalloonRef=e},t}return Object(i.__extends)(t,e),t.prototype.componentDidUpdate=function(e){this.props.onToggle&&this.props.isChatRulesOpen&&!e.isChatRulesOpen?this.toggleBalloonRef.toggleBalloon(!1):this.props.isShowingChatFilterSettings&&!e.isShowingChatFilterSettings&&(this.toggleBalloonRef.toggleBalloon(!0),this.props.onToggle&&this.props.onToggle(!1))},t.prototype.render=function(){return a.createElement(q.a,{onToggle:this.props.onToggle,ref:this.setToggleBalloonRef},a.createElement(F.a,{icon:U.a.Gear,ariaLabel:Object(l.d)("Chat settings","ChatInput"),"data-a-target":"chat-settings",disabled:!!this.props.disabled}),a.createElement(G.a,{direction:G.b.Top,noTail:!0,offsetY:"11px","data-a-target":"chat-settings-balloon"},this.props.children))},t}(a.Component);var z=Object(r.b)((function(e){return{isChatRulesOpen:e.chat.isChatRulesOpen}}))(W);n.d(t,"a",(function(){return H})),n.d(t,"b",(function(){return z}))},tMaJ:function(e,t,n){},tX9j:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AutoModRejectedChatMessagePrompt"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"msgID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"rejectedChatMessage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"msgID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"message"},directives:[]}]}}]}}]}}],loc:{start:0,end:200}};i.loc.source={body:'#import "twilight/features/message/fragments/message-fragment.gql"\nquery AutoModRejectedChatMessagePrompt($msgID: ID! $channelID: ID!) {\nrejectedChatMessage(id: $msgID) {\nid\nmessage {\n...message\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("jy35").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})));var r={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),r[e.name.value]=t}})),e.exports=i,e.exports.AutoModRejectedChatMessagePrompt=function(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=r[t]||new Set,a=new Set,s=new Set;for(i.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(r[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(t){var i=o(e,t);i&&n.definitions.push(i)})),n}(i,"AutoModRejectedChatMessagePrompt")},tiJ6:function(e,t,n){"use strict";var i=n("mrSG"),a=n("w09P"),r=n("q1tI"),o=n("/7QA"),s=n("0Log"),l=n("oB8h"),c=n("cMjZ"),d=n("geRD"),u=n("/aPz"),m=n("2xye"),p=n("1rIY"),h=n("LZFU"),f=n("ll/k"),g=o.b.get("watch_channel_update_after_pubsub_max_rps",1e4);var v=n("VKOn"),b=n("kxrW"),k=n("Hz5m"),y=n("zQgx"),S=n("Q94S"),C=n("Q34B"),E=n("vRsq");function w(e,t){var n=e.owner?e.owner.login:"",i=C.a.VIDEO,a=Object(E.j)(n,e.id,t?t.id:null);return{clipSlug:"",collectionID:t?t.id:"",contentCanonicalUrl:a,contentType:i,hostedChannel:null,videoID:e.id,videoPlayerSource:""}}function O(e){if(e&&e.hosting&&e.hosting.id&&e.hosting.login){var t=e.hosting;return{id:t.id,login:t.login,displayName:t.displayName||"",profileImageURL:t.profileImageURL}}return null}var D=n("IZXT"),N=n("kmJV"),_=n("xyN1"),I=n("csJo"),M=n("mGiD"),j=n("BbLt"),T=n("MAph");n.d(t,"b",(function(){return R})),n.d(t,"a",(function(){return F}));var P=Object(p.a)("ChannelContext",{loading:!1,error:!1,channel:null,channelLogin:"",clip:null,clipSlug:"",collection:null,collectionID:"",contentCanonicalUrl:"",contentType:C.a.NONE,currentUser:null,hostedChannel:null,live:!1,primaryColorHex:null,requestedVideoOffset:y.a,streamStatus:b.a.Offline,page:k.c.About,video:null,videoID:"",videoPlayerSource:"",viewerCount:null,handleStreamStatusChange:function(){},requestVideoOffset:function(){}}),L=P.context,R=P.withContext,F=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={loading:!1,error:!1,channelLogin:"",channel:null,clipSlug:"",clip:null,videoID:"",video:null,collectionID:"",collection:null,contentCanonicalUrl:"",contentType:C.a.NONE,currentUser:null,live:!1,primaryColorHex:null,requestedVideoOffset:y.a,streamStatus:b.a.Offline,hostedChannel:null,videoPlayerSource:"",page:k.c.About,viewerCount:null,handleStreamStatusChange:function(e){t.state.videoPlayerSource===t.state.channelLogin&&t.setState({streamStatus:e})},requestVideoOffset:function(e){return t.requestVideoOffset(e)}},t.logger=o.k.withCategory("ChannelContext"),t.nextHostTarget="",t.updateRoute=function(e){t.setState({page:t.getPageType(e)});var n=(e.match.params.channelLogin||"").toLowerCase();n&&n===t.state.channelLogin||(t.resetPrivateVariables(),t.setState({viewerCount:null})),t.setState(t.updateVideoSource({route:e}));var i=Object(S.e)(e),a=Object(S.a)(e),r=Object(S.b)(e);t.setState({channelLogin:n}),i?t.fetchVideo(i,r):a?t.fetchClip(a):r?t.fetchCollection(r):n?(t.fetchChannel(n),t.setupPubsub("",n)):t.logger.warn("Channel Root had no content to load",e.match)},t.requestVideoOffset=function(e){t.setState({requestedVideoOffset:e})},t.onResetOffline=function(){t.resetOfflineTimer=void 0,t.state.live&&(o.o.track(m.SpadeEventType.ChannelOffline,{offline_type:"viewcount",channel:t.state.channel&&t.state.channel.login}),t.setState({live:!1}))},t}return Object(i.__extends)(t,e),t.prototype.UNSAFE_componentWillMount=function(){this.updateRoute(this.props),this.setState({requestedVideoOffset:Object(y.f)(this.props)})},t.prototype.UNSAFE_componentWillReceiveProps=function(e){e.match.url!==this.props.match.url&&this.updateRoute(e);var t=Object(y.f)(e);Object(y.f)(this.props)!==t&&this.setState({requestedVideoOffset:t})},t.prototype.render=function(){return r.createElement(L.Provider,{value:this.state},this.props.children)},t.prototype.componentDidUpdate=function(e,t){t.channel&&this.state.channel&&t.channel.id===this.state.channel.id&&(!t.hostedChannel&&this.state.hostedChannel||t.hostedChannel&&!this.state.hostedChannel||t.hostedChannel&&this.state.hostedChannel&&t.hostedChannel.login!==this.state.hostedChannel.login)&&o.o.track(m.SpadeEventType.HostModeDebug,{log_type:"state_change_"+this.channelStateChangeReason,channel:this.state.channel.login,host_channel:this.state.hostedChannel&&this.state.hostedChannel.login,data_target_channel_login:this.state.channel.hosting&&this.state.channel.hosting.login,prev_host_channel_login:t.hostedChannel&&t.hostedChannel.login}),this.channelStateChangeReason=void 0},t.prototype.componentWillUnmount=function(){this.resetPrivateVariables(),this.clearBroadcastSettingsUpdateInterval()},t.prototype.resetPrivateVariables=function(){this.pubsubHostTargetChange&&this.pubsubHostTargetChange.unsubscribe(),this.pubsubHostTargetChange=void 0,this.pubsubViewCountUpdate&&this.pubsubViewCountUpdate.unsubscribe(),this.pubsubViewCountUpdate=void 0,this.pubsubBroadcastSettings&&this.pubsubBroadcastSettings.unsubscribe(),this.pubsubBroadcastSettings=void 0,this.gqlChannelObservable=void 0,this.gqlChannelSubscription&&this.gqlChannelSubscription.unsubscribe(),this.gqlChannelSubscription=void 0,this.nextHostTarget="",this.clearResetOfflineTimer()},t.prototype.fetchChannel=function(e){var t=this;this.setState({loading:!0});var n=function(e){t.channelStateChangeReason||(t.channelStateChangeReason="external_gql_update"),t.setState(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)({clip:null,video:null,error:!1,loading:!1,collection:null},t.updateCurrentUser(e.data.currentUser)),t.updateChannel(e.data.user)),t.updateVideoSource({live:e.data.user},e.data.currentUser)))},a=function(n){t.setState({error:!0,loading:!1}),Object(D.d)()?t.logger.warn("failed to fetch channel root data",{channelLogin:e}):t.logger.errorAndReport(n,"failed to fetch channel root data",{channelLogin:e})};if(this.gqlChannelObservable)return this.channelStateChangeReason="context_gql_refetch",void this.gqlChannelObservable.refetch().then(n,a);this.resetPrivateVariables();var r=o.p.apollo.client.watchQuery({query:N,variables:{currentChannelLogin:e,includeChanlets:!Object(v.a)()}});this.gqlChannelObservable=r,this.gqlChannelSubscription=r.subscribe({next:n,error:a})},t.prototype.fetchVideo=function(e,t){var n=this;this.resetPrivateVariables(),this.setState({loading:!0});var a=o.p.apollo.client.watchQuery({query:M,variables:{videoID:e,collectionID:t,includeCollection:!!t,includeChanlets:!1}}).subscribe({next:function(e){a.unsubscribe();var t=e.data,r=t.video,o=t.collection;!r||n.videoDoesntMatchCurrentRoute(r)?n.setState(Object(i.__assign)(Object(i.__assign)({error:!0,loading:!1,clip:null,video:null},n.updateCurrentUser(e.data.currentUser)),{collection:null,collectionID:""})):n.setState(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)({error:!1,loading:!1,clip:null},n.updateCurrentUser(e.data.currentUser)),n.updateVideo(r)),n.updateChannel(r&&r.owner)),n.updateVideoSource({video:r,collection:o})),{collection:o||null,collectionID:o?o.id:""}))},error:function(i){a&&a.unsubscribe(),n.setState({error:!0,loading:!1}),Object(D.d)()?n.logger.warn("failed to fetch channel root data for video",{videoID:e,collectionID:t}):n.logger.errorAndReport(i,"failed to fetch channel root data for video",{videoID:e,collectionID:t})}})},t.prototype.fetchCollection=function(e){var t=this;this.resetPrivateVariables(),this.setState({loading:!0});var n=o.p.apollo.client.watchQuery({query:I,variables:{collectionID:e,includeChanlets:!1}}).subscribe({next:function(e){n.unsubscribe();var a=Object(S.c)(e.data.collection);a&&t.videoDoesntMatchCurrentRoute(a)?t.setState(Object(i.__assign)({error:!0,loading:!1,clip:null,video:null,collection:null},t.updateCurrentUser(e.data.currentUser))):t.setState(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)({error:!1,loading:!1,clip:null},t.updateCurrentUser(e.data.currentUser)),t.updateCollection(e.data.collection)),t.updateVideo(a)),t.updateChannel(e.data.collection&&e.data.collection.owner)),t.updateVideoSource({video:a,collection:e.data.collection})))},error:function(i){n&&n.unsubscribe(),t.setState({error:!0,loading:!1}),Object(D.d)()?t.logger.warn("failed to fetch channel root data for collection",{collectionID:e}):t.logger.errorAndReport(i,"failed to fetch channel root data for collection",{collectionID:e})}})},t.prototype.fetchClip=function(e){var t=this;this.resetPrivateVariables(),this.setState({loading:!0});var n=o.p.apollo.client.watchQuery({query:_,variables:{currentChannelLogin:"",includeChannel:!1,videoID:"",includeVideo:!1,collectionID:"",includeCollection:!1,slugID:e,includeClip:!0,includeChanlets:!1}}).subscribe({next:function(e){n.unsubscribe();var a=e.data.clip;!a||t.clipDoesntMatchCurrentRoute(a)?t.setState(Object(i.__assign)({error:!0,loading:!1,video:null,collection:null,clip:null},t.updateCurrentUser(e.data.currentUser))):t.setState(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)({error:!1,loading:!1,video:null,collection:null},t.updateCurrentUser(e.data.currentUser)),t.updateClip(a)),t.updateChannel(a&&a.broadcaster)),t.updateVideoSource({clip:a})))},error:function(i){n&&n.unsubscribe(),t.setState({error:!0,loading:!1}),Object(D.d)()?t.logger.warn("failed to fetch channel root data for video",{clipSlug:e}):t.logger.errorAndReport(i,"failed to fetch channel root data for video",{clipSlug:e})}})},t.prototype.updateCurrentUser=function(e){return{currentUser:e}},t.prototype.updateCollection=function(e){return{collection:e}},t.prototype.videoDoesntMatchCurrentRoute=function(e){var t=this.props.match.params.channelLogin;return!!(t&&e.owner&&e.owner.login&&e.owner.login.toLowerCase()!==t.toLowerCase())},t.prototype.updateVideo=function(e){return{video:e}},t.prototype.clipDoesntMatchCurrentRoute=function(e){var t=this.props.match.params.channelLogin;return!!(t&&e.broadcaster&&e.broadcaster.login&&e.broadcaster.login.toLowerCase()!==t.toLowerCase())},t.prototype.updateClip=function(e){return{clip:e}},t.prototype.updateChannel=function(e){var t=e&&e.login||"",n=!!Object(y.d)(e),i=O(e),a=Object(y.g)(e);return this.setupPubsub(e&&e.id||"",t),this.clearResetOfflineTimer(),n&&(this.resetOfflineTimer=setTimeout(this.onResetOffline,6e4)),{channel:e,channelLogin:t,primaryColorHex:e&&e.primaryColorHex,live:n,hostedChannel:i,viewerCount:a}},t.prototype.updateVideoSource=function(e,t){var n,i,a,r,o,s,l,c,d;if(e.route)i=e.route.match.params.channelLogin||"",a=e.route,r=Object(S.a)(a)||"",o=Object(S.e)(a)||"",s=Object(S.b)(a)||"",l="",c=C.a.NONE,d="",""!==r?(c=C.a.CLIP,l=Object(E.h)(i,r)):o||s?(c=s?C.a.COLLECTION:C.a.VIDEO,l=Object(E.j)(i,o,s)):(c=C.a.LIVE,l="/"+i,d=i),n={clipSlug:r,collectionID:s,contentCanonicalUrl:l,contentType:c,hostedChannel:null,videoID:o,videoPlayerSource:d};else if(e.live){n=function(e,t){var n=e.login||"",i=C.a.LIVE,a="/"+n,r=n,o=O(e),s=t&&t.roles&&t.roles.isSiteAdmin;return o&&!s&&(r=o.login),{clipSlug:"",collectionID:"",contentCanonicalUrl:a,contentType:i,hostedChannel:o,videoID:"",videoPlayerSource:r}}(e.live,t)}else e.clip?n=function(e){var t=e.broadcaster&&e.broadcaster.login,n=C.a.CLIP,i=Object(E.h)(t||"",e.slug);return{clipSlug:e.slug,collectionID:"",contentCanonicalUrl:i,contentType:n,hostedChannel:null,videoID:"",videoPlayerSource:""}}(e.clip):e.video?n=w(e.video,e.collection):e.collection&&(n=function(e){var t=Object(S.c)(e);if(t)return w(t,e);var n=e.owner&&e.owner.login;return{clipSlug:"",collectionID:e.id,contentCanonicalUrl:Object(E.j)(n,void 0,e.id),contentType:C.a.COLLECTION,hostedChannel:null,videoID:"",videoPlayerSource:""}}(e.collection));return n||(this.logger.warn("Unable to set context.",e),{})},t.prototype.getPageType=function(e){if(e.match.params.standaloneType){if(e.match.params.standaloneType===k.e.Videos)return k.c.Videos;if(e.match.params.standaloneType===k.e.Collections)return k.c.Videos}if(void 0===e.match.params.page){if(e.match.params.contentType){if(e.match.params.contentType===k.a.Video)return k.c.Videos;if(e.match.params.contentType===k.a.Clip)return k.c.Clips;if(e.match.params.contentType===k.a.Collection)return k.c.Videos}return k.c.About}return e.match.params.page&&k.d.has(e.match.params.page)?e.match.params.page:(o.k.errorAndReport(new Error,"Unknown Page Type: '"+e.match.params.page+"' in route: "+e.match.url),k.c.About)},t.prototype.setupPubsub=function(e,t){var n=this;if(!this.pubsubHostTargetChange||this.pubsubHostTargetChange.channelLogin!==t)if(this.pubsubHostTargetChange&&this.pubsubHostTargetChange.unsubscribe(),e){var i=o.p.pubsub.subscribe({topic:Object(u.N)(e),onMessage:function(i){i.type!==s.PubsubMessageType.StreamChatRoomHostTargetChange&&i.type!==s.PubsubMessageType.StreamChatRoomHostTargetChangeV2||n.handleStreamChatRoomHostTargetChange(i,t,e)}});this.pubsubHostTargetChange={channelLogin:t,unsubscribe:i}}else this.pubsubHostTargetChange=void 0;if(!this.pubsubViewCountUpdate||this.pubsubViewCountUpdate.channelLogin!==t)if(this.pubsubViewCountUpdate&&this.pubsubViewCountUpdate.unsubscribe(),t&&e){var a=Object(u.V)(e);i=o.p.pubsub.subscribe({topic:a,onMessage:function(e){e.type===s.PubsubMessageType.ViewCount&&n.handleViewCount(e),e.type===s.PubsubMessageType.ChannelStreamDown&&n.handleStreamDown()}});this.pubsubViewCountUpdate={channelLogin:t,unsubscribe:i}}else this.pubsubViewCountUpdate=void 0;if(!this.pubsubBroadcastSettings||this.pubsubBroadcastSettings.channelLogin!==t)if(this.pubsubBroadcastSettings&&this.pubsubBroadcastSettings.unsubscribe(),e){i=o.p.pubsub.subscribe({topic:Object(u.i)(e),onMessage:function(e){var t;e.type===s.PubsubMessageType.BroadcastSettingsUpdate&&(n.clearBroadcastSettingsUpdateInterval(),n.handleBroadcastSettingsUpdateTimeout=setTimeout((function(){n.handleBroadcastSettingsUpdate(e)}),(t=n.state.viewerCount||1,Object(f.a)(function(e,t){return e?t/e*1e3:0}(g,t)))))}});this.pubsubBroadcastSettings={channelLogin:t,unsubscribe:i}}else this.pubsubBroadcastSettings=void 0},t.prototype.handleStreamChatRoomHostTargetChange=function(e,t,n){if(e.data.channel_id===n){o.o.track(m.SpadeEventType.HostModeDebug,{log_type:"pubsub_msg_v2",channel:t,data_channel_id:e.data.channel_id,data_target_channel_id:e.data.target_channel_id,data_target_channel_login:e.data.target_channel_login,prev_host_channel_login:this.state.hostedChannel&&this.state.hostedChannel.login}),this.channelStateChangeReason="pubsub";var i=e.data.channel_login,a=e.data.target_channel_id,r=(e.data.target_channel_login||"").toLowerCase();if(t!==i)return;a&&r?(this.setState({hostedChannel:{id:a,login:r,displayName:r,profileImageURL:null}}),this.fetchPubsubHostedChannel(r)):(this.setState({hostedChannel:null}),this.state.channel&&this.updateHost(this.state.channel,null));var s=this.state.currentUser&&this.state.currentUser.roles&&this.state.currentUser.roles.isSiteAdmin;this.state.contentType!==C.a.LIVE||s||this.setState({videoPlayerSource:r||t})}},t.prototype.updateHost=function(e,t){Object(d.h)({fragment:j,fragmentName:"channel",id:Object(c.a)(e),variables:{includeChanlets:!Object(v.a)()},mutator:function(e){return e?a(e,(function(e){return Object(i.__assign)(Object(i.__assign)({},e),{hosting:t&&t.hosting||null})})):e}})},t.prototype.fetchPubsubHostedChannel=function(e){return Object(i.__awaiter)(this,void 0,void 0,(function(){var t,n,a;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:this.nextHostTarget=e,this.channelStateChangeReason="fetch_after_pubsub",i.label=1;case 1:return i.trys.push([1,3,,4]),[4,o.p.apollo.client.query({query:T,variables:{hostedChannelLogin:e}})];case 2:return(t=i.sent()).data.user&&this.nextHostTarget===e&&(n=t.data.user,this.setState({hostedChannel:{id:n.id||"",login:n.login||"",displayName:n.displayName||"",profileImageURL:n.profileImageURL}})),[3,4];case 3:return a=i.sent(),Object(D.d)()?this.logger.warn("failed to fetch hosted channel data",{hostedChannelLogin:e}):this.logger.errorAndReport(a,"failed to fetch hosted channel data",{hostedChannelLogin:e}),[3,4];case 4:return[2]}}))}))},t.prototype.handleViewCount=function(e){e.viewers!==this.state.viewerCount&&this.setState({live:!0,viewerCount:e.viewers}),!this.state.channel||this.state.channel.stream&&e.viewers===this.state.channel.stream.viewersCount||this.updateStreamOnChannel(this.state.channel,(function(t){return a(t,(function(t){return Object(i.__assign)(Object(i.__assign)({},t),{viewersCount:e.viewers})}))})),this.clearResetOfflineTimer(),this.resetOfflineTimer=setTimeout(this.onResetOffline,6e4)},t.prototype.handleStreamDown=function(){o.o.track(m.SpadeEventType.ChannelOffline,{offline_type:"stream_down_pubsub",channel:this.state.channel&&this.state.channel.login}),this.setState({live:!1})},t.prototype.handleBroadcastSettingsUpdate=function(e){if(this.state.channel){var t=this.state.channel;Object(d.h)({fragment:j,fragmentName:"channel",id:Object(c.a)(t),variables:{includeChanlets:!Object(v.a)()},mutator:function(t){if(!t)return t;if(null!==e.status){var n=null;return e.game&&e.game_id&&(n={__typename:"Game",name:e.game,displayName:e.game,id:e.game_id,boxArtURL:Object(h.a)(e.game,{width:83,height:113})}),a(t,(function(t){var a,r=t.stream&&Object(i.__assign)(Object(i.__assign)({},t.stream),{title:e.status,game:n}),o=t.lastBroadcast&&Object(i.__assign)(Object(i.__assign)({},t.lastBroadcast),{title:e.status,game:n}),s=t.broadcastSettings&&Object(i.__assign)(Object(i.__assign)({},t.broadcastSettings),{title:(a=e.status,null!=a?a:t.broadcastSettings.title),game:n});return Object(i.__assign)(Object(i.__assign)({},t),{stream:r,lastBroadcast:o,broadcastSettings:s})}))}return t}})}},t.prototype.updateStreamOnChannel=function(e,t){Object(d.h)({fragment:j,fragmentName:"channel",id:Object(c.a)(e),variables:{includeChanlets:!Object(v.a)()},mutator:function(e){if(!e)return e;var n=e.stream,r={__typename:"Stream",id:"temp-stream-id."+e.id,game:null,viewersCount:null,title:"",type:l.a.Live};return a(e,(function(e){return Object(i.__assign)(Object(i.__assign)({},e),{stream:t(n||r)})}))}})},t.prototype.clearResetOfflineTimer=function(){this.resetOfflineTimer&&(clearTimeout(this.resetOfflineTimer),this.resetOfflineTimer=void 0)},t.prototype.clearBroadcastSettingsUpdateInterval=function(){clearInterval(this.handleBroadcastSettingsUpdateTimeout),this.handleBroadcastSettingsUpdateTimeout=void 0},t}(r.Component)},ttMT:function(e,t,n){"use strict";var i,a=n("/MKj"),r=n("kRBY"),o=n("mrSG"),s=n("q1tI"),l=n("/7QA"),c=n("sLlB"),d=n("Ty5D"),u=n("eJ65"),m=n("+GjP"),p=n("vRsq"),h=n("sUnt"),f=n("hnjF"),g=n("wp5a"),v=n("7uM4"),b=n("C7sF"),k=n("i4Ys"),y=n("dEDE"),S=n("k0nM"),C=n("ygYM");!function(e){e[e.FilterText=0]="FilterText"}(i||(i={}));var E,w=p.b.Week,O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.filterOptions=[{label:Object(l.d)("Trending","TopClipsTimeFilter"),filter:p.b.Trending},{label:Object(l.d)("24h","TopClipsTimeFilter"),filter:p.b.Day},{label:Object(l.d)("7d","TopClipsTimeFilter"),filter:p.b.Week},{label:Object(l.d)("30d","TopClipsTimeFilter"),filter:p.b.Month},{label:Object(l.d)("all","TopClipsTimeFilter"),filter:p.b.All}],t.renderFilterText=function(e){return e.filter===p.b.Trending?s.createElement("span",{"data-test-selector":i.FilterText},e.label):s.createElement(h.a,{display:f.d.Flex},Object(l.d)("Top","TopClipsTimeFilter"),s.createElement(h.a,{margin:{left:.5}},s.createElement(g.a,{"data-test-selector":i.FilterText,type:g.b.Brand,label:e.label})))},t.renderBalloonOption=function(e){var n,i=((n={})[p.a]=e.filter,n),a=Object(m.f)(t.props.location,i),r=e.selected?s.createElement(h.a,{attachRight:!0,position:f.j.Absolute,margin:{right:1}},s.createElement(v.a,{asset:b.a.Check,height:18,width:18})):null;return s.createElement(k.a,{"data-a-target":"time-filter-option-"+e.filter,key:e.filter,linkTo:a,selected:e.selected},s.createElement(h.a,{display:f.d.Flex,padding:{x:1,y:.5}},t.renderFilterText(e),r))},t}return Object(o.__extends)(t,e),t.prototype.componentDidMount=function(){this.ensureFilterPresent()},t.prototype.componentDidUpdate=function(){this.ensureFilterPresent()},t.prototype.render=function(){var e=this.filterOptions,t=Object(p.v)(this.props.location.search);t||(t=w),e.forEach((function(e){e.selected=e.filter===t}));var n=e.find((function(e){return!!e.selected}))||e[0];return s.createElement(h.a,{className:"top-clips-time-filter"},s.createElement(u.a,{hideBalloonOnInsideClick:!0},s.createElement(y.a,{dropdown:!0,type:y.d.Secondary,"data-a-target":"time-filter-selection"},this.renderFilterText(n)),this.props.isBrowse?s.createElement(S.a,{direction:C.b.BottomLeft,noTail:!0},e.map(this.renderBalloonOption)):s.createElement(C.a,{direction:C.b.BottomLeft,noTail:!0},e.map(this.renderBalloonOption))))},t.prototype.ensureFilterPresent=function(){var e;if(!Object(p.v)(this.props.location.search)){var t=((e={})[p.a]=w,e),n=Object(m.f)(this.props.location,t);this.props.history.replace(n)}},t}(s.Component),D=Object(d.j)(O);!function(e){e.ManageMyClipsButton="manage-my-clips-button"}(E||(E={}));var N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t.prototype.render=function(){return s.createElement(h.a,{display:f.d.Flex,justifyContent:f.h.Between},s.createElement(h.a,{alignItems:f.b.End,display:f.d.Flex,flexDirection:f.e.Row},s.createElement(h.a,{padding:{x:this.props.isBrowse?.5:0}},this.renderLanguageFilter()),s.createElement(h.a,{padding:{x:this.props.isBrowse?.5:0}},s.createElement(D,{isBrowse:this.props.isBrowse}))),s.createElement(h.a,{padding:{y:this.props.isBrowse?.5:0}},this.renderManageMyClips()))},t.prototype.renderManageMyClips=function(){if(this.props.user&&this.props.user.login===this.props.channelLogin)return s.createElement(y.a,{"data-a-target":"manage-clips-button","data-test-selector":E.ManageMyClipsButton,linkTo:"/manager/clips",targetBlank:!0,type:y.d.Primary},Object(l.d)("Manage clips","TopClips"))},t.prototype.renderLanguageFilter=function(){return this.props.hideLanguageFilter?null:s.createElement(h.a,{margin:{right:this.props.isBrowse?0:1}},s.createElement(c.a,{useBalloon:this.props.isBrowse}))},t}(s.Component);var _=Object(a.b)((function(e){return{user:Object(r.e)(e)}}))(N);n.d(t,"a",(function(){return _}))},uGUt:function(e,t,n){"use strict";var i;function a(e,t){return{type:i.PushHighlight,event:e,id:t}}function r(e){return{type:i.RemoveHighlight,id:e}}function o(e,t){return{type:i.MoveToHighlight,id:e,shouldExpand:!!t}}function s(){return{type:i.OpenListAllView}}function l(){return{type:i.CloseListAllView}}function c(e){return{type:i.ToggleExpanded,id:e}}n.d(t,"a",(function(){return i})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"g",(function(){return c})),function(e){e.PushHighlight="push-highlight",e.RemoveHighlight="remove-highlight",e.MoveToHighlight="move-to-highlight",e.OpenListAllView="open-list-all-view",e.CloseListAllView="close-list-all-view",e.ToggleExpanded="toggle-expanded"}(i||(i={}))},uIkQ:function(e,t,n){"use strict";var i=n("b5C3"),a=n("fQWD"),r=(n("ZEQw"),n("yzyL"),n("mrSG")),o=n("DMoW"),s=(new(function(){function e(e,t,n){this.count=0,this.globalsBySet=new Map,this.channelsBySet=new Map,this.count=e.length+(t?t.length:0),this.indexBadges(e,this.globalsBySet,n),Array.isArray(t)&&this.indexBadges(t,this.channelsBySet,n)}return e.prototype.getBadge=function(e,t){var n=this.channelsBySet.get(e);return n&&n.has(t)?n.get(t)||null:void 0!==(n=this.globalsBySet.get(e))&&n.get(t)||null},e.prototype.indexBadges=function(e,t,n){e.forEach((function(e){n&&e.clickAction===o.k.SUBSCRIBE&&(e=Object(r.__assign)(Object(r.__assign)({},e),{channelName:n}));var i=t.get(e.setID);i||(i=new Map,t.set(e.setID,i)),i.set(e.version,e)}))},e}())([],[],""),n("2Ev9"));n.d(t,"b",(function(){return i.a})),n.d(t,"a",(function(){return a.a})),n.d(t,"c",(function(){return s.b}))},uYvD:function(e,t,n){},uYye:function(e,t,n){},uu1w:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e.Command="command",e.Emote="emote",e.Mention="mention",e.Hashtag="hashtag",e.None="none"}(i||(i={}))},uy8m:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward"}(i||(i={}))},v8tf:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ClipsDownloadButton"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"slug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"clip"},arguments:[{kind:"Argument",name:{kind:"Name",value:"slug"},value:{kind:"Variable",name:{kind:"Name",value:"slug"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcaster"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"videoQualities"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sourceURL"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:131}};n.loc.source={body:"query ClipsDownloadButton($slug: ID!) {\nclip(slug: $slug) {\nid\nbroadcaster {\nid\n}\ngame {\nid\nname\n}\nvideoQualities {\nsourceURL\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.ClipsDownloadButton=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"ClipsDownloadButton")},vGFN:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"j",(function(){return b})),n.d(t,"h",(function(){return k})),n.d(t,"g",(function(){return y})),n.d(t,"l",(function(){return S})),n.d(t,"o",(function(){return C})),n.d(t,"n",(function(){return E})),n.d(t,"k",(function(){return w})),n.d(t,"m",(function(){return O})),n.d(t,"i",(function(){return D})),n.d(t,"e",(function(){return N})),n.d(t,"d",(function(){return _})),n.d(t,"b",(function(){return I})),n.d(t,"f",(function(){return M})),n.d(t,"c",(function(){return j})),n.d(t,"q",(function(){return P})),n.d(t,"p",(function(){return L}));var i,a,r,o,s,l,c=n("mrSG"),d=n("/7QA"),u=n("2xye"),m=n("IZXT"),p=n("mBWp");function h(e){d.p.tracking.track(u.SpadeEventType.WhisperThreadMod,{conversation_id:e.threadID,action:e.action})}function f(e){return Object(c.__awaiter)(this,void 0,void 0,(function(){var t;return Object(c.__generator)(this,(function(n){switch(n.label){case 0:return[4,T()];case 1:return t=n.sent(),d.p.tracking.track(u.SpadeEventType.WhisperIgnoreUser,{ui_context:e.context,from_login:t&&t.login,ignored_login:e.targetUserLogin,reason:e.reason||i.Other,source:e.source}),[2]}}))}))}function g(e,t){return Object(c.__awaiter)(this,void 0,void 0,(function(){var n;return Object(c.__generator)(this,(function(i){switch(i.label){case 0:return[4,T()];case 1:return n=i.sent(),d.p.tracking.track(u.SpadeEventType.WhisperThreadMod,{conversation_id:e,action:t,login:n&&n.login}),[2]}}))}))}function v(e){d.p.tracking.track(u.SpadeEventType.WhisperAllThreadsMod,{action:e})}function b(){v(a.MarkAllRead)}function k(){v(a.EnableDoNotDisturb)}function y(){v(a.DisableDoNotDisturb)}function S(e,t){f({context:t,targetUserLogin:e,reason:i.Spam,source:"conversations_button"})}function C(e){g(e,s.MarkNotSpam)}function E(e){g(e,s.Archive)}function w(e){h({threadID:e,action:r.Mute})}function O(e){h({threadID:e,action:r.Unmute})}function D(e){h({threadID:e,action:r.Expand})}function N(e){h({threadID:e,action:r.Collapse})}function _(e){h({threadID:e,action:r.Close})}function I(e){h({threadID:e,action:r.Archive})}function M(e){d.p.tracking.track(u.SpadeEventType.WhisperThreadCreate,{conversation_id:e.threadID,target_login:e.targetUserlogin,source:"search_target_result",search_result_rank:e.searchResultRank})}function j(e){d.p.tracking.track(u.SpadeEventType.WhisperSearchClick,{query:e.searchQuery,source:"conversation_list",rank:e.searchResultRank,is_conversation:e.isConversation})}function T(){var e=this;return new Promise((function(t){setTimeout((function(){return Object(c.__awaiter)(e,void 0,void 0,(function(){var e,n,i;return Object(c.__generator)(this,(function(a){switch(a.label){case 0:e=null,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,d.p.apollo.client.query({query:p})];case 2:return e=a.sent(),[3,4];case 3:return n=a.sent(),Object(m.d)()?d.k.warn("Failed to make query for current user info in WhisperSent reporting"):d.k.errorAndReport(n,"Failed to make query for current user info in WhisperSent reporting"),[3,4];case 4:return i=e&&e.data&&e.data.currentUser,t(i),[2]}}))}))}))}))}function P(e){return Object(c.__awaiter)(this,void 0,void 0,(function(){var t;return Object(c.__generator)(this,(function(n){switch(n.label){case 0:return[4,T()];case 1:return t=n.sent(),d.p.tracking.track(u.SpadeEventType.WhisperSent,{to:e.targetUserLogin,from:t&&t.login,player:"web",is_turbo:t&&t.hasTurbo,conversation_id:e.threadID,availability:t&&t.availability,room_type:e.inChannelChat?l.Channel:l.Conversation}),[2]}}))}))}function L(e){return Object(c.__awaiter)(this,void 0,void 0,(function(){var t;return Object(c.__generator)(this,(function(n){switch(n.label){case 0:return[4,T()];case 1:return t=n.sent(),d.p.tracking.track(u.SpadeEventType.WhisperReceived,{to:t&&t.login,from:e.targetUserLogin,player:"web",is_turbo:t&&t.hasTurbo,conversation_id:e.threadID}),[2]}}))}))}!function(e){e.Harassment="Harassment",e.Spam="Spam",e.Other="Other"}(i||(i={})),function(e){e.MarkAllRead="mark_all_read",e.EnableDoNotDisturb="do_not_disturb_on",e.DisableDoNotDisturb="do_not_disturb_off"}(a||(a={})),function(e){e.Mute="mute",e.Unmute="unmute",e.Expand="maximize",e.Collapse="minimize",e.Close="close",e.Archive="archive",e.Open="open"}(r||(r={})),function(e){e.Dock="dock",e.SpamPropmt="dock_spam_cta"}(o||(o={})),function(e){e.Archive="archive",e.MarkNotSpam="mark_not_spam"}(s||(s={})),function(e){e.Channel="channel",e.Conversation="conversation"}(l||(l={}))},vHGB:function(e,t,n){"use strict";var i=n("mrSG"),a=n("TSYQ"),r=n("q1tI"),o=n("DMoW"),s=n("2xye"),l=n("ZEQw"),c=n("xZ3y"),d=n("Rjl4"),u=n("Jsra"),m=n("b7S+"),p=n("hnjF"),h=(n("E78O"),n("/7QA")),f=n("rYEI");var g=function(e){e.badge_type=e.badge_type.toLowerCase().replace(/( |\s)/g,"_"),h.p.tracking.track(s.SpadeEventType.ChatBadgeClick,e)};n.d(t,"a",(function(){return b}));var v="https://www.twitch.tv/products/turbo?ref=chat_badge",b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isHovering:!1},t.primeReferralID="",t.onMouseOver=function(){t.setState({isHovering:!0})},t.onMouseOut=function(){t.setState({isHovering:!1})},t.onBadgeClickHandler=function(){g({badge_type:t.props.badge&&t.props.badge.title||t.props.schemaBadge&&t.props.schemaBadge.title||"",badge_url_target:t.targetURL})},t.onPrimeBadgeClickHandler=function(){Object(d.w)({tp_refcode:t.primeReferralID,medium:s.PageviewMedium.Chat,content:s.PageviewContent.CrownBadge,tp_campaign:d.b.TrackingAlpha}),t.onBadgeClickHandler()},t}return Object(i.__extends)(t,e),t.prototype.render=function(){var e=this.props.schemaBadge||this.props.badge,t=e&&function(e,t){if(!t)return e.title;var n=Number(t)||0;if("subscriber"===e.setID){var i=Number(e.version)||0;if(n>0)return 0===i?Object(h.d)("{tenure}-Month Subscriber",{tenure:String(n)},"DynamicBadgeTitles"):Object(h.d)("{tenure}-Month Subscriber ({title} Badge)",{tenure:String(n),title:Object(f.a)(i)},"DynamicBadgeTitles")}else if("founder"===e.setID)return n>0?Object(h.d)("Founder, {tenure}-Month Subscriber",{tenure:String(n)},"DynamicBadgeTitles"):Object(h.d)("Founder","DynamicBadgeTitles");return e.title}(e,this.props.dynamicData)||"",n=this.props.schemaBadge?this.props.schemaBadge.version:this.props.badge&&this.props.badge.version||"",i=this.props.schemaBadge?this.props.schemaBadge.setID:this.props.badge&&this.props.badge.setID||"",o=this.props.schemaBadge?this.props.schemaBadge.image1x:this.props.badge&&this.props.badge.image1x||"",s=this.props.schemaBadge?this.props.schemaBadge.image2x:this.props.badge&&this.props.badge.image2x||"",l=this.props.schemaBadge?this.props.schemaBadge.image4x:this.props.badge&&this.props.badge.image4x||"",g=this.props.large,v=this.props.hideTooltip,b=a({"chat-badge":!this.props.noMargins}),k=g?s:o,y=g?s+" 1x, "+l+" 2x":o+" 1x, "+s+" 2x, "+l+" 4x";i===c.a&&(t=Object(c.d)(t,n));var S=r.createElement("img",{alt:t,"aria-label":Object(h.d)("{badgeTitle} badge",{badgeTitle:t},"Badge"),className:b,src:k,srcSet:y,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut});if(this.targetURL=this.getTargetURL(),""!==this.targetURL){var C=this.onBadgeClickHandler;e&&"cHJlbWl1bTsxOw=="===e.id&&(this.primeReferralID=Object(d.e)(),this.targetURL=Object(d.d)(this.targetURL,this.primeReferralID),C=this.onPrimeBadgeClickHandler),S=r.createElement(u.a,{linkTo:this.targetURL,onClick:C,targetBlank:!0,"data-a-target":"chat-badge"},S)}return!v&&this.state.isHovering?r.createElement(m.a,{align:m.b.Left,"data-a-target":"chat-badge",display:p.d.Inline,key:o,label:t,offsetY:"0.9rem"},S):S},t.prototype.getTargetURL=function(){if(this.props.badge){if(this.props.badge.setID===c.a)return"";switch(this.props.badge.clickAction){case l.e:case o.k.VISIT_URL:return this.props.badge.clickURL;case l.c:case o.k.SUBSCRIBE:return this.props.badge.channelName?this.getSubscriberLink(this.props.badge.channelName):"";case l.d:case o.k.GET_TURBO:return v;default:return""}}else if(this.props.schemaBadge){if(this.props.schemaBadge.setID===c.a)return"";switch(this.props.schemaBadge.clickAction){case l.e:case o.k.VISIT_URL:return this.props.schemaBadge.clickURL||"";case l.c:case o.k.SUBSCRIBE:return this.props.schemaBadge.channelName?this.getSubscriberLink(this.props.schemaBadge.channelName):"";case l.d:case o.k.GET_TURBO:return v;default:return""}}return""},t.prototype.getSubscriberLink=function(e){return"https://www.twitch.tv/"+e+"/subscribe?ref=in_chat_subscriber_link"},t}(r.Component)},vKai:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("/MKj"),o=n("fvjX"),s=n("/7QA"),l=n("gcd7"),c=n("3kHA"),d=n("WytW"),u=n("NNSq"),m=n("CzFK"),p=n("TOso"),h=n("NMMG"),f=n("l1Uh"),g=n("PrJw"),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleWhisperCommand=function(e){var n=Object(d.u)("/w "+e);if(!n||!n.recipientLogin||!n.body)return{preserveInput:!0,deferred:Promise.resolve({notice:t.whisperUsage(),error:c.a.InvalidParameters})};var i=n.recipientLogin,a=n.body;return t.props.isEmbedded||t.props.isPopout?{deferred:Promise.resolve({notice:Object(s.d)("Please use the whisper window for whispers.","WhisperCommandHandler")})}:i.toLowerCase()===t.props.userLogin?{deferred:Promise.resolve({notice:Object(s.d)("You cannot whisper to yourself.","WhisperCommandHandler")})}:t.props.userID?t.initiateWhisper(i,a):void 0},t}return Object(i.__extends)(t,e),t.prototype.render=function(){return a.createElement(l.a,{args:[{name:"username",isRequired:!0},{name:"message",isRequired:!0}],channelLogin:this.props.channelLogin,command:"w",description:Object(s.d)("Whisper to another user","WhisperCommandHandler"),handler:this.handleWhisperCommand,helpText:this.whisperUsage(),hidden:!0,permissionLevel:c.b.Viewer})},t.prototype.initiateWhisper=function(e,t){var n=this;return{deferred:new Promise((function(a,r){return Object(i.__awaiter)(n,void 0,void 0,(function(){var n,o,l,c;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,Object(u.a)(e)];case 1:return n=i.sent(),[3,3];case 2:return o=i.sent(),s.k.warn(o,"Failed to fetch user targeted by whisper command.",{recipientLogin:e}),[2,r(o)];case 3:return n?[3,4]:[2,a({notice:Object(s.d)("No user matching that login.","WhisperCommandHandler")})];case 4:l=Object(h.a)(this.props.userID,n),i.label=5;case 5:return i.trys.push([5,7,,8]),Object(g.m)({threadID:l,targetUserLogin:e,inChannelChat:!0}),[4,Object(p.a)({currentUserID:this.props.userID,emotes:this.props.emoteMap||{},message:t,recipientUserID:n})];case 6:return i.sent(),[3,8];case 7:return c=i.sent(),s.k.errorAndReport(c,"Failed to send whisper using whisper command.",{currentUserID:this.props.userID,recipientUserID:n}),[2,a({notice:Object(s.d)("Unable to send Whisper at this moment.","WhisperCommandHandler")})];case 8:return this.props.openThread(l),[2,a({})]}}))}))}))}},t.prototype.whisperUsage=function(){return Object(s.d)('Usage: "/w <username> <message>" - Sends a private message to another user.',"WhisperCommandHandler")},t}(a.Component);var b=Object(r.b)(null,(function(e){return Object(o.b)({openThread:function(e){return Object(m.l)({threadID:e,collapsed:!0},Object(f.a)())}},e)}))(v);n.d(t,"a",(function(){return b}))},"vLL+":function(e,t,n){"use strict";var i=n("q1tI"),a=n("/7QA"),r=n("mrSG"),o=n("wUQP"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.render=function(){return Object(o.a)(this.props.name)?this.props.children:null},t}(i.Component),l=n("C7sF"),c=n("hnjF"),d=n("b7S+"),u=n("X2PJ"),m=n("Ws8v"),p=n("7uM4");n("L6L7");n.d(t,"a",(function(){return h}));var h=function(e){var t=e.onBanUser,n=l.a.Ban,r=Object(a.d)("Ban {login}",{login:e.senderLogin},"ModerationIcons"),o="chat-ban-button",h=null,f=e.renderNewVersion?c.d.Flex:c.d.Inline,g=e.renderNewVersion?d.b.Center:d.b.Left,v=e.renderNewVersion?d.c.Bottom:d.c.Top,b=e.renderNewVersion?u.c.Link:u.c.Alt2,k=e.renderNewVersion?{right:.5}:{right:0};return e.isMessageBanned&&(t=e.onUnbanUser,n=l.a.FollowCheck,r=Object(a.d)("Unban {login}",{login:e.senderLogin},"ModerationIcons"),o="chat-unban-button"),!e.isMessageDeleted&&e.canDelete&&(h=i.createElement(s,{name:"single_message_delete"},i.createElement(m.a,{display:c.d.InlineFlex,margin:k,verticalAlign:c.m.Bottom},i.createElement(d.a,{align:g,direction:v,label:Object(a.d)("Delete message","ModerationIcons")},i.createElement("button",{className:"mod-icon",onClick:e.onDelete,"data-test-selector":"chat-delete-button"},i.createElement(p.a,{width:16,height:16,type:p.b.Inherit,asset:l.a.Trash})))))),i.createElement(m.a,{color:b,display:f,margin:{right:.5}},i.createElement(m.a,{display:c.d.InlineFlex,margin:k,verticalAlign:c.m.Bottom},i.createElement(d.a,{align:g,direction:v,label:r},i.createElement("button",{className:"mod-icon",onClick:t,"data-test-selector":o},i.createElement(p.a,{width:16,height:16,type:p.b.Inherit,asset:n})))),i.createElement(m.a,{display:c.d.InlineFlex,margin:k,verticalAlign:c.m.Bottom},i.createElement(d.a,{align:g,direction:v,label:Object(a.d)("Timeout {login}",{login:e.senderLogin},"ModerationIcons")},i.createElement("button",{className:"mod-icon",onClick:e.onTimeoutUser,"data-test-selector":"chat-timeout-button"},i.createElement(p.a,{width:16,height:16,type:p.b.Inherit,asset:l.a.Timeout})))),h)}},vSJR:function(e,t,n){"use strict";var i,a=n("mrSG"),r=n("q1tI"),o=n("u5aL"),s=n("N0BP"),l=n("Ws8v"),c=n("X2PJ"),d=n("hnjF"),u=n("EmXd"),m=n("9qaG"),p=n("u03v");!function(e){e.DropdownInsideClickDetector="dropdown-inside-click-detector",e.DropdownWrapper="dropdown-wrapper"}(i||(i={}));var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isOpen:!!t.props.openByDefault},t.handleOnClickOut=function(){t.hideDropdown()},t.handleButtonClick=function(){t.setState((function(e){return{isOpen:!e.isOpen,hasInteracted:!0}}),(function(){t.props.onToggle&&t.props.onToggle(!t.state.isOpen)}))},t.hideDropdown=function(){t.setState({isOpen:!1},(function(){t.props.onToggle&&t.props.onToggle(!0)}))},t.handleInsideDropdownClick=function(){t.hideDropdown()},t}return Object(a.__extends)(t,e),t.prototype.render=function(){var e=this.props.children;return this.props.hideDropdownOnInsideClick&&(e=r.createElement("div",{"data-test-selector":i.DropdownInsideClickDetector,onClick:this.handleInsideDropdownClick},e)),r.createElement(o.a,{onClickOut:this.handleOnClickOut},r.createElement(l.a,Object(a.__assign)({background:this.state.isOpen?c.a.Base:void 0,borderRadius:c.b.Large,className:"inline-dropdown",elevation:this.state.isOpen?3:void 0,padding:.5,position:d.j.Relative},Object(s.a)(this.props)),r.createElement("div",{className:"inline-dropdown__button-wrapper"},r.createElement(u.a,{blurAfterClick:!0,onClick:this.handleButtonClick,size:m.c.Large,dropdown:p.b.ArrowDown,"data-a-target":"inline-dropdown-button"},this.props.buttonLabel)),r.createElement(l.a,{attachLeft:!0,background:c.a.Base,borderRadius:{bottomLeft:c.b.Large,bottomRight:c.b.Large},"data-test-selector":i.DropdownWrapper,display:this.state.isOpen?d.d.Block:d.d.Hide,elevation:3,fullWidth:!0,padding:{y:1},position:d.j.Absolute,zIndex:d.o.Above},e)))},t.prototype.toggleDropdown=function(e){void 0===e&&(e=!this.state.isOpen),this.setState({isOpen:e})},t}(r.Component);n.d(t,"a",(function(){return h}))},vSeP:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l}));var i=n("XIZb"),a=Object(i.a)("ActiveChatters"),r=a.withChatServiceManager,o=a.withContext,s=r,l=o((function(e){return{activeChattersAPI:e.serviceAPI,setActiveChattersAPI:e.setServiceAPI}}))},vVeY:function(e,t,n){"use strict";function i(e,t){return"https://www.twitch.tv"+function(e,t){return"/"+t+"/clip/"+e}(e,t)}n.d(t,"a",(function(){return i}))},"ve/r":function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"emoteVariantFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CommunityPointsEmoteVariant"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isUnlockable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emote"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"communityPointsEmoteFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"modifications"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"emoteModificationFragment"},directives:[]}]}}]}}],loc:{start:0,end:341}};i.loc.source={body:'#import "twilight/features/community-points/models/community-points-emote-fragment.gql"\n#import "twilight/features/community-points/models/emote-modification-fragment.gql"\nfragment emoteVariantFragment on CommunityPointsEmoteVariant {\nid\nisUnlockable\nemote {\n...communityPointsEmoteFragment\n}\nmodifications {\n...emoteModificationFragment\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)}))}i.definitions=i.definitions.concat(r(n("KrPZ").definitions)),i.definitions=i.definitions.concat(r(n("sj0o").definitions)),e.exports=i},vhpE:function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return f}));var i,a=n("mrSG"),r=n("q1tI"),o=n("wbMx"),s=n("vVeY"),l=n("+GjP"),c=n("2xye"),d=n("MLDe"),u=n("4L7N"),m=n("hnjF"),p=n("sUnt"),h=[{type:o.c.Twitter,params:{tt_medium:"twtr"}},{type:o.c.Facebook,params:{tt_medium:"fb"}},{type:o.c.Reddit,params:{tt_medium:"redt"}},{type:o.c.Copy}];!function(e){e.MainContainer="main-container",e.DownloadButtonContainer="download-button-container",e.ShareButtonTwitter="share-button-twitter",e.ShareButtonFacebook="share-button-facebook",e.ShareButtonReddit="share-button-reddit",e.ShareButtonCopy="share-button-copy"}(i||(i={}));var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.render=function(){var e={margin:{right:1}},t={};return this.props.asBalloon&&(t={justifyContent:m.h.Between},e={}),r.createElement(p.a,Object(a.__assign)({className:"clips-social-share",display:m.d.Flex,flexWrap:m.f.NoWrap},t,{"data-test-selector":i.MainContainer}),r.createElement(p.a,Object(a.__assign)({display:m.d.InlineBlock},e,{"data-test-selector":i.DownloadButtonContainer}),r.createElement(u.a,{broadcasterLogin:this.props.clip.broadcaster&&this.props.clip.broadcaster.login||"",broadcasterId:this.props.clip.broadcaster&&this.props.clip.broadcaster.id||"",slug:this.props.clip.slug,pageType:this.props.pageType})),this.renderSocialButton(e,i.ShareButtonTwitter,o.c.Twitter,{tt_medium:"twtr"}),this.renderSocialButton(e,i.ShareButtonFacebook,o.c.Facebook,{tt_medium:"fb"}),this.renderSocialButton(e,i.ShareButtonReddit,o.c.Reddit,{tt_medium:"redt"}),this.renderSocialButton(e,i.ShareButtonCopy,o.c.Copy))},t.prototype.renderSocialButton=function(e,t,n,i){var u=Object(l.g)(this.props.clip.url,i);return this.props.pageType===c.PageviewLocation.ClipsWatchPage&&this.props.clip.broadcaster&&this.props.clip.broadcaster.login&&(u=Object(l.g)(Object(s.a)(this.props.clip.slug,this.props.clip.broadcaster.login),i)),r.createElement(p.a,Object(a.__assign)({key:n},e,{"data-test-selector":t}),r.createElement(o.a,{key:n,type:n,text:this.props.clip.title,url:u,onShareClick:Object(d.c)(this.props.clip.id,this.props.clip.game&&this.props.clip.game.name,this.props.clip.broadcaster&&this.props.clip.broadcaster.id,this.props.clip.broadcaster&&this.props.clip.broadcaster.login,this.props.pageType)}))},t}(r.Component)},vlTn:function(e,t,n){"use strict";var i=n("q1tI"),a=n("sUnt"),r=n("hnjF"),o=n("PL8s"),s=function(){return i.createElement(a.a,{display:r.d.Flex,margin:{bottom:.5}},i.createElement(a.a,{margin:{right:.5}},i.createElement(o.a,{height:20,width:70})))};n.d(t,"a",(function(){return s}))},vtET:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"channelCollection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Video"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channelVideo"},directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channel"},directives:[]}]}}]}}],loc:{start:0,end:269}};i.loc.source={body:'#import "twilight/features/channel/queries/channel-video.gql"\n#import "twilight/features/channel/queries/channel.gql"\nfragment channelCollection on Collection {\nid\nitems(first: 1) {\ntotalCount\nedges {\nnode {\n... on Video {\n...channelVideo\n}\n}\n}\n}\nowner {\n...channel\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)}))}i.definitions=i.definitions.concat(r(n("RTtf").definitions)),i.definitions=i.definitions.concat(r(n("BbLt").definitions)),e.exports=i},w4P5:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelBadgeSets"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"badges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"channel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastBadges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}}]}}]}}],loc:{start:0,end:209}};i.loc.source={body:'#import "twilight/features/badges/models/badge-fragment.gql"\nquery ChannelBadgeSets($channelLogin: String!) {\nbadges {\n...badge\n}\nchannel: user(login: $channelLogin) {\nid\nlogin\nbroadcastBadges {\n...badge\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("IKE4").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})));var r={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),r[e.name.value]=t}})),e.exports=i,e.exports.ChannelBadgeSets=function(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=r[t]||new Set,a=new Set,s=new Set;for(i.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(r[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(t){var i=o(e,t);i&&n.definitions.push(i)})),n}(i,"ChannelBadgeSets")},wAVh:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"poll"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Poll"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"choices"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"pollChoice"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"durationSeconds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"startedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ownedBy"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdBy"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"tokens"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"pollTokenBreakdown"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"totalVoters"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"votes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"pollVoteBreakdown"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"pollSettings"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"remainingDurationMilliseconds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"topContributor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"pollTopContributor"},directives:[]}]}}]}}],loc:{start:0,end:667}};i.loc.source={body:'#import "twilight/features/polls/models/poll-choice-fragment.gql"\n#import "twilight/features/polls/models/poll-token-breakdown-fragment.gql"\n#import "twilight/features/polls/models/poll-vote-breakdown-fragment.gql"\n#import "twilight/features/polls/models/poll-settings-fragment.gql"\n#import "twilight/features/polls/models/poll-top-contributor-fragment.gql"\nfragment poll on Poll {\nid\nchoices {\n...pollChoice\n}\ndurationSeconds\nstartedAt\nendedAt\nstatus\ntitle\nownedBy {\nid\n}\ncreatedBy {\nid\n}\ntokens {\n...pollTokenBreakdown\n}\ntotalVoters\nvotes {\n...pollVoteBreakdown\n}\nsettings {\n...pollSettings\n}\nremainingDurationMilliseconds\ntopContributor {\n...pollTopContributor\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)}))}i.definitions=i.definitions.concat(r(n("quxh").definitions)),i.definitions=i.definitions.concat(r(n("/x02").definitions)),i.definitions=i.definitions.concat(r(n("wMQt").definitions)),i.definitions=i.definitions.concat(r(n("OGC9").definitions)),i.definitions=i.definitions.concat(r(n("31iR").definitions)),e.exports=i},wFyP:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("QVaV"),o=n("EE1E"),s=(n("HWU2"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleUsernameClick=function(e){t.props.onUsernameClick&&t.props.onUsernameClick(e)},t}return Object(i.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.highContrastUsernameColor,n=e.sender,i=n.chatColor;t&&i&&(i="#"+Object(o.a)(i,this.props.theme));var s=[a.createElement("span",{key:"username-display",className:"message-author__display-name","data-test-selector":"message-username",style:{color:i||void 0}},n.displayName)];n.displayName&&!Object(r.b)(n.displayName)&&s.push(a.createElement("span",{key:"username-login",style:{color:n.chatColor||void 0},className:"message-author__intl-login","data-test-selector":"message-username-canonical"}," ("+n.login+")"));var l=this.props.onUsernameClick?"message-author__username--clickable":"message-author__username";return a.createElement("span",{onClick:this.handleUsernameClick,className:l},s)},t}(a.Component));n.d(t,"a",(function(){return s}))},wMQt:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"pollVoteBreakdown"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PollVoteBreakdown"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"base"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}],loc:{start:0,end:70}};n.loc.source={body:"fragment pollVoteBreakdown on PollVoteBreakdown {\ntotal\nbits\nbase\nid\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},wpfL:function(e,t,n){},wu0I:function(e,t,n){},"x0+1":function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("/7QA"),o=n("Jsra"),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={alwaysShowMessage:!1},t.renderBody=function(){return t.state.alwaysShowMessage?t.props.messageBody:a.createElement("span",{key:"deleted",className:"chat-line__message--deleted"},a.createElement(o.a,{linkTo:"",onClick:t.alwaysShowMessage},"<"+Object(r.d)("click to show","MessageDeletedLine")+">"))},t.alwaysShowMessage=function(e){e&&e.preventDefault(),t.setState({alwaysShowMessage:!0})},t}return Object(i.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.moderatorLogin,n=e.targetIsCurrentUser,i=this.props.targetLogin;return n?Object(r.d)("A moderator deleted your message: {body}",{body:this.renderBody()},"MessageDeletedLine"):t?Object(r.d)("{moderatorLogin} deleted {targetLogin}'s message: {body}",{moderatorLogin:t,targetLogin:i,body:this.renderBody()},"MessageDeletedLine"):Object(r.d)("A moderator deleted {targetLogin}'s message: {body}",{targetLogin:i,body:this.renderBody()},"MessageDeletedLine")},t}(a.Component);n.d(t,"a",(function(){return s}))},x0gr:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return d})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return m}));var i=n("mrSG"),a=n("/7QA"),r=n("2xye"),o=n("r2Xj"),s=n("oi4T"),l=function(e){a.o.track(r.SpadeEventType.ChatSettingsOpened,Object(s.b)(e))},c=function(e){var t=Object(i.__assign)(Object(i.__assign)({},Object(s.b)(e)),{setting_name:e.settingName,new_value:e.newValue.toString()});a.o.track(r.SpadeEventType.ChatSettingsChanged,t)},d=function(e){var t=Object(i.__assign)(Object(i.__assign)({},Object(s.b)(e)),{setting_name:e.settingName,new_value:e.newValue.toString().toLowerCase(),old_value:e.oldValue&&e.oldValue.toLowerCase(),channel_id:e.channelID});a.o.track(r.SpadeEventType.ChatSettingsChanged,t)},u=function(e){var t=Object(i.__assign)(Object(i.__assign)({},Object(s.b)(e)),{setting_name:o.a.FollowerDuration,new_value:e.newValue.toString(),follower_mode_on:e.followerModeOn});a.o.track(r.SpadeEventType.ChatSettingsChanged,t)},m=function(e){var t=Object(i.__assign)(Object(i.__assign)({},Object(s.b)(e)),{setting_name:o.a.SlowModeDuration,new_value:e.newValue.toString(),slow_mode_on:e.slowModeOn});a.o.track(r.SpadeEventType.ChatSettingsChanged,t)}},xDdc:function(e,t,n){},xM4F:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoChatChannelAndCommentCreatorAndVideoTrackingContext"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoCreatorID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"commentCreator"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"users"},arguments:[{kind:"Argument",name:{kind:"Name",value:"ids"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"videoCreatorID"}},{kind:"Variable",name:{kind:"Name",value:"commentCreator"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:245}};n.loc.source={body:"query VideoChatChannelAndCommentCreatorAndVideoTrackingContext($videoCreatorID: ID! $commentCreator: ID! $videoID: ID) {\nusers(ids: [$videoCreatorID $commentCreator]) {\nid\nlogin\n}\nvideo(id: $videoID) {\nid\nbroadcastType\ntitle\ngame {\nid\nname\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.VideoChatChannelAndCommentCreatorAndVideoTrackingContext=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"VideoChatChannelAndCommentCreatorAndVideoTrackingContext")},xQnr:function(e,t,n){"use strict";var i=n("8qOS");n.d(t,"a",(function(){return i.a}))},xXlL:function(e,t,n){"use strict";function i(e){return{id:""+e.id,start:e.start,end:e.end}}function a(e){return{__typename:"WhisperMessageEdge",cursor:""+e.data_object.id,node:{__typename:"WhisperMessage",id:e.data_object.message_id,nonce:e.data_object.nonce,sentAt:new Date(1e3*e.data_object.sent_ts).toISOString(),editedAt:null,deletedAt:null,content:{__typename:"MessageBody",content:e.data_object.body,emotes:e.data_object.tags.emotes.map((function(e){return o(i(e))}))},from:{__typename:"User",id:""+e.data_object.from_id}}}}function r(e){return e.map((function(e){return o(i(e))}))}function o(e){return{from:e.start,to:e.end,emoteID:e.id,id:e.id+";"+e.start+";"+e.end,setID:"0",__typename:"EmbeddedEmote"}}n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}))},xZ3y:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return l}));var i=n("/7QA"),a="bits",r="cheer";function o(e,t){return e&&e.setID===a&&e.title&&!l(e)?s(e.title,e.version):Object(i.g)(t,{maximumFractionDigits:2})}function s(e,t){if(e.endsWith(t)){var n=parseInt(t,10);if(!isNaN(n))return""+e.substring(0,e.length-t.length)+Object(i.g)(n,{maximumFractionDigits:2})}return e}function l(e){return e.title===r+" "+e.version}},xahZ:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelPointsContext"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"community"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"availableClaimFragment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"communityPointsBalanceFragment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"pointCustomizationFragment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"rewardsFragment"},directives:[]},{kind:"Field",name:{kind:"Name",value:"channel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"communityPointsSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isEnabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"raidPointAmount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteVariants"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"emoteVariantFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"earning"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"earningSettingsFragment"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"communityPoints"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"activeMultipliers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"activeMultipliersFragment"},directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isModerator"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:1210}};i.loc.source={body:'#import "twilight/features/community-points/models/active-multipliers-fragment.gql"\n#import "twilight/features/community-points/models/available-claim-fragment.gql"\n#import "twilight/features/community-points/models/balance-fragment.gql"\n#import "twilight/features/community-points/models/emote-variant-fragment.gql"\n#import "twilight/features/community-points/models/point-customization-fragment.gql"\n#import "twilight/features/community-points/models/rewards-fragment.gql"\n#import "twilight/features/community-points/models/earning-settings-fragment.gql"\nquery ChannelPointsContext($channelLogin: String!) {\ncommunity: user(login:$channelLogin) {\nid\ndisplayName\n# We fetch everything here in the top-level query. This avoids data waterfalls that would occur if we\n# only fetched data after first querying whether the channel has points enabled.\n...availableClaimFragment\n...communityPointsBalanceFragment\n...pointCustomizationFragment\n...rewardsFragment\nchannel {\nid\ncommunityPointsSettings {\nisEnabled\nraidPointAmount\nemoteVariants {\n...emoteVariantFragment\n}\nearning {\n...earningSettingsFragment\n}\n}\nself {\ncommunityPoints {\nactiveMultipliers {\n...activeMultipliersFragment\n}\n}\n}\n}\nself {\nisModerator\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)}))}i.definitions=i.definitions.concat(r(n("NeSQ").definitions)),i.definitions=i.definitions.concat(r(n("hgww").definitions)),i.definitions=i.definitions.concat(r(n("VIQE").definitions)),i.definitions=i.definitions.concat(r(n("ve/r").definitions)),i.definitions=i.definitions.concat(r(n("XBQy").definitions)),i.definitions=i.definitions.concat(r(n("y8+g").definitions)),i.definitions=i.definitions.concat(r(n("F9p4").definitions));var o={};function s(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),o[e.name.value]=t}})),e.exports=i,e.exports.ChannelPointsContext=function(e,t){var n={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=o[t]||new Set,a=new Set,r=new Set;for(i.forEach((function(e){r.add(e)}));r.size>0;){var l=r;r=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(o[e]||new Set).forEach((function(e){r.add(e)})))}))}return a.forEach((function(t){var i=s(e,t);i&&n.definitions.push(i)})),n}(i,"ChannelPointsContext")},xf5M:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChatLoginModerationTracking"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetUserID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"target"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"targetUserID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"channel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isModerator"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isEditor"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isStaff"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:234}};n.loc.source={body:"query ChatLoginModerationTracking($channelID: ID! $targetUserID: ID!) {\ntarget: user(id: $targetUserID) {\nid\nlogin\n}\nchannel: user(id: $channelID) {\nid\nlogin\nself {\nisModerator\nisEditor\n}\n}\ncurrentUser {\nid\nlogin\nroles {\nisStaff\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.ChatLoginModerationTracking=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"ChatLoginModerationTracking")},xyN1:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelRoot_Clip"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"slugID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includeChanlets"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channelCurrentUser"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"clip"},arguments:[{kind:"Argument",name:{kind:"Name",value:"slug"},value:{kind:"Variable",name:{kind:"Name",value:"slugID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channelClip"},directives:[]}]}}]}}],loc:{start:0,end:276}};i.loc.source={body:'#import "twilight/features/channel/queries/channel-current-user.gql"\n#import "twilight/features/channel/queries/channel-clip.gql"\nquery ChannelRoot_Clip(\n$slugID: ID!\n$includeChanlets: Boolean!\n) {\ncurrentUser {\n...channelCurrentUser\n}\nclip(slug: $slugID) {\n...channelClip\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)}))}i.definitions=i.definitions.concat(r(n("NJiF").definitions)),i.definitions=i.definitions.concat(r(n("oc+d").definitions));var o={};function s(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),o[e.name.value]=t}})),e.exports=i,e.exports.ChannelRoot_Clip=function(e,t){var n={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=o[t]||new Set,a=new Set,r=new Set;for(i.forEach((function(e){r.add(e)}));r.size>0;){var l=r;r=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(o[e]||new Set).forEach((function(e){r.add(e)})))}))}return a.forEach((function(t){var i=s(e,t);i&&n.definitions.push(i)})),n}(i,"ChannelRoot_Clip")},xzy9:function(e,t,n){"use strict";var i=n("mrSG"),a=n("w09P"),r=n("q1tI"),o=n("/MKj"),s=n("fvjX"),l=n("/7QA"),c=n("yR8l"),d=n("geRD"),u=n("DMoW"),m=n("kRBY"),p=n("1rIY"),h=n("BR/5"),f=n("FQLb"),g="deletedMessageDisplaySetting",v=Object(p.a)("DeletedMessageDisplaySettingContext",{setValue:function(){return null},value:void 0,isShowingDeletedMessageDisplaySettings:!1,hideDeletedMessageDisplaySettings:function(){return null},showDeletedMessageDisplaySettings:function(){return null},hasSetSetting:function(){return!1}}),b=v.context,k=v.withContext,y=function(e){function t(t){var n=e.call(this,t)||this;return n.hasSetSetting=function(){var e=n.hasData(n.props);return!(!e||null===e.deletedMessageDisplaySetting)||null!==l.m.get(g,null)},n.setValue=function(e){if(n.setState({localOverride:e}),l.m.set(g,e),n.props.isLoggedIn){var t=Object(i.__assign)(Object(i.__assign)({},Object(d.a)({deletedMessageDisplaySetting:e})),{optimisticResponse:{setDeletedMessageDisplaySetting:{__typename:"SetDeletedMessageDisplaySettingPayload",deletedMessageDisplaySetting:e}},update:function(t){var n;try{n=t.readQuery({query:f})}catch(e){return}if(n&&n.currentUser&&n.currentUser.chatUISettings){var i=a(n,(function(e){return e.currentUser.chatUISettings.deletedMessageDisplaySetting}),(function(){return e}));t.writeQuery({query:f,data:i})}}});n.props.setDeletedMessageDisplaySetting(t)}},n.hideDeletedMessageDisplaySettings=function(){n.setState({isShowingDeletedMessageDisplaySettings:!1})},n.showDeletedMessageDisplaySettings=function(){n.setState({isShowingDeletedMessageDisplaySettings:!0})},n.state={isShowingDeletedMessageDisplaySettings:!1},n}return Object(i.__extends)(t,e),t.prototype.render=function(){return r.createElement(b.Provider,{value:{setValue:this.setValue,value:this.value,isShowingDeletedMessageDisplaySettings:this.state.isShowingDeletedMessageDisplaySettings,hideDeletedMessageDisplaySettings:this.hideDeletedMessageDisplaySettings,showDeletedMessageDisplaySettings:this.showDeletedMessageDisplaySettings,hasSetSetting:this.hasSetSetting}},this.props.children)},t.prototype.componentDidUpdate=function(e){!this.hasData(this.props)||this.hasData(e)||(this.props.data&&this.props.data.currentUser&&this.props.data.currentUser.chatUISettings&&null!==this.props.data.currentUser.chatUISettings.deletedMessageDisplaySetting?l.m.set(g,this.props.data.currentUser.chatUISettings.deletedMessageDisplaySetting):l.m.get(g,null)&&this.value&&this.setValue(this.value))},t.prototype.hasData=function(e){return e.data&&!e.data.error&&!e.data.loading&&e.data.currentUser&&e.data.currentUser.chatUISettings},t.prototype.defaultValue=function(e){return this.props.sessionUser&&e&&this.props.sessionUser.id===e?u.qb.BRIEF:u.qb.DETAILED},Object.defineProperty(t.prototype,"value",{get:function(){if(l.b.get("deleted_message_display",!1))return void 0!==this.state.localOverride?this.state.localOverride:this.props.data&&this.props.data.currentUser&&this.props.data.currentUser.chatUISettings&&null!==this.props.data.currentUser.chatUISettings.deletedMessageDisplaySetting?this.props.data.currentUser.chatUISettings.deletedMessageDisplaySetting:l.m.get(g,null)||this.defaultValue(this.props.channelID)},enumerable:!0,configurable:!0}),t}(r.Component);var S=Object(s.d)(Object(o.b)((function(e){return{isLoggedIn:Object(m.f)(e),sessionUser:Object(m.e)(e)}})),Object(c.a)(f,{skip:function(e){return!e.isLoggedIn}}),Object(c.a)(h,{name:"setDeletedMessageDisplaySetting"}))(y);n.d(t,"a",(function(){return"deleted_message_display"})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return k})),n.d(t,"b",(function(){return S}))},"y4j+":function(e,t,n){"use strict";var i=n("mrSG"),a=n("NAv5"),r=n("q1tI"),o=n("/MKj"),s=n("fvjX"),l=n("/7QA"),c=n("4ilF"),d=n("kRBY"),u=n("Ws8v"),m=n("hnjF"),p=n("X2PJ"),h=n("+80q"),f=n("7d/q"),g=n("C7sF"),v="automod_caught_msg_notification_dismissed",b="automod_caught_msg_notification_expiration",k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.expiresAt=Object(a.parse)(l.b.get(b,"2019-09-01")),t.hasBeenDismissed=l.m.get(v,!1),t.state={shouldShow:!t.hasBeenDismissed&&t.expiresAt>new Date},t.dismissNotification=function(){l.m.set(v,!0),t.setState({shouldShow:!1})},t}return Object(i.__extends)(t,e),t.prototype.render=function(){if(!this.state.shouldShow)return null;var e=this.props,t=e.channelID,n=e.userID,i=e.userModStatus;return t&&t===n||i&&i.user&&i.user.isModerator?r.createElement(u.a,{alignContent:m.a.Start,background:p.a.Base,border:!1,borderRadius:p.b.Medium,display:m.d.Flex,elevation:2,flexDirection:m.e.Row,justifyContent:m.h.Between,margin:{top:1},padding:{left:1,y:.5}},r.createElement(u.a,null,r.createElement(h.a,{bold:!0,type:h.e.Span},Object(l.d)("New: ","AutoModCaughtMessageNotificationTooltip")),r.createElement(h.a,{type:h.e.Span},Object(l.d)("Check the âMessagesâ tab to see chat messages that were filtered by AutoMod","AutoModCaughtMessageNotificationTooltip"))),r.createElement(u.a,{margin:{right:.5}},r.createElement(f.a,{ariaLabel:"Hide notification regarding AutoMod held messages, which now appear in Mod Logs",icon:g.a.Hide,onClick:this.dismissNotification,overlay:!1,type:f.c.Secondary}))):null},t}(r.Component);var y=Object(s.d)(Object(o.b)((function(e){var t=Object(d.e)(e);return{userID:t&&t.id}})),Object(c.a)())(k);n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return y}))},"y8+g":function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"rewardsFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"channel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"communityPointsSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"automaticRewards"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"automaticRewardFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"customRewards"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"customRewardFragment"},directives:[]}]}}]}}]}}]}}],loc:{start:0,end:250}};i.loc.source={body:'#import "./automatic-reward-fragment.gql"\n#import "./custom-reward-fragment.gql"\nfragment rewardsFragment on User {\nchannel {\nid\ncommunityPointsSettings {\nautomaticRewards {\n...automaticRewardFragment\n}\ncustomRewards {\n...customRewardFragment\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)}))}i.definitions=i.definitions.concat(r(n("Ukwn").definitions)),i.definitions=i.definitions.concat(r(n("nJ3O").definitions)),e.exports=i},yJn7:function(e,t){},ySk3:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("mrSG"),a=n("/7QA"),r=n("2xye"),o=n("oi4T"),s=function(e){var t=Object(i.__assign)(Object(i.__assign)({},Object(o.b)(e)),{mentioned_user_display_name:e.mentionedUserDisplayName,user:e.userLogin});a.o.track(r.SpadeEventType.ChatMentionUsed,t)}},yXtP:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Chat_UpdateChatColor"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateChatColorInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateChatColor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatColor"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:120}};n.loc.source={body:"mutation Chat_UpdateChatColor($input: UpdateChatColorInput!){\nupdateChatColor(input: $input) {\nuser {\nid\nchatColor\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.Chat_UpdateChatColor=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"Chat_UpdateChatColor")},yZCp:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n("q1tI"),a=n("/7QA"),r=n("Uh2Q"),o=n("tiJ6"),s=n("8SX2"),l=n("sUnt"),c=n("hnjF"),d=n("Ws8v"),u=n("X2PJ"),m=n("7uM4"),p=n("+80q"),h=n("C7sF");var f=Object(o.b)((function(e){return{primaryColorHex:e.primaryColorHex}}))((function(e){if(!(e.event.messageID&&e.event.userLogin&&e.event.displayName))return null;var t=i.createElement(s.a,{contentID:e.event.messageID,login:e.event.userLogin,sourceType:e.event.sourceType},e.event.displayName),n=Object(a.d)("{count} emotes shared!",{count:e.event.totalRewardCount},"RewardGiftNoticeLine"),o=function(e,t,n){switch(e){case r.b.Subscription:return Object(a.d)("{selectedCount, plural, one {{gifterButton}'s Sub shared rewards to {selectedCount} other in chat.} other {{gifterButton}'s Sub shared rewards to {selectedCount} others in chat.}}",{gifterButton:t,selectedCount:n},"RewardGiftNoticeLineUpdate");case r.b.SubGift:return Object(a.d)("{gifterButton}'s Gift shared rewards to {selectedCount} others in chat.",{gifterButton:t,selectedCount:n},"RewardGiftNoticeLine");case r.b.Cheer:default:return Object(a.d)("{gifterButton}'s Cheer shared rewards to {selectedCount} others in chat.",{gifterButton:t,selectedCount:n},"RewardGiftNoticeLine")}}(e.event.triggerType,t,e.event.selectedCount),f=function(e){switch(e){case r.b.Subscription:return h.a.Star;case r.b.SubGift:return h.a.Gift;case r.b.Cheer:default:return h.a.Bits}}(e.event.triggerType);return i.createElement(l.a,{className:"reward-gift-user-notice",margin:{y:.5}},i.createElement(l.a,{display:c.d.Flex,alignItems:c.b.Start},i.createElement(d.a,{color:u.c.Alt2,margin:{right:.5}},i.createElement(m.a,{asset:f})),i.createElement(l.a,null,i.createElement(p.a,{bold:!0,color:u.c.Link},n),i.createElement(p.a,{color:u.c.Alt2},o))))}))},ya7N:function(e,t,n){},ygQa:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("mrSG"),a=n("yR8l"),r=n("yXtP");function o(){var e=this;return Object(a.b)(r,{props:function(t){return{updateChatColorMutation:function(n){return Object(i.__awaiter)(e,void 0,void 0,(function(){return Object(i.__generator)(this,(function(e){switch(e.label){case 0:return[4,t.mutate({variables:{input:{color:n}}})];case 1:return[2,e.sent().data]}}))}))}}}})}},yzwe:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("mrSG"),a=n("yR8l"),r=n("FAYk");function o(e){var t=this;return Object(a.b)(r,{props:function(n){return{unmodUserMutation:function(a){return Object(i.__awaiter)(t,void 0,void 0,(function(){var t;return Object(i.__generator)(this,(function(i){if(t=e(n.ownProps).channelID)return[2,n.mutate({variables:{input:{channelID:t,targetLogin:a}}}).then((function(e){return e.data}))];throw new Error("unmodUser mutation is not ready")}))}))}}}})}},yzyL:function(e,t){},zClW:function(e,t,n){"use strict";n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return y})),n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return C})),n.d(t,"j",(function(){return E})),n.d(t,"e",(function(){return D})),n.d(t,"g",(function(){return N})),n.d(t,"f",(function(){return _})),n.d(t,"h",(function(){return I})),n.d(t,"i",(function(){return M}));var i=n("mrSG"),a=n("/7QA"),r=n("2xye"),o=n("IZXT"),s=n("ZuiC"),l=n("ahza"),c=n("pU2t"),d=n("ZUUl"),u=n("fI4C"),m=n("fIj0"),p=n("xM4F"),h=n("8uuy");function f(){return{CommenterBannedError:Object(a.d)("You are banned from sending messages in this channel","routines-comments"),CommentingDisabledError:Object(a.d)("Sending messages in this channel is disabled","routines-comments"),UserNotVerifiedError:Object(a.d)("Account email verification required to send a message","routines-comments"),MaxChildCommentsError:Object(a.d)("The reply limit for this message has been reached","routines-comments"),MessageLikelySpamError:Object(a.d)("Your message was blocked by the spam filter","routines-comments"),MessageContainsBannedWordsError:Object(a.d)("Your message wasn't posted due to conflicts with the channel's moderation settings","routines-comments")}}var g=function(e){if(e.includes("FollowersOnlyError"))return function(e){return Object(a.d)("This room is in {duration} followers-only mode. Follow this channel to join the community",{duration:e},"routines-comments")}(function(e){var t=e.split(" "),n=t[t.length-1].match(/((\d+)h)?(\d+)m(\d+)s/);if(!Array.isArray(n))return"";return{600:"10 Minutes",1800:"30 Minutes",3600:"1 Hour",86400:"1 Day",604800:"1 Week",2592e3:"1 Month",7776e3:"3 Months"}[60*parseInt(n[2]||"0",10)*60+60*parseInt(n[3],10)+parseInt(n[4],10)]}(e));var t=f(),n=Object.keys(t).find((function(t){return e.includes(t)}));return n?t[n]:Object(a.d)("Unable to send a new message at this time","routines-comments")},v="",b=-1,k=!1,y=function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){return Object(i.__generator)(this,(function(n){if(k)return[2,Promise.resolve()];if(Object(l.f)(t)){if(t.offset===b)return[2,Promise.resolve()];b=t.offset}if(Object(l.d)(t)){if(t.cursor===v)return[2,Promise.resolve()];v=t.cursor}return k=!0,[2,Object(l.g)(t).then((function(n){k=!1,Object(l.f)(t)&&t.offset===b?e.dispatch(Object(s.A)(n)):e.dispatch(Object(s.z)(n))}),(function(t){k=!1,a.k.warn("VideoChat: unable to fetch messages",{error:t}),e.dispatch(Object(s.B)())}))]}))}))},S=function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n,r,u,m;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:i.trys.push([0,5,,6]),n=void 0,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,Object(l.b)(t)];case 2:return n=i.sent(),[3,4];case 3:return r=i.sent(),Object(o.d)()?a.k.warn(S.name):a.k.errorAndReport(r,S.name),e.dispatch(Object(s.r)(g(""))),[2];case 4:return n.requestError?(a.k.errorAndReport(n.requestError,S.name),e.dispatch(Object(s.r)(g(""))),[2]):n.error?(a.k.errorAndReport(new Error(n.error.error),S.name),e.dispatch(Object(s.r)(g(n.error.message))),[2]):void 0===n.body?(e.dispatch(Object(s.r)(g(""))),[2]):(u=Object(c.c)(n.body),e.dispatch(Object(s.s)(u)),e.dispatch(Object(d.b)(w,u)),setTimeout((function(){e.dispatch(Object(s.q)())}),5e3),[3,6]);case 5:return m=i.sent(),a.k.errorAndReport(m,S.name),e.dispatch(Object(s.r)(g(""))),[3,6];case 6:return[2]}}))}))},C=function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,Object(l.c)(t)];case 1:return i.sent(),e.dispatch(Object(s.t)({comment:t})),e.dispatch(Object(d.b)(O,{comment:t})),[3,3];case 2:return n=i.sent(),Object(o.d)()?a.k.warn(C.name):a.k.errorAndReport(n,C.name),[3,3];case 3:return[2]}}))}))},E=function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,Object(l.h)(t)];case 1:return n=i.sent(),e.dispatch(Object(s.v)(n)),[3,3];case 2:return r=i.sent(),a.k.errorAndReport(r,E.name),[3,3];case 3:return[2]}}))}))},w=function(e,t,n,s){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var e,l;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,n.query({query:m,variables:{videoCreatorID:t.comments[0].channelId,videoID:t.comments[0].contentId}})];case 1:return e=i.sent().data,s.track(r.SpadeEventType.ChommentCreated,Object(u.f)(t,e)),[3,3];case 2:return l=i.sent(),Object(o.d)()?a.k.warn(w.name):a.k.errorAndReport(l,w.name),[3,3];case 3:return[2]}}))}))},O=function(e,t,n,s){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var l,c;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,n.query({query:p,variables:{videoCreatorID:t.comment.channelId,commentCreator:t.comment.commenter,videoID:t.comment.contentId}})];case 1:return l=i.sent().data,s.track(r.SpadeEventType.ChommentDeleted,Object(u.g)(t,e.getState(),l)),[3,3];case 2:return c=i.sent(),Object(o.d)()?a.k.warn(O.name):a.k.errorAndReport(c,O.name),[3,3];case 3:return[2]}}))}))},D=function(e,t,n,s){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var l,c;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,n.query({query:h,variables:{videoID:t.comment.contentId}})];case 1:return l=i.sent().data,s.track(r.SpadeEventType.ChommentUIAction,Object(u.e)(t,e.getState(),l)),[3,3];case 2:return c=i.sent(),Object(o.d)()?a.k.warn(D.name):a.k.errorAndReport(c,D.name),[3,3];case 3:return[2]}}))}))},N=function(e,t,n,s){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var l,c;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,n.query({query:p,variables:{videoCreatorID:t.channelId,commentCreator:t.commenter,videoID:t.contentId}})];case 1:return l=i.sent().data,s.track(r.SpadeEventType.ChommentUIAction,Object(u.i)(t,e.getState(),l)),[3,3];case 2:return c=i.sent(),Object(o.d)()?a.k.warn(N.name):a.k.errorAndReport(c,N.name),[3,3];case 3:return[2]}}))}))},_=function(e,t,n,s){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var c,d,m,p;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),c=e.getState(),d=Object(l.e)(t)?c.vodChat.comments.comments.parentComments[t.parentId].contentId:t.contentId,[4,n.query({query:h,variables:{videoID:d}})];case 1:return m=i.sent().data,s.track(r.SpadeEventType.ChommentUIAction,Object(u.h)(t,e.getState(),m)),[3,3];case 2:return p=i.sent(),Object(o.d)()?a.k.warn(_.name):a.k.errorAndReport(p,_.name),[3,3];case 3:return[2]}}))}))},I=function(e,t,n,s){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var l,c;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,n.query({query:h,variables:{videoID:t.comment.contentId}})];case 1:return l=i.sent().data,s.track(r.SpadeEventType.ChommentUIAction,Object(u.j)(t,e.getState(),l)),[3,3];case 2:return c=i.sent(),Object(o.d)()?a.k.warn(I.name):a.k.errorAndReport(c,I.name),[3,3];case 3:return[2]}}))}))},M=function(e,t,n,o){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){var s,l;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,n.query({query:m,variables:{videoCreatorID:t.channelId,videoID:t.contentId}})];case 1:return s=i.sent().data,o.track(r.SpadeEventType.ChommentUIAction,Object(u.k)(t,e.getState(),s)),[3,3];case 2:return l=i.sent(),a.k.errorAndReport(l,M.name),[3,3];case 3:return[2]}}))}))}},zJj8:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"WatchPartyTray"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isModerator"},arguments:[{kind:"Argument",name:{kind:"Name",value:"channelID"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}}],directives:[]}]}}]}}],loc:{start:0,end:99}};n.loc.source={body:"query WatchPartyTray($channelID: String!) {\ncurrentUser {\nid\nisModerator(channelID: $channelID)\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.WatchPartyTray=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"WatchPartyTray")},zQgx:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return m})),n.d(t,"f",(function(){return p})),n.d(t,"i",(function(){return h})),n.d(t,"g",(function(){return f})),n.d(t,"e",(function(){return g})),n.d(t,"j",(function(){return v})),n.d(t,"h",(function(){return b}));var i=n("cr+I"),a=n("/7QA"),r=n("oB8h"),o=n("UWbL"),s=n("+GjP"),l=(n("vRsq"),n("DMoW")),c=(n("Q94S"),-1);function d(e){return!!e&&!(!e.hosting||!e.hosting.id)}function u(e){switch(m(e)){case r.a.WatchParty:case r.a.Premiere:case r.a.Rerun:return!0;default:return!1}}function m(e){if(e&&e.stream&&e.stream.id&&e.stream.type)return e.stream.type}function p(e){var t=Object(s.a)(e.location.search,"t");return t?Object(o.a)(t):c}function h(e,t){e&&e.owner?a.p.setPageTitle(e.owner.displayName+" - "+e.title):t&&t.broadcaster&&a.p.setPageTitle(t.broadcaster.displayName+" - "+t.title)}function f(e){return e&&e.stream?e.stream.viewersCount:null}function g(e,t){return t&&(!function(e){return e&&""!==e.id&&e.creationState&&e.creationState===l.O.CREATED}(t)||function(e,t){return!!e&&(t&&t.broadcaster&&t.broadcaster.login&&t.broadcaster.login.toLowerCase()!==e.toLowerCase())}(e,t))}function v(e,t){return!!e&&(!!t&&!!t.owner&&!!t.owner.login&&t.owner.login.toLowerCase()!==e.toLowerCase())}function b(e){var t={},n=i.parse(e.location.search),a=p(e);return a!==c&&(t.highlightTimestamp=a),n.comment&&(t.highlightedMessageID=n.comment),t}},zWFo:function(e,t,n){},zdrs:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UnlockChosenSubscriberEmote"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnlockChosenSubscriberEmoteInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unlockChosenSubscriberEmote"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"balance"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:154}};n.loc.source={body:"mutation UnlockChosenSubscriberEmote($input: UnlockChosenSubscriberEmoteInput!) {\nunlockChosenSubscriberEmote (input: $input) {\nbalance\nerror {\ncode\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.UnlockChosenSubscriberEmote=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"UnlockChosenSubscriberEmote")},zixI:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UnblockUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnblockUserInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unblockUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"targetUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:100}};n.loc.source={body:"mutation UnblockUser($input: UnblockUserInput!) {\nunblockUser(input: $input) {\ntargetUser {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.UnblockUser=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"UnblockUser")},znm4:function(e,t,n){"use strict";var i=n("mrSG"),a=n("/MKj"),r=n("yR8l"),o=n("DMoW"),s=n("kRBY"),l=n("4rCz"),c=n("0Lz3"),d=n("WytW"),u=n("ZuiC"),m=n("sf7/"),p=n("kVrx"),h=n("zClW"),f=n("l41m"),g=function(e,t,n){return e&&t&&!n},v=n("Sfdh"),b=n("ZUUl"),k=n("pwkZ"),y=n("HjbF"),S=n("pq/L");n.d(t,"a",(function(){return w}));var C=2;var E=Object(a.b)((function(e,t){var n={comments:[],currentVideoTime:e.vodChat.comments.currentVideoTime,cursor:e.vodChat.comments.cursor,errorMessage:e.vodChat.comments.errorMessage,hasFetchedComments:e.vodChat.comments.hasLoadedData,hasRequestedCurrentUserBlockList:e.vodChat.comments.hasLoadedCurrentUserBlockedList,isCreationCoolDownActive:e.vodChat.comments.isPostCooldownActive,isCurrentUserModerator:!1,isLoggedIn:Object(s.f)(e),isReplayFilterOn:e.vodChat.comments.isReplayFilterOn,isScrollingSynced:e.vodChat.comments.isScrollingSynced,offsetRange:Object(f.b)(e.vodChat.comments.comments),replyCursorMap:e.vodChat.comments.replyCursorMap,shouldSendReplayFilterError:!1,hideTimestamps:e.vodChat.comments.hideTimestamps,isPlaybackBlocked:e.vodChat.comments.isPlaybackBlocked};if(!t.data.loading&&!t.data.error&&t.data.video){var i=t.data,a=i.currentUser,r=i.video;null!==a&&a.roles&&(n.isCurrentUserModerator=Object(y.b)(a,r.owner)),n.comments=Object(f.c)(e,t.data.video.broadcastType,n.isCurrentUserModerator,t.blockedUsers),n.shouldSendReplayFilterError=g(e.vodChat.comments.isReplayFilterOn,t.data.video.broadcastType!==o.B.UPLOAD,e.vodChat.comments.hasDismissedChatReplayError)}return n}),(function(e,t){return{onUpdateBegan:function(n,i){if(n.videoID)if(i.videoID===n.videoID){if(!n.hasFetchedComments){var a={bitsConfig:t.bitsConfig,offset:n.currentVideoTime,videoID:n.videoID};if(n.highlightTimestamp&&n.currentVideoTime!==n.highlightTimestamp)return;return n.highlightedMessageID&&(a.highlightedMessageID=n.highlightedMessageID),void e(Object(b.a)(h.d,a))}if(n.offsetRange!==f.a){if(Object(y.f)({cursor:n.cursor,currentVideoTime:n.currentVideoTime,offsetEndTime:n.offsetRange.endSec,offsetThreshold:C}))return void e(Object(b.a)(h.d,{bitsConfig:t.bitsConfig,cursor:n.cursor.future,videoID:n.videoID}));if(Object(y.e)(n))return void e(Object(b.a)(h.d,{bitsConfig:t.bitsConfig,offset:n.currentVideoTime,videoID:n.videoID}))}}else e(Object(m.d)(n.videoID))},onCreate:function(t){if(Object(d.n)(t.message)){var n=Object(l.d)("Sorry, commands are not supported in Chat on Videos yet.","VideoChatPresentation");e(Object(u.u)(n))}else e(Object(b.a)(h.a,t)),e(Object(b.b)(h.f,t))},onError:function(t){e(Object(u.u)(t))},onErrorDismissClick:function(){e(Object(u.w)())},onUnmount:function(){e(Object(u.y)())},onLoadMoreReplies:function(t,n,i,a){e(Object(b.a)(h.d,Object(y.a)(t,n,i,a)))},onDisableSync:function(){e(Object(u.D)())},onEnableSync:function(){e(Object(u.E)())},onBanUser:function(t){e(Object(b.a)(p.a,t)),e(Object(b.b)(h.e,t))},onDeleteComment:function(t){e(Object(b.a)(h.b,t)),e(Object(b.b)(h.g,t))},onPlayerSeekRequest:function(n,i){t.onPlayerSeekRequest(n),void 0!==i&&e(Object(b.b)(h.i,i))},onTurnOffReplayFilter:function(){e(Object(u.C)(!1))},onWillMount:function(){e(Object(u.x)())},onDidMount:function(t){e(Object(u.C)(t))}}}),(function(e,t,n){var a=t.onDisableSync;e.isScrollingSynced||(a=function(){});var r=t.onCreate;return e.shouldSendReplayFilterError&&(r=function(e){t.onError(Object(v.a)().chatReplayFilterError),t.onCreate(e)}),Object(i.__assign)(Object(i.__assign)(Object(i.__assign)(Object(i.__assign)({},e),t),n),{onDisableSync:a,onCreate:r,data:n.data})}))(k.a),w=Object(r.a)(S,{options:function(e){return{variables:{videoID:e.videoID,hasVideoID:!!e.videoID}}},props:function(e){var t=e.ownProps,n=e.data,a=n&&n.video&&n.video.owner&&n.video.owner.cheer&&n.video.owner.cheer.emotes||[],r=Object(c.a)(a),o={};return n&&!n.loading&&!n.error&&n.currentUser&&n.currentUser.blockedUsers&&(o=n.currentUser.blockedUsers.reduce((function(e,t){return t&&t.id&&(e[t.id]=!0),e}),{})),Object(i.__assign)(Object(i.__assign)({},t),{data:n,bitsConfig:r,blockedUsers:o})}})(E)},zwF8:function(e,t,n){"use strict";var i,a,r;n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return r})),function(e){e.ShareBitsBadgeTier="share-bits-badge-tier",e.ThankSubGifter="thank-sub-gifter",e.ShareResub="share-resub",e.CommunityPointsSpend="community-points-spend",e.NoOverride="no-override",e.PrimeGiftBombGifter="prime-gift-bomb-gifter"}(i||(i={})),function(e){e.Chat="chat-message-handler",e.Command="command-message-handler",e.Bits="bits-message-handler",e.Custom="custom-message-handler",e.ShareResub="share-resub-message-handler"}(a||(a={})),function(e){e.CharacterLimitError="character-limit-error",e.DuplicatedMessageError="duplicated-message-error",e.MessageThroughputError="message-throughput-error",e.EmoteOnlyBanner="emote-only-banner",e.EmoteOnlyInfo="emote-only-info",e.EmoteOnlyWarning="emote-only-warning",e.AutocompleteTray="autocomplete-tray",e.CommandWarning="command-warning",e.CommandInfo="command-info",e.WatchPartyInfo="watch-party-info",e.WatchPartyBanner="watch-party-banner",e.WatchPartyError="watch-party-error"}(r||(r={}))}}]);